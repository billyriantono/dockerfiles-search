MetaArgs: null
Stages:
- BaseName: ubuntu:16.04
  Commands:
  - Maintainer: SFoxDev <admin@sfoxdev.com>
    Name: maintainer
  - Env:
    - Key: DEBIAN_FRONTEND
      Value: noninteractive
    - Key: DOMAIN
      Value: sfoxdev.com
    - Key: YOURSECRET1
      Value: jitsi
    - Key: YOURSECRET2
      Value: jitsi
    - Key: YOURSECRET3
      Value: jitsi
    - Key: LC_ALL
      Value: C.UTF-8
    - Key: LANG
      Value: en_US.UTF-8
    - Key: LANGUAGE
      Value: en_US.UTF-8
    Name: env
  - Key: REPOSITORY
    Name: arg
    Value: '"https://download.jitsi.org/unstable"'
  - Key: VIDEOBRIDGE
    Name: arg
    Value: '"989-1"'
  - Key: JICOFO
    Name: arg
    Value: '"1.0-365-1"'
  - Key: JITSI
    Name: arg
    Value: '"1.0.2230-1"'
  - Key: JITSI_MEET
    Name: arg
    Value: '"1.0.2384-1"'
  - CmdLine:
    - apt-get update -y && apt-get install -y software-properties-common   && add-apt-repository
      ppa:openjdk-r/ppa   && apt-get update   && apt-get install -y wget openjdk-8-jre
      nginx prosody luarocks default-jre-headless curl mc   && cd /tmp   && wget -q
      ${REPOSITORY}/jitsi-videobridge_${VIDEOBRIDGE}_amd64.deb   && dpkg -i jitsi-videobridge_${VIDEOBRIDGE}_amd64.deb   &&
      wget -q ${REPOSITORY}/jicofo_${JICOFO}_amd64.deb   && dpkg -i jicofo_${JICOFO}_amd64.deb   &&
      wget -q ${REPOSITORY}/jitsi-meet-prosody_${JITSI}_all.deb   && dpkg -i jitsi-meet-prosody_${JITSI}_all.deb   &&
      wget -q ${REPOSITORY}/jitsi-meet-web_${JITSI}_all.deb   && dpkg -i jitsi-meet-web_${JITSI}_all.deb   &&
      wget -q ${REPOSITORY}/jitsi-meet-web-config_${JITSI}_all.deb   && dpkg -i jitsi-meet-web-config_${JITSI}_all.deb   &&
      wget -q ${REPOSITORY}/jitsi-meet_${JITSI_MEET}_all.deb   && dpkg -i jitsi-meet_${JITSI_MEET}_all.deb   &&
      apt-get clean   && rm -rf /var/lib/apt/lists/* /tmp/* /var/tmp/*   && mkdir
      /root/samples   && mkdir /var/run/prosody   && chown prosody /var/run/prosody   &&
      touch /root/.first-boot   && mkdir /keys   && mkdir /recordings
    Name: run
    PrependShell: true
  - Name: expose
    Ports:
    - 10000-20000/udp
    - "443"
    - "5000"
    - "5222"
    - "5223"
    - "5247"
    - "5269"
    - "5280"
    - "5281"
    - "5298"
    - "80"
  - Chown: ""
    From: ""
    Name: copy
    SourcesAndDest:
    - config
    - /root/samples
  - Chown: ""
    From: ""
    Name: copy
    SourcesAndDest:
    - run.sh
    - run.sh
  - Name: volume
    Volumes:
    - /keys
    - /recordings
  - CmdLine:
    - ./run.sh
    Name: entrypoint
    PrependShell: false
  From:
    Image: ubuntu:16.04
  Name: ""
  Platform: ""
  SourceCode: FROM ubuntu:16.04
