{
  "MetaArgs": null,
  "Stages": [
    {
      "Name": "",
      "BaseName": "lsiobase/alpine",
      "SourceCode": "FROM lsiobase/alpine",
      "Platform": "",
      "From": {
        "Image": "lsiobase/alpine"
      },
      "Commands": [
        {
          "Maintainer": "xeroxmalf",
          "Name": "maintainer"
        },
        {
          "Key": "BUILD_DATE",
          "Name": "arg",
          "Value": null
        },
        {
          "Key": "VERSION",
          "Name": "arg",
          "Value": null
        },
        {
          "Key": "BUILD_CORES",
          "Name": "arg",
          "Value": null
        },
        {
          "Labels": [
            {
              "Key": "build_version",
              "Value": "\"Linuxserver.io version:- ${VERSION} Build-date:- ${BUILD_DATE}\""
            }
          ],
          "Name": "label"
        },
        {
          "Key": "MEDIAINF_VER",
          "Name": "arg",
          "Value": "\"0.7.92.1\""
        },
        {
          "Key": "RTORRENT_VER",
          "Name": "arg",
          "Value": "\"0.9.6\""
        },
        {
          "Key": "LIBTORRENT_VER",
          "Name": "arg",
          "Value": "\"0.13.6\""
        },
        {
          "Key": "CURL_VER",
          "Name": "arg",
          "Value": "\"7.50.0\""
        },
        {
          "Env": [
            {
              "Key": "PKG_CONFIG_PATH",
              "Value": "/usr/local/lib/pkgconfig"
            }
          ],
          "Name": "env"
        },
        {
          "Env": [
            {
              "Key": "LD_LIBRARY_PATH",
              "Value": "/usr/local/lib"
            }
          ],
          "Name": "env"
        },
        {
          "CmdLine": [
            "NB_CORES=${BUILD_CORES-`getconf _NPROCESSORS_CONF`} \u0026\u0026  apk add --no-cache         ca-certificates         fcgi         ffmpeg         geoip         gzip         logrotate         nginx \tdtach         tar         unrar         unzip         wget \tirssi \tirssi-perl \tzlib \tzlib-dev \tlibxml2-dev \tperl-archive-zip \tperl-net-ssleay \tperl-digest-sha1 \tgit \topenssl \tbinutils         zip \u0026\u0026  apk add --no-cache         --repository http://nl.alpinelinux.org/alpine/edge/community         php7         php7-cgi         php7-fpm         php7-json          php7-mbstring \tphp7-sockets         php7-pear \u0026\u0026  apk add --no-cache --virtual=build-dependencies         autoconf         automake         cppunit-dev \tperl-dev         file         g++         gcc         libtool         make         ncurses-dev \tbuild-base \tlibtool \tsubversion \tcppunit-dev \tlinux-headers \tcurl-dev         openssl-dev \u0026\u0026 cd /tmp \u0026\u0026 mkdir curl \u0026\u0026 cd curl \u0026\u0026 wget -qO- https://curl.haxx.se/download/curl-${CURL_VER}.tar.gz | tar xz --strip 1 \u0026\u0026 ./configure --with-ssl \u0026\u0026 make -j ${NB_CORES} \u0026\u0026 make install \u0026\u0026 ldconfig /usr/bin \u0026\u0026 ldconfig /usr/lib \u0026\u0026  mkdir -p         /usr/share/webapps/rutorrent         /defaults/rutorrent-conf \u0026\u0026  git clone https://github.com/Novik/ruTorrent.git         /usr/share/webapps/rutorrent/ \u0026\u0026  mv /usr/share/webapps/rutorrent/conf/*         /defaults/rutorrent-conf/ \u0026\u0026  rm -rf         /defaults/rutorrent-conf/users \u0026\u0026  perl -MCPAN -e 'my $c = \"CPAN::HandleConfig\"; $c-\u003eload(doit =\u003e 1, autoconfig =\u003e 1); $c-\u003eedit(prerequisites_policy =\u003e \"follow\"); $c-\u003eedit(build_requires_install_policy =\u003e \"yes\"); $c-\u003ecommit' \u0026\u0026  curl -L http://cpanmin.us | perl - App::cpanminus \u0026\u0026 \tcpanm HTML::Entities XML::LibXML JSON JSON::XS \u0026\u0026 cd /tmp \u0026\u0026 mkdir xmlrpc-c \u0026\u0026 cd /tmp/xmlrpc-c \u0026\u0026 wget -qO- https://sourceforge.net/projects/xmlrpc-c/files/latest/download?source=files | tar xz --strip 1 \u0026\u0026 ./configure --with-libwww-ssl --disable-wininet-client --disable-curl-client --disable-libwww-client --disable-abyss-server --disable-cgi-server \u0026\u0026 make -j ${NB_CORES} \u0026\u0026 make install \u0026\u0026 cd /tmp \u0026\u0026 mkdir libtorrent \u0026\u0026 cd libtorrent \u0026\u0026 wget -qO- https://github.com/rakshasa/libtorrent/archive/${LIBTORRENT_VER}.tar.gz | tar xz --strip 1 \u0026\u0026 ./autogen.sh \u0026\u0026 ./configure \u0026\u0026 make -j ${NB_CORES} \u0026\u0026 make install \u0026\u0026 cd /tmp \u0026\u0026 mkdir rtorrent \u0026\u0026 cd rtorrent \u0026\u0026 wget -qO- https://github.com/rakshasa/rtorrent/archive/${RTORRENT_VER}.tar.gz | tar xz --strip 1 \u0026\u0026 ./autogen.sh \u0026\u0026 ./configure --with-xmlrpc-c \u0026\u0026 make -j ${NB_CORES} \u0026\u0026 make install \u0026\u0026  curl -o  /tmp/libmediainfo.tar.gz -L         \"http://mediaarea.net/download/binary/libmediainfo0/${MEDIAINF_VER}/MediaInfo_DLL_${MEDIAINF_VER}_GNU_FromSource.tar.gz\" \u0026\u0026  curl -o  /tmp/mediainfo.tar.gz -L         \"http://mediaarea.net/download/binary/mediainfo/${MEDIAINF_VER}/MediaInfo_CLI_${MEDIAINF_VER}_GNU_FromSource.tar.gz\" \u0026\u0026  mkdir -p         /tmp/libmediainfo         /tmp/mediainfo \u0026\u0026  tar xf /tmp/libmediainfo.tar.gz -C         /tmp/libmediainfo --strip-components=1 \u0026\u0026  tar xf /tmp/mediainfo.tar.gz -C         /tmp/mediainfo --strip-components=1 \u0026\u0026  cd /tmp/libmediainfo \u0026\u0026         ./SO_Compile.sh \u0026\u0026  cd /tmp/libmediainfo/ZenLib/Project/GNU/Library \u0026\u0026         make install \u0026\u0026  cd /tmp/libmediainfo/MediaInfoLib/Project/GNU/Library \u0026\u0026         make install \u0026\u0026  cd /tmp/mediainfo \u0026\u0026         ./CLI_Compile.sh \u0026\u0026  cd /tmp/mediainfo/MediaInfo/Project/GNU/CLI \u0026\u0026         make install \u0026\u0026  apk del --purge         build-dependencies \u0026\u0026  rm -rf \t/etc/nginx/conf.d/default.conf \t/tmp/* \u0026\u0026  sed -i \"s#/var/log/messages {}.*# #g\" /etc/logrotate.conf"
          ],
          "Name": "run",
          "PrependShell": true
        },
        {
          "Chown": "",
          "From": "",
          "Name": "copy",
          "SourcesAndDest": [
            "root/",
            "/"
          ]
        },
        {
          "Name": "expose",
          "Ports": [
            "80"
          ]
        },
        {
          "Name": "volume",
          "Volumes": [
            "/config",
            "/downloads"
          ]
        }
      ]
    }
  ]
}