MetaArgs: null
Stages:
- BaseName: ubuntu:18.04
  Commands:
  - CmdLine:
    - apt update &&     apt install -y curl gnupg &&     curl -sL https://deb.nodesource.com/setup_10.x
      | bash - &&     apt install -y nodejs &&     npm i -g @angular/cli@6.2.3 &&     curl
      https://download.java.net/java/GA/jdk10/10.0.2/19aef61b38124481863b1413dce1855f/13/openjdk-10.0.2_linux-x64_bin.tar.gz         --output
      openjdk-10.0.2_linux-x64_bin.tar.gz &&     tar xzvf openjdk-10.0.2_linux-x64_bin.tar.gz
      &&     update-alternatives --install /usr/bin/java java /jdk-10.0.2/bin/java
      1 &&     update-alternatives --install /usr/bin/javac javac /jdk-10.0.2/bin/javac
      1
    Name: run
    PrependShell: true
  - Name: workdir
    Path: /app
  - Chown: ""
    From: ""
    Name: copy
    SourcesAndDest:
    - client/package.json
    - client/package-lock.json
    - client/
  - CmdLine:
    - cd client && npm i
    Name: run
    PrependShell: true
  - Chown: ""
    From: ""
    Name: copy
    SourcesAndDest:
    - server/build.gradle
    - server/gradle.properties
    - server/gradlew
    - server/
  - Chown: ""
    From: ""
    Name: copy
    SourcesAndDest:
    - server/gradle/
    - server/gradle/
  - CmdLine:
    - cd server && ./gradlew build -x generateMainJooqSchemaSource --info
    Name: run
    PrependShell: true
  - Chown: ""
    From: ""
    Name: copy
    SourcesAndDest:
    - client/
    - client/
  - CmdLine:
    - cd client &&     ng build --prod &&     mkdir -p ../server/src/main/resources/client
      &&     cp -r dist/client/* ../server/src/main/resources/client/
    Name: run
    PrependShell: true
  - Chown: ""
    From: ""
    Name: copy
    SourcesAndDest:
    - server/
    - server/
  - CmdLine:
    - cd server && ./gradlew build -x generateMainJooqSchemaSource --info
    Name: run
    PrependShell: true
  - Name: expose
    Ports:
    - "8080"
  - CmdLine:
    - cd server && java -jar -Dbemused_env=${BEMUSED_ENV} ./build/libs/server-0.0.1-fat.jar
    Name: cmd
    PrependShell: true
  From:
    Image: ubuntu:18.04
  Name: ""
  Platform: ""
  SourceCode: FROM ubuntu:18.04
