MetaArgs: null
Stages:
- BaseName: mediadepot/base
  Commands:
  - CmdLine:
    - "mkdir -p /srv/madsonic/app && \tmkdir -p /srv/madsonic/data && \tmkdir -p /srv/madsonic/config
      && \tmkdir -p /srv/madsonic/transcode_lib"
    Name: run
    PrependShell: true
  - Name: workdir
    Path: /srv/madsonic/app
  - CmdLine:
    - "apk --update upgrade && \tapk add openjdk8 unzip && \trm /var/cache/apk/*"
    Name: run
    PrependShell: true
  - CmdLine:
    - "mkdir -p \"/srv/madsonic/data/transcode\" \t&& wget -O \"/tmp/madsonic.zip\"
      http://madsonic.org/download/6.1/20160915_madsonic-6.1.8700-standalone.zip \t&&
      wget -O \"/tmp/transcode.zip\" http://madsonic.org/download/transcode/20160915_madsonic-transcode-linux-x64.zip
      \ \t&& unzip \"/tmp/madsonic.zip\" -d /srv/madsonic/app  \t&& unzip \"/tmp/transcode.zip\"
      -d /srv/madsonic/transcode_lib  \t&& rm \"/tmp/madsonic.zip\"  \t&& rm \"/tmp/transcode.zip\"
      \t&& git clone https://github.com/ronilaukkarinen/rolleshark.git /tmp/rolleshark
      \ \t&& mkdir -p /tmp/rolleshark-theme/style  \t&& mkdir -p /tmp/rolleshark-theme/icons
      \ \t&& mkdir -p /tmp/rolleshark-theme/WEB-INF/classes  \t&& cp /tmp/rolleshark/rolleshark-madsonic.css
      /tmp/rolleshark-theme/style  \t&& cp -R /tmp/rolleshark/icons/rolleshark /tmp/rolleshark-theme/icons/
      \ \t&& cp -R /tmp/rolleshark/webfonts /tmp/rolleshark-theme/  \t&& cp -R /tmp/rolleshark/WEB-INF/classes/org
      /tmp/rolleshark-theme/WEB-INF/classes/  \t&& rm -rf /tmp/rolleshark  \t&& cd
      /tmp/rolleshark-theme  \t&& /usr/lib/jvm/default-jvm/bin/jar uf /srv/madsonic/app/madsonic.war
      *"
    Name: run
    PrependShell: true
  - Chown: ""
    From: ""
    Name: copy
    SourcesAndDest:
    - rootfs
    - /
  - Name: volume
    Volumes:
    - /srv/madsonic/config
    - /srv/madsonic/data
  - Name: expose
    Ports:
    - "8080"
  - CmdLine:
    - /init
    Name: entrypoint
    PrependShell: false
  From:
    Image: mediadepot/base
  Name: ""
  Platform: ""
  SourceCode: FROM mediadepot/base
