MetaArgs: null
Stages:
- BaseName: lachlanevenson/k8s-kubectl
  Commands:
  - Env:
    - Key: HELM_LATEST_VERSION
      Value: '"v2.9.1"'
    Name: env
  - CmdLine:
    - sed -i -e 's/v[[:digit:]]\.[[:digit:]]/edge/g' /etc/apk/repositories
    Name: run
    PrependShell: true
  - CmdLine:
    - apk update && apk add gettext python
    Name: run
    PrependShell: true
  - CmdLine:
    - apk add --update ca-certificates wget jq curl unzip nodejs npm terraform git
      yarn   && apk add --update -t deps   && wget https://storage.googleapis.com/kubernetes-helm/helm-${HELM_LATEST_VERSION}-linux-amd64.tar.gz   &&
      tar -xvf helm-${HELM_LATEST_VERSION}-linux-amd64.tar.gz   && mv linux-amd64/helm
      /usr/local/bin   && apk del --purge deps   && rm /var/cache/apk/*   && rm -f
      /helm-${HELM_LATEST_VERSION}-linux-amd64.tar.gz
    Name: run
    PrependShell: true
  - CmdLine:
    - wget https://github.com/mozilla/sops/releases/download/3.1.1/sops-3.1.1.linux
      && mv sops-3.1.1.linux /usr/bin/sops
    Name: run
    PrependShell: true
  - CmdLine:
    - wget https://dl.google.com/dl/cloudsdk/release/google-cloud-sdk.tar.gz
    Name: run
    PrependShell: true
  - CmdLine:
    - tar zxvf google-cloud-sdk.tar.gz
    Name: run
    PrependShell: true
  - CmdLine:
    - google-cloud-sdk/bin/gcloud --quiet components update
    Name: run
    PrependShell: true
  - CmdLine:
    - mkdir -p /opt/google-cloud-sdk/bin && cp -r google-cloud-sdk /opt
    Name: run
    PrependShell: true
  - Env:
    - Key: PATH
      Value: '"/opt/google-cloud-sdk/bin:/usr/bin:${PATH}"'
    Name: env
  - CmdLine:
    - npm install -g cloudflare-cli
    Name: run
    PrependShell: true
  - CmdLine:
    - /bin/sh
    - -c
    Name: entrypoint
    PrependShell: false
  From:
    Image: lachlanevenson/k8s-kubectl
  Name: ""
  Platform: ""
  SourceCode: FROM lachlanevenson/k8s-kubectl
