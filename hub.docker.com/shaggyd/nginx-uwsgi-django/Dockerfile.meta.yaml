MetaArgs: null
Stages:
- BaseName: ubuntu:14.04
  Commands:
  - CmdLine:
    - apt-get update && apt-get install python python-setuptools python-dev gcc supervisor
      nginx -y
    Name: run
    PrependShell: true
  - CmdLine:
    - easy_install pip && pip install uwsgi
    Name: run
    PrependShell: true
  - CmdLine:
    - mkdir -p /etc/container/ &&  mkdir -p /opt/application/
    Name: run
    PrependShell: true
  - Chown: ""
    Name: add
    SourcesAndDest:
    - .
    - /etc/container/
  - CmdLine:
    - echo "daemon off;" >> /etc/nginx/nginx.conf && rm /etc/nginx/sites-enabled/default
    Name: run
    PrependShell: true
  - CmdLine:
    - ln -sf /etc/container/django.conf /etc/nginx/sites-enabled/ && ln -sf /etc/container/supervisor.conf
      /etc/supervisor/conf.d/
    Name: run
    PrependShell: true
  - Env:
    - Key: APPLICATION
      Value: '''application'''
    Name: env
  - Name: expose
    Ports:
    - "80"
  - Name: expose
    Ports:
    - "443"
  - Chown: ""
    Name: add
    SourcesAndDest:
    - ./startup.sh
    - /bin/
  - CmdLine:
    - /bin/startup.sh
    Name: cmd
    PrependShell: false
  From:
    Image: ubuntu:14.04
  Name: ""
  Platform: ""
  SourceCode: FROM ubuntu:14.04
