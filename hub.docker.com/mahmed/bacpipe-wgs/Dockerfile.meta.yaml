MetaArgs: null
Stages:
- BaseName: ubuntu:16.04
  Commands:
  - Maintainer: Basil Britto <basilbritto.xavier@uantwerpen.be> and Mohamed Mysara
      <mohamed.mysara@sckcen.be>
    Name: maintainer
  - CmdLine:
    - apt update && apt-get -y install python3-pip curl
    Name: run
    PrependShell: true
  - CmdLine:
    - pip3 install --upgrade cutadapt
    Name: run
    PrependShell: true
  - CmdLine:
    - "apt-get update && apt-get -y install \tbash \tpython \tpython3 \twget"
    Name: run
    PrependShell: true
  - Name: workdir
    Path: /NGStools
  - CmdLine:
    - apt-get upgrade -y perl && apt-get install -y parallel make wget git python-pip
      locales && pip install -U setuptools && locale-gen --purge en_US.UTF-8 && DEBIAN_FRONTEND="noninteractive"
      dpkg-reconfigure locales && update-locale LANG=en_US.UTF-8 LANGUAGE=en_US.UTF-8
      LC_ALL=en_US.UTF-8
    Name: run
    PrependShell: true
  - CmdLine:
    - wget https://github.com/tseemann/barrnap/archive/0.8.tar.gz && tar xf 0.8.tar.gz
      && rm 0.8.tar.gz
    Name: run
    PrependShell: true
  - CmdLine:
    - wget http://eddylab.org/infernal/infernal-1.1.2-linux-intel-gcc.tar.gz && tar
      xf infernal-1.1.2-linux-intel-gcc.tar.gz && rm infernal-1.1.2-linux-intel-gcc.tar.gz
      && cd infernal-1.1.2-linux-intel-gcc && ./configure && make && make install
      && cd easel && make install && cd /NGStools && rm -rf infernal-1.1.2-linux-intel-gcc/
    Name: run
    PrependShell: true
  - CmdLine:
    - apt-get install -y libpango1.0-dev && wget http://genometools.org/pub/genometools-1.5.9.tar.gz
      && tar xf genometools-1.5.9.tar.gz && rm genometools-1.5.9.tar.gz && cd genometools-1.5.9
      && make && make install && cd gtpython && python setup.py install && cd /NGStools
      && rm -rf genometools-1.5.9/
    Name: run
    PrependShell: true
  - CmdLine:
    - mkdir gff3toembl && cd gff3toembl && git clone https://github.com/sanger-pathogens/gff3toembl.git
      && python gff3toembl/setup.py install && cd /NGStools
    Name: run
    PrependShell: true
  - CmdLine:
    - wget https://github.com/weizhongli/cdhit/releases/download/V4.6.8/cd-hit-v4.6.8-2017-0621-source.tar.gz
      && tar xf cd-hit-v4.6.8-2017-0621-source.tar.gz && rm cd-hit-v4.6.8-2017-0621-source.tar.gz
      && cd cd-hit-v4.6.8-2017-0621 && make && cd cd-hit-auxtools && make && cd /NGStools
    Name: run
    PrependShell: true
  - CmdLine:
    - wget http://ftp.ebi.ac.uk/pub/software/vertebrategenomics/exonerate/exonerate-2.2.0-x86_64.tar.gz
      && tar xf exonerate-2.2.0-x86_64.tar.gz --no-same-owner && chmod 755 exonerate-2.2.0-x86_64/
      && rm exonerate-2.2.0-x86_64.tar.gz
    Name: run
    PrependShell: true
  - CmdLine:
    - apt-get install -y libdatetime-perl libxml-simple-perl libdigest-md5-perl default-jre
      bioperl && git clone https://github.com/tseemann/prokka.git && prokka/bin/prokka
      --setupdb
    Name: run
    PrependShell: true
  - CmdLine:
    - wget ftp://ftp.ncbi.nih.gov/toolbox/ncbi_tools/converters/by_program/tbl2asn/linux.tbl2asn.gz
      &&     gunzip linux.tbl2asn.gz &&     mv linux.tbl2asn tbl2asn &&     chmod
      +x tbl2asn &&     mv tbl2asn /NGStools/prokka/binaries/linux/
    Name: run
    PrependShell: true
  - Env:
    - Key: PATH
      Value: '"/NGStools/gff3toembl/gff3toembl/scripts:/NGStools/ncbi-blast-2.7.1+/bin:/NGStools/cd-hit-v4.6.8-2017-0621:/NGStools/cd-hit-v4.6.8-2017-0621/cd-hit-auxtools:/NGStools/exonerate-2.2.0-x86_64/bin:/NGStools/prokka/bin:${PATH}"'
    - Key: LD_LIBRARY_PATH
      Value: '"/usr/local/lib:$LD_LIBRARY_PATH"'
    - Key: PYTHONPATH
      Value: '"/NGStools/gff3toembl/gff3toembl:$PYTHONPATH"'
    Name: env
  - Name: workdir
    Path: /NGStools
  - Name: workdir
    Path: /NGStools/BacPipe
  - CmdLine:
    - curl -L https://www.dropbox.com/s/pca3yxbqg7pp945/BacPipe.zip?dl=0 > BacPipe.v1.7.unix.zip
    Name: run
    PrependShell: true
  - CmdLine:
    - unzip BacPipe.v1.7.unix.zip
    Name: run
    PrependShell: true
  - CmdLine:
    - rm  BacPipe.v1.7.unix.zip
    Name: run
    PrependShell: true
  - Name: workdir
    Path: /NGStools
  - CmdLine:
    - apt install -y python-pip python-tk && pip install appJar
    Name: run
    PrependShell: true
  - CmdLine:
    - wget -O - https://install.perlbrew.pl | bash
    Name: run
    PrependShell: true
  - Env:
    - Key: PATH
      Value: ${PATH}:/root/perl5/perlbrew/bin/
    Name: env
  - CmdLine:
    - perlbrew install-cpanm
    Name: run
    PrependShell: true
  - CmdLine:
    - cpanm Bio::Perl
    Name: run
    PrependShell: true
  - CmdLine:
    - cpanm LWP::UserAgent
    Name: run
    PrependShell: true
  - CmdLine:
    - cpanm Try::Tiny::Retry
    Name: run
    PrependShell: true
  - CmdLine:
    - cpanm Excel::Writer::XLSX
    Name: run
    PrependShell: true
  - Name: workdir
    Path: /NGStools/BacPipe
  - Name: workdir
    Path: /NGStools/BacPipe/BacPipe/BacPipe/
  - CmdLine:
    - cd /NGStools/BacPipe/BacPipe/BacPipe/
    Name: run
    PrependShell: true
  - CmdLine:
    - chmod +x â€“R /NGStools/BacPipe/BacPipe/BacPipe/
    Name: run
    PrependShell: true
  - CmdLine:
    - python /NGStools/BacPipe/BacPipe/BacPipe/Pipeline.py unix
    Name: run
    PrependShell: true
  From:
    Image: ubuntu:16.04
  Name: ""
  Platform: ""
  SourceCode: FROM ubuntu:16.04
