{
  "MetaArgs": null,
  "Stages": [
    {
      "Name": "",
      "BaseName": "jupyter/scipy-notebook",
      "SourceCode": "FROM jupyter/scipy-notebook",
      "Platform": "",
      "From": {
        "Image": "jupyter/scipy-notebook"
      },
      "Commands": [
        {
          "Labels": [
            {
              "Key": "MAINTAINER",
              "Value": "takemi.ohama@ietty.co.jp"
            }
          ],
          "Name": "label"
        },
        {
          "Name": "user",
          "User": "root"
        },
        {
          "CmdLine": [
            "apt-get update \u0026\u0026 apt-get install -yq --no-install-recommends     wget curl ssh libreadline-dev vim gnupg     lsb-release     libxrender1     mysql-client     language-pack-ja-base language-pack-ja fonts-mplus     ffmpeg graphviz mecab libmecab-dev mecab-ipadic-utf8"
          ],
          "Name": "run",
          "PrependShell": true
        },
        {
          "CmdLine": [
            "export CLOUD_SDK_REPO=\"cloud-sdk-$(lsb_release -c -s)\" \u0026\u0026   echo \"deb http://packages.cloud.google.com/apt $CLOUD_SDK_REPO main\" | sudo tee -a /etc/apt/sources.list.d/google-cloud-sdk.list \u0026\u0026   curl https://packages.cloud.google.com/apt/doc/apt-key.gpg | sudo apt-key add - \u0026\u0026   sudo apt-get update \u0026\u0026 sudo apt-get install -y google-cloud-sdk"
          ],
          "Name": "run",
          "PrependShell": true
        },
        {
          "CmdLine": [
            "apt-get clean \u0026\u0026 rm -rf /var/lib/apt/lists/*"
          ],
          "Name": "run",
          "PrependShell": true
        },
        {
          "CmdLine": [
            "sed 's@session\\s*required\\s*pam_loginuid.so@session optional pam_loginuid.so@g' -i /etc/pam.d/sshd \u0026\u0026     echo \"export VISIBLE=now\" \u003e\u003e /etc/profile \u0026\u0026     echo \"export TERM=xterm\" \u003e\u003e /etc/profile \u0026\u0026     echo \"jovyan ALL=(ALL) NOPASSWD:ALL\" \u003e /etc/sudoers.d/jovyan"
          ],
          "Name": "run",
          "PrependShell": true
        },
        {
          "CmdLine": [
            "update-locale LANGUAGE=ja_JP:ja LANG=ja_JP.UTF-8"
          ],
          "Name": "run",
          "PrependShell": true
        },
        {
          "CmdLine": [
            "wget -nv https://dl.google.com/go/go1.13.5.linux-amd64.tar.gz"
          ],
          "Name": "run",
          "PrependShell": true
        },
        {
          "CmdLine": [
            "tar -C /usr/local -xzf go1.13.5.linux-amd64.tar.gz"
          ],
          "Name": "run",
          "PrependShell": true
        },
        {
          "Env": [
            {
              "Key": "PATH",
              "Value": "$PATH:/usr/local/go/bin"
            }
          ],
          "Name": "env"
        },
        {
          "Name": "user",
          "User": "$NB_USER"
        },
        {
          "Env": [
            {
              "Key": "PATH",
              "Value": "$PATH:/usr/local/go/bin"
            }
          ],
          "Name": "env"
        },
        {
          "CmdLine": [
            "conda install --quiet --yes   'protobuf=3.6.*'   'conda-build'   'mysql-connector-python'   'pymysql'   'pydata-google-auth'   'pandas-gbq'   'jupyterlab'   'jupyterhub'   \u0026\u0026 conda build purge-all"
          ],
          "Name": "run",
          "PrependShell": true
        },
        {
          "CmdLine": [
            "conda install --quiet --yes   'gensim'   'lightgbm'   'seaborn'   'swig'   'imbalanced-learn'   'featuretools'   'deap'   'lime'   \u0026\u0026 conda build purge-all"
          ],
          "Name": "run",
          "PrependShell": true
        },
        {
          "CmdLine": [
            "conda install --quiet --yes   'google-cloud-language'   'google-cloud-translate'   \u0026\u0026 conda build purge-all"
          ],
          "Name": "run",
          "PrependShell": true
        },
        {
          "CmdLine": [
            "conda install --quiet --yes   'tensorflow'   'keras'   'keras-preprocessing'   \u0026\u0026 conda build purge-all"
          ],
          "Name": "run",
          "PrependShell": true
        },
        {
          "CmdLine": [
            "/opt/conda/bin/pip install --upgrade pip"
          ],
          "Name": "run",
          "PrependShell": true
        },
        {
          "CmdLine": [
            "/opt/conda/bin/pip install redis hiredis pybigquery bash_kernel jupyter_contrib_nbextensions environment_kernels"
          ],
          "Name": "run",
          "PrependShell": true
        },
        {
          "CmdLine": [
            "python -m bash_kernel.install \u0026   jupyter contrib nbextension install --user \u0026   jupyter nbextension enable codefolding/main \u0026   jupyter contrib nbextensions migrate \u0026   jupyter labextension install @yunabe/lgo_extension \u0026   jupyter nbextension enable --py widgetsnbextension --sys-prefix"
          ],
          "Name": "run",
          "PrependShell": true
        }
      ]
    }
  ]
}