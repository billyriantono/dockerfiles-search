MetaArgs: null
Stages:
- BaseName: ubuntu
  Commands:
  - CmdLine:
    - apt-get update &&     DEBIAN_FRONTEND=noninteractive     apt-get install -y
      curl unzip
    Name: run
    PrependShell: true
  - CmdLine:
    - DEBIAN_FRONTEND=noninteractive   apt-get install -y autoconf automake libtool
      make
    Name: run
    PrependShell: true
  - CmdLine:
    - DEBIAN_FRONTEND=noninteractive   apt-get install -y telnet traceroute iputils-ping
      avahi-utils
    Name: run
    PrependShell: true
  - CmdLine:
    - apt-get install -y gcc nodejs nodejs-legacy npm
    Name: run
    PrependShell: true
  - CmdLine:
    - DEBIAN_FRONTEND=noninteractive   apt-get install -y   rabbitmq-server   mosquitto-clients   mosquitto   libzmq-dev
    Name: run
    PrependShell: true
  - CmdLine:
    - apt-get install -y vim openssh-client
    Name: run
    PrependShell: true
  - Env:
    - Key: LIBCOAP_VERSION
      Value: 4.1.1
    Name: env
  - CmdLine:
    - curl -SLO "https://github.com/obgm/libcoap/archive/v$LIBCOAP_VERSION.zip"   &&
      curl -SLO https://raw.githubusercontent.com/obgm/libcoap/develop/autogen.sh   &&
      unzip "v$LIBCOAP_VERSION.zip"   && chmod +x autogen.sh   && mv autogen.sh "libcoap-$LIBCOAP_VERSION"/
    Name: run
    PrependShell: true
  - CmdLine:
    - cd "libcoap-$LIBCOAP_VERSION"   && ./autogen.sh   && ./configure   && make   &&
      mv libcoap.a /usr/local/lib/   && mv examples/coap-* /usr/local/bin/   && cd
      ..
    Name: run
    PrependShell: true
  - CmdLine:
    - rm -rf "libcoap-$LIBCOAP_VERSION" "v$LIBCOAP_VERSION.zip"
    Name: run
    PrependShell: true
  - CmdLine:
    - npm install -g amqp mqtt zmq
    Name: run
    PrependShell: true
  - CmdLine:
    - useradd -m -c 'IoT User' -s /bin/bash -u 1234 -U -p '$6$W32qzUGv$kVCdAX2fHaDbCGVyQ538erbTVca2XxcR8ZHzcXFLfA2zmXRx8EvVkYD5uE8MZQOLyo9PRUSbl4n6NmZe28yf3/'
      iotuser
    Name: run
    PrependShell: true
  - CmdLine:
    - echo
    - Welcome to Building an IoT Empire
    Name: cmd
    PrependShell: false
  From:
    Image: ubuntu
  Name: ""
  Platform: ""
  SourceCode: FROM ubuntu
