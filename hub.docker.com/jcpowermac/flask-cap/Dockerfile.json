{
  "MetaArgs": null,
  "Stages": [
    {
      "Name": "",
      "BaseName": "fedora:24",
      "SourceCode": "FROM fedora:24",
      "Platform": "",
      "From": {
        "Image": "fedora:24"
      },
      "Commands": [
        {
          "Labels": [
            {
              "Key": "name",
              "Value": "\"jcpowermac/flask-cap\""
            },
            {
              "Key": "url",
              "Value": "\"https://github.com/jcpowermac/flask-cap\""
            },
            {
              "Key": "run",
              "Value": "\"docker run -d -p 0.0.0.0:8000:8000 -p 0.0.0.0:9000:9000 --pid=host --privileged --name NAME jcpowermac/flask-cap\""
            }
          ],
          "Name": "label"
        },
        {
          "Env": [
            {
              "Key": "PKGS",
              "Value": "\"procps python-devel gcc make redhat-rpm-config git glibc-langpack-en libcap-ng-python npm python-pip\""
            }
          ],
          "Name": "env"
        },
        {
          "Env": [
            {
              "Key": "REMOVE_PKG",
              "Value": "\"npm python-devel gcc make docker-v1.10-migrator glibc-all-langpacks selinux-policy-minimum\""
            }
          ],
          "Name": "env"
        },
        {
          "Chown": "",
          "From": "",
          "Name": "copy",
          "SourcesAndDest": [
            "requirements.txt",
            "/tmp/"
          ]
        },
        {
          "CmdLine": [
            "dnf -y update \u0026\u0026 dnf -y install --setopt=tsflags=nodocs ${PKGS}  \u0026\u0026 npm install -g bower  \u0026\u0026 mkdir -p /opt/flask-cap/static/ /opt/flask-cap/templates  \u0026\u0026 cd /opt/flask-cap/static  \u0026\u0026 bower install patternfly --save --allow-root  \u0026\u0026 pip install -r /tmp/requirements.txt  \u0026\u0026 dnf -y remove ${REMOVE_PKG}  \u0026\u0026 dnf -y autoremove  \u0026\u0026 dnf clean all"
          ],
          "Name": "run",
          "PrependShell": true
        },
        {
          "Name": "expose",
          "Ports": [
            "8000",
            "9000"
          ]
        },
        {
          "Name": "workdir",
          "Path": "/opt/flask-cap"
        },
        {
          "CmdLine": [
            "/usr/bin/gunicorn"
          ],
          "Name": "entrypoint",
          "PrependShell": false
        },
        {
          "CmdLine": [
            "--bind",
            "0.0.0.0:8000",
            "--worker-class",
            "eventlet",
            "-w",
            "1",
            "app:app"
          ],
          "Name": "cmd",
          "PrependShell": false
        },
        {
          "Chown": "",
          "From": "",
          "Name": "copy",
          "SourcesAndDest": [
            "app.py",
            "/opt/flask-cap/"
          ]
        },
        {
          "Chown": "",
          "From": "",
          "Name": "copy",
          "SourcesAndDest": [
            "templates/*",
            "/opt/flask-cap/templates/"
          ]
        }
      ]
    }
  ]
}