{
  "MetaArgs": null,
  "Stages": [
    {
      "Name": "",
      "BaseName": "php:7.2-cli-stretch",
      "SourceCode": "FROM php:7.2-cli-stretch",
      "Platform": "",
      "From": {
        "Image": "php:7.2-cli-stretch"
      },
      "Commands": [
        {
          "Maintainer": "zengyu 284141050@qq.com",
          "Name": "maintainer"
        },
        {
          "CmdLine": [
            "echo \"change apt source\"     \u0026\u0026 echo \"deb http://ftp.debian.org/debian stretch main contrib non-free\" \u003e/etc/apt/sources.list     \u0026\u0026 echo \"deb http://ftp.debian.org/debian stretch-updates main contrib non-free\" \u003e\u003e/etc/apt/sources.list     \u0026\u0026 echo \"deb http://security.debian.org stretch/updates main contrib non-free\" \u003e\u003e/etc/apt/sources.list     \u0026\u0026 apt-get update     \u0026\u0026 apt-get install -y sudo     unzip     unrar     proxychains     zlib1g-dev     procps inetutils-ping     git     libfreetype6-dev     libjpeg62-turbo-dev     libpng-dev     libssl-dev     \u0026\u0026 sed -i 's/socks4/#socks4/g' /etc/proxychains.conf     \u0026\u0026 sed -i '$a\\socks5 \t172.17.0.1 1080' /etc/proxychains.conf     \u0026\u0026 docker-php-ext-install -j$(nproc) iconv     \u0026\u0026 docker-php-ext-configure gd --with-freetype-dir=/usr/include/ --with-jpeg-dir=/usr/include/     \u0026\u0026 docker-php-ext-install -j$(nproc) gd     \u0026\u0026 printf \"\\nyes\\n\\n\" | pecl install swoole     \u0026\u0026 pecl install apcu     \u0026\u0026 docker-php-ext-enable apcu --ini-name 10-docker-php-ext-apcu.ini     \u0026\u0026 echo \"apc.enable_cli=1\" \u003e\u003e /usr/local/etc/php/conf.d/10-docker-php-ext-apcu.ini     \u0026\u0026 echo \"apc.ttl=10\" \u003e\u003e /usr/local/etc/php/conf.d/10-docker-php-ext-apcu.ini     \u0026\u0026 echo \"apc.use_request_time=0\" \u003e\u003e /usr/local/etc/php/conf.d/10-docker-php-ext-apcu.ini     \u0026\u0026 docker-php-ext-install -j$(nproc) pdo_mysql     \u0026\u0026 docker-php-ext-install zip     \u0026\u0026 pecl install inotify redis     \u0026\u0026 docker-php-ext-enable inotify redis swoole    \u0026\u0026 apt-get clean autoclean     \u0026\u0026 apt-get autoremove --yes     \u0026\u0026 rm -rf /var/lib/{apt,dpkg,cache,log}/     \u0026\u0026  rm -rf /tmp/pear"
          ],
          "Name": "run",
          "PrependShell": true
        },
        {
          "CmdLine": [
            "useradd debian  -s /bin/bash -m -k /etc/skel     \u0026\u0026 echo \"debian  ALL=(ALL) NOPASSWD:ALL\" \u003e\u003e /etc/sudoers"
          ],
          "Name": "run",
          "PrependShell": true
        },
        {
          "CmdLine": [
            "echo 'install composer'     \u0026\u0026 cd /usr/local/bin/     \u0026\u0026 curl -sS https://getcomposer.org/installer | php     \u0026\u0026 mv composer.phar composer     \u0026\u0026 sudo -u debian composer global require 'codeception/codeception'"
          ],
          "Name": "run",
          "PrependShell": true
        },
        {
          "CmdLine": [
            "echo \"update env\"     \u0026\u0026 echo \"export PATH=\\$PATH:/home/debian/.composer/vendor/bin\" \u003e\u003e \"/root/.bashrc\"     \u0026\u0026 echo \"export PATH=\\$PATH:/home/debian/.composer/vendor/bin\" \u003e\u003e \"/home/debian/.bashrc\"     \u0026\u0026 echo \"export PATH=\\$PATH:/home/debian/.composer/vendor/bin\" \u003e\u003e \"/root/.profile\"     \u0026\u0026 echo \"export PATH=\\$PATH:/home/debian/.composer/vendor/bin\" \u003e\u003e \"/home/debian/.profile\"     \u0026\u0026 echo \"export PATH=\\$PATH:/home/debian/.composer/vendor/bin\" \u003e\u003e \"/etc/profile\""
          ],
          "Name": "run",
          "PrependShell": true
        },
        {
          "Env": [
            {
              "Key": "LANG",
              "Value": "C.UTF-8"
            },
            {
              "Key": "TZ",
              "Value": "Asia/Shanghai"
            }
          ],
          "Name": "env"
        },
        {
          "CmdLine": [
            "php",
            "-a"
          ],
          "Name": "cmd",
          "PrependShell": false
        }
      ]
    }
  ]
}