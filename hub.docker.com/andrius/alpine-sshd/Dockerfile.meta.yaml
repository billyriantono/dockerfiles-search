MetaArgs: null
Stages:
- BaseName: andrius/alpine-lshell:latest
  Commands:
  - Labels:
    - Key: maintainer
      Value: '"Andrius Kairiukstis <k@andrius.mobi>"'
    Name: label
  - CmdLine:
    - apk --update add       bash       sudo       openssh       netcat-openbsd       autossh
      &&  rm -rf /var/cache/apk/* /tmp/* /var/tmp/*
    Name: run
    PrependShell: true
  - CmdLine:
    - echo "" > /etc/motd
    Name: run
    PrependShell: true
  - CmdLine:
    - ssh-keygen -f   /etc/ssh/ssh_host_rsa_key     -N '' -t rsa     &&  ssh-keygen
      -f   /etc/ssh/ssh_host_dsa_key     -N '' -t dsa     &&  ssh-keygen -f   /etc/ssh/ssh_host_ecdsa_key   -N
      '' -t ecdsa   &&  ssh-keygen -f   /etc/ssh/ssh_host_ed25519_key -N '' -t ed25519
      &&  cp -a /etc/ssh  /etc/ssh.default
    Name: run
    PrependShell: true
  - Chown: ""
    From: ""
    Name: copy
    SourcesAndDest:
    - ssh_config
    - /etc/ssh/ssh_config
  - Chown: ""
    From: ""
    Name: copy
    SourcesAndDest:
    - sshd_config
    - /etc/ssh/sshd_config
  - CmdLine:
    - chown root:root /etc/ssh  &&  chmod 0600      /etc/ssh/* &&  mkdir -p        /root/.ssh
      &&  chmod 0700      /root/.ssh
    Name: run
    PrependShell: true
  - Chown: ""
    From: ""
    Name: copy
    SourcesAndDest:
    - lshell.conf
    - /etc/lshell.conf
  - Name: expose
    Ports:
    - "22"
  - Chown: ""
    From: ""
    Name: copy
    SourcesAndDest:
    - docker-entrypoint.sh
    - /docker-entrypoint.sh
  - CmdLine:
    - ln -s /docker-entrypoint.sh /create-users
    Name: run
    PrependShell: true
  - CmdLine:
    - /docker-entrypoint.sh
    Name: entrypoint
    PrependShell: false
  - CmdLine:
    - /usr/sbin/sshd
    - -D
    - -e
    - -f
    - /etc/ssh/sshd_config
    Name: cmd
    PrependShell: false
  From:
    Image: andrius/alpine-lshell:latest
  Name: ""
  Platform: ""
  SourceCode: FROM andrius/alpine-lshell:latest
