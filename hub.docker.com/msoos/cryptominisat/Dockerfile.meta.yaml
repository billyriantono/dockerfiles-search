MetaArgs: null
Stages:
- As: builder
  BaseName: ubuntu:16.04
  Commands:
  - Labels:
    - Key: maintainer
      Value: '"Mate Soos"'
    Name: label
  - Labels:
    - Key: version
      Value: '"5.0"'
    Name: label
  - Labels:
    - Key: Description
      Value: '"An advanced SAT solver"'
    Name: label
  - CmdLine:
    - apt-get update && apt-get install --no-install-recommends -y software-properties-common
      && rm -rf /var/lib/apt/lists/*
    Name: run
    PrependShell: true
  - CmdLine:
    - add-apt-repository -y ppa:ubuntu-toolchain-r/test && rm -rf /var/lib/apt/lists/*
    Name: run
    PrependShell: true
  - CmdLine:
    - apt-get update && apt-get install --no-install-recommends -y libboost-program-options-dev
      gcc g++ make cmake zlib1g-dev wget && rm -rf /var/lib/apt/lists/*
    Name: run
    PrependShell: true
  - CmdLine:
    - wget https://bitbucket.org/malb/m4ri/downloads/m4ri-20140914.tar.gz     && tar
      -xvf m4ri-20140914.tar.gz
    Name: run
    PrependShell: true
  - Name: workdir
    Path: m4ri-20140914
  - CmdLine:
    - ./configure     && make     && make install     && make clean
    Name: run
    PrependShell: true
  - CmdLine:
    - groupadd -r solver -g 433
    Name: run
    PrependShell: true
  - CmdLine:
    - useradd -u 431 -r -g solver -d /home/solver -s /sbin/nologin -c "Docker image
      user" solver
    Name: run
    PrependShell: true
  - CmdLine:
    - mkdir -p /home/solver/cms
    Name: run
    PrependShell: true
  - CmdLine:
    - chown -R solver:solver /home/solver
    Name: run
    PrependShell: true
  - Name: user
    User: root
  - Chown: ""
    From: ""
    Name: copy
    SourcesAndDest:
    - .
    - /home/solver/cms
  - Name: workdir
    Path: /home/solver/cms
  - CmdLine:
    - mkdir build
    Name: run
    PrependShell: true
  - Name: workdir
    Path: /home/solver/cms/build
  - CmdLine:
    - cmake -DSTATICCOMPILE=ON ..     && make -j6     && make install     && rm -rf
      *
    Name: run
    PrependShell: true
  From:
    Image: ubuntu:16.04
  Name: builder
  Platform: ""
  SourceCode: FROM ubuntu:16.04 as builder
- BaseName: alpine:latest
  Commands:
  - Chown: ""
    From: builder
    Name: copy
    SourcesAndDest:
    - /usr/local/bin/cryptominisat5
    - /usr/local/bin/
  - CmdLine:
    - /usr/local/bin/cryptominisat5
    Name: entrypoint
    PrependShell: false
  From:
    Image: alpine:latest
  Name: ""
  Platform: ""
  SourceCode: FROM alpine:latest
