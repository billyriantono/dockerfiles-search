MetaArgs: null
Stages:
- BaseName: jupyter/all-spark-notebook
  Commands:
  - Name: user
    User: root
  - CmdLine:
    - "apt-get -y update && \tapt-get install -yq     krb5-user     python-krbv     libkrb5-dev
      \    libsasl2-dev     libsasl2-modules-gssapi-heimdal"
    Name: run
    PrependShell: true
  - CmdLine:
    - cd /opt &&     git clone https://github.com/sara-nl/hathi-client &&     cd hathi-client
      &&     git checkout spark-2.0 &&     cp /opt/hathi-client/conf/krb5.conf /etc/krb5.conf
      &&     /opt/hathi-client/bin/get.sh hadoop &&     /opt/hathi-client/bin/get.sh
      spark &&     ln -s /opt/conda/envs/python2/bin/python2 /usr/local/bin/python2.7
    Name: run
    PrependShell: true
  - Chown: ""
    From: ""
    Name: copy
    SourcesAndDest:
    - spark-defaults.conf
    - /usr/local/spark/conf/
  - Chown: ""
    From: ""
    Name: copy
    SourcesAndDest:
    - spark-env.sh
    - /usr/local/spark/conf/
  - CmdLine:
    - chmod -R 755 /usr/local/spark
    Name: run
    PrependShell: true
  - Env:
    - Key: CLIENT_DIR
      Value: /opt/hathi-client
    Name: env
  - Env:
    - Key: JAVA_HOME
      Value: /usr/lib/jvm/java-8-openjdk-amd64/
    Name: env
  - Env:
    - Key: KRB5_CONFIG
      Value: /opt/hathi-client/conf/krb5.conf
    Name: env
  - Env:
    - Key: HADOOP_HOME
      Value: /opt/hathi-client/hadoop
    Name: env
  - Env:
    - Key: HADOOP_CONF
      Value: /opt/hathi-client/hadoop/etc/hadoop
    Name: env
  - Env:
    - Key: HADOOP_CONF_DIR
      Value: /opt/hathi-client/hadoop/etc/hadoop
    Name: env
  - Env:
    - Key: PATH
      Value: /opt/conda/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/hathi-client/hadoop/bin:/opt/hathi-client:/usr/local/spark/bin
    Name: env
  - Env:
    - Key: PYSPARK_PYTHON
      Value: /usr/local/bin/python2.7
    Name: env
  - Name: user
    User: jovyan
  - Name: user
    User: root
  From:
    Image: jupyter/all-spark-notebook
  Name: ""
  Platform: ""
  SourceCode: FROM jupyter/all-spark-notebook
