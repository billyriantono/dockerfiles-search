MetaArgs: null
Stages:
- BaseName: simonjupp/ebi-ols:3.1.1
  Commands:
  - Env:
    - Key: OLS_HOME
      Value: /opt/ols
    Name: env
  - Env:
    - Key: JAVA_OPTS
      Value: '"-Xms300M -Xmx500M"'
    Name: env
  - Env:
    - Key: SOLR_VERSION
      Value: 5.5.3
    Name: env
  - Chown: ""
    Name: add
    SourcesAndDest:
    - ols/ols-config.yaml
    - ${OLS_HOME}
  - CmdLine:
    - mkdir ${OLS_HOME}/ontologies
    Name: run
    PrependShell: true
  - Chown: ""
    Name: add
    SourcesAndDest:
    - '*.owl'
    - ${OLS_HOME}/ontologies/
  - CmdLine:
    - ls -l ${OLS_HOME}/ontologies/
    Name: run
    PrependShell: true
  - Chown: ""
    Name: add
    SourcesAndDest:
    - ols/application.properties
    - ${OLS_HOME}
  - CmdLine:
    - mongod --smallfiles --fork --logpath /var/log/mongodb.log     && cd ${OLS_HOME}     &&
      java -jar ${OLS_HOME}/ols-config-importer.jar     && sleep 10
    Name: run
    PrependShell: true
  - CmdLine:
    - mongod --smallfiles --fork --logpath /var/log/mongodb.log   && /opt/solr-${SOLR_VERSION}/bin/solr
      -Dsolr.solr.home=${OLS_HOME}/solr-5-config/ -Dsolr.data.dir=${OLS_HOME}   &&
      java ${JAVA_OPTS} -Dols.home=${OLS_HOME} -jar ${OLS_HOME}/ols-indexer.jar
    Name: run
    PrependShell: true
  - Name: expose
    Ports:
    - "8080"
  - CmdLine:
    - cd ${OLS_HOME}     && mongod --smallfiles --fork --logpath /var/log/mongodb.log     &&
      /opt/solr-${SOLR_VERSION}/bin/solr -Dsolr.solr.home=${OLS_HOME}/solr-5-config/
      -Dsolr.data.dir=${OLS_HOME}     && java -jar -Dols.home=${OLS_HOME} ols-boot.war
    Name: cmd
    PrependShell: true
  From:
    Image: simonjupp/ebi-ols:3.1.1
  Name: ""
  Platform: ""
  SourceCode: FROM simonjupp/ebi-ols:3.1.1
