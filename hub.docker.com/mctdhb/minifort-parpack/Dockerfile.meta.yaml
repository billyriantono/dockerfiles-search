MetaArgs: null
Stages:
- BaseName: mctdhb/minunix:latest
  Commands:
  - Maintainer: Alexej I. Streltsov  <u128str@gmail.com>
    Name: maintainer
  - Env:
    - Key: MKL_PATH
      Value: /opt/intel
    Name: env
  - CmdLine:
    - apt-get update &&   apt-get install -y man tar wget cpio unzip autoconf
    Name: run
    PrependShell: true
  - CmdLine:
    - cd /tmp &&   wget -q http://registrationcenter-download.intel.com/akdlm/irc_nas/tec/12070/l_mkl_2018.0.128.tgz
      &&   tar -xzf l_mkl_2018.0.128.tgz  && cd l_mkl_2018.0.128  &&   sed -i 's/ACCEPT_EULA=decline/ACCEPT_EULA=accept/g'
      silent.cfg &&   ./install.sh -s silent.cfg &&   cd ..
    Name: run
    PrependShell: true
  - CmdLine:
    - wget https://github.com/opencollab/arpack-ng/archive/master.zip &&    unzip
      master.zip &&    cd arpack-ng-master &&   sh bootstrap &&   ./configure  --enable-mpi
      &&    make &&   make install
    Name: run
    PrependShell: true
  - CmdLine:
    - echo "${MKL_PATH}/mkl/lib/intel64" >> /etc/ld.so.conf.d/intel.conf && ldconfig
      &&     echo ". /opt/intel/bin/compilervars.sh intel64" >> /etc/bash.bashrc
    Name: run
    PrependShell: true
  From:
    Image: mctdhb/minunix:latest
  Name: ""
  Platform: ""
  SourceCode: FROM mctdhb/minunix:latest
