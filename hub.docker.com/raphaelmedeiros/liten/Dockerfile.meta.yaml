MetaArgs: null
Stages:
- As: builder
  BaseName: openjdk:12-alpine
  Commands:
  - Labels:
    - Key: maintainer
      Value: '"Raphael Medeiros <raphael.medeiros@gmail.com>"'
    Name: label
  - CmdLine:
    - mkdir -p /usr/src/liten/
    Name: run
    PrependShell: true
  - Name: workdir
    Path: /usr/src/liten/
  - CmdLine:
    - apk --no-cache add git maven
    Name: run
    PrependShell: true
  - CmdLine:
    - git clone -b master https://github.com/byraphaelmedeiros/liten.git .
    Name: run
    PrependShell: true
  - CmdLine:
    - mvn package -Dmaven.test.skip=true
    Name: run
    PrependShell: true
  From:
    Image: openjdk:12-alpine
  Name: builder
  Platform: ""
  SourceCode: FROM openjdk:12-alpine AS builder
- BaseName: openjdk:12-alpine
  Commands:
  - Labels:
    - Key: maintainer
      Value: '"Raphael Medeiros <raphael.medeiros@gmail.com>"'
    Name: label
  - Env:
    - Key: MONGODB_URI
      Value: '"mongodb://localhost/liten"'
    Name: env
  - CmdLine:
    - apk update  && apk add --update ca-certificates  && apk add --update -t deps
      curl  && apk add --no-cache bash gawk sed grep bc coreutils vim wget curl tar
      tzdata  && apk del --purge deps  && rm /var/cache/apk/*
    Name: run
    PrependShell: true
  - CmdLine:
    - cp /usr/share/zoneinfo/America/Fortaleza /etc/localtime
    Name: run
    PrependShell: true
  - Env:
    - Key: LANG
      Value: pt_BR.UTF-8
    - Key: LANGUAGE
      Value: pt_BR:pt
    - Key: LC_ALL
      Value: pt_BR.UTF-8
    Name: env
  - Name: workdir
    Path: /
  - Chown: ""
    From: builder
    Name: copy
    SourcesAndDest:
    - /usr/src/liten/liten-web/target/liten-web.jar
    - /app.jar
  - Name: expose
    Ports:
    - "8080"
  - CmdLine:
    - java
    - --add-opens
    - java.base/java.lang=ALL-UNNAMED
    - -Djava.security.egd=file:/dev/./urandom
    - -Dfile.encoding=UTF-8
    - -Xms256m
    - -Xmx512m
    - -jar
    - /app.jar
    Name: entrypoint
    PrependShell: false
  From:
    Image: openjdk:12-alpine
  Name: ""
  Platform: ""
  SourceCode: FROM openjdk:12-alpine
