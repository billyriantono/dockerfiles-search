MetaArgs: null
Stages:
- BaseName: ubuntu:14.04
  Commands:
  - Maintainer: Meng Ding <dingmeng@gmail.com>
    Name: maintainer
  - Name: user
    User: root
  - CmdLine:
    - apt-get update && apt-get install -y     curl     openjdk-7-jdk     rsync     ssh     wget
    Name: run
    PrependShell: true
  - Env:
    - Key: HADOOP_PREFIX
      Value: /opt/hadoop
    Name: env
  - Env:
    - Key: HADOOP_CONF_DIR
      Value: ${HADOOP_PREFIX}/etc/hadoop
    Name: env
  - Env:
    - Key: HADOOP_DATA_DIR
      Value: /var/lib/hadoop
    Name: env
  - Env:
    - Key: PATH
      Value: ${HADOOP_PREFIX}/bin:$PATH
    Name: env
  - Env:
    - Key: HADOOP_VERSION
      Value: 3.0.0-SNAPSHOT
    Name: env
  - CmdLine:
    - curl -SL https://s3.amazonaws.com/hadoop-distribution/hadoop-${HADOOP_VERSION}.tar.gz     |
      tar xz -C /opt
    Name: run
    PrependShell: true
  - CmdLine:
    - ln -s /opt/hadoop-${HADOOP_VERSION} ${HADOOP_PREFIX}     && mkdir /var/lib/hadoop
      && mkdir /var/lib/hadoop/namenode     && mkdir /var/lib/hadoop/datanode
    Name: run
    PrependShell: true
  - Chown: ""
    From: ""
    Name: copy
    SourcesAndDest:
    - add/config/hadoop/*
    - ${HADOOP_CONF_DIR}/
  - CmdLine:
    - ${HADOOP_PREFIX}/bin/hdfs namenode -format
    Name: run
    PrependShell: true
  - CmdLine:
    - tar cf /tmp/hadoop-data.tar -C ${HADOOP_DATA_DIR} .     && tar cf /tmp/hadoop-config.tar
      -C ${HADOOP_CONF_DIR} .
    Name: run
    PrependShell: true
  - Env:
    - Key: ZK_PREFIX
      Value: /opt/zookeeper
    Name: env
  - Env:
    - Key: ZK_CONF_DIR
      Value: $ZK_PREFIX/conf
    Name: env
  - Env:
    - Key: ZK_VERSION
      Value: 3.4.6
    Name: env
  - Env:
    - Key: PATH
      Value: ${ZK_PREFIX}/bin:$PATH
    Name: env
  - CmdLine:
    - curl -SL http://apache.mirror.rafal.ca/zookeeper/zookeeper-${ZK_VERSION}/zookeeper-${ZK_VERSION}.tar.gz     |
      tar xz -C /opt
    Name: run
    PrependShell: true
  - CmdLine:
    - ln -s /opt/zookeeper-${ZK_VERSION} ${ZK_PREFIX}     && mkdir /var/lib/zookeeper
    Name: run
    PrependShell: true
  - Chown: ""
    From: ""
    Name: copy
    SourcesAndDest:
    - add/config/zookeeper/*
    - ${ZK_CONF_DIR}/
  - Env:
    - Key: SLIDER_PREFIX
      Value: /opt/slider
    Name: env
  - Env:
    - Key: SLIDER_CONF_DIR
      Value: $SLIDER_PREFIX/conf
    Name: env
  - Env:
    - Key: SLIDER_VERSION
      Value: 0.90.0-incubating-SNAPSHOT
    Name: env
  - Env:
    - Key: PATH
      Value: ${SLIDER_PREFIX}/bin:$PATH
    Name: env
  - CmdLine:
    - curl -SL https://s3.amazonaws.com/hadoop-distribution/slider-${SLIDER_VERSION}-all.tar.gz     |
      tar xz -C /opt
    Name: run
    PrependShell: true
  - CmdLine:
    - ln -s /opt/slider-${SLIDER_VERSION} ${SLIDER_PREFIX}     && mkdir -p /opt/app_packages
    Name: run
    PrependShell: true
  - Chown: ""
    From: ""
    Name: copy
    SourcesAndDest:
    - add/config/slider/app_packages
    - /opt/app_packages/
  - Env:
    - Key: JAVA_HOME
      Value: /usr/lib/jvm/java-7-openjdk-amd64
    Name: env
  - CmdLine:
    - groupadd -r vagrant -g 1000 && useradd -r -g vagrant -u 1000 vagrant
    Name: run
    PrependShell: true
  - Chown: ""
    From: ""
    Name: copy
    SourcesAndDest:
    - bootstrap.sh
    - /
  - CmdLine:
    - /bootstrap.sh
    Name: entrypoint
    PrependShell: false
  From:
    Image: ubuntu:14.04
  Name: ""
  Platform: ""
  SourceCode: FROM ubuntu:14.04
