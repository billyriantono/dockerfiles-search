MetaArgs: null
Stages:
- BaseName: nodesource/jessie:6.7.0
  Commands:
  - Maintainer: Fabien FORTON <fabienforton@icloud.com>
    Name: maintainer
  - CmdLine:
    - alias ll='ls -alG'
    Name: run
    PrependShell: true
  - Env:
    - Key: DEBIAN_FRONTEND
      Value: noninteractive
    Name: env
  - Env:
    - Key: TERM
      Value: xterm
    Name: env
  - CmdLine:
    - apt-get update;     apt-get install -y apt-utils apt-transport-https;     apt-get
      upgrade -y;     apt-get install -y locales curl wget;     apt-get install -y
      libnss-mdns avahi-discover libavahi-compat-libdnssd-dev libkrb5-dev;     apt-get
      install -y nano vim
    Name: run
    PrependShell: true
  - CmdLine:
    - echo 'deb http://www.deb-multimedia.org jessie main non-free' >> /etc/apt/sources.list;
    Name: run
    PrependShell: true
  - CmdLine:
    - echo 'deb-src http://www.deb-multimedia.org jessie main non-free' >> /etc/apt/sources.list;
    Name: run
    PrependShell: true
  - CmdLine:
    - apt-get update;
    Name: run
    PrependShell: true
  - CmdLine:
    - apt-get install deb-multimedia-keyring --force-yes --assume-yes;
    Name: run
    PrependShell: true
  - CmdLine:
    - apt-get update
    Name: run
    PrependShell: true
  - CmdLine:
    - apt-get install build-essential libmp3lame-dev libvorbis-dev libtheora-dev libspeex-dev
      yasm pkg-config libfdk-aac-dev libopenjpeg-dev libx264-dev  --force-yes --assume-yes;
    Name: run
    PrependShell: true
  - CmdLine:
    - cd /tmp/
    Name: run
    PrependShell: true
  - CmdLine:
    - mkdir software
    Name: run
    PrependShell: true
  - CmdLine:
    - cd software
    Name: run
    PrependShell: true
  - Chown: ""
    Name: add
    SourcesAndDest:
    - http://ffmpeg.org/releases/ffmpeg-3.2.tar.bz2
    - /tmp/software/
  - CmdLine:
    - tar -xvjf /tmp/software/ffmpeg-3.2.tar.bz2 ;
    Name: run
    PrependShell: true
  - CmdLine:
    - cd ffmpeg-3.2 && ./configure --enable-gpl --enable-postproc --enable-swscale
      --enable-avfilter --enable-libmp3lame --enable-libvorbis --enable-libtheora
      --enable-libx264 --enable-libspeex --enable-shared --enable-pthreads --enable-libopenjpeg
      --enable-libfdk-aac --enable-nonfree && make && make install && /sbin/ldconfig  ;
    Name: run
    PrependShell: true
  - CmdLine:
    - "curl -sL https://deb.nodesource.com/setup_7.x | bash -\rRUN apt-get install
      -y nodejs\rRUN curl -L https://npmjs.org/install.sh | sh"
    Name: run
    PrependShell: true
  - CmdLine:
    - npm install -g homebridge --unsafe-perm
    Name: run
    PrependShell: true
  - CmdLine:
    - npm install -g  homebridge-camera-ffmpeg
    Name: run
    PrependShell: true
  - CmdLine:
    - npm install -g  homebridge-eedomus
    Name: run
    PrependShell: true
  - CmdLine:
    - npm install -g  homebridge-netatmo
    Name: run
    PrependShell: true
  - CmdLine:
    - npm install -g  homebridge-synology
    Name: run
    PrependShell: true
  - CmdLine:
    - npm install -g  homebridge-melcloud
    Name: run
    PrependShell: true
  - CmdLine:
    - npm install -g  homebridge-httpdoor
    Name: run
    PrependShell: true
  - Chown: ""
    Name: add
    SourcesAndDest:
    - homebridge-eedomus/index.js
    - /usr/lib/node_modules/homebridge-eedomus/
  - Name: user
    User: root
  - CmdLine:
    - mkdir -p /var/run/dbus
    Name: run
    PrependShell: true
  - Chown: ""
    Name: add
    SourcesAndDest:
    - image/run.sh
    - /root/run.sh
  - Name: expose
    Ports:
    - "51826"
    - "5353"
  - CmdLine:
    - /root/run.sh
    Name: cmd
    PrependShell: false
  From:
    Image: nodesource/jessie:6.7.0
  Name: ""
  Platform: ""
  SourceCode: FROM nodesource/jessie:6.7.0
