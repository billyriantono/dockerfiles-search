MetaArgs: null
Stages:
- As: build
  BaseName: alpine:3.8
  Commands:
  - Env:
    - Key: MBED_TLS_VER
      Value: 2.12.0
    Name: env
  - Env:
    - Key: CURL_VER
      Value: 7.61.1
    Name: env
  - CmdLine:
    - apk add --no-cache   g++   make   nghttp2-dev   nghttp2-libs   perl     && addgroup
      curl && adduser -D -s /bin/sh -G curl curl     && mkdir --parents /usr/local/etc     &&
      grep curl /etc/group > /usr/local/etc/group   && grep curl /etc/passwd > /usr/local/etc/passwd     &&
      wget --directory-prefix=/usr/local/etc     https://curl.haxx.se/ca/cacert.pem     &&
      wget "https://tls.mbed.org/download/mbedtls-${MBED_TLS_VER}-apache.tgz"   &&
      tar --extract --gzip --verbose --file "mbedtls-${MBED_TLS_VER}-apache.tgz"   &&
      cd "mbedtls-${MBED_TLS_VER}"     make && make install     && wget "https://curl.haxx.se/download/curl-${CURL_VER}.tar.gz"   &&
      tar --extract --gzip --verbose --file "curl-${CURL_VER}.tar.gz"   && cd "curl-${CURL_VER}"     &&
      ./configure     --enable-optimize     --with-nghttp2=/usr     --without-ssl     --with-mbedtls     --enable-ipv6     --enable-unix-sockets     --without-libidn     --disable-static     --disable-ldap     --disable-manual     --disable-versioned-symbols     --enable-hidden-symbols     &&
      make && make install     && strip --strip-all /usr/local/bin/curl   && strip
      --strip-all /usr/local/lib/libcurl.so.4
    Name: run
    PrependShell: true
  From:
    Image: alpine:3.8
  Name: build
  Platform: ""
  SourceCode: FROM alpine:3.8 as build
- BaseName: scratch
  Commands:
  - Chown: ""
    From: build
    Name: copy
    SourcesAndDest:
    - /lib/ld-musl-x86_64.so.1
    - /lib/
  - Chown: ""
    From: build
    Name: copy
    SourcesAndDest:
    - /usr/lib/libnghttp2.so.14
    - /usr/lib/
  - Chown: ""
    From: build
    Name: copy
    SourcesAndDest:
    - /lib/libz.so.1
    - /lib
  - Chown: ""
    From: build
    Name: copy
    SourcesAndDest:
    - /usr/local/lib/libcurl.so.4
    - /usr/local/lib/
  - Chown: ""
    From: build
    Name: copy
    SourcesAndDest:
    - /usr/local/bin/curl
    - /usr/local/bin/
  - Chown: ""
    From: build
    Name: copy
    SourcesAndDest:
    - /usr/local/etc/passwd
    - /etc/passwd
  - Chown: ""
    From: build
    Name: copy
    SourcesAndDest:
    - /usr/local/etc/group
    - /etc/group
  - Chown: ""
    From: build
    Name: copy
    SourcesAndDest:
    - /usr/local/etc/cacert.pem
    - /etc/ssl/cert.pem
  - Chown: ""
    From: build
    Name: copy
    SourcesAndDest:
    - /home/curl
    - /home/curl
  - Name: user
    User: curl
  - Name: workdir
    Path: /home/curl
  - CmdLine:
    - /usr/local/bin/curl
    Name: entrypoint
    PrependShell: false
  - CmdLine:
    - -h
    Name: cmd
    PrependShell: false
  From:
    Scratch: true
  Name: ""
  Platform: ""
  SourceCode: FROM scratch
