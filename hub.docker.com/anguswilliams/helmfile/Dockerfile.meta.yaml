MetaArgs: null
Stages:
- BaseName: alpine:3.10
  Commands:
  - CmdLine:
    - apk add --no-cache ca-certificates git bash curl jq
    Name: run
    PrependShell: true
  - Key: HELM_VERSION
    Name: arg
    Value: v3.0.0
  - Key: HELM_LOCATION
    Name: arg
    Value: '"https://get.helm.sh"'
  - Key: HELM_FILENAME
    Name: arg
    Value: '"helm-${HELM_VERSION}-linux-amd64.tar.gz"'
  - Key: HELM_SHA256
    Name: arg
    Value: '"10e1fdcca263062b1d7b2cb93a924be1ef3dd6c381263d8151dd1a20a3d8c0dc"'
  - CmdLine:
    - wget ${HELM_LOCATION}/${HELM_FILENAME} &&     echo Verifying ${HELM_FILENAME}...
      &&     sha256sum ${HELM_FILENAME} | grep -q "${HELM_SHA256}" &&     echo Extracting
      ${HELM_FILENAME}... &&     tar zxvf ${HELM_FILENAME} && mv /linux-amd64/helm
      /usr/local/bin/ &&     rm ${HELM_FILENAME} && rm -r /linux-amd64
    Name: run
    PrependShell: true
  - Key: HELMFILE_VERSION
    Name: arg
    Value: v0.94.1
  - Key: HELMFILE_LOCATION
    Name: arg
    Value: '"https://github.com/roboll/helmfile/releases/download"'
  - Key: HELMFILE_FILENAME
    Name: arg
    Value: '"helmfile_linux_amd64"'
  - Key: HELMFILE_SHA256
    Name: arg
    Value: '"eb058263f8279e1d0e9bb0c530db549615bb22fdb39c86c8696616c0e6b5beac"'
  - CmdLine:
    - wget ${HELMFILE_LOCATION}/${HELMFILE_VERSION}/${HELMFILE_FILENAME} &&     echo
      Verifying ${HELMFILE_FILENAME}... &&     sha256sum ${HELMFILE_FILENAME} | grep
      -q "${HELMFILE_SHA256}" &&     mv ${HELMFILE_FILENAME} /usr/local/bin/helmfile
      &&     chmod +x /usr/local/bin/helmfile
    Name: run
    PrependShell: true
  - Env:
    - Key: KUBECTL_VERSION
      Value: '"v1.15.3"'
    Name: env
  - Env:
    - Key: KUBECTL_SHA256
      Value: '"6e805054a1fb2280abb53f75b57a1b92bf9c66ffe0d2cdcd46e81b079d93c322"'
    Name: env
  - CmdLine:
    - curl -LO "https://storage.googleapis.com/kubernetes-release/release/${KUBECTL_VERSION}/bin/linux/amd64/kubectl"
      &&     sha256sum kubectl | grep ${KUBECTL_SHA256} &&     chmod +x kubectl &&     mv
      kubectl /usr/local/bin/kubectl
    Name: run
    PrependShell: true
  - Env:
    - Key: HELM_HOME
      Value: /etc/helm
    Name: env
  - Env:
    - Key: XDG_CACHE_HOME
      Value: ${HELM_HOME}/.cache/helm
    - Key: XDG_CONFIG_HOME
      Value: ${HELM_HOME}/.config/helm
    - Key: XDG_DATA_HOME
      Value: ${HELM_HOME}/.local/share/helm
    Name: env
  - CmdLine:
    - mkdir -p ${HELM_HOME} ${XDG_CACHE_HOME} ${XDG_CONFIG_HOME} ${XDG_DATA_HOME}
      &&     chmod -R 0777 ${HELM_HOME} &&     helm plugin install https://github.com/databus23/helm-diff
      --version v3.0.0-rc.7 &&     helm plugin install https://github.com/futuresimple/helm-secrets
      &&     helm plugin install https://github.com/hypnoglow/helm-s3.git &&     helm
      plugin install https://github.com/aslafy-z/helm-git.git
    Name: run
    PrependShell: true
  - Env:
    - Key: HELMFILE_HELM3
      Value: '"1"'
    Name: env
  - CmdLine:
    - /usr/local/bin/helmfile
    Name: cmd
    PrependShell: false
  From:
    Image: alpine:3.10
  Name: ""
  Platform: ""
  SourceCode: FROM alpine:3.10
