MetaArgs: null
Stages:
- BaseName: antergos/makepkg:latest
  Commands:
  - Labels:
    - Key: maintainer
      Value: '"Mateusz Kubuszok <mateusz.kubuszok@gmail.com>"'
    Name: label
  - Name: user
    User: root
  - CmdLine:
    - 'pacman -Sy --noconfirm yaourt &&     pacman -Sy --noconfirm sudo &&     chmod
      640 /etc/sudoers && echo ''%wheel ALL=(ALL) NOPASSWD: ALL'' >> /etc/sudoers
      && chmod 440 /etc/sudoers && useradd -m -p123123 -G wheel jupyter'
    Name: run
    PrependShell: true
  - Name: workdir
    Path: /tmp
  - Env:
    - Key: NB_USER
      Value: jupyter
    Name: env
  - Env:
    - Key: NB_HOME
      Value: /home/$NB_USER
    Name: env
  - Chown: ""
    From: ""
    Name: copy
    SourcesAndDest:
    - aliases/*
    - /usr/local/bin/
  - CmdLine:
    - yaourt-install         ipython         ipython2         python-ipykernel         python-matplotlib         python-numpy         python2-ipykernel         python2-numpy         python2-scipy         jupyterlab-git
      &&     as-user python -m ipykernel install --user &&     as-user python2 -m
      ipykernel install --user &&     yaourt-clean
    Name: run
    PrependShell: true
  - Env:
    - Key: APACHE_SPARK_VERSION
      Value: 2.3.0
    Name: env
  - Env:
    - Key: HADOOP_VERSION
      Value: "2.7"
    Name: env
  - CmdLine:
    - yaourt-install         jdk8-openjdk         jdk9-openjdk         python-pip
      &&     pip install --upgrade pip &&     wget -q http://apache.claz.org/spark/spark-${APACHE_SPARK_VERSION}/spark-${APACHE_SPARK_VERSION}-bin-hadoop${HADOOP_VERSION}.tgz
      &&     echo "258683885383480BA01485D6C6F7DC7CFD559C1584D6CEB7A3BBCF484287F7F57272278568F16227BE46B4F92591768BA3D164420D87014A136BF66280508B46
      *spark-${APACHE_SPARK_VERSION}-bin-hadoop${HADOOP_VERSION}.tgz" | sha512sum
      -c - &&     tar xzf spark-${APACHE_SPARK_VERSION}-bin-hadoop${HADOOP_VERSION}.tgz
      -C /opt --owner root --group root --no-same-owner &&     ln -s /opt/spark-${APACHE_SPARK_VERSION}-bin-hadoop${HADOOP_VERSION}
      /opt/spark &&     yaourt-clean spark-${APACHE_SPARK_VERSION}-bin-hadoop${HADOOP_VERSION}.tgz
    Name: run
    PrependShell: true
  - CmdLine:
    - archlinux-java set java-8-openjdk &&     as-user gpg --recv-keys D10295D0D6EF55AD
      &&     yaourt-install         mesos &&     yaourt-clean $NB_HOME/.m2
    Name: run
    PrependShell: true
  - Env:
    - Key: SPARK_HOME
      Value: /opt/spark
    Name: env
  - Env:
    - Key: PYTHONPATH
      Value: $SPARK_HOME/python:$SPARK_HOME/python/lib/py4j-0.10.6-src.zip
    Name: env
  - Env:
    - Key: MESOS_NATIVE_LIBRARY
      Value: /usr/lib/libmesos.so
    Name: env
  - Env:
    - Key: SPARK_OPTS
      Value: --driver-java-options=-Xms1024M --driver-java-options=-Xmx4096M --driver-java-options=-Dlog4j.logLevel=info
    Name: env
  - CmdLine:
    - pip install --no-cache-dir https://dist.apache.org/repos/dist/dev/incubator/toree/0.2.0-incubating-rc3/toree-pip/toree-0.2.0.tar.gz
      &&     jupyter toree install --spark_home=/opt/spark-${APACHE_SPARK_VERSION}-bin-hadoop${HADOOP_VERSION}
      &&     yaourt-clean
    Name: run
    PrependShell: true
  - CmdLine:
    - yaourt-install         cling-jupyter-git &&     yaourt-clean
    Name: run
    PrependShell: true
  - CmdLine:
    - yaourt-install         stack &&     as-user stack install ihaskell &&     as-user
      $NB_HOME/.local/bin/ihaskell install --stack &&     yaourt-clean $NB_HOME/.stack/{indices,programs}
    Name: run
    PrependShell: true
  - CmdLine:
    - yaourt-install         leiningen &&     archlinux-java set java-9-openjdk &&     yaourt-install         ijava-git
      &&     archlinux-java set java-8-openjdk &&     git clone https://github.com/clojupyter/clojupyter
      /tmp/clojupyter &&     cd /tmp/clojupyter &&     make &&     as-user make install
      &&     yaourt-clean $NB_HOME/.m2
    Name: run
    PrependShell: true
  - CmdLine:
    - yaourt-install         ijavascript &&     as-user ijs --ijs-install-kernel &&     yaourt-clean
      $NB_HOME/{.node-gyp,.npm}
    Name: run
    PrependShell: true
  - CmdLine:
    - yaourt-install         ruby-iruby &&     as-user iruby register --force &&     yaourt-clean
    Name: run
    PrependShell: true
  - Name: user
    User: jupyter
  - Name: workdir
    Path: $NB_HOME
  - Chown: ""
    From: ""
    Name: copy
    SourcesAndDest:
    - jupyter-run
    - /usr/local/bin/jupyter-run
  - Name: expose
    Ports:
    - "8888"
  - CmdLine:
    - jupyter-run
    Name: cmd
    PrependShell: true
  From:
    Image: antergos/makepkg:latest
  Name: ""
  Platform: ""
  SourceCode: FROM antergos/makepkg:latest
