MetaArgs: null
Stages:
- BaseName: golang:1.9-alpine
  Commands:
  - Env:
    - Key: PATH
      Value: $PATH:/opt/flamegraph
    Name: env
  - Env:
    - Key: FLAMEGRAPH_SHA
      Value: a93d905911c07c96a73b35ddbcb5ddb2f39da4b6
    Name: env
  - CmdLine:
    - apk --update add git &&     apk add curl &&     curl -OL https://github.com/Masterminds/glide/releases/download/v0.12.3/glide-v0.12.3-linux-amd64.tar.gz
      &&     tar -xzf glide-v0.12.3-linux-amd64.tar.gz &&     mv linux-amd64/glide
      /usr/bin &&     apk add perl &&     git clone git://github.com/brendangregg/FlameGraph.git
      /opt/flamegraph &&     ( cd /opt/flamegraph &&       git reset --hard $FLAMEGRAPH_SHA
      &&       rm -rf .git )
    Name: run
    PrependShell: true
  - Chown: ""
    From: ""
    Name: copy
    SourcesAndDest:
    - .
    - /go/src/github.com/uber/go-torch
  - CmdLine:
    - cd /go/src/github.com/uber/go-torch && glide install && go install ./...
    Name: run
    PrependShell: true
  - CmdLine:
    - go-torch
    Name: entrypoint
    PrependShell: false
  From:
    Image: golang:1.9-alpine
  Name: ""
  Platform: ""
  SourceCode: FROM golang:1.9-alpine
