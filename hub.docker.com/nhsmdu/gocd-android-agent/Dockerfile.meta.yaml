MetaArgs: null
Stages:
- BaseName: gocd/gocd-agent-ubuntu-16.04:v18.6.0
  Commands:
  - CmdLine:
    - apt-get update  && apt-get upgrade -y  && apt-get install wget libssl-dev openjdk-8-jdk
      maven -y  && curl -sL "https://deb.nodesource.com/setup_8.x" | bash -  && apt-get
      install nodejs -y  && groupadd --gid 1001 node  && useradd --uid 1001 --gid
      node --shell /bin/bash --create-home node
    Name: run
    PrependShell: true
  - Name: user
    User: node
  - CmdLine:
    - mkdir /home/node/.npm-global
    Name: run
    PrependShell: true
  - Env:
    - Key: PATH
      Value: /home/node/.npm-global/bin:$PATH
    Name: env
  - Env:
    - Key: NPM_CONFIG_PREFIX
      Value: /home/node/.npm-global
    Name: env
  - CmdLine:
    - npm i -g sonarqube-scanner@2.0.2
    Name: run
    PrependShell: true
  - Name: user
    User: go
  - CmdLine:
    - mkdir ~/gradle  && cd ~/gradle  && wget -nv https://services.gradle.org/distributions/gradle-4.5.1-bin.zip  &&
      unzip gradle-4.5.1-bin.zip
    Name: run
    PrependShell: true
  - CmdLine:
    - mkdir ~/android-sdk-linux  && cd ~/android-sdk-linux  && wget -nv https://dl.google.com/android/repository/sdk-tools-linux-3859397.zip  &&
      unzip sdk-tools-linux-3859397.zip  && cd ~/android-sdk-linux/tools  && yes |
      bin/sdkmanager --licenses  && bin/sdkmanager --update
    Name: run
    PrependShell: true
  - CmdLine:
    - cd ~/android-sdk-linux/tools  && bin/sdkmanager "platform-tools" "platforms;android-23"
      "platforms;android-24" "platforms;android-25" "platforms;android-26" "platforms;android-27"
    Name: run
    PrependShell: true
  - CmdLine:
    - echo 'export PATH="/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/home/go/gradle/gradle-4.5.1/bin:/home/go/android-sdk-linux/platform-tools:/home/go/android-sdk-linux/tools"'
      >> ~/.profile  && echo 'export ANDROID_HOME="/home/go/android-sdk-linux"' >>
      ~/.profile
    Name: run
    PrependShell: true
  - CmdLine:
    - echo 'export PATH="/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/home/go/gradle/gradle-4.5.1/bin:/home/go/android-sdk-linux/platform-tools:/home/go/android-sdk-linux/tools"'
      >> ~/.bashrc  && echo 'export ANDROID_HOME="/home/go/android-sdk-linux"' >>
      ~/.bashrc
    Name: run
    PrependShell: true
  - Name: user
    User: root
  From:
    Image: gocd/gocd-agent-ubuntu-16.04:v18.6.0
  Name: ""
  Platform: ""
  SourceCode: FROM gocd/gocd-agent-ubuntu-16.04:v18.6.0
