MetaArgs: null
Stages:
- BaseName: centos:7
  Commands:
  - Name: workdir
    Path: /tmp
  - Key: HELM_VERSION
    Name: arg
    Value: v2.14.3
  - Env:
    - Key: HELM_HOME
      Value: /root/.helm
    Name: env
  - CmdLine:
    - yum -y install gunzip wget
    Name: run
    PrependShell: true
  - CmdLine:
    - wget https://get.helm.sh/helm-${HELM_VERSION}-linux-amd64.tar.gz
    Name: run
    PrependShell: true
  - CmdLine:
    - gunzip helm-${HELM_VERSION}-linux-amd64.tar.gz && tar -xvf helm-${HELM_VERSION}-linux-amd64.tar
      && find ./
    Name: run
    PrependShell: true
  - Name: user
    User: root
  - CmdLine:
    - cp linux-amd64/tiller /usr/bin/tiller && chgrp root /usr/bin/tiller && chmod
      750 /usr/bin/tiller &&    cp linux-amd64/helm /usr/bin/helm && chgrp root /usr/bin/helm
      && chmod 750 /usr/bin/helm
    Name: run
    PrependShell: true
  - CmdLine:
    - helm init --client-only && chgrp -R root /root/.helm && chmod -R 770 /root/.helm
    Name: run
    PrependShell: true
  - CmdLine:
    - while true; do echo "loop"; sleep 60; done;
    Name: cmd
    PrependShell: true
  From:
    Image: centos:7
  Name: ""
  Platform: ""
  SourceCode: FROM centos:7
