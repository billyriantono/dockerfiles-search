{
  "MetaArgs": null,
  "Stages": [
    {
      "Name": "",
      "BaseName": "alpine",
      "SourceCode": "FROM alpine",
      "Platform": "",
      "From": {
        "Image": "alpine"
      },
      "Commands": [
        {
          "Chown": "",
          "Name": "add",
          "SourcesAndDest": [
            "dist/",
            "/root/dist/"
          ]
        },
        {
          "CmdLine": [
            "sed -i 's/dl-cdn/dl-2/g' /etc/apk/repositories \u0026\u0026     apk -U --no-cache add             build-base             git             libcap             python2             python2-dev             py2-pip \u0026\u0026     pip install --no-cache-dir virtualenv \u0026\u0026     git clone --depth=1 https://github.com/foospidy/HoneyPy /opt/honeypy \u0026\u0026     cd /opt/honeypy \u0026\u0026     sed -i 's/local_host/dest_ip/g' /opt/honeypy/loggers/file/honeypy_file.py \u0026\u0026     sed -i 's/local_port/dest_port/g' /opt/honeypy/loggers/file/honeypy_file.py \u0026\u0026     sed -i 's/remote_host/src_ip/g' /opt/honeypy/loggers/file/honeypy_file.py \u0026\u0026     sed -i 's/remote_port/src_port/g' /opt/honeypy/loggers/file/honeypy_file.py \u0026\u0026     sed -i 's/service/proto/g' /opt/honeypy/loggers/file/honeypy_file.py \u0026\u0026     sed -i 's/event/event_type/g' /opt/honeypy/loggers/file/honeypy_file.py \u0026\u0026     sed -i 's/bytes/size/g' /opt/honeypy/loggers/file/honeypy_file.py \u0026\u0026     sed -i 's/date_time/timestamp/g' /opt/honeypy/loggers/file/honeypy_file.py \u0026\u0026     sed -i 's/data,/data.decode(\"hex\"),/g' /opt/honeypy/loggers/file/honeypy_file.py \u0026\u0026     virtualenv env \u0026\u0026     cp /root/dist/services.cfg /opt/honeypy/etc \u0026\u0026     cp /root/dist/honeypy.cfg /opt/honeypy/etc \u0026\u0026     /opt/honeypy/env/bin/pip install -r /opt/honeypy/requirements.txt \u0026\u0026     addgroup -g 2000 honeypy \u0026\u0026     adduser -S -H -s /bin/ash -u 2000 -D -g 2000 honeypy \u0026\u0026     chown -R honeypy:honeypy /opt/honeypy \u0026\u0026     setcap cap_net_bind_service=+ep /opt/honeypy/env/bin/python2 \u0026\u0026     apk del --purge build-base                     git                     python2-dev                     py2-pip \u0026\u0026     rm -rf /root/* \u0026\u0026     rm -rf /var/cache/apk/*"
          ],
          "Name": "run",
          "PrependShell": true
        },
        {
          "Name": "user",
          "User": "honeypy:honeypy"
        },
        {
          "Name": "workdir",
          "Path": "/opt/honeypy"
        },
        {
          "CmdLine": [
            "/opt/honeypy/env/bin/python2",
            "/opt/honeypy/Honey.py",
            "-d"
          ],
          "Name": "cmd",
          "PrependShell": false
        }
      ]
    }
  ]
}