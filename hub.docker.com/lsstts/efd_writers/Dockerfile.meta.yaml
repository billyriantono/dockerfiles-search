MetaArgs: null
Stages:
- BaseName: centos:centos7
  Commands:
  - Labels:
    - Key: author
      Value: '"Andres Anania <aanania@lsst.org>"'
    Name: label
  - Env:
    - Key: LSST_KAFKA_BROKERS
      Value: localhost
    Name: env
  - Env:
    - Key: LSST_EFD_HOST
      Value: localhost
    Name: env
  - CmdLine:
    - groupadd lsst
    Name: run
    PrependShell: true
  - CmdLine:
    - useradd -G lsst saluser
    Name: run
    PrependShell: true
  - CmdLine:
    - mkdir -p /opt/lsst
    Name: run
    PrependShell: true
  - CmdLine:
    - mkdir -p /opt/OpenSpliceDDS
    Name: run
    PrependShell: true
  - CmdLine:
    - "yum -y install https://project.lsst.org/ts/lsstrepo/OpenSpliceDDS-6.9.0-1.x86_64.rpm
      \thttps://project.lsst.org/ts/lsstrepo/ts_EFDruntime-3.9.0-690.el7.centos.x86_64.rpm"
    Name: run
    PrependShell: true
  - CmdLine:
    - yum -y install mysql
    Name: run
    PrependShell: true
  - CmdLine:
    - sed -i "s|LD_LIBRARY_PATH=\${SAL_WORK_DIR}/lib:\${SAL_HOME}/lib|LD_LIBRARY_PATH=\${SAL_WORK_DIR}/lib:\${LSST_SDK_INSTALL}/lib
      |g" /opt/lsst/ts_sal/setupEFD.env
    Name: run
    PrependShell: true
  - Env:
    - Key: LD_LIBRARY_PATH
      Value: ${LD_LIBRARY_PATH}:${LSST_SDK_INSTALL}/lib
    Name: env
  - CmdLine:
    - chown -R saluser:lsst /opt/lsst
    Name: run
    PrependShell: true
  - CmdLine:
    - chown -R saluser:lsst /opt/OpenSpliceDDS
    Name: run
    PrependShell: true
  - Name: user
    User: saluser
  From:
    Image: centos:centos7
  Name: ""
  Platform: ""
  SourceCode: FROM centos:centos7
