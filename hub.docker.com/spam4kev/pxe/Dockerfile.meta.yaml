MetaArgs: null
Stages:
- BaseName: centos:latest
  Commands:
  - Maintainer: '"kev" spam4kev@gmail.com'
    Name: maintainer
  - Name: expose
    Ports:
    - 4011/udp
    - "53"
    - 53/tcp
    - "67"
    - 68/udp
    - "69"
    - 69/udp
  - CmdLine:
    - "yum install -y wget \t\t   tftp-server \t\t   iproute \t\t   iptables-services
      \t\t   dnsmasq &&     mkdir /tftpboot"
    Name: run
    PrependShell: true
  - Chown: ""
    From: ""
    Name: copy
    SourcesAndDest:
    - ./pxe-entrypoint.sh
    - /tmp/pxe-entrypoint.sh
  - Chown: ""
    From: ""
    Name: copy
    SourcesAndDest:
    - ./pxe-entrypoint-razor.sh
    - /tmp/pxe-entrypoint-razor.sh
  - CmdLine:
    - chmod +x /tmp/pxe-entrypoint*
    Name: run
    PrependShell: true
  - Name: workdir
    Path: /tftpboot
  - CmdLine:
    - "wget --tries=0 http://10.11.11.59:8150/api/microkernel/bootstrap -O /tftpboot/bootstrap.ipxe
      &&     wget --tries=0 http://boot.ipxe.org/undionly.kpxe &&     chmod +x /tftpboot/*
      &&     dnsmasq  \t\t--dhcp-match=IPXEBOOT,175 \t\t--enable-tftp \t\t--dhcp-range=10.11.11.0,static
      \t        --dhcp-host=c8:60:00:de:ba:76,10.11.11.4 \t\t--tftp-root=/tftpboot
      \t\t--dhcp-boot=net:IPXEBOOT,bootstrap.ipxe \t\t--dhcp-boot=undionly.kpxe \t\t--log-dhcp
      \t\t--no-daemon"
    Name: cmd
    PrependShell: true
  From:
    Image: centos:latest
  Name: ""
  Platform: ""
  SourceCode: FROM centos:latest
