MetaArgs: null
Stages:
- BaseName: mono:latest
  Commands:
  - Labels:
    - Key: maintainer
      Value: '"frostbytes"'
    Name: label
  - Key: SMOD_VERSION
    Name: arg
    Value: 3.5.0
  - Key: MULTIADMIN_VERSION
    Name: arg
    Value: 3.2.1
  - Env:
    - Key: SCPSL_APPID
      Value: "996560"
    - Key: SCPSL_INSTALLDIR
      Value: /opt/scpsl
    - Key: SCPSL_CONFIGDIR
      Value: ${SCPSL_INSTALLDIR}/config
    - Key: SCPSL_PLUGINDIR
      Value: ${SCPSL_INSTALLDIR}/sm_plugins
    - Key: SCPSL_DATADIR
      Value: /home/scpsl/.config/SCP\ Secret\ Laboratory
    - Key: SCPSL_LOGDIR
      Value: ${SCPSL_INSTALLDIR}/logs
    - Key: SMOD_URL
      Value: https://github.com/Grover-c13/Smod2/releases/download/${SMOD_VERSION}
    - Key: MULTIADMIN_URL
      Value: https://github.com/Grover-c13/MultiAdmin/releases/download/${MULTIADMIN_VERSION}
    - Key: STEAMCMD_INSTALLDIR
      Value: /opt/steamcmd
    Name: env
  - CmdLine:
    - set -x
    Name: run
    PrependShell: true
  - CmdLine:
    - apt-get update &&     apt-get install -y --no-install-recommends --no-install-suggests
      lib32stdc++6 lib32gcc1 wget ca-certificates &&     apt-get clean autoclean &&     apt-get
      autoremove -y &&     rm -rf /var/lib/{apt,dpkg,cache,log}/
    Name: run
    PrependShell: true
  - CmdLine:
    - mkdir -p ${STEAMCMD_INSTALLDIR} &&     cd ${STEAMCMD_INSTALLDIR} &&     wget
      -qO- 'https://steamcdn-a.akamaihd.net/client/installer/steamcmd_linux.tar.gz'
      | tar zxf -
    Name: run
    PrependShell: true
  - CmdLine:
    - ${STEAMCMD_INSTALLDIR}/steamcmd.sh       +login anonymous       +force_install_dir
      ${SCPSL_INSTALLDIR}       +app_update ${SCPSL_APPID} -beta linux validate       +quit
    Name: run
    PrependShell: true
  - CmdLine:
    - wget -qO- ${SMOD_URL}/Smod2.dll > ${SCPSL_INSTALLDIR}/SCPSL_Data/Managed/Smod2.dll
      &&     wget -qO- ${SMOD_URL}/Assembly-CSharp.dll > ${SCPSL_INSTALLDIR}/SCPSL_Data/Managed/Assembly-CSharp.dll
    Name: run
    PrependShell: true
  - CmdLine:
    - wget -qO- ${MULTIADMIN_URL}/MultiAdmin.exe > ${SCPSL_INSTALLDIR}/MultiAdmin.exe
    Name: run
    PrependShell: true
  - Chown: ""
    Name: add
    SourcesAndDest:
    - scp_multiadmin.cfg
    - ${SCPSL_INSTALLDIR}/scp_multiadmin.cfg
  - CmdLine:
    - mkdir -p ${SCPSL_CONFIGDIR} &&     mkdir -p ${SCPSL_PLUGINDIR}
    Name: run
    PrependShell: true
  - CmdLine:
    - useradd -m scpsl &&     chown -R scpsl:scpsl ${SCPSL_INSTALLDIR}
    Name: run
    PrependShell: true
  - Name: user
    User: scpsl
  - Name: workdir
    Path: ${SCPSL_INSTALLDIR}
  - Name: volume
    Volumes:
    - ${SCPSL_CONFIGDIR}
  - Name: volume
    Volumes:
    - ${SCPSL_PLUGINDIR}
  - Name: volume
    Volumes:
    - ${SCPSL_INSTALLDIR}
  - Name: volume
    Volumes:
    - ${SCPSL_LOGDIR}
  - Name: expose
    Ports:
    - 7777/tcp
  - Name: expose
    Ports:
    - 7777/udp
  - CmdLine:
    - mono ${SCPSL_INSTALLDIR}/MultiAdmin.exe
    Name: entrypoint
    PrependShell: true
  From:
    Image: mono:latest
  Name: ""
  Platform: ""
  SourceCode: FROM mono:latest
