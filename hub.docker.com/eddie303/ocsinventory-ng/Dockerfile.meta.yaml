MetaArgs: null
Stages:
- BaseName: ubuntu:18.04
  Commands:
  - Maintainer: Eduard Istvan Sas <eduard.istvan.sas@gmail.com>
    Name: maintainer
  - Env:
    - Key: DEBIAN_FRONTEND
      Value: noninteractive
    Name: env
  - Chown: ""
    From: ""
    Name: copy
    SourcesAndDest:
    - respond.txt
    - /tmp/
  - Chown: ""
    From: ""
    Name: copy
    SourcesAndDest:
    - docker-entrypoint.sh
    - /usr/local/bin/
  - CmdLine:
    - rm -f /etc/localtime && ln -s /usr/share/zoneinfo/Europe/Bucharest /etc/localtime  &&
      echo "Europe/Bucharest" > /etc/timezone  && apt-get update  && apt-get -y dist-upgrade  &&
      apt-get install -y make php php-gettext php-mbstring php-curl php-gd php-soap
      apache2 libapache2-mod-php libapache2-mod-perl2 libapache2-mod-perl2-dev php-mysql  mysql-client
      libmojolicious-perl libplack-perl libswitch-perl git && rm -rf /var/www/html/*  &&
      a2enmod rewrite  && a2enmod perl  && a2enmod ssl  && a2ensite default-ssl  &&
      cd /tmp  && git clone https://github.com/OCSInventory-NG/OCSInventory-Server.git
      ocsserver  && git clone https://github.com/OCSInventory-NG/OCSInventory-ocsreports.git
      ocsserver/ocsreports  && cd /tmp/ocsserver  && cat ../respond.txt | ./setup.sh  &&
      apt-get clean  && rm -rf /var/lib/apt/lists/*  && a2enconf z-ocsinventory-server  &&
      a2enconf ocsinventory-reports  && phpenmod curl  && phpenmod gd  && phpenmod
      soap  && cd  && rm -rf /tmp/ocsserver  && rm -rf /tmp/respond.txt  && mkdir  touch
      /usr/share/ocsinventory-reports/ocsreports/vendor  && touch /usr/share/ocsinventory-reports/ocsreports/vendor/autoload.php  &&
      chown -R www-data:www-data /var/lib/ocsinventory-reports/  && chown -R www-data:www-data
      /usr/share/ocsinventory-reports  && echo '<?php header("Location:/ocsreports/index.php");
      ?>' > /var/www/html/index.php  && chmod +x /usr/local/bin/docker-entrypoint.sh
    Name: run
    PrependShell: true
  - Env:
    - Key: APACHE_RUN_USER
      Value: www-data
    Name: env
  - Env:
    - Key: APACHE_RUN_GROUP
      Value: www-data
    Name: env
  - Env:
    - Key: APACHE_LOG_DIR
      Value: /var/log/apache2
    Name: env
  - Env:
    - Key: APACHE_LOCK_DIR
      Value: /var/lock/apache2
    Name: env
  - Env:
    - Key: APACHE_PID_FILE
      Value: /var/run/apache2.pid
    Name: env
  - Name: expose
    Ports:
    - "80"
  - Name: expose
    Ports:
    - "443"
  - CmdLine:
    - /usr/local/bin/docker-entrypoint.sh
    Name: cmd
    PrependShell: false
  From:
    Image: ubuntu:18.04
  Name: ""
  Platform: ""
  SourceCode: FROM ubuntu:18.04
