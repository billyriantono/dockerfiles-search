MetaArgs: null
Stages:
- BaseName: alpine:3.10.3
  Commands:
  - Labels:
    - Key: maintainer
      Value: '"kalaksi@users.noreply.github.com"'
    Name: label
  - Env:
    - Key: DISABLE_VIA_HEADER
      Value: '""'
    Name: env
  - Env:
    - Key: STAT_HOST
      Value: '""'
    Name: env
  - Env:
    - Key: MAX_CLIENTS
      Value: '""'
    Name: env
  - Env:
    - Key: MIN_SPARE_SERVERS
      Value: '""'
    Name: env
  - Env:
    - Key: MAX_SPARE_SERVERS
      Value: '""'
    Name: env
  - Env:
    - Key: ALLOWED_NETWORKS
      Value: '""'
    Name: env
  - Env:
    - Key: TINYPROXY_UID
      Value: "57981"
    Name: env
  - Env:
    - Key: TINYPROXY_GID
      Value: "57981"
    Name: env
  - CmdLine:
    - apk add --no-cache       tinyproxy
    Name: run
    PrependShell: true
  - CmdLine:
    - mv /etc/tinyproxy/tinyproxy.conf /etc/tinyproxy/tinyproxy.default.conf &&     chown
      -R ${TINYPROXY_UID}:${TINYPROXY_GID} /etc/tinyproxy /var/run/tinyproxy /var/log/tinyproxy
    Name: run
    PrependShell: true
  - Name: expose
    Ports:
    - "8888"
  - Name: user
    User: ${TINYPROXY_UID}:${TINYPROXY_GID}
  - CmdLine:
    - set -eu;     CONFIG='/etc/tinyproxy/tinyproxy.conf';     if [ ! -f "$CONFIG"  ];
      then         cp /etc/tinyproxy/tinyproxy.default.conf "$CONFIG";         ([
      -z "$DISABLE_VIA_HEADER" ] || sed -i "s|^#DisableViaHeader .*|DisableViaHeader
      Yes|" "$CONFIG");         ([ -z "$STAT_HOST" ]          || sed -i "s|^#StatHost
      .*|StatHost \"${STAT_HOST}\"|" "$CONFIG");         ([ -z "$MIN_SPARE_SERVERS"
      ]  || sed -i "s|^MinSpareServers .*|MinSpareServers $MIN_SPARE_SERVERS|" "$CONFIG");         ([
      -z "$MIN_SPARE_SERVERS" ]  || sed -i "s|^StartServers .*|StartServers $MIN_SPARE_SERVERS|"
      "$CONFIG");         ([ -z "$MAX_SPARE_SERVERS" ]  || sed -i "s|^MaxSpareServers
      .*|MaxSpareServers $MAX_SPARE_SERVERS|" "$CONFIG");         ([ -z "$ALLOWED_NETWORKS"
      ]   || for network in $ALLOWED_NETWORKS; do echo "Allow $network" >> "$CONFIG";
      done);         sed -i 's|^LogFile |# LogFile |' "$CONFIG";     fi;     exec
      /usr/bin/tinyproxy -d;
    Name: cmd
    PrependShell: true
  From:
    Image: alpine:3.10.3
  Name: ""
  Platform: ""
  SourceCode: FROM alpine:3.10.3
