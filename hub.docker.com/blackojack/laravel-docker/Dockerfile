FROM alpine

MAINTAINER Raenko Ivan <admin@sysadminsk.ru>
ENV LANG=ru_RU.UTF-8
ENV LANGUAGE=ru_RU.UTF-8
ENV LC_CTYPE=ru_RU.UTF-8
ENV LC_ALL=ru_RU.UTF-8
ENV TZ="Asia/Novosibirsk"
ENV PHP_FPM_LISTEN_MODE="0660"
ENV PHP_MEMORY_LIMIT="1024M"
ENV PHP_MAX_EXECUTION_TIME="3600"
ENV PHP_DEFAULT_SOCKET_TIMEOUT="3600"
ENV PHP_MAX_INPUT_VARS="2500"
ENV PHP_MAX_UPLOAD="50M"
ENV PHP_MAX_FILE_UPLOAD="200"
ENV PHP_MAX_POST="100M"
ENV PHP_DISPLAY_ERRORS="Off"
ENV PHP_DISPLAY_STARTUP_ERRORS="On"
ENV PHP_ERROR_REPORTING="E_COMPILE_ERROR\|E_RECOVERABLE_ERROR\|E_ERROR\|E_CORE_ERROR"
ENV PHP_CGI_FIX_PATHINFO=0
ENV USER="developer"
ENV GROUP="developer"
ENV USER_PASSWORD="developer2018"

COPY root /

RUN /var/scripts/install.sh

VOLUME ["/var/redis/data"]
VOLUME ["/www"]

EXPOSE 22
EXPOSE 80
EXPOSE 6379
EXPOSE 9000
EXPOSE 3306

ENTRYPOINT ["/var/scripts/start.sh"]