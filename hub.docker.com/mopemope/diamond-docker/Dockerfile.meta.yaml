MetaArgs: null
Stages:
- BaseName: ubuntu:14.04
  Commands:
  - Maintainer: mopemope yutaka.matsubara@gmail.com
    Name: maintainer
  - Env:
    - Key: DEBIAN_FRONTEND
      Value: noninteractive
    Name: env
  - CmdLine:
    - dpkg-divert --local --rename --add /sbin/initctl && rm -f /sbin/initctl && ln
      -s /bin/true /sbin/initctl
    Name: run
    PrependShell: true
  - CmdLine:
    - apt-get -yq update
    Name: run
    PrependShell: true
  - CmdLine:
    - chmod go+w,u+s /tmp
    Name: run
    PrependShell: true
  - CmdLine:
    - apt-get -qy upgrade && apt-get -y install build-essential git python-pip python-all-dev
      && apt-get clean
    Name: run
    PrependShell: true
  - CmdLine:
    - /bin/echo -e "LANG=\"ja_JP.UTF-8\"" > /etc/default/local  && echo "Asia/Tokyo"
      > /etc/timezone  && dpkg-reconfigure -f noninteractive tzdata
    Name: run
    PrependShell: true
  - CmdLine:
    - pip install git+https://github.com/BrightcoveOS/Diamond.git psutil docker-py
    Name: run
    PrependShell: true
  - CmdLine:
    - mkdir -p /diamond/storage
    Name: run
    PrependShell: true
  - Chown: ""
    Name: add
    SourcesAndDest:
    - ./conf
    - /diamond/
  - Chown: ""
    Name: add
    SourcesAndDest:
    - ./run_diamond
    - /diamond/
  - CmdLine:
    - chmod +x /diamond/run_diamond
    Name: run
    PrependShell: true
  - CmdLine:
    - /diamond/run_diamond
    Name: entrypoint
    PrependShell: false
  From:
    Image: ubuntu:14.04
  Name: ""
  Platform: ""
  SourceCode: FROM ubuntu:14.04
