MetaArgs: null
Stages:
- BaseName: ubuntu:14.04
  Commands:
  - Maintainer: Zod (@wzod)
    Name: maintainer
  - Env:
    - Key: DEBIAN_FRONTEND
      Value: noninteractive
    Name: env
  - Name: user
    User: root
  - CmdLine:
    - apt-get update &&   apt-get -y install software-properties-common &&   apt-add-repository
      -y multiverse &&   apt-get -qq update && apt-get install -y   automake   build-essential   git   jq   libfuzzy-dev   libimage-exiftool-perl   liblzma5   libssl-dev   libtool   libzmq3   make   python-cffi   python-dev   python-gevent   python-ipy   python-m2crypto   python-pexpect   python-pip   python-progressbar   python-pyclamd   python-zmq   unrar   unzip   wget
      &&   pip install --upgrade setuptools
    Name: run
    PrependShell: true
  - CmdLine:
    - cd /tmp &&   wget -O yara.v3.5.0.tar.gz "https://github.com/VirusTotal/yara/archive/v3.5.0.tar.gz"
      &&   echo 4bc72ee755db85747f7e856afb0e817b788a280ab5e73dee42f159171a9b5299\
      \ yara.v3.5.0.tar.gz > sha256sum-yara &&   sha256sum -c sha256sum-yara &&   tar
      vxzf yara.v3.5.0.tar.gz &&   cd yara-3.5.0/ &&   ./bootstrap.sh &&   ./configure
      &&   make &&   make install &&   cd /tmp &&   git clone --recursive https://github.com/VirusTotal/yara-python
      &&   cd yara-python/ &&   python setup.py build &&   python setup.py install
      &&   cd /tmp &&   wget -O pyexiftool-master.zip https://github.com/smarnach/pyexiftool/archive/master.zip
      &&   echo c243efbd226ad00333d03d16a39dc08ceb2ad277bd21b5247a2821156097debd\
      \ pyexiftool-master.zip > sha256sum-pyexiftool &&   sha256sum -c sha256sum-pyexiftool
      &&   unzip pyexiftool-master.zip &&   cd pyexiftool-master/ &&   python setup.py
      build &&   python setup.py install &&   cd /tmp &&   wget -O pefile-1.2.10-139.tar.gz
      "https://github.com/erocarrera/pefile/archive/pefile-1.2.10-139.tar.gz" &&   echo
      3297cb72e6a51befefc3d9b27ec7690b743ee826538629ecf68f4eee64f331ab\ \ pefile-1.2.10-139.tar.gz
      > sha256sum-pefile &&   sha256sum -c sha256sum-pefile &&   tar vxzf pefile-1.2.10-139.tar.gz
      &&   cd pefile-pefile-1.2.10-139/ &&   sed -i s/1\.2\.10.*/1\.2\.10\.139\'/
      pefile.py &&   python setup.py build &&   python setup.py install &&   cd /tmp
      &&   wget -O jq "https://github.com/stedolan/jq/releases/download/jq-1.5/jq-linux64"
      &&   echo c6b3a7d7d3e7b70c6f51b706a3b90bd01833846c54d32ca32f0027f00226ff6d\
      \ jq > sha256sum-jq &&   sha256sum -c sha256sum-jq &&   chmod 755 jq &&   mv
      jq /usr/local/bin/
    Name: run
    PrependShell: true
  - CmdLine:
    - cd /tmp &&   pip install fluent-logger   future   interruptingcow   javatools   msgpack-python   olefile   pylzma   py-unrar2   ssdeep
    Name: run
    PrependShell: true
  - CmdLine:
    - groupadd -r nonroot &&   useradd -r -g nonroot -d /home/nonroot -s /sbin/nologin
      -c "Nonroot User" nonroot &&   mkdir /home/nonroot &&   chown -R nonroot:nonroot
      /home/nonroot
    Name: run
    PrependShell: true
  - Name: user
    User: nonroot
  - CmdLine:
    - cd /home/nonroot &&   git clone https://github.com/lmco/laikaboss.git
    Name: run
    PrependShell: true
  - Name: user
    User: root
  - CmdLine:
    - cd /home/nonroot/laikaboss/ &&   python setup.py build &&   python setup.py
      install
    Name: run
    PrependShell: true
  - CmdLine:
    - ldconfig &&   apt-get remove -y --purge automake build-essential libtool &&   apt-get
      autoremove -y --purge &&   apt-get clean -y &&   rm -rf /var/lib/apt/lists/*
    Name: run
    PrependShell: true
  - Name: user
    User: nonroot
  - Env:
    - Key: HOME
      Value: /home/nonroot
    Name: env
  - Env:
    - Key: USER
      Value: nonroot
    Name: env
  - Name: workdir
    Path: /home/nonroot/workdir
  - CmdLine:
    - echo "To run the standalone scanner, execute laika.py against a file like so:"
      && printf "\n""laika.py <filename> | jq -C . | less -r" && printf "\n\n""To
      run the networked instance, first execute laikad.py and use cloudscan against
      like so:" && printf "\n\n""laikad.py &" && printf "\n\n""cloudscan.py <filename>
      | jq -C . | less -r" && printf "\n\n" && /bin/bash
    Name: entrypoint
    PrependShell: true
  From:
    Image: ubuntu:14.04
  Name: ""
  Platform: ""
  SourceCode: FROM ubuntu:14.04
