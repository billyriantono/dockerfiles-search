MetaArgs: null
Stages:
- BaseName: debian:stretch-slim
  Commands:
  - Labels:
    - Key: name
      Value: '"chrome-headless"'
    Name: label
  - CmdLine:
    - apt-get update && apt-get install -y apt-transport-https ca-certificates curl
      gnupg --no-install-recommends && curl -sSL https://dl.google.com/linux/linux_signing_key.pub
      | apt-key add - && echo "deb https://dl.google.com/linux/chrome/deb/ stable
      main" > /etc/apt/sources.list.d/google-chrome.list && apt-get update && apt-get
      install -y google-chrome-stable fontconfig fonts-ipafont-gothic fonts-wqy-zenhei
      fonts-thai-tlwg fonts-kacst fonts-symbola fonts-noto ttf-freefont --no-install-recommends
      && apt-get purge --auto-remove -y curl gnupg && rm -rf /var/lib/apt/lists/*
    Name: run
    PrependShell: true
  - CmdLine:
    - groupadd -r chrome && useradd -r -g chrome -G audio,video chrome && mkdir -p
      /home/chrome && chown -R chrome:chrome /home/chrome && mkdir -p /opt/google/chrome
      && chown -R chrome:chrome /opt/google/chrome
    Name: run
    PrependShell: true
  - Chown: ""
    From: ""
    Name: copy
    SourcesAndDest:
    - docker-entrypoint.sh
    - /bin/docker-entrypoint.sh
  - CmdLine:
    - chmod +x /bin/docker-entrypoint.sh
    Name: run
    PrependShell: true
  - Name: user
    User: chrome
  - Env:
    - Key: URL
      Value: '"about:blank"'
    Name: env
  - Env:
    - Key: WINDOW_SIZE
      Value: '"1280,1696"'
    Name: env
  - Env:
    - Key: SHM_SIZE
      Value: '"1024m"'
    Name: env
  - Env:
    - Key: LOG_LEVEL
      Value: "1"
    Name: env
  - Env:
    - Key: USER_AGENT
      Value: '"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML,
        like Gecko) Chrome/71.0.3578.98 Safari/537.36"'
    Name: env
  - Name: expose
    Ports:
    - "9222"
  - CmdLine:
    - docker-entrypoint.sh
    Name: entrypoint
    PrependShell: false
  From:
    Image: debian:stretch-slim
  Name: ""
  Platform: ""
  SourceCode: FROM debian:stretch-slim
