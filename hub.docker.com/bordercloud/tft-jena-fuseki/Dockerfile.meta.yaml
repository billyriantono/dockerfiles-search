MetaArgs: null
Stages:
- BaseName: centos/systemd
  Commands:
  - Maintainer: '"Karima Rafes" <karima.rafes@gmail.com>'
    Name: maintainer
  - CmdLine:
    - yum -y update; yum clean all;
    Name: run
    PrependShell: true
  - CmdLine:
    - "rpm --force -Uvh https://dl.fedoraproject.org/pub/epel/epel-release-latest-7.noarch.rpm
      \    && rpm --force -Uvh https://mirror.webtatic.com/yum/el7/webtatic-release.rpm
      \    && rpm --rebuilddb     &&  yum -y groupinstall \"Development Tools\" \t&&
      yum install -y openssl openssl-devel readline-devel wget mail                 net-tools
      git \t&& rm -rf /var/cache/yum/* \t&& yum clean all"
    Name: run
    PrependShell: true
  - CmdLine:
    - "yum install -y python-docutils automake autoconf libtool ncurses-devel libxslt
      groff pcre-devel pkgconfig     && cd /tmp \t&& wget https://packagecloud.io/install/repositories/varnishcache/varnish60/script.rpm.sh
      \    && chmod +x ./script.rpm.sh     && ./script.rpm.sh     && yum install -y
      varnish varnish-devel \t&& yum clean all"
    Name: run
    PrependShell: true
  - CmdLine:
    - "cd /tmp \t&& git clone https://github.com/varnish/varnish-modules.git     &&
      cd varnish-modules     && ./bootstrap      && ./configure     && make     &&
      make install"
    Name: run
    PrependShell: true
  - Chown: ""
    From: ""
    Name: copy
    SourcesAndDest:
    - varnish.params
    - /etc/varnish/varnish.params
  - CmdLine:
    - yum install -y java  && yum clean all
    Name: run
    PrependShell: true
  - CmdLine:
    - cd /tmp   && wget -q --timeout=600 http://www-eu.apache.org/dist/jena/binaries/apache-jena-fuseki-3.8.0.tar.gz   &&
      tar xzvf *.tar.gz   &&  mv /tmp/apache-jena-fuseki-3.8.0  /opt
    Name: run
    PrependShell: true
  - Chown: ""
    From: ""
    Name: copy
    SourcesAndDest:
    - fuseki-config.ttl
    - /opt/apache-jena-fuseki-3.8.0
  - Chown: ""
    From: ""
    Name: copy
    SourcesAndDest:
    - log4j.properties
    - /opt/apache-jena-fuseki-3.8.0
  - Chown: ""
    From: ""
    Name: copy
    SourcesAndDest:
    - load.sh
    - /opt/apache-jena-fuseki-3.8.0
  - Chown: ""
    From: ""
    Name: copy
    SourcesAndDest:
    - jena.service
    - /etc/systemd/system
  - CmdLine:
    - mkdir /opt/apache-jena-fuseki-3.8.0/run
    Name: run
    PrependShell: true
  - Chown: ""
    From: ""
    Name: copy
    SourcesAndDest:
    - shiro.ini
    - /opt/apache-jena-fuseki-3.8.0/run
  - CmdLine:
    - chmod +x /opt/apache-jena-fuseki-3.8.0/load.sh
    Name: run
    PrependShell: true
  - Chown: ""
    From: ""
    Name: copy
    SourcesAndDest:
    - default.vcl
    - /etc/varnish/default.vcl
  - CmdLine:
    - systemctl enable jena
    Name: run
    PrependShell: true
  - CmdLine:
    - systemctl enable varnish
    Name: run
    PrependShell: true
  - Name: expose
    Ports:
    - "80"
  - Name: expose
    Ports:
    - "8080"
  - CmdLine:
    - /usr/sbin/init
    Name: cmd
    PrependShell: false
  From:
    Image: centos/systemd
  Name: ""
  Platform: ""
  SourceCode: FROM centos/systemd
