MetaArgs: null
Stages:
- BaseName: ubuntu:16.04
  Commands:
  - CmdLine:
    - apt-get update
    Name: run
    PrependShell: true
  - Key: DEBIAN_FRONTEND
    Name: arg
    Value: noninteractive
  - CmdLine:
    - apt-get -y install python-software-properties
    Name: run
    PrependShell: true
  - CmdLine:
    - apt-get -y install software-properties-common
    Name: run
    PrependShell: true
  - CmdLine:
    - apt-get -y install curl gnupg2 git
    Name: run
    PrependShell: true
  - CmdLine:
    - add-apt-repository ppa:openjdk-r/ppa
    Name: run
    PrependShell: true
  - CmdLine:
    - apt-get update
    Name: run
    PrependShell: true
  - CmdLine:
    - curl -sL https://deb.nodesource.com/setup_8.x | bash
    Name: run
    PrependShell: true
  - CmdLine:
    - apt-get -y install nodejs
    Name: run
    PrependShell: true
  - CmdLine:
    - sed -i "s/^exit 101$/exit 0/" /usr/sbin/policy-rc.d
    Name: run
    PrependShell: true
  - CmdLine:
    - apt-get -y install redis-server
    Name: run
    PrependShell: true
  - CmdLine:
    - apt-get -y install openjdk-8-jre
    Name: run
    PrependShell: true
  - CmdLine:
    - apt-get -y install wget
    Name: run
    PrependShell: true
  - CmdLine:
    - wget -O - https://debian.neo4j.org/neotechnology.gpg.key | apt-key add -
    Name: run
    PrependShell: true
  - CmdLine:
    - echo 'deb https://debian.neo4j.org/repo stable/' | tee /etc/apt/sources.list.d/neo4j.list
    Name: run
    PrependShell: true
  - CmdLine:
    - apt-get update
    Name: run
    PrependShell: true
  - CmdLine:
    - apt-get -y install neo4j
    Name: run
    PrependShell: true
  - CmdLine:
    - usr/bin/neo4j-admin set-initial-password neo
    Name: run
    PrependShell: true
  - CmdLine:
    - apt-key adv --keyserver keyserver.ubuntu.com --recv-keys E298A3A825C0D65DFD57CBB651716619E084DAB9
    Name: run
    PrependShell: true
  - CmdLine:
    - add-apt-repository 'deb [arch=amd64,i386] https://cran.rstudio.com/bin/linux/ubuntu
      xenial/'
    Name: run
    PrependShell: true
  - CmdLine:
    - apt-get update
    Name: run
    PrependShell: true
  - CmdLine:
    - apt-get -y install r-base
    Name: run
    PrependShell: true
  - CmdLine:
    - apt-get -y install r-base-dev
    Name: run
    PrependShell: true
  - CmdLine:
    - apt-get -y install build-essential libcurl4-gnutls-dev libxml2-dev libssl-dev
    Name: run
    PrependShell: true
  - CmdLine:
    - R -e "install.packages('devtools', repos='http://cran.rstudio.com/')"
    Name: run
    PrependShell: true
  - CmdLine:
    - R -e "install.packages('rjson', repos = 'http://cran.rstudio.com/')"
    Name: run
    PrependShell: true
  - CmdLine:
    - R -e "install.packages('shiny', repos = 'http://cran.rstudio.com/')"
    Name: run
    PrependShell: true
  - CmdLine:
    - R -e "devtools::install_github('ropensci/plotly')"
    Name: run
    PrependShell: true
  - CmdLine:
    - R -e "devtools::install_github('nicolewhite/RNeo4j')"
    Name: run
    PrependShell: true
  - CmdLine:
    - apt-get -y install gdebi-core
    Name: run
    PrependShell: true
  - CmdLine:
    - wget https://download3.rstudio.org/ubuntu-12.04/x86_64/shiny-server-1.5.3.838-amd64.deb
    Name: run
    PrependShell: true
  - CmdLine:
    - dpkg -i shiny-server-1.5.3.838-amd64.deb
    Name: run
    PrependShell: true
  - Chown: ""
    Name: add
    SourcesAndDest:
    - ./config/shiny-server.conf
    - /etc/shiny-server/shiny-server.conf
  - Chown: ""
    Name: add
    SourcesAndDest:
    - ./
    - ./code
  - CmdLine:
    - chown -R neo4j:adm /var/lib/neo4j
    Name: run
    PrependShell: true
  - CmdLine:
    - chown shiny.shiny /
    Name: run
    PrependShell: true
  - CmdLine:
    - npm --prefix ./code install ./code
    Name: run
    PrependShell: true
  - CmdLine:
    - chmod
    - +x
    - ./code/bin/initialize.sh
    Name: run
    PrependShell: false
  - CmdLine:
    - /code/bin/initialize.sh
    Name: entrypoint
    PrependShell: false
  - Name: expose
    Ports:
    - "8000"
  - Name: expose
    Ports:
    - "4000"
  From:
    Image: ubuntu:16.04
  Name: ""
  Platform: ""
  SourceCode: FROM ubuntu:16.04
