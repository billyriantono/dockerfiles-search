MetaArgs: null
Stages:
- BaseName: ansibleplaybookbundle/apb-base:canary
  Commands:
  - Labels:
    - Key: '"com.redhat.apb.spec"'
      Value: '"dmVyc2lvbjogMS4wCm5hbWU6IHRvd2VyLWFwYgpkZXNjcmlwdGlvbjogQVdYIEFQQiBJbXBsZW1lbnRhdGlvbgpiaW5kYWJsZTogRmFsc2UKYXN5bmM6IG9wdGlvbmFsCm1ldGFkYXRhOgogIGRpc3BsYXlOYW1lOiBBbnNpYmxlIFRvd2VyIChBUEIpCiAgbG9uZ0Rlc2NyaXB0aW9uOiBBbiBBUEIgdGhhdCBkZXBsb3lzIEFXWCAoVXBzdHJlYW0gQW5zaWJsZSBUb3dlcikKICBkb2N1bWVudGF0aW9uVXJsOiBodHRwczovL2RvY3MuYW5zaWJsZS5jb20vYW5zaWJsZS10b3dlci8KcGxhbnM6CiAgLSBuYW1lOiBhbGwtaW4tb25lCiAgICBkZXNjcmlwdGlvbjogQW4gQVBCIHRoYXQgZGVwbG95cyBBV1ggYW5kIHBvc3RncmVzcWwgdG9nZXRoZXIKICAgIGZyZWU6IFRydWUKICAgIG1ldGFkYXRhOgogICAgICBkaXNwbGF5TmFtZTogQWxsLWluLW9uZQogICAgICBsb25nRGVzY3JpcHRpb246IFRoaXMgcGxhbiBkZXBsb3lzIGEgc2luZ2xlIEFXWCBpbnN0YW5jZSB3aXRoIGEgcG9zdGdyZXNxbCBiYWNrZW5kCiAgICAgIGNvc3Q6ICQwLjAwCiAgICBwYXJhbWV0ZXJzOgogICAgICAtIG5hbWU6IHJlY29tbWVuZGVkX3Jlc291cmNlcwogICAgICAgIHRpdGxlOiBVc2UgdGhlIHJlY29tbWVuZGVkIG1pbmltdW0gcmVzb3VyY2UgcmVxdWlyZW1lbnRzCiAgICAgICAgZGVzY3JpcHRpb246IElmIHRydWUsIHdpbGwgcmVxdWlyZSBtaW5pbXVtIHJlY29tbWVuZGVkIHJlc291cmNlcyBmb3IgVG93ZXIgY29udGFpbmVycwogICAgICAgIGRlZmF1bHQ6IHRydWUKICAgICAgICByZXF1aXJlZDogZmFsc2UKICAgICAgICB0eXBlOiBib29sCiAgICAgIC0gbmFtZTogYXd4X3Bvc3RncmVzcWxfZW1wdHlkaXIKICAgICAgICB0aXRsZTogUG9zdGdyZVNRTCBFbXB0eURpcgogICAgICAgIGRlc2NyaXB0aW9uOiBVc2UgYW4gRW10cHlEaXIgdG8gYmFjayBQb3N0Z3JlU1FMIChub3QgcmVjb21tZW5kZWQgZm9yIHByb2R1Y3Rpb24pCiAgICAgICAgZGVmYXVsdDogZmFsc2UKICAgICAgICByZXF1aXJlZDogZmFsc2UKICAgICAgICB0eXBlOiBib29sCiAgICAgIC0gbmFtZTogYXd4X2ltYWdlX29yZwogICAgICAgIHRpdGxlOiBBV1ggaW1hZ2Ugb3JnYW5pemF0aW9uCiAgICAgICAgZGVzY3JpcHRpb246IHRoZSBvcmdhbml6YXRpb24gdG8gcHVsbCBpbWFnZXMgZnJvbQogICAgICAgIGRlZmF1bHQ6IGFuc2libGUKICAgICAgICB0eXBlOiBzdHJpbmcKICAgICAgICByZXF1aXJlZDogZmFsc2UKICAgICAgLSBuYW1lOiBhd3hfaW1hZ2VfdGFnCiAgICAgICAgdGl0bGU6IEFXWCBpbWFnZSB0YWcKICAgICAgICBkZXNjcmlwdGlvbjogdGhlIGltYWdlIHRhZyB0byBwdWxsCiAgICAgICAgZGVmYXVsdDogbGF0ZXN0CiAgICAgICAgdHlwZTogc3RyaW5nCiAgICAgICAgcmVxdWlyZWQ6IGZhbHNlCiAgICAgIC0gbmFtZTogYXd4X3Bvc3RncmVzcWxfdm9sdW1lX2NhcGFjaXR5CiAgICAgICAgdGl0bGU6IFBvc3RncmVTUUwgdm9sdW1lIGNhcGFjaXR5CiAgICAgICAgZGVzY3JpcHRpb246IHRoZSBzaXplIG9mIHRoZSBwZXJzaXN0ZW50IHZvbHVtZSBiYWNraW5nIFBvc3RncmVTUUwgKGluIEdCKQogICAgICAgIGRlZmF1bHQ6IDUKICAgICAgICB0eXBlOiBzdHJpbmcKICAgICAgICByZXF1aXJlZDogZmFsc2UKICAgICAgLSBuYW1lOiBhd3hfYWRtaW5fcGFzc3dvcmQKICAgICAgICB0aXRsZTogQVdYIEFkbWluIFBhc3N3b3JkCiAgICAgICAgZGVzY3JpcHRpb246IFRoZSBwYXNzd29yZCBmb3IgYWRtaW4gdXNlcgogICAgICAgIGRlZmF1bHQ6IHBhc3N3b3JkCiAgICAgICAgcmVxdWlyZWQ6IGZhbHNlCiAgICAgIC0gbmFtZTogaW5zZWN1cmUKICAgICAgICB0aXRsZTogU2tpcCBPcGVuU2hpZnQgVExTIHZlcmlmeQogICAgICAgIGRlc2NyaXB0aW9uOiBza2lwIFRMUyB2ZXJpZnkgd2hlbiBtYWtpbmcgT3BlblNoaWZ0IEFQSSByZXF1ZXN0cwogICAgICAgIGRlZmF1bHQ6IGZhbHNlCiAgICAgICAgcmVxdWlyZWQ6IGZhbHNlCgogIC0gbmFtZTogZXh0ZXJuYWwtcGcKICAgIGRlc2NyaXB0aW9uOiBBV1ggd2l0aCBhbiBleHRlcm5hbCBkYXRhYmFzZQogICAgZnJlZTogVHJ1ZQogICAgbWV0YWRhdGE6CiAgICAgIGRpc3BsYXlOYW1lOiBFeHRlcm5hbAogICAgICBsb25nRGVzY3JpcHRpb246IFRoaXMgcGxhbiBkZXBsb3lzIGEgc2luZ2xlIEFXWCBpbnN0YW5jZSB1c2luZyBhbiBleHRlcm5hbCBQb3N0Z3JlU1FMIGJhY2tlbmQKICAgICAgY29zdDogJDAuMDAKICAgIHBhcmFtZXRlcnM6CiAgICAgIC0gbmFtZTogcmVjb21tZW5kZWRfcmVzb3VyY2VzCiAgICAgICAgdGl0bGU6IFVzZSB0aGUgcmVjb21tZW5kZWQgbWluaW11bSByZXNvdXJjZSByZXF1aXJlbWVudHMKICAgICAgICBkZXNjcmlwdGlvbjogSWYgdHJ1ZSwgd2lsbCByZXF1aXJlIG1pbmltdW0gcmVjb21tZW5kZWQgcmVzb3VyY2VzIGZvciBUb3dlciBjb250YWluZXJzCiAgICAgICAgZGVmYXVsdDogdHJ1ZQogICAgICAgIHJlcXVpcmVkOiBmYWxzZQogICAgICAgIHR5cGU6IGJvb2wKICAgICAgLSBuYW1lOiBhd3hfYWRtaW5fcGFzc3dvcmQKICAgICAgICB0aXRsZTogQVdYIEFkbWluIFBhc3N3b3JkCiAgICAgICAgZGVzY3JpcHRpb246IFRoZSBwYXNzd29yZCBmb3IgYWRtaW4gdXNlcgogICAgICAgIGRlZmF1bHQ6IHBhc3N3b3JkCiAgICAgICAgcmVxdWlyZWQ6IGZhbHNlCiAgICAgIC0gbmFtZTogYXd4X2ltYWdlX29yZwogICAgICAgIHRpdGxlOiBBV1ggaW1hZ2Ugb3JnYW5pemF0aW9uCiAgICAgICAgZGVzY3JpcHRpb246IHRoZSBvcmdhbml6YXRpb24gdG8gcHVsbCBpbWFnZXMgZnJvbQogICAgICAgIGRlZmF1bHQ6IGFuc2libGUKICAgICAgICB0eXBlOiBzdHJpbmcKICAgICAgICByZXF1aXJlZDogZmFsc2UKICAgICAgLSBuYW1lOiBhd3hfaW1hZ2VfdGFnCiAgICAgICAgdGl0bGU6IEFXWCBpbWFnZSB0YWcKICAgICAgICBkZXNjcmlwdGlvbjogdGhlIGltYWdlIHRhZyB0byBwdWxsCiAgICAgICAgZGVmYXVsdDogbGF0ZXN0CiAgICAgICAgdHlwZTogc3RyaW5nCiAgICAgICAgcmVxdWlyZWQ6IGZhbHNlCiAgICAgIC0gbmFtZTogYXd4X3Bvc3RncmVzcWxfaG9zdG5hbWUKICAgICAgICB0aXRsZTogUG9zdGdyZVNRTCBob3N0bmFtZQogICAgICAgIGRlc2NyaXB0aW9uOiB0aGUgaG9zdG5hbWUgb2YgdGhlIFBvc3RncmVTUUwgZGF0YWJhc2UKICAgICAgICB0eXBlOiBzdHJpbmcKICAgICAgICByZXF1aXJlZDogdHJ1ZQogICAgICAtIG5hbWU6IGF3eF9wb3N0Z3Jlc3FsX2RibmFtZQogICAgICAgIHRpdGxlOiBQb3N0Z3JlU1FMIGRhdGFiYXNlIG5hbWUKICAgICAgICBkZXNjcmlwdGlvbjogdGhlIG5hbWUgb2YgdGhlIFBvc3RncmVTUUwgZGF0YWJhc2UKICAgICAgICB0eXBlOiBzdHJpbmcKICAgICAgICByZXF1aXJlZDogdHJ1ZQogICAgICAtIG5hbWU6IGF3eF9wb3N0Z3Jlc3FsX3VzZXIKICAgICAgICB0aXRsZTogUG9zdGdyZVNRTCB1c2VyIG5hbWUKICAgICAgICBkZXNjcmlwdGlvbjogdGhlIG5hbWUgb2YgdGhlIFBvc3RncmVTUUwgdXNlcgogICAgICAgIHR5cGU6IHN0cmluZwogICAgICAgIHJlcXVpcmVkOiB0cnVlCiAgICAgIC0gbmFtZTogYXd4X3Bvc3RncmVzcWxfcGFzc3dvcmQKICAgICAgICB0aXRsZTogUG9zdGdyZVNRTCBwYXNzd29yZAogICAgICAgIGRlc2NyaXB0aW9uOiB0aGUgcGFzc3dvcmQgdG8gdGhlIFBvc3RncmVTUUwgZGF0YWJhc2UKICAgICAgICB0eXBlOiBzdHJpbmcKICAgICAgICByZXF1aXJlZDogdHJ1ZQogICAgICAtIG5hbWU6IGF3eF9wb3N0Z3Jlc3FsX3BvcnQKICAgICAgICB0aXRsZTogUG9zdGdyZVNRTCBwb3J0CiAgICAgICAgZGVzY3JpcHRpb246IHRoZSBwb3J0IHRoZSBQb3N0Z3JlU1FMIGRhdGFiYXNlIGlzIGxpc3RlbmluZyBvbgogICAgICAgIGRlZmF1bHQ6IDU0MzIKICAgICAgICB0eXBlOiBzdHJpbmcKICAgICAgICByZXF1aXJlZDogZmFsc2UKICAgICAgLSBuYW1lOiBpbnNlY3VyZQogICAgICAgIHRpdGxlOiBTa2lwIE9wZW5TaGlmdCBUTFMgdmVyaWZ5CiAgICAgICAgZGVzY3JpcHRpb246IHNraXAgVExTIHZlcmlmeSB3aGVuIG1ha2luZyBPcGVuU2hpZnQgQVBJIHJlcXVlc3RzCiAgICAgICAgZGVmYXVsdDogZmFsc2UKICAgICAgICByZXF1aXJlZDogZmFsc2UKCiAgLSBuYW1lOiBiaW5kLXBnCiAgICBkZXNjcmlwdGlvbjogQVdYIHdpdGggYmluZCBjcmVkZW50aWFscwogICAgZnJlZTogVHJ1ZQogICAgbWV0YWRhdGE6CiAgICAgIGRpc3BsYXlOYW1lOiBCaW5kCiAgICAgIGxvbmdEZXNjcmlwdGlvbjogVGhpcyBwbGFuIGRlcGxveXMgYSBzaW5nbGUgQVdYIGluc3RhbmNlIHVzaW5nIGJpbmQgY3JlZGVudGlhbHMgZnJvbSBhIHByb3Zpc2lvbmVkIFBvc3RncmVTUUwgaW5zdGFuY2UKICAgICAgY29zdDogJDAuMDAKICAgIHBhcmFtZXRlcnM6CiAgICAgIC0gbmFtZTogcmVjb21tZW5kZWRfcmVzb3VyY2VzCiAgICAgICAgdGl0bGU6IFVzZSB0aGUgcmVjb21tZW5kZWQgbWluaW11bSByZXNvdXJjZSByZXF1aXJlbWVudHMKICAgICAgICBkZXNjcmlwdGlvbjogSWYgdHJ1ZSwgd2lsbCByZXF1aXJlIG1pbmltdW0gcmVjb21tZW5kZWQgcmVzb3VyY2VzIGZvciBUb3dlciBjb250YWluZXJzCiAgICAgICAgZGVmYXVsdDogdHJ1ZQogICAgICAgIHJlcXVpcmVkOiBmYWxzZQogICAgICAgIHR5cGU6IGJvb2wKICAgICAgLSBuYW1lOiBhd3hfaW1hZ2Vfb3JnCiAgICAgICAgdGl0bGU6IEFXWCBpbWFnZSBvcmdhbml6YXRpb24KICAgICAgICBkZXNjcmlwdGlvbjogdGhlIG9yZ2FuaXphdGlvbiB0byBwdWxsIGltYWdlcyBmcm9tCiAgICAgICAgZGVmYXVsdDogYW5zaWJsZQogICAgICAgIHR5cGU6IHN0cmluZwogICAgICAgIHJlcXVpcmVkOiBmYWxzZQogICAgICAtIG5hbWU6IGF3eF9pbWFnZV90YWcKICAgICAgICB0aXRsZTogQVdYIGltYWdlIHRhZwogICAgICAgIGRlc2NyaXB0aW9uOiB0aGUgaW1hZ2UgdGFnIHRvIHB1bGwKICAgICAgICBkZWZhdWx0OiBsYXRlc3QKICAgICAgICB0eXBlOiBzdHJpbmcKICAgICAgICByZXF1aXJlZDogZmFsc2UKICAgICAgLSBuYW1lOiBhd3hfYWRtaW5fcGFzc3dvcmQKICAgICAgICB0aXRsZTogQVdYIEFkbWluIFBhc3N3b3JkCiAgICAgICAgZGVzY3JpcHRpb246IFRoZSBwYXNzd29yZCBmb3IgYWRtaW4gdXNlcgogICAgICAgIGRlZmF1bHQ6IHBhc3N3b3JkCiAgICAgICAgcmVxdWlyZWQ6IGZhbHNlCiAgICAgIC0gbmFtZTogaW5zZWN1cmUKICAgICAgICB0aXRsZTogU2tpcCBPcGVuU2hpZnQgVExTIHZlcmlmeQogICAgICAgIGRlc2NyaXB0aW9uOiBza2lwIFRMUyB2ZXJpZnkgd2hlbiBtYWtpbmcgT3BlblNoaWZ0IEFQSSByZXF1ZXN0cwogICAgICAgIGRlZmF1bHQ6IGZhbHNlCiAgICAgICAgcmVxdWlyZWQ6IGZhbHNlCg=="'
    Name: label
  - CmdLine:
    - curl -L https://github.com/ansible/awx/archive/devel.tar.gz -o /tmp/awx.tar.gz   &&
      mkdir -p /usr/share/awx_installer   && tar --strip-components=1 -xvf /tmp/awx.tar.gz
      -C /usr/share/awx_installer   && rm -f /tmp/awx.tar.gz
    Name: run
    PrependShell: true
  - CmdLine:
    - cp /usr/share/awx_installer/installer/inventory /etc/ansible/hosts
    Name: run
    PrependShell: true
  - Chown: ""
    Name: add
    SourcesAndDest:
    - playbooks
    - /opt/apb/actions
  - Chown: ""
    Name: add
    SourcesAndDest:
    - .
    - /opt/ansible/roles/tower-apb
  - Chown: ""
    Name: add
    SourcesAndDest:
    - vars
    - /var/awx/
  - Chown: ""
    Name: add
    SourcesAndDest:
    - ansible.cfg
    - /etc/ansible/ansible.cfg
  - CmdLine:
    - chmod -R g=u /opt/{ansible,apb}
    Name: run
    PrependShell: true
  - Name: user
    User: apb
  From:
    Image: ansibleplaybookbundle/apb-base:canary
  Name: ""
  Platform: ""
  SourceCode: FROM ansibleplaybookbundle/apb-base:canary
