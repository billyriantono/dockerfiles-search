MetaArgs: null
Stages:
- BaseName: leodido/sphinxsearch:2.2.10
  Commands:
  - CmdLine:
    - yum install sed   && yum install -y epel-release   && sed -i "s/mirrorlist=https/mirrorlist=http/"
      /etc/yum.repos.d/epel.repo   && yum clean all && yum install -y compat-readline5   &&
      yum clean all && yum install -y socat   && mkdir -p /usr/local/etc/sphinx   &&
      mkdir -p /usr/local/etc/sphinx/conf.d   && mkdir -p /usr/local/etc/sphinx/data
    Name: run
    PrependShell: true
  - Chown: ""
    From: ""
    Name: copy
    SourcesAndDest:
    - ./root/*
    - /root/
  - Chown: ""
    From: ""
    Name: copy
    SourcesAndDest:
    - ./usr/local/etc/sphinx.conf
    - /usr/local/etc/sphinx.conf
  - Chown: ""
    From: ""
    Name: copy
    SourcesAndDest:
    - ./usr/local/etc/sphinx/searchd.conf
    - /usr/local/etc/sphinx/searchd.conf
  - Chown: ""
    From: ""
    Name: copy
    SourcesAndDest:
    - ./usr/local/etc/sphinx/data/stops.txt
    - /usr/local/etc/sphinx/data/stops.txt
  - Chown: ""
    From: ""
    Name: copy
    SourcesAndDest:
    - ./usr/local/etc/sphinx/conf.d/vanilla.conf
    - /usr/local/etc/sphinx/conf.d/sphinx.conf
  - CmdLine:
    - chmod +x /root/startup.sh  && chmod +x /root/listen.9399.sh
    Name: run
    PrependShell: true
  - CmdLine:
    - /root/startup.sh
    Name: cmd
    PrependShell: true
  - Name: expose
    Ports:
    - "9312"
  - Name: expose
    Ports:
    - "9306"
  - Name: expose
    Ports:
    - "9399"
  From:
    Image: leodido/sphinxsearch:2.2.10
  Name: ""
  Platform: ""
  SourceCode: FROM leodido/sphinxsearch:2.2.10
