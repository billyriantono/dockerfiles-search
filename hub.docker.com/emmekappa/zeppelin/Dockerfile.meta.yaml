MetaArgs: null
Stages:
- BaseName: ubuntu:14.04
  Commands:
  - Maintainer: Michele Cantelli <emmekappa@gmail.com>
    Name: maintainer
  - Env:
    - Key: DEBIAN_FRONTEND
      Value: noninteractive
    Name: env
  - Env:
    - Key: ZEPPELIN_JAVA_OPTS
      Value: '"-Dspark.executor.memory=1g -Dspark.cores.max=8"'
    Name: env
  - Env:
    - Key: ZEPPELIN_MEM
      Value: '"-Xmx1024m -XX:MaxPermSize=512m"'
    Name: env
  - CmdLine:
    - apt-get -y update
    Name: run
    PrependShell: true
  - CmdLine:
    - apt-get install -y --force-yes software-properties-common python-software-properties
    Name: run
    PrependShell: true
  - CmdLine:
    - apt-add-repository -y ppa:webupd8team/java
    Name: run
    PrependShell: true
  - CmdLine:
    - /bin/echo debconf shared/accepted-oracle-license-v1-1 select true | /usr/bin/debconf-set-selections
    Name: run
    PrependShell: true
  - CmdLine:
    - apt-get -y update
    Name: run
    PrependShell: true
  - CmdLine:
    - apt-get -y install oracle-java7-installer oracle-java7-set-default git npm wget
      nano curl htop
    Name: run
    PrependShell: true
  - CmdLine:
    - apt-get -y install phantomjs
    Name: run
    PrependShell: true
  - CmdLine:
    - sudo ln -s "$(which nodejs)" /usr/bin/node
    Name: run
    PrependShell: true
  - CmdLine:
    - wget http://it.apache.contactlab.it/maven/maven-3/3.3.3/binaries/apache-maven-3.3.3-bin.tar.gz
    Name: run
    PrependShell: true
  - CmdLine:
    - mkdir -p /usr/local/apache-maven
    Name: run
    PrependShell: true
  - CmdLine:
    - mv apache-maven-3.3.3-bin.tar.gz /usr/local/apache-maven
    Name: run
    PrependShell: true
  - CmdLine:
    - cd /usr/local/apache-maven && tar -zxvf apache-maven-3.3.3-bin.tar.gz
    Name: run
    PrependShell: true
  - Env:
    - Key: M2_HOME
      Value: /usr/local/apache-maven/apache-maven-3.3.3
    Name: env
  - Env:
    - Key: M2
      Value: $M2_HOME/bin
    Name: env
  - Env:
    - Key: MAVEN_OPTS
      Value: '"-Xms256m -Xmx512m"'
    Name: env
  - Env:
    - Key: PATH
      Value: $M2:$PATH
    Name: env
  - Env:
    - Key: ZEPPELIN_PATH
      Value: /incubator-zeppelin
    Name: env
  - CmdLine:
    - git clone https://github.com/apache/incubator-zeppelin.git
    Name: run
    PrependShell: true
  - CmdLine:
    - cd $ZEPPELIN_PATH && mvn clean package -Pspark-1.3 -Dhadoop.version=2.4.0 -Phadoop-2.4
      -DskipTests
    Name: run
    PrependShell: true
  - Chown: ""
    Name: add
    SourcesAndDest:
    - conf/zeppelin-site.xml
    - incubator-zeppelin/conf/zeppelin-site.xml
  - Chown: ""
    Name: add
    SourcesAndDest:
    - run.sh
    - $ZEPPELIN_PATH/run.sh
  - CmdLine:
    - chmod +x $ZEPPELIN_PATH/run.sh
    Name: run
    PrependShell: true
  - CmdLine:
    - $ZEPPELIN_PATH/run.sh
    Name: cmd
    PrependShell: true
  - Name: expose
    Ports:
    - "4040"
    - "8080"
    - "8081"
  From:
    Image: ubuntu:14.04
  Name: ""
  Platform: ""
  SourceCode: FROM ubuntu:14.04
