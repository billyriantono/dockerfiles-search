MetaArgs: null
Stages:
- BaseName: python:2.7-slim
  Commands:
  - Labels:
    - Key: maintainer
      Value: Bill Boga
    Name: label
  - Env:
    - Key: STREAMER_INPUT_OPTIONS
      Value: ""
    Name: env
  - Env:
    - Key: SET_FLAGS
      Value: ${SET_FLAGS}
    Name: env
  - Name: expose
    Ports:
    - "5000"
  - Name: expose
    Ports:
    - "8088"
  - Key: curaEngineVersion
    Name: arg
    Value: 15.04.6
  - Key: octoPrintVersion
    Name: arg
    Value: 1.3.4
  - Name: volume
    Volumes:
    - /var/local/octoprint
  - Chown: ""
    Name: add
    SourcesAndDest:
    - entrypoint.sh
    - /usr/local/bin/
  - CmdLine:
    - entrypoint.sh
    Name: entrypoint
    PrependShell: false
  - CmdLine:
    - set -${SET_FLAGS}e     && export buildPackages="build-essential cmake unzip
      wget"     && apt-get update     && echo "Install development dependencies."     &&
      apt-get install -y --no-install-recommends ${buildPackages}     && echo "Install
      application dependencies."     && apt-get install -y --no-install-recommends
      libav-tools libgphoto2-dev libjpeg62-turbo-dev libprotobuf9 libv4l-dev     &&
      export octoPrintInstallDirectory="/usr/local/octoprint"     && echo "Download
      OctoPrint."     && cd /tmp/     && wget https://github.com/foosel/OctoPrint/archive/${octoPrintVersion}.tar.gz     &&
      echo "Install OctoPrint."     && tar -zxf ${octoPrintVersion}.tar.gz     &&
      mv -f OctoPrint-${octoPrintVersion} ${octoPrintInstallDirectory}     && cd ${octoPrintInstallDirectory}     &&
      pip install -r requirements.txt     && pip install pillow     && python setup.py
      install     && echo "Download mjpg-streamer."     && cd /tmp/     && wget https://github.com/jacksonliam/mjpg-streamer/archive/master.zip     &&
      echo "Install mjpg-streamer."     && unzip master.zip     && cd mjpg-streamer-master/mjpg-streamer-experimental     &&
      make     && make install     && export curaEngineInstallDirectory="/usr/local/curaengine"     &&
      echo "Download CuraEngine."     && cd /tmp/     && wget https://github.com/Ultimaker/CuraEngine/archive/${curaEngineVersion}.tar.gz     &&
      echo "Install CuraEngine."     && tar -zxf ${curaEngineVersion}.tar.gz     &&
      cd CuraEngine-${curaEngineVersion}     && mkdir build     && make     && mv
      -f ./build ${curaEngineInstallDirectory}     && mv ${curaEngineInstallDirectory}/CuraEngine
      ${curaEngineInstallDirectory}/curaengine     && echo "Remove build packages
      and clean-up \`tmp\`-directories."     && apt-get purge -y --auto-remove ${buildPackages}     &&
      rm -Rf /tmp0/* /var/tmp/*
    Name: run
    PrependShell: true
  From:
    Image: python:2.7-slim
  Name: ""
  Platform: ""
  SourceCode: FROM python:2.7-slim
