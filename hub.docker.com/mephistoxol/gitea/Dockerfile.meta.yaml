MetaArgs: null
Stages:
- BaseName: alpine
  Commands:
  - Labels:
    - Key: maintainer
      Value: '"XoL <MephistoXoL@gmail.com>"'
    - Key: description
      Value: '"Gitea lastest version for amrv6/7"'
    - Key: version
      Value: '"amrhf 1.10.0-rc1"'
    Name: label
  - Name: expose
    Ports:
    - "22"
    - "3000"
  - Env:
    - Key: USER
      Value: git
    Name: env
  - Env:
    - Key: GITEA_CUSTOM
      Value: /data/gitea
    Name: env
  - CmdLine:
    - apk --no-cache add     bash     ca-certificates     curl     gettext     git     linux-pam     openssh     s6     sqlite     su-exec     tzdata     jq
    Name: run
    PrependShell: true
  - CmdLine:
    - VERSION=$(curl -sX GET https://api.github.com/repos/go-gitea/gitea/releases
      | jq -r 'first(.[]) | .tag_name' | sed 's/^.//') &&     URL=$(curl -s https://api.github.com/repos/go-gitea/gitea/releases/tags/v$VERSION
      | jq -r '.assets[].browser_download_url' | grep arm-6 | awk 'NR==1{print $1}')
      &&     mkdir -p /app/gitea &&     curl -SLo /app/gitea/gitea $URL &&     curl
      -SL https://github.com/go-gitea/gitea/archive/v$VERSION.tar.gz | tar xz gitea-$VERSION/docker
      --exclude=gitea-$VERSION/docker/Makefile --strip-components=3 &&     chmod 0755
      /app/gitea/gitea
    Name: run
    PrependShell: true
  - CmdLine:
    - addgroup     -S -g 1001     git &&   adduser     -S -H -D     -h /data/git     -s
      /bin/bash     -u 1001     -G git     git &&   echo "git:$(dd if=/dev/urandom
      bs=24 count=1 status=none | base64)" | chpasswd
    Name: run
    PrependShell: true
  - Name: volume
    Volumes:
    - /data
  - CmdLine:
    - /usr/bin/entrypoint
    Name: entrypoint
    PrependShell: false
  - CmdLine:
    - /bin/s6-svscan
    - /etc/s6
    Name: cmd
    PrependShell: false
  From:
    Image: alpine
  Name: ""
  Platform: ""
  SourceCode: FROM alpine
