MetaArgs: null
Stages:
- BaseName: ubuntu:18.04
  Commands:
  - Labels:
    - Key: mainainer
      Value: '"gdavid0510@gmail.com"'
    Name: label
  - CmdLine:
    - "apt-get update -qq \t&&\tapt-get upgrade -y -qq \t&&\tDEBIAN_FRONTEND=noninteractive
      apt-get install --no-install-recommends -y -qq \t\t\tapt-utils bash-completion
      software-properties-common sudo \t&&\tadd-apt-repository -y ppa:gridcoin/gridcoin-stable
      \t&&\tapt-get update -qq \t&&\tapt-get install --no-install-recommends -y -qq
      \t\t\tsupervisor openssh-server vim nano gridcoinresearchd boinc boinc-client
      boinctui wget curl byobu dialog \t&&\tapt-get clean -qq \t&&\trm -rf /var/lib/apt/lists/*
      /tmp/* /var/tmp/*"
    Name: run
    PrependShell: true
  - Name: workdir
    Path: /root
  - Chown: ""
    From: ""
    Name: copy
    SourcesAndDest:
    - files
    - /
  - CmdLine:
    - "chmod 755 /usr/bin/b /usr/bin/grc /grcupdate.sh /entrypoint.sh \t&&\tln -s
      /etc/supervisor/supervisord.conf /etc/supervisord.conf \t&&\tmkdir -p /root/.GridcoinResearch
      \t&&\tmkdir -p /var/run/sshd \t&&\tsed -ri 's/^#?PermitRootLogin\\s+.*/PermitRootLogin
      prohibit-password/' /etc/ssh/sshd_config \t&&\tsed -ri 's/UsePAM yes/#UsePAM
      yes/g' /etc/ssh/sshd_config \t&&\tmkdir -p /root/.ssh \t&&\tchmod 700 /root/.ssh
      \t&&\ttouch /root/.ssh/authorized_keys \t&&\tchmod 600 /root/.ssh/authorized_keys
      \t&&\tbyobu-enable"
    Name: run
    PrependShell: true
  - Name: expose
    Ports:
    - 22/tcp
  - Name: expose
    Ports:
    - 31416/tcp
  - Name: expose
    Ports:
    - 32749/tcp
  - Name: expose
    Ports:
    - 32750/tcp
  - Env:
    - Key: GRC_DATADIR
      Value: /root/.GridcoinResearch
    Name: env
  - Env:
    - Key: BOINC_DATADIR
      Value: /var/lib/boinc
    Name: env
  - CmdLine:
    - sed -i '8isource \/etc\/environment_creds' /root/.profile
    Name: run
    PrependShell: true
  - CmdLine:
    - /bin/bash
    - /entrypoint.sh
    Name: entrypoint
    PrependShell: false
  From:
    Image: ubuntu:18.04
  Name: ""
  Platform: ""
  SourceCode: FROM ubuntu:18.04
