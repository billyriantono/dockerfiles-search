MetaArgs: null
Stages:
- BaseName: debian:jessie
  Commands:
  - Maintainer: laoimam "dockerhub@temp.tk"
    Name: maintainer
  - Env:
    - Key: BUILD_PATH
      Value: /root/build
    Name: env
  - CmdLine:
    - mkdir -p $BUILD_PATH
    Name: run
    PrependShell: true
  - Name: workdir
    Path: $BUILD_PATH
  - Chown: ""
    Name: add
    SourcesAndDest:
    - https://raw.githubusercontent.com/zhzjwd/docker/master/debian-caddy-aria2/sh/caddy_install.sh
    - $BUILD_PATH/caddy_install.sh
  - Chown: ""
    Name: add
    SourcesAndDest:
    - https://raw.githubusercontent.com/zhzjwd/docker/master/debian-caddy-aria2/sh/aria2.sh
    - $BUILD_PATH/aria2.sh
  - Chown: ""
    Name: add
    SourcesAndDest:
    - https://raw.githubusercontent.com/zhzjwd/docker/master/debian-caddy-aria2/sh/rclone.sh
    - $BUILD_PATH/rclone.sh
  - Chown: ""
    Name: add
    SourcesAndDest:
    - https://raw.githubusercontent.com/zhzjwd/docker/master/debian-caddy-aria2/sh/service_start.sh
    - $BUILD_PATH/service_start.sh
  - CmdLine:
    - "apt-get update && \tapt-get install -y openssh-server zip unzip unar screen
      curl wget sed git cron locales locales-all iptables nano p7zip p7zip-full make
      fuse gcc g++ python python-pip python3 python3-pip && \techo \"deb http://packages.dotdeb.org
      jessie all\\ndeb-src http://packages.dotdeb.org jessie all\" > /etc/apt/sources.list.d/dotdeb.list
      && \twget http://www.dotdeb.org/dotdeb.gpg -O /tmp/dotdeb.gpg && apt-key add
      /tmp/dotdeb.gpg && rm /tmp/dotdeb.gpg && \tapt-get update && \tapt-get install
      -y php7.0 php7.0-fpm php7.0-cgi php7.0-curl php7.0-gd php7.0-zip && \tbash caddy_install.sh
      install http.filemanager,http.git && \tbash aria2.sh install && \tbash rclone.sh
      && \tmkdir -p /var/run/sshd /var/run/php && \tmkdir -p /home/down /home/ariang
      && \tmkdir -p /root/.config/rclone /root/.aria2/cert && \tmkdir -p /root/.ssh
      && touch /root/.ssh/authorized_keys && \tchmod 755 /root/.ssh /root/.ssh/authorized_keys
      && \trm -rf /var/lib/apt/lists/* && \tapt-get clean && \tsed -ri 's/^PermitRootLogin\\s+.*/PermitRootLogin
      yes/' /etc/ssh/sshd_config && \tsed -ri 's/^#PermitRootLogin\\s+.*/PermitRootLogin
      yes/' /etc/ssh/sshd_config && \tsed -ri '/^PermitRootLogin/a\\#PermitRootLogin
      prohibit-password' /etc/ssh/sshd_config && \tsed -ri 's/UsePAM yes/#UsePAM yes/g'
      /etc/ssh/sshd_config && \tsed -i -e 's/# en_US.UTF-8 UTF-8/en_US.UTF-8 UTF-8/'
      /etc/locale.gen && \tsed -i -e 's/# zh_CN.UTF-8 UTF-8/zh_CN.UTF-8 UTF-8/' /etc/locale.gen
      && \tsed -i -e 's/# zh_HK.UTF-8 UTF-8/zh_HK.UTF-8 UTF-8/' /etc/locale.gen &&
      \tsed -i -e 's/# zh_TW.UTF-8 UTF-8/zh_TW.UTF-8 UTF-8/' /etc/locale.gen && \tsed
      -i -e 's/# ja_JP.UTF-8 UTF-8/ja_JP.UTF-8 UTF-8/' /etc/locale.gen && \tsed -i
      -e 's/# ko_KR.UTF-8 UTF-8/ko_KR.UTF-8 UTF-8/' /etc/locale.gen && \tlocale-gen
      && localedef -i zh_CN -c -f UTF-8 zh_CN.UTF-8 && \tupdate-locale LANG=zh_CN.UTF-8
      && \techo \"LC_ALL=zh_CN.UTF-8\" >> /etc/default/locale && \techo \"LANGUAGE=zh_CN.UTF-8\"
      >> /etc/default/locale && \techo \"export LC_ALL=zh_CN.UTF-8\" >> /etc/profile
      && \techo \"export LANG=zh_CN.UTF-8\" >> /etc/profile && \techo 'PS1=\"\\[\\e[36m\\][\\[\\e[36m\\]\\u\\[\\e[0m\\]@\\h\\[\\e[35m\\]:\\[\\e[32m\\]\\w\\[\\e[36m\\]]\\[\\e[0m\\]\\\\$\"'
      >> /root/.bashrc && \techo \"debian\" > /etc/hostname && \techo 'root:root'
      | chpasswd"
    Name: run
    PrependShell: true
  - Name: expose
    Ports:
    - "22"
  - CmdLine:
    - bash
    - service_start.sh
    Name: cmd
    PrependShell: false
  From:
    Image: debian:jessie
  Name: ""
  Platform: ""
  SourceCode: FROM debian:jessie
