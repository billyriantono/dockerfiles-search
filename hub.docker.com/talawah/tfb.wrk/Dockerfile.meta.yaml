MetaArgs: null
Stages:
- As: builder
  BaseName: buildpack-deps:bionic
  Commands:
  - Name: workdir
    Path: /wrk
  - CmdLine:
    - curl -sL https://github.com/wg/wrk/archive/4.1.0.tar.gz | tar xz --strip-components=1
    Name: run
    PrependShell: true
  - CmdLine:
    - make > /dev/null
    Name: run
    PrependShell: true
  From:
    Image: buildpack-deps:bionic
  Name: builder
  Platform: ""
  SourceCode: FROM buildpack-deps:bionic as builder
- BaseName: ubuntu:bionic
  Commands:
  - Chown: ""
    From: builder
    Name: copy
    SourcesAndDest:
    - /wrk/wrk
    - /usr/local/bin/
  - CmdLine:
    - apt update -yqq && apt install -yqq curl && rm -rf /var/lib/apt/lists/*
    Name: run
    PrependShell: true
  - Name: workdir
    Path: /
  - Chown: ""
    From: ""
    Name: copy
    SourcesAndDest:
    - pipeline.lua
    - pipeline.lua
  - Chown: ""
    From: ""
    Name: copy
    SourcesAndDest:
    - concurrency.sh
    - concurrency.sh
  - Chown: ""
    From: ""
    Name: copy
    SourcesAndDest:
    - pipeline.sh
    - pipeline.sh
  - Chown: ""
    From: ""
    Name: copy
    SourcesAndDest:
    - query.sh
    - query.sh
  - Chown: ""
    From: ""
    Name: copy
    SourcesAndDest:
    - dns-roundrobin.lua
    - dns-roundrobin.lua
  - CmdLine:
    - chmod 777 pipeline.lua concurrency.sh pipeline.sh query.sh dns-roundrobin.lua
    Name: run
    PrependShell: true
  - Env:
    - Key: name
      Value: name
    Name: env
  - Env:
    - Key: server_host
      Value: server_host
    Name: env
  - Env:
    - Key: levels
      Value: levels
    Name: env
  - Env:
    - Key: duration
      Value: duration
    Name: env
  - Env:
    - Key: max_concurrency
      Value: max_concurrency
    Name: env
  - Env:
    - Key: max_threads
      Value: max_threads
    Name: env
  - Env:
    - Key: pipeline
      Value: pipeline
    Name: env
  - Env:
    - Key: accept
      Value: accept
    Name: env
  From:
    Image: ubuntu:bionic
  Name: ""
  Platform: ""
  SourceCode: FROM ubuntu:bionic
