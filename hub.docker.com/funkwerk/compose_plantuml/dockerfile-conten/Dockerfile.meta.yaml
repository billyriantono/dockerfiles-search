MetaArgs: null
Stages:
- BaseName: java:8
  Commands:
  - Maintainer: Alberto Grespan <alberto.grespan@full360.com>
    Name: maintainer
  - Env:
    - Key: VOLTDB_VERSION
      Value: "6.4"
    Name: env
  - Env:
    - Key: VOLTDB_DIR
      Value: /usr/local/opt/voltdb
    Name: env
  - Env:
    - Key: PATH
      Value: $PATH:$VOLTDB_DIR/$VOLTDB_VERSION/bin
    Name: env
  - Name: workdir
    Path: /tmp
  - CmdLine:
    - set -ex   && buildDeps='       ant       build-essential       curl       ccache       cmake   '   &&
      apt-get update    && apt-get install -y --no-install-recommends $buildDeps   &&
      rm -rf /var/lib/apt/lists/*   && curl -fSL https://github.com/VoltDB/voltdb/archive/voltdb-${VOLTDB_VERSION}.tar.gz
      | tar zx   && cd /tmp/voltdb-voltdb-${VOLTDB_VERSION}   && ant -Djmemcheck=NO_MEMCHECK   &&
      mkdir -p ${VOLTDB_DIR}/${VOLTDB_VERSION}   && cd ${VOLTDB_DIR}/${VOLTDB_VERSION}   &&
      for file in LICENSE README.md README.thirdparty bin bundles doc examples lib
      third_party/python tools version.txt voltdb; do       cp -R /tmp/voltdb-voltdb-${VOLTDB_VERSION}/${file}
      .; done   && mkdir -p third_party   && mv python third_party   && apt-get purge
      -y --auto-remove $buildDeps   && rm -rf /tmp/voltdb-voltdb-${VOLTDB_VERSION}
    Name: run
    PrependShell: true
  - Name: workdir
    Path: /usr/local/var/voltdb
  - Name: expose
    Ports:
    - "21211"
    - "21212"
    - "3021"
    - "4560"
    - "5555"
    - "7181"
    - "8080"
    - "9090"
  - CmdLine:
    - voltdb
    - create
    - --ignore=thp
    Name: cmd
    PrependShell: false
  From:
    Image: java:8
  Name: ""
  Platform: ""
  SourceCode: FROM java:8
