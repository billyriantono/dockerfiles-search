MetaArgs: null
Stages:
- BaseName: alpine:latest
  Commands:
  - Key: ANSIBLE_VERSION
    Name: arg
    Value: 2.8.3
  - Labels:
    - Key: maintainer
      Value: '"Donald Johnson <@johnsonnz>"'
    Name: label
  - Chown: ""
    From: ""
    Name: copy
    SourcesAndDest:
    - requirements.txt
    - /tmp
  - CmdLine:
    - set -x &&     echo "==> Install dependencies" &&     apk add --no-cache --update
      python3 ca-certificates openssh-client sshpass dumb-init su-exec &&     echo
      "==> Install dev libraries" &&     apk add --no-cache --update --virtual .build-deps
      python3-dev build-base libffi-dev openssl-dev &&     echo "==> Update pip" &&     pip3
      install --no-cache-dir --upgrade pip &&     echo "==> Install ansible" &&     pip3
      install --no-cache-dir --upgrade setuptools ansible==${ANSIBLE_VERSION} &&     echo
      "==> Checking for requirements.txt with contents" &&     [ -s /tmp/requirements.txt
      ] && echo "==> Install more pip packages" && pip3 install --no-cache-dir -r
      /tmp/requirements.txt || echo "==> No additional packages to install" &&     echo
      "==> Cleanup" &&     apk del --no-cache --purge .build-deps &&     rm -rf /var/cache/apk/*
      &&     rm -rf /root/.cache &&     ln -s /usr/bin/python3 /usr/bin/python &&     rm
      /tmp/requirements.txt &&         echo "==> Adding hosts for convenience..."  &&     mkdir
      -p /etc/ansible /ansible &&     echo "[local]" >> /etc/ansible/hosts &&     echo
      "localhost" >> /etc/ansible/host &&     echo "==> Installed python modules..."
      &&     pip3 list
    Name: run
    PrependShell: true
  - Env:
    - Key: ANSIBLE_GATHERING
      Value: smart
    Name: env
  - Env:
    - Key: ANSIBLE_HOST_KEY_CHECKING
      Value: "false"
    Name: env
  - Env:
    - Key: ANSIBLE_RETRY_FILES_ENABLED
      Value: "false"
    Name: env
  - Env:
    - Key: ANSIBLE_ROLES_PATH
      Value: /ansible/playbooks/roles
    Name: env
  - Env:
    - Key: ANSIBLE_SSH_PIPELINING
      Value: "True"
    Name: env
  - Env:
    - Key: PYTHONPATH
      Value: /ansible/lib
    Name: env
  - Env:
    - Key: PATH
      Value: /ansible/bin:$PATH
    Name: env
  - Env:
    - Key: ANSIBLE_LIBRARY
      Value: /ansible/library
    Name: env
  - Name: workdir
    Path: /ansible/playbooks
  - CmdLine:
    - ansible-playbook
    Name: entrypoint
    PrependShell: false
  From:
    Image: alpine:latest
  Name: ""
  Platform: ""
  SourceCode: FROM alpine:latest
