MetaArgs:
- DefaultValue: dev
  Key: buildDate
  ProvidedValue: null
  Value: dev
- DefaultValue: devel
  Key: ubuntuVersion
  ProvidedValue: null
  Value: devel
Stages:
- BaseName: ubuntu:${ubuntuVersion}
  Commands:
  - Labels:
    - Key: maintainer
      Value: '"AgileSyndro.me"'
    Name: label
  - Key: opensslVersion
    Name: arg
    Value: 1.0.2r
  - Env:
    - Key: OPENSSL_VERSION
      Value: ${opensslVersion}
    Name: env
  - Env:
    - Key: APP_USER
      Value: appbot
    Name: env
  - Env:
    - Key: DEBIAN_FRONTEND
      Value: noninteractive
    Name: env
  - CmdLine:
    - useradd -c "${APP_USER}" -s /bin/false -m $APP_USER -d /app;
    Name: run
    PrependShell: true
  - CmdLine:
    - set -eux;   apt-get update -y;   apt-get upgrade -y;   apt-get install -y     apt-transport-https     curl     gnupg;   apt-get
      dist-upgrade -y;   apt-get install -y     build-essential     checkinstall     jq     less     tzdata     unzip     zlib1g-dev;   apt-get
      clean all;
    Name: run
    PrependShell: true
  - Env:
    - Key: TINI_VERSION
      Value: v0.18.0
    Name: env
  - Chown: ""
    Name: add
    SourcesAndDest:
    - https://github.com/krallin/tini/releases/download/${TINI_VERSION}/tini
    - /usr/bin/tini
  - CmdLine:
    - chmod +x /usr/bin/tini
    Name: run
    PrependShell: true
  - Name: workdir
    Path: /build
  - CmdLine:
    - curl -LO https://www.openssl.org/source/openssl-${OPENSSL_VERSION}.tar.gz  &&
      tar -xzvf openssl-${OPENSSL_VERSION}.tar.gz  && cd openssl-${OPENSSL_VERSION}  &&
      ./config --prefix=/usr/openssl --openssldir=/usr/openssl shared zlib  && make  &&
      make test  && make install
    Name: run
    PrependShell: true
  - CmdLine:
    - cd /etc/ld.so.conf.d/  && echo '/usr/openssl/lib' > ${OPENSSL_VERSION}.conf  &&
      ldconfig -v
    Name: run
    PrependShell: true
  - CmdLine:
    - rm /usr/bin/c_rehash  && rm /usr/bin/openssl
    Name: run
    PrependShell: true
  - Env:
    - Key: PATH
      Value: ${PATH}:/usr/openssl/bin
    Name: env
  - Env:
    - Key: OPENSSL_PATH
      Value: /usr/openssl/bin
    Name: env
  - CmdLine:
    - which openssl  && openssl version -a
    Name: run
    PrependShell: true
  - Name: workdir
    Path: /app
  - CmdLine:
    - . /etc/lsb-release  && echo ${DISTRIB_ID}-${DISTRIB_RELEASE}
    Name: run
    PrependShell: true
  - CmdLine:
    - /usr/bin/tini
    - --
    Name: entrypoint
    PrependShell: false
  - CmdLine:
    - /bin/bash
    Name: cmd
    PrependShell: false
  From:
    Image: ubuntu:${ubuntuVersion}
  Name: ""
  Platform: ""
  SourceCode: FROM ubuntu:${ubuntuVersion}
