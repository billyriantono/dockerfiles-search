MetaArgs: null
Stages:
- BaseName: php:5.6-apache
  Commands:
  - Chown: ""
    From: ""
    Name: copy
    SourcesAndDest:
    - sources.list
    - /etc/apt/sources.list
  - CmdLine:
    - "apt-get update -y --force-yes &&     apt-get install -y git &&     apt-get
      install -y --force-yes libapache2-mod-authnz-external && \trm -rf /var/lib/apt/lists/*"
    Name: run
    PrependShell: true
  - CmdLine:
    - a2enmod rewrite
    Name: run
    PrependShell: true
  - Env:
    - Key: GITLIST_VERSION
      Value: 0.5.0
    Name: env
  - CmdLine:
    - mkdir -p /home/git/repositories/         && cd /home/git/repositories/         &&
      git --bare init foo
    Name: run
    PrependShell: true
  - CmdLine:
    - "curl -o /tmp/gitlist.tar.gz -SL https://s3.amazonaws.com/gitlist/gitlist-${GITLIST_VERSION}.tar.gz
      \        && tar -xzf /tmp/gitlist.tar.gz -C /tmp/ \t\t&& mv /tmp/gitlist/.htaccess
      /tmp/gitlist/* /var/www/html/ \t\t&& rm -rf /tmp/gitlist /tmp/gitlist.tar.gz
      \        && chown -R www-data:www-data /var/www/html/         && cd /var/www/html/
      \t\t&& mkdir cache         && chmod 777 cache         && cp /var/www/html/config.ini-example
      /var/www/html/config.ini"
    Name: run
    PrependShell: true
  - Name: volume
    Volumes:
    - /var/www/html
  - Name: workdir
    Path: /var/www/html/
  - CmdLine:
    - a2enmod actions ;    a2enmod authnz_ldap ;    a2enmod authnz_external ;    a2enmod
      ldap ;    a2enmod setenvif
    Name: run
    PrependShell: true
  - CmdLine:
    - sed -i 's|LogLevel warn|LogLevel debug|g' /etc/apache2/apache2.conf
    Name: run
    PrependShell: true
  - CmdLine:
    - sed -i 's|Listen 80|Listen 10080|g' /etc/apache2/apache2.conf
    Name: run
    PrependShell: true
  - Name: expose
    Ports:
    - "10080"
  - CmdLine:
    - apache2ctl
    - -D
    - FOREGROUND
    Name: entrypoint
    PrependShell: false
  From:
    Image: php:5.6-apache
  Name: ""
  Platform: ""
  SourceCode: FROM php:5.6-apache
