MetaArgs: null
Stages:
- BaseName: debian:latest
  Commands:
  - Name: user
    User: root
  - CmdLine:
    - sed -i 's/main/main contrib non-free/g' /etc/apt/sources.list
    Name: run
    PrependShell: true
  - CmdLine:
    - apt update && apt-get upgrade -y
    Name: run
    PrependShell: true
  - CmdLine:
    - "apt update && apt-get -y install \t    asciidoc autoconf automake bc bison
      build-essential chrpath \t    coreutils cpio cscope curl cvs desktop-file-utils
      diffstat \t    docbook-utils dosfstools e2fslibs-dev exuberant-ctags g++ gawk
      \t    gcc gcc-multilib git-core g++-multilib groff help2man \t    iputils-ping
      libarchive-dev libattr1-dev libcap-dev libfuse-dev \t    libgirepository1.0-dev
      libgl1-mesa-dev libglu1-mesa-dev \t    libgpgme11-dev liblzma-dev libsdl1.2-dev
      libsoup2.4-dev libtool \t    locales locales-all lzop make mercurial nano ncurses-term
      \t    python3 python3-gi python-pysqlite2 repo screen sed socat sshpass \t    subversion
      sudo texi2html texinfo u-boot-tools unzip vim wget \t    xterm zsh"
    Name: run
    PrependShell: true
  - CmdLine:
    - sed -i -e 's/# en_US.UTF-8 UTF-8/en_US.UTF-8 UTF-8/' /etc/locale.gen && locale-gen
    Name: run
    PrependShell: true
  - Env:
    - Key: LANG
      Value: en_US.UTF-8
    Name: env
  - Env:
    - Key: LANGUAGE
      Value: en_US:en
    Name: env
  - Env:
    - Key: LC_ALL
      Value: en_US.UTF-8
    Name: env
  - Key: user
    Name: arg
    Value: jenkins
  - Key: group
    Name: arg
    Value: jenkins
  - Key: uid
    Name: arg
    Value: "1000"
  - Key: gid
    Name: arg
    Value: "1000"
  - CmdLine:
    - groupadd -g ${gid} ${group}
    Name: run
    PrependShell: true
  - CmdLine:
    - useradd -c "Jenkins user" -d /home/${user} -u ${uid} -g ${gid} -m ${user}
    Name: run
    PrependShell: true
  - Env:
    - Key: HOME
      Value: /home/${user}
    Name: env
  - CmdLine:
    - git config --global user.name "${user}"
    Name: run
    PrependShell: true
  - CmdLine:
    - git config --global user.email "${user}"
    Name: run
    PrependShell: true
  - CmdLine:
    - git config --global color.ui false
    Name: run
    PrependShell: true
  - CmdLine:
    - mkdir ${HOME}/.ssh
    Name: run
    PrependShell: true
  - CmdLine:
    - chmod 700 ${HOME}/.ssh
    Name: run
    PrependShell: true
  - CmdLine:
    - ssh-keyscan bitbucket.org >> ${HOME}/.ssh/known_hosts
    Name: run
    PrependShell: true
  - CmdLine:
    - ssh-keyscan github.com >> ${HOME}/.ssh/known_hosts
    Name: run
    PrependShell: true
  - CmdLine:
    - ssh-keyscan gitlab.com >> ${HOME}/.ssh/known_hosts
    Name: run
    PrependShell: true
  - CmdLine:
    - chmod 600 ${HOME}/.ssh/known_hosts
    Name: run
    PrependShell: true
  - CmdLine:
    - chown -R ${user}:${group} ${HOME}/.ssh
    Name: run
    PrependShell: true
  - Name: workdir
    Path: ${HOME}
  - Name: user
    User: ${user}
  From:
    Image: debian:latest
  Name: ""
  Platform: ""
  SourceCode: FROM debian:latest
