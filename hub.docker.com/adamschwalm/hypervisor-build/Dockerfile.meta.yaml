MetaArgs: null
Stages:
- BaseName: archlinux/base
  Commands:
  - Maintainer: Adam Schwalm <adamschwalm@gmail.com>
    Name: maintainer
  - CmdLine:
    - pacman -y --noconfirm -S rustup gcc git sudo binutils make fakeroot
    Name: run
    PrependShell: true
  - CmdLine:
    - useradd build && mkdir /home/build && chown build:build /home/build
    Name: run
    PrependShell: true
  - CmdLine:
    - 'echo "build ALL=(ALL) NOPASSWD: ALL" >> /etc/sudoers'
    Name: run
    PrependShell: true
  - CmdLine:
    - 'echo "root ALL=(ALL) NOPASSWD: ALL" >> /etc/sudoers'
    Name: run
    PrependShell: true
  - CmdLine:
    - git clone https://aur.archlinux.org/yay.git
    Name: run
    PrependShell: true
  - CmdLine:
    - chown -R build yay
    Name: run
    PrependShell: true
  - Name: workdir
    Path: /yay
  - Name: user
    User: build
  - CmdLine:
    - makepkg -si --noconfirm
    Name: run
    PrependShell: true
  - CmdLine:
    - yay -S --noconfirm mingw-w64-crt-bin   mingw-w64-binutils-bin   mingw-w64-winpthreads-bin   mingw-w64-headers-bin
    Name: run
    PrependShell: true
  - CmdLine:
    - yay -S --noconfirm mingw-w64-gcc-bin
    Name: run
    PrependShell: true
  - Name: user
    User: root
  - CmdLine:
    - rustup toolchain install nightly
    Name: run
    PrependShell: true
  - CmdLine:
    - rustup component add rust-src
    Name: run
    PrependShell: true
  - CmdLine:
    - rustup component add rustfmt
    Name: run
    PrependShell: true
  - CmdLine:
    - cargo install cargo-xbuild
    Name: run
    PrependShell: true
  - Name: workdir
    Path: /src
  From:
    Image: archlinux/base
  Name: ""
  Platform: ""
  SourceCode: FROM archlinux/base
