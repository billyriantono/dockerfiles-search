MetaArgs: null
Stages:
- BaseName: alpine:latest
  Commands:
  - Labels:
    - Key: author
      Value: monlgq
    - Key: email
      Value: '"monelgq@163.com"'
    Name: label
  - Env:
    - Key: STUNNEL_VER
      Value: "5.39"
    Name: env
  - Env:
    - Key: STUNNEL_URL
      Value: https://www.stunnel.org/downloads/stunnel-$STUNNEL_VER.tar.gz
    Name: env
  - Env:
    - Key: STUNNEL_FILE
      Value: stunnel-$STUNNEL_VER.tar.gz
    Name: env
  - Env:
    - Key: STUNNEL_TEMP
      Value: stunnel-$STUNNEL_VER-build
    Name: env
  - Env:
    - Key: STUNNEL_DEPS
      Value: openssl
    Name: env
  - Env:
    - Key: BUILD_DEPS
      Value: curl alpine-sdk openssl-dev
    Name: env
  - CmdLine:
    - set -xe     && apk update     && apk add $STUNNEL_DEPS $BUILD_DEPS     && mkdir
      $STUNNEL_TEMP         && cd $STUNNEL_TEMP         && curl -sSL $STUNNEL_URL
      -o $STUNNEL_FILE         && tar -xf $STUNNEL_FILE --strip 1         && ./configure         &&
      make install         && cd ..         && rm -rf $STUNNEL_TEMP $STUNNEL_FILE     &&
      apk --purge del $BUILD_DEPS     && mkdir -p /etc/stunnel/
    Name: run
    PrependShell: true
  - Name: workdir
    Path: /etc/stunnel
  - CmdLine:
    - stunnel
    - /etc/stunnel/stunnel.conf
    Name: cmd
    PrependShell: false
  From:
    Image: alpine:latest
  Name: ""
  Platform: ""
  SourceCode: FROM alpine:latest
