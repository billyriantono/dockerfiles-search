MetaArgs: null
Stages:
- BaseName: alpine:edge
  Commands:
  - Labels:
    - Key: maintainer
      Value: '"AkkarinD <carsten.vollmert@web.de>"'
    Name: label
  - Env:
    - Key: TIME_ZONE
      Value: '"Europe/Berlin"'
    Name: env
  - Env:
    - Key: CERT_FILE
      Value: '"cert.pem"'
    Name: env
  - Env:
    - Key: PRIV_FILE
      Value: '"privkey.pem"'
    Name: env
  - Env:
    - Key: CHAIN_FILE
      Value: '"chain.pem"'
    Name: env
  - CmdLine:
    - "apk --update add --no-cache \topenssl \tcurl \tlighttpd \t&& rm -rf /var/cache/apk/*
      \t&& mkdir /run/lighttpd     && chown lighttpd:lighttpd /run/lighttpd"
    Name: run
    PrependShell: true
  - Chown: ""
    From: ""
    Name: copy
    SourcesAndDest:
    - ./config/lighttpd/
    - /config/lighttpd/
  - Chown: ""
    From: ""
    Name: copy
    SourcesAndDest:
    - ./start-lighttpd.sh
    - /usr/local/bin/start-lighttpd.sh
  - Chown: ""
    From: ""
    Name: copy
    SourcesAndDest:
    - ./htdocs/*
    - /var/www/localhost/htdocs/
  - CmdLine:
    - "chmod 0755 /usr/local/bin/start-lighttpd.sh \t&& rm -rf /etc/lighttpd \t&&
      ln -s /config/lighttpd/ /etc/lighttpd \t&& chown -R lighttpd:lighttpd /var/www/localhost"
    Name: run
    PrependShell: true
  - Name: expose
    Ports:
    - "443"
    - "80"
  - Name: volume
    Volumes:
    - /usr/local/share/certdata
    - /config
    - /var/www/localhost/htdocs
  - CmdLine:
    - start-lighttpd.sh
    Name: cmd
    PrependShell: false
  From:
    Image: alpine:edge
  Name: ""
  Platform: ""
  SourceCode: FROM alpine:edge
