MetaArgs: null
Stages:
- As: build
  BaseName: alpine:3.7
  Commands:
  - Maintainer: Carlos Sanz <carlos.sanzpenas@gmail.com>
    Name: maintainer
  - Labels:
    - Key: Name
      Value: tac_plus
    Name: label
  - Labels:
    - Key: Version
      Value: 1.0.0
    Name: label
  - Key: SRC_VERSION
    Name: arg
    Value: "201712190728"
  - Key: SRC_HASH
    Name: arg
    Value: c7a8dbc5e6561a2fbc608142520a88e05fda22e9a664f3184ffe2f8b4821cf2c
  - Chown: ""
    Name: add
    SourcesAndDest:
    - http://www.pro-bono-publico.de/projects/src/DEVEL.$SRC_VERSION.tar.bz2
    - /tac_plus.tar.bz2
  - CmdLine:
    - echo "${SRC_HASH}  /tac_plus.tar.bz2" | sha256sum -c -
    Name: run
    PrependShell: true
  - CmdLine:
    - apk update &&     apk add build-base bzip2 perl perl-digest-md5 perl-ldap &&     tar
      -xjf /tac_plus.tar.bz2 &&     cd /PROJECTS &&     ./configure --prefix=/tacacs
      &&     make &&     make install &&     rm -fr tac_plus.tar.bz2
    Name: run
    PrependShell: true
  From:
    Image: alpine:3.7
  Name: build
  Platform: ""
  SourceCode: FROM alpine:3.7 as build
- BaseName: alpine:3.7
  Commands:
  - Chown: ""
    From: build
    Name: copy
    SourcesAndDest:
    - /tacacs
    - /tacacs
  - Chown: ""
    From: ""
    Name: copy
    SourcesAndDest:
    - tac_plus.cfg
    - /etc/tac_plus/tac_plus.cfg
  - Chown: ""
    From: ""
    Name: copy
    SourcesAndDest:
    - docker-entrypoint.sh
    - /docker-entrypoint.sh
  - Name: expose
    Ports:
    - "49"
  - CmdLine:
    - /docker-entrypoint.sh
    Name: entrypoint
    PrependShell: false
  From:
    Image: alpine:3.7
  Name: ""
  Platform: ""
  SourceCode: FROM alpine:3.7
