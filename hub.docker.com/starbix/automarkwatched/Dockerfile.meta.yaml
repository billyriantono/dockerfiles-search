MetaArgs: null
Stages:
- BaseName: alpine
  Commands:
  - Labels:
    - Key: maintainer
      Value: '"Starbix"'
    Name: label
  - Env:
    - Key: UID
      Value: "991"
    Name: env
  - Env:
    - Key: GID
      Value: "991"
    Name: env
  - Env:
    - Key: PORT
      Value: "8000"
    Name: env
  - Env:
    - Key: HOST
      Value: '"*"'
    Name: env
  - Env:
    - Key: DEBUG
      Value: '"False"'
    Name: env
  - Name: volume
    Volumes:
    - /config
  - Chown: ""
    From: ""
    Name: copy
    SourcesAndDest:
    - rootfs
    - /
  - CmdLine:
    - "apk add -U s6 su-exec python3 git \t\t&& mkdir -p /opt \t\t&& cd /opt \t\t&&
      git clone https://github.com/DirtyCajunRice/AutoMarkWatched \t\t&& cd AutoMarkWatched
      \t\t&& pip3 install -r requirements.txt \t\t&& sed -i -e \"s/SECRET_KEY = \\'\\'/SECRET_KEY
      = \\'`python3 generate_secret_key.py`\\'/g\" automarkwatched/settings.py \t\t&&
      sed -i -e \"/'NAME': os.path.join/c\\        'NAME': os.path.join('/config',
      'automarkwatched.db'),\" automarkwatched/settings.py \t\t&& python3 manage.py
      migrate \t\t&& apk del git \t\t&& rm -rf /tmp/* /var/cache/apk/* \t\t&& chmod
      a+x /usr/local/bin/* /etc/s6.d/*/*"
    Name: run
    PrependShell: true
  - Name: expose
    Ports:
    - "8000"
  - CmdLine:
    - run.sh
    Name: cmd
    PrependShell: false
  From:
    Image: alpine
  Name: ""
  Platform: ""
  SourceCode: FROM alpine
