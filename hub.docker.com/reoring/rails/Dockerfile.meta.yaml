MetaArgs: null
Stages:
- BaseName: ruby:2.3.1
  Commands:
  - Env:
    - Key: BUILD_PACKAGES
      Value: '"build-essential"'
    - Key: DEV_PACKAGES
      Value: '"libxml2-dev libxslt-dev libsqlite3-dev postgresql-server-dev-all libmysqlclient-dev
        tzdata nodejs"'
    - Key: SYSTEM_LIB_REQUIRED_GEMS
      Value: '"mysql2 pg"'
    - Key: GEMS
      Value: '"sqlite3 debug_inspector binding_of_caller byebug puma rails bcrypt
        byebug therubyracer rake minitest i18n addressable ast execjs connection_pool
        orm_adapter ipaddress request_store rspec rspec-support tilt spring timecop
        turbolinks-source faker warden rack-protection launchy parser autoprefixer-rails
        uglifier coffee-script better_errors rdoc pry rspec-core rspec-expectations
        rspec-mocks slim spring-commands-rspec turbolinks letter_opener astrolabe
        faraday faraday_middleware sdoc factory_girl bullet jbuilder onkcop annotate
        bitmask_attributes polyamorous gon ransack simple_form coffee-rails responders
        devise gretel xray-rails"'
    - Key: RUBY_VERSION
      Value: '"2.3.1"'
    Name: env
  - CmdLine:
    - set -x   && apt-get update -y   && apt-get install -y $BUILD_PACKAGES $DEV_PACKAGES   &&
      gem install nokogiri --     --with-xml2-config=/usr/bin/xml2-config     --with-xslt-config=/usr/bin/xslt-config   &&
      gem install $SYSTEM_LIB_REQUIRED_GEMS -- --use-system-libraries   && gem install
      $GEMS   && rm -rf /usr/local/bundle/cache/*.gem   && rm -rf /usr/local/lib/ruby/gems/$RUBY_VERSION/cache/*.gem   &&
      rm -rf ~/.gem   && rm -rf /usr/lib/libmysqld* /usr/bin/mysql*
    Name: run
    PrependShell: true
  - Env:
    - Key: LANG
      Value: C.UTF-8
    Name: env
  - Name: expose
    Ports:
    - "3000"
  - Name: workdir
    Path: /app
  - Expression: ADD scripts/ /app/
    Name: onbuild
  - Expression: COPY local_gems /app/local_gems
    Name: onbuild
  - Expression: RUN ls local_gems
    Name: onbuild
  - Expression: COPY Gemfile /app/
    Name: onbuild
  - Expression: COPY Gemfile.lock /app/
    Name: onbuild
  - Expression: RUN $(test -x pre_config.sh && sh pre_config.sh) || true
    Name: onbuild
  - Expression: RUN bundle install -j16
    Name: onbuild
  - Expression: RUN $(test -x post_config.sh && sh post_config.sh) || true
    Name: onbuild
  From:
    Image: ruby:2.3.1
  Name: ""
  Platform: ""
  SourceCode: FROM ruby:2.3.1
