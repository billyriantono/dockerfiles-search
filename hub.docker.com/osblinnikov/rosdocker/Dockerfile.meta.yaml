MetaArgs: null
Stages:
- BaseName: ubuntu:trusty
  Commands:
  - Maintainer: Oleg Blinnikov, osblinnikov@gmail.com
    Name: maintainer
  - CmdLine:
    - apt-get -y update
    Name: run
    PrependShell: true
  - CmdLine:
    - apt-get install -y debian-keyring debian-archive-keyring
    Name: run
    PrependShell: true
  - CmdLine:
    - apt-get install -y wget
    Name: run
    PrependShell: true
  - CmdLine:
    - wget --no-check-certificate https://raw.githubusercontent.com/ros/rosdistro/master/ros.key
      -O - | apt-key add -
    Name: run
    PrependShell: true
  - CmdLine:
    - apt-get install -y netcat
    Name: run
    PrependShell: true
  - CmdLine:
    - sh -c 'echo "deb http://packages.ros.org/ros/ubuntu trusty main" > /etc/apt/sources.list.d/ros-latest.list'
    Name: run
    PrependShell: true
  - CmdLine:
    - sh -c 'echo "deb http://ppa.launchpad.net/chris-lea/node.js/ubuntu trusty main"
      > /etc/apt/sources.list.d/node-latest.list'
    Name: run
    PrependShell: true
  - CmdLine:
    - apt-key adv --keyserver keyserver.ubuntu.com --recv-keys B9316A7BC7917B12
    Name: run
    PrependShell: true
  - CmdLine:
    - apt-get update
    Name: run
    PrependShell: true
  - CmdLine:
    - apt-get install -y ros-indigo-ros-base
    Name: run
    PrependShell: true
  - CmdLine:
    - apt-get install -y python-rosinstall
    Name: run
    PrependShell: true
  - CmdLine:
    - apt-get install -y bash-completion git build-essential vim tmux
    Name: run
    PrependShell: true
  - CmdLine:
    - rosdep init
    Name: run
    PrependShell: true
  - CmdLine:
    - apt-mark hold initscripts udev plymouth mountall
    Name: run
    PrependShell: true
  - CmdLine:
    - dpkg-divert --local --rename --add /sbin/initctl && ln -sf /bin/true /sbin/initctl
    Name: run
    PrependShell: true
  - CmdLine:
    - apt-get install -y --force-yes --no-install-recommends supervisor         openssh-server
      pwgen sudo vim-tiny         net-tools         lxde x11vnc xvfb         gtk2-engines-murrine
      ttf-ubuntu-font-family         nodejs     && apt-get autoclean     && apt-get
      autoremove     && rm -rf /var/lib/apt/lists/*
    Name: run
    PrependShell: true
  - Chown: ""
    Name: add
    SourcesAndDest:
    - noVNC
    - /noVNC
  - Chown: ""
    Name: add
    SourcesAndDest:
    - supervisord.conf
    - /
  - Chown: ""
    Name: add
    SourcesAndDest:
    - startcontainer
    - /usr/local/bin/startcontainer
  - CmdLine:
    - chmod 755 /usr/local/bin/startcontainer
    Name: run
    PrependShell: true
  - CmdLine:
    - adduser --gecos "ROS User" --disabled-password ros
    Name: run
    PrependShell: true
  - CmdLine:
    - usermod -a -G dialout ros
    Name: run
    PrependShell: true
  - CmdLine:
    - mkdir /var/run/sshd
    Name: run
    PrependShell: true
  - Chown: ""
    Name: add
    SourcesAndDest:
    - 99_aptget
    - /etc/sudoers.d/99_aptget
  - CmdLine:
    - chmod 0440 /etc/sudoers.d/99_aptget && chown root:root /etc/sudoers.d/99_aptget
    Name: run
    PrependShell: true
  - CmdLine:
    - echo "    ForwardX11Trusted yes\n" >> /etc/ssh/ssh_config
    Name: run
    PrependShell: true
  - Name: user
    User: ros
  - CmdLine:
    - HOME=/home/ros rosdep update
    Name: run
    PrependShell: true
  - CmdLine:
    - mkdir -p /home/ros/workspace/src
    Name: run
    PrependShell: true
  - CmdLine:
    - /bin/bash -c '. /opt/ros/indigo/setup.bash; catkin_init_workspace /home/ros/workspace/src'
    Name: run
    PrependShell: true
  - CmdLine:
    - /bin/bash -c '. /opt/ros/indigo/setup.bash; cd /home/ros/workspace; catkin_make'
    Name: run
    PrependShell: true
  - Chown: ""
    Name: add
    SourcesAndDest:
    - bashrc
    - /.bashrc
  - Chown: ""
    Name: add
    SourcesAndDest:
    - bashrc
    - /home/ros/.bashrc
  - CmdLine:
    - mkdir -p /home/ros/Desktop
    Name: run
    PrependShell: true
  - Chown: ""
    Name: add
    SourcesAndDest:
    - xterm
    - /home/ros/Desktop/
  - CmdLine:
    - /bin/bash
    Name: cmd
    PrependShell: false
  - CmdLine:
    - /usr/local/bin/startcontainer
    Name: entrypoint
    PrependShell: false
  From:
    Image: ubuntu:trusty
  Name: ""
  Platform: ""
  SourceCode: FROM ubuntu:trusty
