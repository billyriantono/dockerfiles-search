MetaArgs: null
Stages:
- BaseName: thewtex/cross-compiler-base
  Commands:
  - Maintainer: Matt McCormick "matt.mccormick@kitware.com"
    Name: maintainer
  - CmdLine:
    - curl -sL https://deb.nodesource.com/setup_4.x | bash - &&   apt-get install
      -y --no-install-recommends     default-jre     nodejs     python2.7
    Name: run
    PrependShell: true
  - Env:
    - Key: EMSCRIPTEN_VERSION
      Value: 1.36.5
    Name: env
  - CmdLine:
    - cd /usr &&   curl -L https://s3.amazonaws.com/mozilla-games/emscripten/releases/emsdk-portable.tar.gz
      | tar xz &&   cd ./emsdk_portable &&   ./emsdk update &&   ./emsdk install -j$(nproc)
      --build=Release sdk-tag-${EMSCRIPTEN_VERSION}-32bit &&   ./emsdk activate --build=Release
      sdk-tag-${EMSCRIPTEN_VERSION}-32bit &&   ./emsdk install node-4.1.1-64bit &&   ./emsdk
      activate node-4.1.1-64bit &&   ./emsdk uninstall node-4.1.1-32bit &&   find
      . -name "*.o" -exec rm {} \; &&   find . -name "*.a" -exec rm {} \; &&   find
      . -name "*.tmp" -exec rm {} \;
    Name: run
    PrependShell: true
  - Env:
    - Key: PATH
      Value: /usr/emsdk_portable:/usr/emsdk_portable/clang/tag-e${EMSCRIPTEN_VERSION}/build_tag-e${EMSCRIPTEN_VERSION}_32/bin:/usr/emsdk_portable/emscripten/tag-${EMSCRIPTEN_VERSION}:${PATH}
    Name: env
  - Env:
    - Key: CC
      Value: /usr/emsdk_portable/emscripten/tag-${EMSCRIPTEN_VERSION}/emcc
    - Key: CXX
      Value: /usr/emsdk_portable/emscripten/tag-${EMSCRIPTEN_VERSION}/em++
    - Key: AR
      Value: /usr/emsdk_portable/emscripten/tag-${EMSCRIPTEN_VERSION}/emar
    Name: env
  - Chown: ""
    Name: add
    SourcesAndDest:
    - test/
    - /tmp/test/
  - CmdLine:
    - cd /tmp &&   /bin/echo -e "#include <iostream>\nint main() { std::cout << \"first
      run\"; return 0; }" > /tmp/first_run.cxx &&   $CXX /tmp/first_run.cxx -o a.out.js
      &&   rm /tmp/first_run.* &&   /bin/echo -e "#include <stdio.h>\nint main() {
      printf(\"first run\"); return 0; }" > /tmp/first_run.c &&   $CC /tmp/first_run.c
      -o a.out.js &&   rm /tmp/first_run.* a.out.js &&   cd /tmp/test &&   python
      /tmp/test/run.py; python /tmp/test/run.py &&   cd && rm -rf /tmp/test
    Name: run
    PrependShell: true
  - Env:
    - Key: DEFAULT_DOCKCROSS_IMAGE
      Value: thewtex/cross-compiler-browser-asmjs
    Name: env
  - Env:
    - Key: CMAKE_TOOLCHAIN_FILE
      Value: /usr/emsdk_portable/emscripten/tag-${EMSCRIPTEN_VERSION}/cmake/Modules/Platform/Emscripten.cmake
    Name: env
  From:
    Image: thewtex/cross-compiler-base
  Name: ""
  Platform: ""
  SourceCode: FROM thewtex/cross-compiler-base
