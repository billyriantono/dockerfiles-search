MetaArgs: null
Stages:
- BaseName: debian:stable-slim
  Commands:
  - Labels:
    - Key: maintainer
      Value: '"Morgan Auchede <morgan.auchede@gmail.com>"'
    Name: label
  - Env:
    - Key: S6_BEHAVIOUR_IF_STAGE2_FAILS
      Value: "2"
    - Key: S6_KEEP_ENV
      Value: "1"
    - Key: S6_READ_ONLY_ROOT
      Value: "1"
    - Key: VSFTPD_VERSION
      Value: latest
    Name: env
  - CmdLine:
    - set -ex     && export DEBIAN_FRONTEND=noninteractive     && apt-get update     &&
      export BUILD_DEPS="build-essential curl gcc libpam0g-dev libssl-dev libwrap0-dev"     &&
      apt-get install --no-install-recommends --yes            ${BUILD_DEPS}            apache2-utils            ca-certificates            libpam-pwdfile            libssl-dev            libwrap0     &&
      curl --location "https://github.com/timonier/dumb-entrypoint/raw/master/src/s6-overlay/installer"
      | INSTALL_DIRECTORY="/usr/sbin" sh -s -- install     && curl --location "https://github.com/timonier/dumb-entrypoint/raw/master/src/syslog-stdout/installer"
      | INSTALL_DIRECTORY="/usr/sbin" sh -s -- install     && export $(curl --location
      "https://github.com/timonier/version-lister/raw/generated/_/vsftpd/latest" |
      xargs)     && curl --location "https://security.appspot.com/downloads/vsftpd-${VSFTPD_VERSION}.tar.gz"
      | tar --directory /tmp --extract --gzip     && make --directory "/tmp/vsftpd-${VSFTPD_VERSION}"     &&
      cp "/tmp/vsftpd-${VSFTPD_VERSION}/vsftpd" /usr/sbin/vsftpd     && mkdir /usr/share/vsftpd     &&
      usermod --home /srv/ftp nobody     && apt-get remove --purge --yes            ${BUILD_DEPS}     &&
      apt-get autoremove --purge --yes     && rm --force --recursive            /tmp/*
    Name: run
    PrependShell: true
  - Chown: ""
    From: ""
    Name: copy
    SourcesAndDest:
    - ./rootfs
    - /
  - CmdLine:
    - /init
    Name: entrypoint
    PrependShell: false
  From:
    Image: debian:stable-slim
  Name: ""
  Platform: ""
  SourceCode: FROM debian:stable-slim
