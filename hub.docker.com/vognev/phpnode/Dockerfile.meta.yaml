MetaArgs: null
Stages:
- BaseName: vognev/base
  Commands:
  - Key: PHP
    Name: arg
    Value: "7.0"
  - CmdLine:
    - apt-get update && apt-get install -y wget apt-transport-https && wget -O /etc/apt/trusted.gpg.d/php.gpg
      https://packages.sury.org/php/apt.gpg && echo "deb https://packages.sury.org/php/
      jessie main" > /etc/apt/sources.list.d/php.list && apt-get update && apt-get
      install -y php${PHP}-cli php${PHP}-mysql php${PHP}-xdebug php${PHP}-curl &&
      apt-get remove --purge -y wget && apt-get autoremove -y && rm -rf /var/lib/apt/lists/*
    Name: run
    PrependShell: true
  - CmdLine:
    - echo "xdebug.remote_enable = 1"       >> /etc/php/${PHP}/mods-available/xdebug.ini
    Name: run
    PrependShell: true
  - CmdLine:
    - echo "xdebug.remote_connect_back = 1" >> /etc/php/${PHP}/mods-available/xdebug.ini
    Name: run
    PrependShell: true
  - CmdLine:
    - echo "xdebug.remote_port = 9000"      >> /etc/php/${PHP}/mods-available/xdebug.ini
    Name: run
    PrependShell: true
  - CmdLine:
    - echo "xdebug.max_nesting_level = 512" >> /etc/php/${PHP}/mods-available/xdebug.ini
    Name: run
    PrependShell: true
  - CmdLine:
    - apt-get update && apt-get install -y wget apt-transport-https && wget -qO- https://deb.nodesource.com/gpgkey/nodesource.gpg.key
      | apt-key add - && echo 'deb https://deb.nodesource.com/node_8.x jessie main'
      > /etc/apt/sources.list.d/nodesource.list && apt-get update && apt-get install
      -y nodejs && npm install -g gulp-cli yarn && apt-get remove --purge -y wget
      && apt-get autoremove -y && rm -rf /var/lib/apt/lists/*
    Name: run
    PrependShell: true
  - Chown: ""
    Name: add
    SourcesAndDest:
    - https://getcomposer.org/composer.phar
    - /usr/local/bin/composer
  - CmdLine:
    - chmod a+rx /usr/local/bin/composer
    Name: run
    PrependShell: true
  - CmdLine:
    - mkdir /app && chown debian:debian /app
    Name: run
    PrependShell: true
  - Name: workdir
    Path: /app
  - Name: user
    User: debian
  From:
    Image: vognev/base
  Name: ""
  Platform: ""
  SourceCode: FROM vognev/base
