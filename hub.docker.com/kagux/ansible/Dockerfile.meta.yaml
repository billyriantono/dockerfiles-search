MetaArgs: null
Stages:
- BaseName: ubuntu:14.04
  Commands:
  - Maintainer: Boris Mikhaylov kaguxmail@gmail.com
    Name: maintainer
  - CmdLine:
    - apt-get -y update
    Name: run
    PrependShell: true
  - CmdLine:
    - apt-get install -y python-yaml python-jinja2 git python-pip sshpass curl apt-transport-https
    Name: run
    PrependShell: true
  - CmdLine:
    - pip install docker-py
    Name: run
    PrependShell: true
  - Env:
    - Key: ANSIBLE_VER
      Value: stable-1.9
    Name: env
  - CmdLine:
    - git clone http://github.com/ansible/ansible.git /ansible
    Name: run
    PrependShell: true
  - CmdLine:
    - cd /ansible && git checkout $ANSIBLE_VER && git submodule update --init --recursive
    Name: run
    PrependShell: true
  - Env:
    - Key: PATH
      Value: /ansible/bin:/sbin:/usr/sbin:/usr/bin:/bin:/usr/local/bin
    Name: env
  - Env:
    - Key: ANSIBLE_LIBRARY
      Value: /ansible/library
    Name: env
  - Env:
    - Key: PYTHONPATH
      Value: /ansible/lib:$PYTHON_PATH
    Name: env
  - CmdLine:
    - echo deb https://get.docker.io/ubuntu docker main > /etc/apt/sources.list.d/docker.list   &&
      apt-key adv --keyserver hkp://keyserver.ubuntu.com:80 --recv-keys 36A1D7869245C8950F966E92D8576A8BA88D21E9   &&
      apt-get update -qq   && apt-get install -qqy lxc-docker
    Name: run
    PrependShell: true
  - CmdLine:
    - echo 'ssh -o UserKnownHostsFile=/dev/null -o StrictHostKeyChecking=no $*' >
      /opt/git_ssh
    Name: run
    PrependShell: true
  - CmdLine:
    - chmod +x /opt/git_ssh
    Name: run
    PrependShell: true
  - Env:
    - Key: GIT_SSH
      Value: /opt/git_ssh
    Name: env
  - Env:
    - Key: HOME
      Value: /root
    Name: env
  - CmdLine:
    - mkdir /workdir
    Name: run
    PrependShell: true
  - Name: workdir
    Path: /workdir
  - Chown: ""
    Name: add
    SourcesAndDest:
    - ansible.cfg
    - /etc/ansible/ansible.cfg
  From:
    Image: ubuntu:14.04
  Name: ""
  Platform: ""
  SourceCode: FROM ubuntu:14.04
