MetaArgs: null
Stages:
- BaseName: golang:1.9.0
  Commands:
  - CmdLine:
    - go version
    Name: run
    PrependShell: true
  - CmdLine:
    - curl -sL https://deb.nodesource.com/setup_8.x | bash
    Name: run
    PrependShell: true
  - CmdLine:
    - sh -c 'echo "deb http://apt.postgresql.org/pub/repos/apt/ `lsb_release -cs`-pgdg
      main" >> /etc/apt/sources.list.d/pgdg.list'
    Name: run
    PrependShell: true
  - CmdLine:
    - wget -q https://www.postgresql.org/media/keys/ACCC4CF8.asc -O - | apt-key add
      -
    Name: run
    PrependShell: true
  - CmdLine:
    - apt-get update && apt-get install -y build-essential     nodejs     sqlite3     libsqlite3-dev     postgresql     postgresql-contrib     libpq-dev     mysql-client     vim     netcat     &&
      rm -rf /var/lib/apt/lists/*
    Name: run
    PrependShell: true
  - CmdLine:
    - go get -u github.com/golang/dep/cmd/dep
    Name: run
    PrependShell: true
  - CmdLine:
    - npm install -g --no-progress yarn
    Name: run
    PrependShell: true
  - CmdLine:
    - yarn config set yarn-offline-mirror /npm-packages-offline-cache
    Name: run
    PrependShell: true
  - CmdLine:
    - yarn config set yarn-offline-mirror-pruning true
    Name: run
    PrependShell: true
  - CmdLine:
    - go get -u -v github.com/gobuffalo/buffalo/buffalo
    Name: run
    PrependShell: true
  - Env:
    - Key: BP
      Value: $GOPATH/src/github.com/gobuffalo/buffalo
    Name: env
  - Name: workdir
    Path: $BP
  - Chown: ""
    Name: add
    SourcesAndDest:
    - ./assets/wait-for
    - /wait-for
  - CmdLine:
    - grep -v '{{' $BP/generators/assets/webpack/templates/package.json.tmpl > package.json
    Name: run
    PrependShell: true
  - CmdLine:
    - yarn install --no-progress
    Name: run
    PrependShell: true
  - CmdLine:
    - buffalo version
    Name: run
    PrependShell: true
  - Name: workdir
    Path: $GOPATH/src
  - CmdLine:
    - ls -la /npm-packages-offline-cache
    Name: run
    PrependShell: true
  - Name: expose
    Ports:
    - "3000"
  From:
    Image: golang:1.9.0
  Name: ""
  Platform: ""
  SourceCode: FROM golang:1.9.0
