MetaArgs: null
Stages:
- BaseName: ubuntu:16.04
  Commands:
  - Maintainer: Cyrill Guillemot "https://github.com/cyrillg"
    Name: maintainer
  - Key: user
    Name: arg
    Value: serial
  - Env:
    - Key: USER
      Value: $user
    Name: env
  - Env:
    - Key: DEBIAN_FRONTEND
      Value: noninteractive
    Name: env
  - CmdLine:
    - sh -c 'echo "deb http://packages.ros.org/ros/ubuntu xenial main" >                 /etc/apt/sources.list.d/ros-latest.list'
      &&     apt-key adv --keyserver hkp://ha.pool.sks-keyservers.net:80                 --recv-key
      421C365BD9FF1F717815A3895523BAEEB01FA116 &&     apt-get update && apt-get install
      -y ros-kinetic-desktop &&     rosdep init
    Name: run
    PrependShell: true
  - CmdLine:
    - apt-get update &&     apt-get install -y --no-install-recommends ubuntu-desktop
      &&     apt-get install -y gnome-panel       gnome-settings-daemon       metacity       nautilus       gnome-terminal       x11vnc       xvfb       vim       tmux       git       locales       sudo       apt-utils       supervisor
    Name: run
    PrependShell: true
  - CmdLine:
    - sed -i -e 's/# en_US.UTF-8 UTF-8/en_US.UTF-8 UTF-8/' /etc/locale.gen &&     locale-gen
    Name: run
    PrependShell: true
  - Env:
    - Key: DISPLAY
      Value: :1
    - Key: TERM
      Value: xterm-256color
    - Key: HOME
      Value: /home/$USER
    Name: env
  - CmdLine:
    - groupadd $USER &&     useradd --create-home --no-log-init -g $USER $USER &&     usermod
      -aG sudo $USER &&     echo "$USER:$USER" | chpasswd &&     chsh -s /bin/bash
      $USER
    Name: run
    PrependShell: true
  - Name: workdir
    Path: $HOME
  - CmdLine:
    - mkdir ros_ws &&     mkdir -p ./.config/nautilus &&     mkdir -p /var/log/supervisor
      &&     curl https://raw.githubusercontent.com/git/git/master/contrib/completion/git-prompt.sh
      > .git-prompt.bash &&     touch .bash_history
    Name: run
    PrependShell: true
  - Chown: ""
    From: ""
    Name: copy
    SourcesAndDest:
    - files/.bashrc
    - files/.tmux.conf
    - files/.vimrc
    - files/autumn.jpg
    - files/init_ros
    - ./
  - Chown: ""
    From: ""
    Name: copy
    SourcesAndDest:
    - files/supervisord.conf
    - /etc/supervisor/conf.d/supervisord.conf
  - CmdLine:
    - chown -R $USER:$USER . &&     chmod +x init_ros
    Name: run
    PrependShell: true
  - Name: user
    User: $USER
  - CmdLine:
    - rosdep fix-permissions && rosdep update
    Name: run
    PrependShell: true
  - Name: user
    User: root
  - Name: expose
    Ports:
    - "5900"
  - CmdLine:
    - /usr/bin/supervisord
    Name: cmd
    PrependShell: false
  From:
    Image: ubuntu:16.04
  Name: ""
  Platform: ""
  SourceCode: FROM ubuntu:16.04
