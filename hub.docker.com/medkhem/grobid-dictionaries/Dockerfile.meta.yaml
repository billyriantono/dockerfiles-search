MetaArgs: null
Stages:
- BaseName: openjdk:8
  Commands:
  - Maintainer: Mohamed Khemakhem <mohamed.khemakhem@inria.fr>
    Name: maintainer
  - Key: GROBID_VERSION
    Name: arg
    Value: 0.5.6-SNAPSHOT
  - CmdLine:
    - export DEBIAN_FRONTEND=noninteractive &&   sed -i 's/# \(.*multiverse$\)/\1/g'
      /etc/apt/sources.list &&   apt-get update &&   apt-get -y upgrade
    Name: run
    PrependShell: true
  - CmdLine:
    - wget -q https://services.gradle.org/distributions/gradle-3.3-bin.zip     &&
      unzip gradle-3.3-bin.zip -d /opt     && rm gradle-3.3-bin.zip
    Name: run
    PrependShell: true
  - CmdLine:
    - apt-get install -y --no-install-recommends software-properties-common &&   apt-get
      install -y vim wget curl git maven
    Name: run
    PrependShell: true
  - CmdLine:
    - git clone https://github.com/MedKhem/grobid
    Name: run
    PrependShell: true
  - CmdLine:
    - rm -r /grobid/grobid-service/ && rm -r /grobid/grobid-trainer/resources/ &&
      rm -r /grobid/grobid-home/models/*  && rm -r /grobid/grobid-core/*
    Name: run
    PrependShell: true
  - CmdLine:
    - cd /grobid &&   git clone https://github.com/MedKhem/grobid-dictionaries
    Name: run
    PrependShell: true
  - CmdLine:
    - cd /grobid/grobid-dictionaries &&   mv toyData resources && mvn install:install-file
      -Dfile=grobidDependencies/grobid-core-$GROBID_VERSION.jar -DgroupId=org.grobid
      -DartifactId=grobid-core -Dversion=$GROBID_VERSION -Dpackaging=jar && mvn install:install-file
      -Dfile=grobidDependencies/grobid-trainer-$GROBID_VERSION.jar -DgroupId=org.grobid
      -DartifactId=grobid-trainer -Dversion=$GROBID_VERSION -Dpackaging=jar &&  mvn
      -Dmaven.test.skip=true clean install &&  mvn generate-resources -P train_dictionary_segmentation
      -e &&  mvn generate-resources -P train_dictionary_body_segmentation -e &&  mvn
      generate-resources -P train_lexicalEntries -e &&  mvn generate-resources -P
      train_form -e &&  mvn generate-resources -P train_sense -e &&  mvn generate-resources
      -P train_etymQuote -e &&  mvn generate-resources -P train_etym -e &&  mvn generate-resources
      -P train_sub_sense -e &&   mvn generate-resources -P train_gramGrp -e &&  mvn
      generate-resources -P train_crossRef -e
    Name: run
    PrependShell: true
  - Name: workdir
    Path: /grobid/grobid-dictionaries
  - Name: expose
    Ports:
    - "8080"
  From:
    Image: openjdk:8
  Name: ""
  Platform: ""
  SourceCode: FROM openjdk:8
