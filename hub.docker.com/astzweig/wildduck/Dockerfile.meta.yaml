MetaArgs: null
Stages:
- As: builder
  BaseName: alpine:latest
  Commands:
  - Labels:
    - Key: org.label-schema.vendor
      Value: = "Astzweig UG(haftungsbeschr√§nkt) & Co. KG"
    Name: label
  - Labels:
    - Key: org.label-schema.version
      Value: = "1.2.3"
    Name: label
  - Labels:
    - Key: org.label-schema.description
      Value: = "A docker container to run nodemailer/wildduck mailserver."
    Name: label
  - Labels:
    - Key: org.label-schema.vcs-url
      Value: = "https://github.com/astzweig/docker-wildduck"
    Name: label
  - Labels:
    - Key: org.label-schema.schema-version
      Value: = "1.0"
    Name: label
  - CmdLine:
    - apk add --no-cache dumb-init;
    Name: run
    PrependShell: true
  - Key: INSTALL_DIR
    Name: arg
    Value: /var/nodemailer
  - Key: SCRIPTS_DIR
    Name: arg
    Value: /root/scripts
  - Env:
    - Key: INSTALL_DIR
      Value: ${INSTALL_DIR}
    Name: env
  - Env:
    - Key: SCRIPTS_DIR
      Value: ${SCRIPTS_DIR}
    Name: env
  - Key: WILDDUCK_GIT_REPO
    Name: arg
    Value: https://github.com/nodemailer/wildduck.git
  - Key: WILDDUCK_GIT_CID
    Name: arg
    Value: 4c1cd4210aca615e676eef766429c2bece5e18e3
  - Key: HARAKA_VERSION
    Name: arg
    Value: 2.8.25
  - Key: HARAKA_WD_PLUGIN_GIT_REPO
    Name: arg
    Value: https://github.com/nodemailer/haraka-plugin-wildduck.git
  - Key: HARAKA_WD_PLUGIN_GIT_CID
    Name: arg
    Value: fc85b92f06764b1fbc872032c1dc6193d2d7f068
  - Key: ZONEMTA_GIT_REPO
    Name: arg
    Value: https://github.com/zone-eu/zone-mta-template.git
  - Key: ZONEMTA_GIT_CID
    Name: arg
    Value: f5e752e5a9f1ba22699c612cade133be58162ad6
  - Key: ZONEMTA_WD_PLUGIN_GIT_REPO
    Name: arg
    Value: https://github.com/nodemailer/zonemta-wildduck.git
  - Key: ZONEMTA_WD_PLUGIN_GIT_CID
    Name: arg
    Value: 695ca8a19a3c3e8212de1136a73beb58db6453c4
  - Chown: ""
    From: ""
    Name: copy
    SourcesAndDest:
    - ./scripts/[0-9][0-9]-*.sh
    - ${SCRIPTS_DIR}/
  - CmdLine:
    - for file in ${SCRIPTS_DIR}/[0-9][0-9]-*.sh; do         chmod u+x "${file}";         source
      "${file}";     done
    Name: run
    PrependShell: true
  - Chown: ""
    From: ""
    Name: copy
    SourcesAndDest:
    - ./scripts/[^0-9]*.sh
    - ${SCRIPTS_DIR}/
  - Chown: ""
    From: ""
    Name: copy
    SourcesAndDest:
    - ./scripts/bin
    - /usr/local/bin
  - CmdLine:
    - chmod +x ${SCRIPTS_DIR}/entrypoint.sh;     chmod +x /usr/local/bin/*;
    Name: run
    PrependShell: true
  - Name: volume
    Volumes:
    - /etc/nodemailer
  - CmdLine:
    - /usr/bin/dumb-init
    - --
    Name: entrypoint
    PrependShell: false
  - CmdLine:
    - ${SCRIPTS_DIR}/entrypoint.sh
    Name: cmd
    PrependShell: true
  From:
    Image: alpine:latest
  Name: builder
  Platform: ""
  SourceCode: FROM alpine:latest as builder
