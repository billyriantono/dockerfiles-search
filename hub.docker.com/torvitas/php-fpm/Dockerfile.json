{
  "MetaArgs": null,
  "Stages": [
    {
      "Name": "",
      "BaseName": "php:7.0-fpm",
      "SourceCode": "FROM php:7.0-fpm",
      "Platform": "",
      "From": {
        "Image": "php:7.0-fpm"
      },
      "Commands": [
        {
          "Maintainer": "Sascha Marcel Schmidt \u003cdocker@saschaschmidt.net\u003e",
          "Name": "maintainer"
        },
        {
          "Env": [
            {
              "Key": "COMPOSER_HOME",
              "Value": "/usr/local/lib/composer/"
            }
          ],
          "Name": "env"
        },
        {
          "Env": [
            {
              "Key": "COMPOSER_CACHE_DIR",
              "Value": "/tmp/composer/cache/"
            }
          ],
          "Name": "env"
        },
        {
          "Env": [
            {
              "Key": "COMPOSER_BIN_DIR",
              "Value": "/usr/local/lib/composer/bin/"
            }
          ],
          "Name": "env"
        },
        {
          "Env": [
            {
              "Key": "PATH",
              "Value": "${PATH}:/usr/local/lib/composer/bin"
            }
          ],
          "Name": "env"
        },
        {
          "CmdLine": [
            "apt-get update \u0026\u0026     apt-get install --no-install-recommends -y         imagemagick         libmagickwand-dev         openssh-client         sudo         git         libmemcached-dev         libssl-dev         libpng12-dev         libjpeg-dev         re2c         libfreetype6-dev         libmcrypt-dev         libxml2-dev \u0026\u0026     rm -r /var/lib/apt/lists/*"
          ],
          "Name": "run",
          "PrependShell": true
        },
        {
          "CmdLine": [
            "cd /tmp/ \u0026\u0026     mkdir -p /usr/src/php/ext \u0026\u0026     curl -O http://pecl.php.net/get/xdebug-2.4.0.tgz \u0026\u0026     tar zxvf xdebug-2.4.0.tgz \u0026\u0026     mv xdebug-2.4.0 /usr/src/php/ext/xdebug \u0026\u0026     curl -O https://pecl.php.net/get/mongodb-1.1.5.tgz \u0026\u0026     tar zxvf mongodb-1.1.5.tgz \u0026\u0026     mv mongodb-1.1.5 /usr/src/php/ext/mongodb \u0026\u0026     curl -O https://pecl.php.net/get/imagick-3.4.3RC1.tgz \u0026\u0026     tar zxvf imagick-3.4.3RC1.tgz \u0026\u0026     mv imagick-3.4.3RC1 /usr/src/php/ext/imagick \u0026\u0026     curl -LO https://github.com/php-memcached-dev/php-memcached/archive/v3.0.1.tar.gz \u0026\u0026     tar zxvf v3.0.1.tar.gz \u0026\u0026     mv php-memcached-3.0.1 /usr/src/php/ext/memcached \u0026\u0026     curl -O https://pecl.php.net/get/redis-3.1.1.tgz \u0026\u0026     tar zxvf redis-3.1.1.tgz \u0026\u0026     mv redis-3.1.1 /usr/src/php/ext/redis \u0026\u0026     echo 'xdebug' \u003e\u003e /usr/src/php-available-exts \u0026\u0026     echo 'mongodb' \u003e\u003e /usr/src/php-available-exts \u0026\u0026     echo 'imagick' \u003e\u003e /usr/src/php-available-exts \u0026\u0026     echo 'memcached' \u003e\u003e /usr/src/php-available-exts \u0026\u0026     echo 'redis' \u003e\u003e /usr/src/php-available-exts \u0026\u0026     cd / \u0026\u0026     rm -rf /tmp/*"
          ],
          "Name": "run",
          "PrependShell": true
        },
        {
          "CmdLine": [
            "cd /usr/src/ \u0026\u0026 tar -xf php.tar.xz \u0026\u0026 cp -rf php-${PHP_VERSION}/* php \u0026\u0026 cd /var/www/html \u0026\u0026     docker-php-ext-configure gd --with-jpeg-dir --with-png-dir --with-freetype-dir \u0026\u0026     docker-php-ext-install     gd     imagick     xdebug     soap     iconv     mcrypt     mbstring     pdo_mysql     mysqli     zip     bcmath     opcache     mongodb     memcached     redis     pcntl \u0026\u0026     rm -rf /usr/src/php*"
          ],
          "Name": "run",
          "PrependShell": true
        },
        {
          "CmdLine": [
            "curl -s https://getcomposer.org/installer | php -- --install-dir=/usr/local/bin/ --filename=composer \u0026\u0026     composer global require codeception/codeception:~2.1                             squizlabs/php_codesniffer:~2.5                             robmorgan/phinx:~0.6 \u0026\u0026     phpcs --config-set ignore_warnings_on_exit 1 \u0026\u0026     phpcs --config-set show_progress 1 \u0026\u0026     phpcs --config-set default_standard PSR2"
          ],
          "Name": "run",
          "PrependShell": true
        },
        {
          "CmdLine": [
            "addgroup superuser \u0026\u0026     echo '%superuser        ALL=(ALL)       NOPASSWD: ALL' \u003e\u003e /etc/sudoers"
          ],
          "Name": "run",
          "PrependShell": true
        },
        {
          "Name": "volume",
          "Volumes": [
            "/tmp/composer/cache"
          ]
        },
        {
          "CmdLine": [
            "php-fpm"
          ],
          "Name": "cmd",
          "PrependShell": false
        },
        {
          "CmdLine": [
            "bash",
            "-i",
            "/usr/local/bin/entrypoint.sh"
          ],
          "Name": "entrypoint",
          "PrependShell": false
        },
        {
          "Chown": "",
          "From": "",
          "Name": "copy",
          "SourcesAndDest": [
            "src/",
            "/usr/local/"
          ]
        },
        {
          "CmdLine": [
            "chmod +x /usr/local/bin/entrypoint.sh"
          ],
          "Name": "run",
          "PrependShell": true
        }
      ]
    }
  ]
}