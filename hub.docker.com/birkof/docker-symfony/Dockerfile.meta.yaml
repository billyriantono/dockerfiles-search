MetaArgs: null
Stages:
- BaseName: birkof/ubuntu
  Commands:
  - CmdLine:
    - export LANG=C.UTF-8     && add-apt-repository -y ppa:ondrej/php     && wget
      -O - https://packagecloud.io/gpg.key | sudo apt-key add -     && echo "deb http://packages.blackfire.io/debian
      any main" | sudo tee /etc/apt/sources.list.d/blackfire.list     && curl -sL
      https://deb.nodesource.com/setup_6.x | bash -     && apt-get install -yq --no-install-recommends
      nodejs
    Name: run
    PrependShell: true
  - CmdLine:
    - apt-get install -yq --no-install-recommends     nginx     php7.0     php7.0-dev     php7.0-fpm     php7.0-mysql     php7.0-mcrypt     php7.0-mbstring     php7.0-bcmath     php7.0-soap     php7.0-json     php7.0-xml     php7.0-xmlrpc     php7.0-zip     php7.0-gd     php7.0-curl     php7.0-ldap     php7.0-intl     php7.0-opcache     php-xdebug     php-redis     php-apcu     php-memcache     php-memcached     php-pear     blackfire-php
    Name: run
    PrependShell: true
  - Chown: ""
    Name: add
    SourcesAndDest:
    - .docker
    - /
  - CmdLine:
    - sed -i".bak" "s@^;date.timezone =.*@date.timezone = $TIMEZONE@" /etc/php/7.0/*/php.ini
    Name: run
    PrependShell: true
  - CmdLine:
    - mkdir -p /var/log/php7     && sed -i 's/;log_level = .*/log_level = debug/g'
      /etc/php/7.0/fpm/php-fpm.conf     && sed -i 's/;daemonize = yes/daemonize =
      no/g' /etc/php/7.0/fpm/php-fpm.conf     && sed -i -e "s/^\error_log = .*$/error_log
      = \/var\/log\/php7\/php-fpm.log/g" /etc/php/7.0/fpm/php-fpm.conf
    Name: run
    PrependShell: true
  - CmdLine:
    - find /etc/php/7.0/cli/conf.d/ -name "*.ini" -exec sed -i -re 's/^(\s*)#(.*)/\1;\2/g'
      {} \;
    Name: run
    PrependShell: true
  - CmdLine:
    - usermod -u 1000 www-data
    Name: run
    PrependShell: true
  - CmdLine:
    - curl -LsS https://getcomposer.org/installer | php -- --install-dir=/usr/local/bin
      --filename=composer     && composer --version
    Name: run
    PrependShell: true
  - CmdLine:
    - curl -LsS https://squizlabs.github.io/PHP_CodeSniffer/phpcs.phar -o /usr/local/bin/phpcs     &&
      chmod a+x /usr/local/bin/phpcs     && phpcs --version
    Name: run
    PrependShell: true
  - CmdLine:
    - curl http://get.sensiolabs.org/php-cs-fixer.phar -o php-cs-fixer     && chmod
      a+x php-cs-fixer     && mv php-cs-fixer /usr/local/bin/php-cs-fixer
    Name: run
    PrependShell: true
  - CmdLine:
    - curl -LsS https://phar.phpunit.de/phpunit.phar -o /usr/local/bin/phpunit     &&
      chmod a+x /usr/local/bin/phpunit     && phpunit --version
    Name: run
    PrependShell: true
  - CmdLine:
    - curl -LsS http://symfony.com/installer -o /usr/local/bin/symfony     && chmod
      a+x /usr/local/bin/symfony     && symfony --version
    Name: run
    PrependShell: true
  - CmdLine:
    - echo '#!/bin/bash' > /usr/local/bin/dev && echo 'php /var/www/symfony/bin/console
      --env=dev $@' >> /usr/local/bin/dev && chmod +x /usr/local/bin/dev     && echo
      '#!/bin/bash' > /usr/local/bin/prod && echo 'php /var/www/symfony/bin/console
      --env=prod $@' >> /usr/local/bin/prod && chmod +x /usr/local/bin/prod
    Name: run
    PrependShell: true
  - CmdLine:
    - apt-get autoclean     && apt-get clean     && rm -rf /var/lib/apt/lists/* /tmp/*
      /var/tmp/*
    Name: run
    PrependShell: true
  - Name: expose
    Ports:
    - "22"
    - "80"
  - Name: workdir
    Path: /var/www
  From:
    Image: birkof/ubuntu
  Name: ""
  Platform: ""
  SourceCode: FROM birkof/ubuntu
