MetaArgs: null
Stages:
- BaseName: wenzizone/base
  Commands:
  - Maintainer: wenzizone <wenzizone@126.com>
    Name: maintainer
  - Env:
    - Key: DEBIAN_FRONTEND
      Value: noninteractive
    Name: env
  - CmdLine:
    - apt-get update &&     apt-get install -y curl libxml-parser-perl libdbd-mysql-perl
      mysql-server &&     apt-get clean
    Name: run
    PrependShell: true
  - Env:
    - Key: XTRABACKUP_VERSION
      Value: 2.3.2
    Name: env
  - CmdLine:
    - set -x;     curl -o percona-xtrabackup.deb -SL https://www.percona.com/downloads/XtraBackup/Percona-XtraBackup-${XTRABACKUP_VERSION}/binary/debian/trusty/x86_64/percona-xtrabackup_${XTRABACKUP_VERSION}-1.trusty_amd64.deb     &&
      dpkg --force-depends -i percona-xtrabackup.deb     && apt-get update     &&
      apt-get -y install -f --no-install-recommends     && rm -rf /var/lib/apt/lists/*
      percona-xtrabackup.deb
    Name: run
    PrependShell: true
  - Env:
    - Key: ZRM_VERSION
      Value: 3.0.0
    Name: env
  - Env:
    - Key: ZRM_MAIN_VERSION
      Value: "3.0"
    Name: env
  - CmdLine:
    - set -x;     curl -o mysql-zrm.deb -SL http://zmanda.com/downloads/community/ZRM-MySQL/${ZRM_MAIN_VERSION}/Debian/mysql-zrm_${ZRM_VERSION}_all.deb     &&
      dpkg --force-depends -i mysql-zrm.deb     && apt-get update     && apt-get -y
      install -f --no-install-recommends     && rm -rf /var/lib/apt/lists/* mysql-zrm.deb
    Name: run
    PrependShell: true
  - Chown: ""
    Name: add
    SourcesAndDest:
    - my.cnf
    - /etc/mysql/my.cnf
  - Chown: ""
    Name: add
    SourcesAndDest:
    - mysql-zrm.conf
    - /etc/mysql-zrm/mysql-zrm.conf
  - Chown: ""
    Name: add
    SourcesAndDest:
    - launch.bash
    - /launch
  - CmdLine:
    - chmod +x /launch
    Name: run
    PrependShell: true
  - Name: volume
    Volumes:
    - /var/lib/mysql
    - /var/lib/mysql-zrm
  - CmdLine:
    - /launch
    Name: cmd
    PrependShell: false
  From:
    Image: wenzizone/base
  Name: ""
  Platform: ""
  SourceCode: FROM wenzizone/base
