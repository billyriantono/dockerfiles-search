MetaArgs: null
Stages:
- BaseName: ruby:2.5-slim
  Commands:
  - Labels:
    - Key: maintainer
      Value: '"Thiago Trentin <trentin@compasso.com.br>"'
    Name: label
  - CmdLine:
    - apt-get update   && apt-get install -y --no-install-recommends   bzip2 unzip
      xz-utils   && rm -rf /var/lib/apt/lists/*
    Name: run
    PrependShell: true
  - Env:
    - Key: LANG
      Value: C.UTF-8
    Name: env
  - CmdLine:
    - '{     echo ''#!/bin/sh'';     echo ''set -e'';     echo;     echo ''dirname
      "$(dirname "$(readlink -f "$(which javac || which java)")")"'';   } > /usr/local/bin/docker-java-home   &&
      chmod +x /usr/local/bin/docker-java-home'
    Name: run
    PrependShell: true
  - CmdLine:
    - ln -svT "/usr/lib/jvm/java-8-openjdk-$(dpkg --print-architecture)" /docker-java-home
    Name: run
    PrependShell: true
  - Env:
    - Key: JAVA_HOME
      Value: /docker-java-home
    Name: env
  - Env:
    - Key: JAVA_VERSION
      Value: 8u181
    Name: env
  - Env:
    - Key: JAVA_DEBIAN_VERSION
      Value: 8u181-b13-2~deb9u1
    Name: env
  - CmdLine:
    - 'set -ex;   if [ ! -d /usr/share/man/man1 ]; then     mkdir -p /usr/share/man/man1;   fi;   apt-get
      update;   apt-get install -y --no-install-recommends     openjdk-8-jdk-headless="$JAVA_DEBIAN_VERSION"   ;   rm
      -rf /var/lib/apt/lists/*;   [ "$(readlink -f "$JAVA_HOME")" = "$(docker-java-home)"
      ];   update-alternatives --get-selections | awk -v home="$(readlink -f "$JAVA_HOME")"
      ''index($3, home) == 1 { $2 = "manual"; print | "update-alternatives --set-selections"
      }'';   update-alternatives --query java | grep -q ''Status: manual'''
    Name: run
    PrependShell: true
  - Env:
    - Key: ORACLE_HOME
      Value: /usr/lib/oracle/18.3/client64
    Name: env
  - Env:
    - Key: LD_LIBRARY_PATH
      Value: /usr/lib/oracle/18.3/client64/lib${LD_LIBRARY_PATH:+:$LD_LIBRARY_PATH}
    Name: env
  - CmdLine:
    - export JAVA_HOME
    Name: run
    PrependShell: true
  - Key: JENKINS_AGENT_HOME
    Name: arg
    Value: /root/jenkins
  - Env:
    - Key: JENKINS_AGENT_HOME
      Value: ${JENKINS_AGENT_HOME}
    Name: env
  - Name: volume
    Volumes:
    - '"${JENKINS_AGENT_HOME}"'
    - '"/tmp"'
    - '"/run"'
    - '"/var/run"'
  - Name: workdir
    Path: '"${JENKINS_AGENT_HOME}"'
  - Env:
    - Key: GEM_HOME
      Value: '"/usr/local/bundle"'
    Name: env
  - Env:
    - Key: PATH
      Value: $GEM_HOME/bin:$GEM_HOME/gems/bin:$PATH
    Name: env
  From:
    Image: ruby:2.5-slim
  Name: ""
  Platform: ""
  SourceCode: FROM ruby:2.5-slim
