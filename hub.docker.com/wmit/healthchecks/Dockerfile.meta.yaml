MetaArgs: null
Stages:
- BaseName: docker.io/python:3-alpine
  Commands:
  - Labels:
    - Key: org.label-schema.name
      Value: '"Healthchecks"'
    - Key: org.label-schema.description
      Value: '"Basic intallation of Healthchecks"'
    - Key: org.label-schema.schema-version
      Value: '"1.0"'
    Name: label
  - Health:
      Test:
      - CMD-SHELL
      - curl -f http://localhost:8080/ || exit 1
    Name: healthcheck
  - Env:
    - Key: PYTHONUNBUFFERED
      Value: "1"
    Name: env
  - Chown: ""
    Name: add
    SourcesAndDest:
    - requirements.txt
    - /healthchecks/requirements.txt
  - Name: workdir
    Path: /healthchecks
  - CmdLine:
    - apk add --no-cache tzdata gcc g++ mariadb-dev mariadb-connector-c musl-dev libffi
      libffi-dev mariadb-client openssl postgresql-dev     && ln -s /usr/share/zoneinfo/US/Eastern
      /etc/localtime     && pip install --upgrade pip     && pip install psycopg2-binary     &&
      pip install --no-cache-dir -r requirements.txt     && apk del gcc mariadb-dev
      musl-dev libffi-dev postgresql-dev
    Name: run
    PrependShell: true
  - Chown: ""
    Name: add
    SourcesAndDest:
    - .
    - /healthchecks
  - CmdLine:
    - cp docker/local_settings.py hc/.     && python manage.py collectstatic --noinput     &&
      python manage.py compress
    Name: run
    PrependShell: true
  - Name: expose
    Ports:
    - "8080"
  - CmdLine:
    - gunicorn
    - -b
    - 0.0.0.0:8080
    - hc.wsgi:application
    - --log-config
    - docker/gunicorn-logging.conf
    Name: cmd
    PrependShell: false
  From:
    Image: docker.io/python:3-alpine
  Name: ""
  Platform: ""
  SourceCode: FROM docker.io/python:3-alpine
