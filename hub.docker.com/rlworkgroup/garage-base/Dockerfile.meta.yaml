MetaArgs:
- DefaultValue: ubuntu:16.04
  Key: PARENT_IMAGE
  ProvidedValue: null
  Value: ubuntu:16.04
Stages:
- BaseName: $PARENT_IMAGE
  Commands:
  - Env:
    - Key: LANG
      Value: C.UTF-8
    Name: env
  - CmdLine:
    - apt-get -y -q update &&   DEBIAN_FRONTEND=noninteractive apt-get install -y
      --no-install-recommends     wget     bzip2     unzip     git     curl     build-essential     cmake     xorg-dev     libglew-dev     libosmesa6-dev     patchelf     python3-dev     libpq-dev     ffmpeg     libjpeg-dev     swig     libsdl2-dev     libopenmpi-dev     openmpi-bin     python3     python3-pip     python3-tk     python3-virtualenv
      &&   apt-get clean &&   rm -rf /var/lib/apt/lists/*
    Name: run
    PrependShell: true
  - CmdLine:
    - apt-get purge -y -v libglfw*
    Name: run
    PrependShell: true
  - CmdLine:
    - git clone https://github.com/glfw/glfw.git &&   cd glfw &&   git checkout 0be4f3f75aebd9d24583ee86590a38e741db0904
      &&   mkdir glfw-build &&   cd glfw-build &&   cmake -DBUILD_SHARED_LIBS=ON -DGLFW_BUILD_EXAMPLES=OFF
      -DGLFW_BUILD_TESTS=OFF -DGLFW_BUILD_DOCS=OFF .. &&   make -j"$(nproc)" &&   make
      install &&   cd ../../ &&   rm -rf glfw
    Name: run
    PrependShell: true
  - CmdLine:
    - mkdir -p /root/.mujoco &&   wget https://www.roboti.us/download/mujoco200_linux.zip
      -O mujoco.zip &&   unzip mujoco.zip -d $HOME/.mujoco &&   rm mujoco.zip &&   ln
      -s $HOME/.mujoco/mujoco200_linux $HOME/.mujoco/mujoco200
    Name: run
    PrependShell: true
  - Env:
    - Key: LD_LIBRARY_PATH
      Value: $LD_LIBRARY_PATH:/root/.mujoco/mujoco200/bin
    Name: env
  - Chown: ""
    From: ""
    Name: copy
    SourcesAndDest:
    - README.md
    - /root/code/garage/README.md
  - Chown: ""
    From: ""
    Name: copy
    SourcesAndDest:
    - VERSION
    - /root/code/garage/VERSION
  - Chown: ""
    From: ""
    Name: copy
    SourcesAndDest:
    - scripts/garage
    - /root/code/garage/scripts/garage
  - Chown: ""
    From: ""
    Name: copy
    SourcesAndDest:
    - src/garage/__init__.py
    - /root/code/garage/src/garage/__init__.py
  - Chown: ""
    From: ""
    Name: copy
    SourcesAndDest:
    - setup.py
    - /root/code/garage/setup.py
  - Name: workdir
    Path: /root/code/garage
  - Env:
    - Key: VIRTUAL_ENV
      Value: /root/venv
    Name: env
  - CmdLine:
    - python3 -m virtualenv --python=/usr/bin/python3 $VIRTUAL_ENV
    Name: run
    PrependShell: true
  - Env:
    - Key: PATH
      Value: '"$VIRTUAL_ENV/bin:$PATH"'
    Name: env
  - CmdLine:
    - pip install --upgrade pip
    Name: run
    PrependShell: true
  - CmdLine:
    - touch /root/.mujoco/mjkey.txt &&   pip install .[all,dev] &&   rm -r /root/.cache/pip
      &&   rm /root/.mujoco/mjkey.txt
    Name: run
    PrependShell: true
  - Chown: ""
    From: ""
    Name: copy
    SourcesAndDest:
    - .pre-commit-config.yaml
    - /root/code/garage
  - CmdLine:
    - git init &&   pre-commit install &&   pre-commit install-hooks
    Name: run
    PrependShell: true
  From:
    Image: $PARENT_IMAGE
  Name: ""
  Platform: ""
  SourceCode: FROM $PARENT_IMAGE
