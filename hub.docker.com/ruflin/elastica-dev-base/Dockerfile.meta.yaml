MetaArgs: null
Stages:
- BaseName: php:5.6
  Commands:
  - Maintainer: Nicolas Ruflin <spam@ruflin.com>
    Name: maintainer
  - CmdLine:
    - "apt-get update && apt-get install -y \tcloc \tgit \tgraphviz \tnano \tphp5-xsl"
    Name: run
    PrependShell: true
  - CmdLine:
    - docker-php-ext-install sockets
    Name: run
    PrependShell: true
  - CmdLine:
    - rm -r /var/lib/apt/lists/*
    Name: run
    PrependShell: true
  - CmdLine:
    - pecl install xdebug
    Name: run
    PrependShell: true
  - CmdLine:
    - echo "memory_limit=1024M" >> /usr/local/etc/php/conf.d/memory-limit.ini
    Name: run
    PrependShell: true
  - CmdLine:
    - echo "date.timezone=UTC" >> /usr/local/etc/php/conf.d/timezone.ini
    Name: run
    PrependShell: true
  - CmdLine:
    - 'echo "extension=/usr/lib/php5/20131226/xsl.so" >> /usr/local/etc/php/conf.d/xsl.ini
      # TODO: Debian is putting the xsl extension in a different directory, should
      be in: /usr/local/lib/php/extensions/no-debug-non-zts-20131226'
    Name: run
    PrependShell: true
  - CmdLine:
    - echo "zend_extension=/usr/local/lib/php/extensions/no-debug-non-zts-20131226/xdebug.so"
      >> /usr/local/etc/php/conf.d/xdebug.ini
    Name: run
    PrependShell: true
  - CmdLine:
    - curl -sS https://getcomposer.org/installer | php -- --install-dir=/usr/local/bin
      --filename=composer
    Name: run
    PrependShell: true
  - Env:
    - Key: COMPOSER_HOME
      Value: /root/composer
    Name: env
  - Env:
    - Key: PATH
      Value: /root/composer/vendor/bin:$PATH
    Name: env
  - Chown: ""
    From: ""
    Name: copy
    SourcesAndDest:
    - composer.json
    - /root/composer/
  - CmdLine:
    - composer global install --prefer-source
    Name: run
    PrependShell: true
  From:
    Image: php:5.6
  Name: ""
  Platform: ""
  SourceCode: FROM php:5.6
