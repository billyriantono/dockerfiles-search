MetaArgs: null
Stages:
- BaseName: python:3.7-alpine
  Commands:
  - Labels:
    - Key: Description
      Value: '"Twitcher"'
    - Key: Vendor
      Value: '"Birdhouse"'
    - Key: Maintainer
      Value: '"https://github.com/bird-house/twitcher"'
    Name: label
  - Env:
    - Key: HTTP_PORT
      Value: "8080"
    Name: env
  - Env:
    - Key: HTTPS_PORT
      Value: "8443"
    Name: env
  - Env:
    - Key: OUTPUT_PORT
      Value: "8000"
    Name: env
  - Env:
    - Key: HOSTNAME
      Value: localhost
    Name: env
  - Name: expose
    Ports:
    - $HTTPS_PORT
    - $HTTP_PORT
    - $OUTPUT_PORT
    - "9001"
  - Env:
    - Key: HOME
      Value: /root
    Name: env
  - Env:
    - Key: TWITCHER_DIR
      Value: /opt/birdhouse/src/twitcher
    Name: env
  - Name: workdir
    Path: $TWITCHER_DIR
  - Chown: ""
    From: ""
    Name: copy
    SourcesAndDest:
    - requirements*
    - setup.py
    - README.rst
    - CHANGES.rst
    - $TWITCHER_DIR/
  - Chown: ""
    From: ""
    Name: copy
    SourcesAndDest:
    - twitcher/__init__.py
    - twitcher/__version__.py
    - $TWITCHER_DIR/twitcher/
  - CmdLine:
    - apk update     && apk add         bash         libxslt-dev         libxml2         libffi-dev         openssl-dev     &&
      apk add --virtual .build-deps         python-dev         gcc         musl-dev     &&
      pip install --no-cache-dir --upgrade pip setuptools     && pip install --no-cache-dir
      -e $TWITCHER_DIR     && apk --purge del .build-deps
    Name: run
    PrependShell: true
  - Chown: ""
    From: ""
    Name: copy
    SourcesAndDest:
    - ./
    - $TWITCHER_DIR
  - CmdLine:
    - pip install --no-dependencies -e $TWITCHER_DIR
    Name: run
    PrependShell: true
  - CmdLine:
    - pserve
    - development.ini
    Name: cmd
    PrependShell: false
  From:
    Image: python:3.7-alpine
  Name: ""
  Platform: ""
  SourceCode: FROM python:3.7-alpine
