MetaArgs: null
Stages:
- BaseName: centos:7
  Commands:
  - Maintainer: Tiago Caxias http://github.com/tcaxias
    Name: maintainer
  - Env:
    - Key: PKGS
      Value: '"pygpgme openssl sudo epel-release python-setuptools"'
    - Key: EPEL_PKGS
      Value: '"nginx httpd-tools"'
    - Key: RIAK_IP
      Value: '"127.0.0.1"'
    - Key: RIAK_PORT
      Value: '"8098"'
    - Key: S3_HOST
      Value: '"s3.amazonaws.com"'
    - Key: RIAK_CS_PORT
      Value: '"80"'
    - Key: RIAK_CS_PROTOCOL
      Value: '"http"'
    - Key: RIAK_CS_PROXY_HOST
      Value: '"127.0.0.1"'
    - Key: RIAK_CS_PROXY_PORT
      Value: '"8080"'
    - Key: PASSWD
      Value: '"big_bad_secret"'
    - Key: HTPASS
      Value: '"unsafe_secret"'
    - Key: CS_CONTROL
      Value: '"http://s3.amazonaws.com/downloads.basho.com/riak-cs-control/1.0/1.0.2/rhel/6/riak-cs-control-1.0.2-1.el6.x86_64.rpm"'
    Name: env
  - CmdLine:
    - yum install -y $CS_CONTROL $PKGS &&     yum install -y $EPEL_PKGS &&     easy_install
      pip &&     pip install -U pip &&     pip install supervisor &&     yum clean
      -y all
    Name: run
    PrependShell: true
  - Chown: ""
    Name: add
    SourcesAndDest:
    - start_riak_cs_control.sh
    - start_nginx.sh
    - nginx.conf
    - supervisord.conf
    - /app/
  - CmdLine:
    - chmod +x /app/*.sh
    Name: run
    PrependShell: true
  - Name: workdir
    Path: /app
  - Name: expose
    Ports:
    - "80"
  - CmdLine:
    - supervisord
    - -j
    - /dev/shm/supervisor.pid
    - -t
    - -c
    - /app/supervisord.conf
    Name: cmd
    PrependShell: false
  From:
    Image: centos:7
  Name: ""
  Platform: ""
  SourceCode: FROM centos:7
