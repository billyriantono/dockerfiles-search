MetaArgs: null
Stages:
- BaseName: centos
  Commands:
  - Maintainer: '"Pedro Tobo" <pedrotobo@gmail.com>'
    Name: maintainer
  - CmdLine:
    - yum -y update
    Name: run
    PrependShell: true
  - CmdLine:
    - yum -y install wget curl http
    Name: run
    PrependShell: true
  - CmdLine:
    - rpm -Uvh https://dl.fedoraproject.org/pub/epel/epel-release-latest-7.noarch.rpm
    Name: run
    PrependShell: true
  - CmdLine:
    - wget http://rpms.remirepo.net/enterprise/remi-release-7.rpm
    Name: run
    PrependShell: true
  - CmdLine:
    - rpm -Uvh remi-release-7.rpm
    Name: run
    PrependShell: true
  - CmdLine:
    - rm -f remi-release-7.rpm
    Name: run
    PrependShell: true
  - CmdLine:
    - yum -y install httpd php71-php php71-php-pear php71-php-pecl-sync php71-php-pecl-memcached
      php71-php-pecl-amqp php71-php-bcmath php71-php-cli php71-php-common php71-php-dba
      php71-php-dbg php71-php-devel php71-php-embedded php71-php-enchant php71-php-fpm
      php71-php-gd php71-php-gmp php71-php-imap php71-php-intl php71-php-json php71-php-ldap
      php71-php-mbstring php71-php-mcrypt php71-php-mysqlnd php71-php-opcache php71-php-soap
      php71-php-odbc
    Name: run
    PrependShell: true
  - CmdLine:
    - curl https://packages.microsoft.com/config/rhel/7/prod.repo > /etc/yum.repos.d/msprod.repo
    Name: run
    PrependShell: true
  - CmdLine:
    - ACCEPT_EULA=Y yum -y install msodbcsql
    Name: run
    PrependShell: true
  - CmdLine:
    - yum -y install unixODBC-devel
    Name: run
    PrependShell: true
  - CmdLine:
    - ACCEPT_EULA=Y yum -y install mssql-tools
    Name: run
    PrependShell: true
  - CmdLine:
    - yum -y install gcc make gcc-c++
    Name: run
    PrependShell: true
  - CmdLine:
    - /opt/remi/php71/root/usr/bin/pecl install sqlsrv pdo_sqlsrv
    Name: run
    PrependShell: true
  - CmdLine:
    - echo '; Enable sqlsrv extension module' > /etc/opt/remi/php71/php.d/60-sqlsrv.ini
    Name: run
    PrependShell: true
  - CmdLine:
    - echo 'extension=sqlsrv.so' >> /etc/opt/remi/php71/php.d/60-sqlsrv.ini
    Name: run
    PrependShell: true
  - CmdLine:
    - echo 'extension=pdo_sqlsrv.so' >> /etc/opt/remi/php71/php.d/60-sqlsrv.ini
    Name: run
    PrependShell: true
  - Name: expose
    Ports:
    - "80"
  - CmdLine:
    - /usr/sbin/apachectl
    - -D
    - FOREGROUND
    Name: cmd
    PrependShell: false
  From:
    Image: centos
  Name: ""
  Platform: ""
  SourceCode: FROM centos
