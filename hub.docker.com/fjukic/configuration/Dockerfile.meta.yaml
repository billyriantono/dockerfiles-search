MetaArgs: null
Stages:
- BaseName: phusion/baseimage:0.9.15
  Commands:
  - Env:
    - Key: HOME
      Value: /root
    Name: env
  - CmdLine:
    - /sbin/my_init
    - --enable-insecure-key
    Name: cmd
    PrependShell: false
  - Env:
    - Key: DEBIAN_FRONTEND
      Value: noninteractive
    Name: env
  - CmdLine:
    - apt-get update &&      apt-get install -y python-dev python-setuptools python-apt
      gcc git-core &&     easy_install pip &&      git clone https://github.com/appsembler/configuration.git
      -b docker_release /configuration &&     pip install -r configuration/requirements.txt
    Name: run
    PrependShell: true
  - Name: workdir
    Path: /configuration/playbooks
  - CmdLine:
    - /usr/sbin/runsvdir-start>/dev/null &     ansible-playbook -vv -c local -i "127.0.0.1,"
      docker_lite.yml
    Name: run
    PrependShell: true
  - Name: workdir
    Path: /edx/app/edxapp/edx-platform
  - CmdLine:
    - /usr/sbin/runsvdir-start>/dev/null &     sleep 5 &&     /edx/app/edxapp/venvs/edxapp/bin/python
      manage.py cms --settings=docker import /edx/var/edxapp/data /edx/app/demo/edx-demo-course
    Name: run
    PrependShell: true
  - CmdLine:
    - /bin/rm /edx/var/forum/forum.sock
    Name: run
    PrependShell: true
  - Name: expose
    Ports:
    - "18010"
    - "18020"
    - "80"
  From:
    Image: phusion/baseimage:0.9.15
  Name: ""
  Platform: ""
  SourceCode: FROM phusion/baseimage:0.9.15
