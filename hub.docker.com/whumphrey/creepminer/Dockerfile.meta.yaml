MetaArgs: null
Stages:
- BaseName: ubuntu:16.04
  Commands:
  - Maintainer: Wayne Humphrey <wayne@humphrey.za.net>
    Name: maintainer
  - Labels:
    - Key: version
      Value: '"1.4"'
    Name: label
  - CmdLine:
    - echo "export VISIBLE=now" >> /etc/profile
    Name: run
    PrependShell: true
  - CmdLine:
    - apt-get update && apt-get upgrade -y -o Dpkg::Options::="--force-confold"   &&
      apt-get install -y --no-install-recommends -o Dpkg::Options::="--force-confold"   apt-utils
      supervisor sudo   net-tools openssh-server   build-essential cmake git   python-pip
      python-setuptools python-dev   openssl libssl-dev   xz-utils curl ca-certificates
      gnupg2 dirmngr   ocl-icd-opencl-dev
    Name: run
    PrependShell: true
  - CmdLine:
    - cd /tmp/   && pip install --upgrade pip   && pip2.7 install conan   && git clone
      -b development https://github.com/Creepsky/creepMiner   && cd creepMiner   &&
      conan install . -s compiler.libcxx=libstdc++11 --build=missing   && cmake CMakeLists.txt
      -DCMAKE_BUILD_TYPE=RELEASE -DUSE_CUDA=OFF   && make -j$(nproc)   && cp -r resources/public
      /usr/local/sbin/   && cp -r resources/frontail.json /etc/   && cp -r src/shabal/opencl/mining.cl
      /usr/local/sbin/   && cp -r bin/creepMiner /usr/local/sbin/   && sed -i '2s/creepMiner/creepContainer/'
      /usr/local/sbin/public/js/general.js   && sed -i '4s/false/true/' /usr/local/sbin/public/js/general.js   &&
      mkdir /config && mkdir /logs
    Name: run
    PrependShell: true
  - CmdLine:
    - curl -sL https://github.com/jpillora/webproc/releases/download/0.1.9/webproc_linux_amd64.gz
      | gzip -d - > /usr/bin/webproc     && chmod +x /usr/bin/webproc
    Name: run
    PrependShell: true
  - CmdLine:
    - curl -sL https://deb.nodesource.com/setup_8.x | sudo -E bash -   && apt-get
      install nodejs   && npm i frontail -g
    Name: run
    PrependShell: true
  - Chown: ""
    Name: add
    SourcesAndDest:
    - helper/init
    - /sbin/init
  - Chown: ""
    Name: add
    SourcesAndDest:
    - helper/supervisord.conf
    - /etc/supervisor/supervisord.conf
  - Chown: ""
    Name: add
    SourcesAndDest:
    - helper/mining.conf
    - /usr/local/sbin/mining.conf
  - CmdLine:
    - chmod 755 /sbin/init
    Name: run
    PrependShell: true
  - CmdLine:
    - useradd -m -p FIEyX7IsHWazs -s /bin/bash creep   && echo 'root:toor' | chpasswd
    Name: run
    PrependShell: true
  - Name: expose
    Ports:
    - "8124"
    - "9001"
    - "9002"
  - CmdLine:
    - /sbin/init
    Name: cmd
    PrependShell: false
  - CmdLine:
    - apt-get autoclean -o Dpkg::Options::="--force-confold"   && apt-get autoremove
      -o Dpkg::Options::="--force-confold"
    Name: run
    PrependShell: true
  From:
    Image: ubuntu:16.04
  Name: ""
  Platform: ""
  SourceCode: FROM ubuntu:16.04
