MetaArgs: null
Stages:
- BaseName: centos:7
  Commands:
  - Maintainer: Camille Meulien <camille.meulien@gmail.com>
    Name: maintainer
  - Env:
    - Key: HOME
      Value: /home/jenkins-slave
    - Key: JAVA_HOME
      Value: /usr/java/latest
    - Key: MAVEN_VERSION
      Value: 3.3.9
    - Key: JAVA_VERSION
      Value: "8"
    - Key: JAVA_UPDATE
      Value: "112"
    - Key: JAVA_BUILD
      Value: "15"
    Name: env
  - Env:
    - Key: JRE_HOME
      Value: ${JAVA_HOME}/jre
    Name: env
  - CmdLine:
    - 'curl -sSLo jdk-${JAVA_VERSION}u${JAVA_UPDATE}-linux-x64.rpm     --header "Cookie:
      oraclelicense=accept-securebackup-cookie;"     http://download.oracle.com/otn-pub/java/jdk/${JAVA_VERSION}u${JAVA_UPDATE}-b${JAVA_BUILD}/jdk-${JAVA_VERSION}u${JAVA_UPDATE}-linux-x64.rpm     &&
      rpm -ivh jdk-${JAVA_VERSION}u${JAVA_UPDATE}-linux-x64.rpm     && rm -f jdk-${JAVA_VERSION}u${JAVA_UPDATE}-linux-x64.rpm'
    Name: run
    PrependShell: true
  - Env:
    - Key: MAVEN_HOME
      Value: /usr/share/apache-maven-${MAVEN_VERSION}
    - Key: MAVEN_OPTS
      Value: -Duser.home=${HOME}
    Name: env
  - Env:
    - Key: PATH
      Value: ${MAVEN_HOME}/bin:${PATH}
    Name: env
  - CmdLine:
    - curl -sSLo /usr/share/maven.tar.gz     http://apache.mirrors.ovh.net/ftp.apache.org/dist/maven/maven-3/${MAVEN_VERSION}/binaries/apache-maven-${MAVEN_VERSION}-bin.tar.gz     &&
      cd /usr/share     && tar xvzf maven.tar.gz     && rm -f maven.tar.gz
    Name: run
    PrependShell: true
  - Key: SBT_VERSION
    Name: arg
    Value: 0.13.13
  - Key: SBT_VERSION_MAJOR
    Name: arg
    Value: "0.13"
  - Env:
    - Key: PATH
      Value: /usr/share/sbt-launcher-packaging-${SBT_VERSION}/bin:${PATH}
    Name: env
  - CmdLine:
    - curl -sSLo /usr/share/sbt-${SBT_VERSION}.tgz https://dl.bintray.com/sbt/native-packages/sbt/${SBT_VERSION}/sbt-${SBT_VERSION}.tgz     &&
      cd /usr/share     && tar xvf sbt-${SBT_VERSION}.tgz     && rm -f sbt-${SBT_VERSION}.tgz
    Name: run
    PrependShell: true
  - Key: JENKINS_REMOTING_VERSION
    Name: arg
    Value: 2.62.4
  - CmdLine:
    - curl --create-dirs -sSLo /usr/share/jenkins/slave.jar https://repo.jenkins-ci.org/public/org/jenkins-ci/main/remoting/${JENKINS_REMOTING_VERSION}/remoting-${JENKINS_REMOTING_VERSION}.jar     &&
      useradd -d ${HOME} -m jenkins-slave     && chmod 755 /usr/share/jenkins     &&
      chmod 644 /usr/share/jenkins/slave.jar
    Name: run
    PrependShell: true
  - CmdLine:
    - yum install -y git gzip2 fontconfig strace wget     && env | egrep "(JENKINS|JAVA)"
      > /etc/docker.properties     && chown -R jenkins-slave ${HOME}
    Name: run
    PrependShell: true
  - Key: KAIGARA_VERSION
    Name: arg
    Value: v0.0.3.1
  - CmdLine:
    - wget --quiet https://github.com/calj/kaigara/releases/download/${KAIGARA_VERSION}/kaigara
      -O /usr/local/bin/kaigara     && chmod 755 /usr/local/bin/kaigara
    Name: run
    PrependShell: true
  - Chown: ""
    From: ""
    Name: copy
    SourcesAndDest:
    - ./operations/
    - /opt/kaigara/operations/
  - Chown: ""
    From: ""
    Name: copy
    SourcesAndDest:
    - ./resources
    - /etc/kaigara/resources/
  - Chown: ""
    From: ""
    Name: copy
    SourcesAndDest:
    - entrypoint.sh
    - /usr/bin/
  - CmdLine:
    - chmod 755 /usr/bin/entrypoint.sh
    Name: run
    PrependShell: true
  - CmdLine:
    - /usr/bin/entrypoint.sh
    Name: entrypoint
    PrependShell: false
  - Name: user
    User: jenkins-slave
  - Name: volume
    Volumes:
    - ${HOME}
  - Name: workdir
    Path: ${HOME}
  From:
    Image: centos:7
  Name: ""
  Platform: ""
  SourceCode: FROM centos:7
