MetaArgs: null
Stages:
- BaseName: library/debian:latest
  Commands:
  - Env:
    - Key: container
      Value: docker
    Name: env
  - Maintainer: Carsten Seeger <cseeger@epages.com>
    Name: maintainer
  - CmdLine:
    - echo 'deb http://deb.debian.org/debian stretch-backports main' >> /etc/apt/sources.list
    Name: run
    PrependShell: true
  - CmdLine:
    - apt-get update     && apt-get install -y apache2 libapache2-mod-php php php-bcmath
      php-cli php-common php-curl php-gd php-imagick php-json php-ldap php-mbstring
      php-mcrypt php-memcached php-mysql php-pgsql php-soap php-xml php-zip memcached
      unzip sudo moreutils     && apt-get install -y wget dialog systemd systemd-sysv
      expect curl     && apt-get clean     && rm -rf /var/lib/apt/lists/* /tmp/* /var/tmp/*
    Name: run
    PrependShell: true
  - CmdLine:
    - systemctl set-default multi-user.target
    Name: run
    PrependShell: true
  - Env:
    - Key: init
      Value: /lib/systemd/systemd
    Name: env
  - CmdLine:
    - wget https://raw.githubusercontent.com/bheisig/i-doit-scripts/master/idoit-install
      -O /idoit-install     && chmod 755 /idoit-install     && wget https://login.i-doit.com/downloads/idoit-api-1.8.zip
      -O /idoit-api.zip
    Name: run
    PrependShell: true
  - Chown: ""
    From: ""
    Name: copy
    SourcesAndDest:
    - ./install.sh
    - /
  - Chown: ""
    From: ""
    Name: copy
    SourcesAndDest:
    - ./idoit-install.exp
    - /
  - Chown: ""
    From: ""
    Name: copy
    SourcesAndDest:
    - ./create-api-key.sh
    - /
  - Chown: ""
    From: ""
    Name: copy
    SourcesAndDest:
    - ./install.service
    - /etc/systemd/system/
  - CmdLine:
    - systemctl enable install
    Name: run
    PrependShell: true
  - Name: volume
    Volumes:
    - sys/fs/cgroup
  - CmdLine:
    - /lib/systemd/systemd
    Name: entrypoint
    PrependShell: false
  From:
    Image: library/debian:latest
  Name: ""
  Platform: ""
  SourceCode: From library/debian:latest
