MetaArgs: null
Stages:
- BaseName: ubuntu:16.04
  Commands:
  - Maintainer: Xavier Calland <xca@atolcd.com>
    Name: maintainer
  - CmdLine:
    - apt-get update       && apt-get install -y         build-essential libssl-dev         libopenmpi-dev
      openmpi-bin         wget       && rm -rf /var/lib/apt/lists/*
    Name: run
    PrependShell: true
  - CmdLine:
    - mkdir -p /opt/jtr && cd /opt/jtr &&   wget --no-check-certificate https://github.com/magnumripper/JohnTheRipper/archive/1.8.0-jumbo-1.tar.gz
      -O ./john.tar.gz &&   tar xzf ./john.tar.gz --strip-components=1 && rm ./john.tar.gz
    Name: run
    PrependShell: true
  - CmdLine:
    - sed 's/#define MAYBE_INLINE_BODY.*/#define MAYBE_INLINE_BODY/' -i /opt/jtr/src/MD5_std.c
    Name: run
    PrependShell: true
  - CmdLine:
    - cd /opt/jtr/src && ./configure --enable-mpi && make
    Name: run
    PrependShell: true
  - CmdLine:
    - rm -rf /opt/jtr/dic/ && mkdir -p /opt/jtr/dic/
    Name: run
    PrependShell: true
  - Chown: ""
    From: ""
    Name: copy
    SourcesAndDest:
    - dic.tar.gz
    - /opt/jtr/dic/
  - CmdLine:
    - ls -ail /opt/jtr/dic
    Name: run
    PrependShell: true
  - CmdLine:
    - cd /opt/jtr/dic && tar xzf dic.tar.gz && rm dic.tar.gz
    Name: run
    PrependShell: true
  - CmdLine:
    - chmod 777 /opt/jtr/run
    Name: run
    PrependShell: true
  - Name: workdir
    Path: /etc/jtr/
  - CmdLine:
    - /opt/jtr/run/john
    Name: entrypoint
    PrependShell: false
  From:
    Image: ubuntu:16.04
  Name: ""
  Platform: ""
  SourceCode: FROM ubuntu:16.04
