MetaArgs: null
Stages:
- BaseName: docker.io/centos:centos7.5.1804
  Commands:
  - Maintainer: verdyr
    Name: maintainer
  - Key: SDC_USER
    Name: arg
    Value: sdc
  - Env:
    - Key: JAVA_VERSION_MAJOR
      Value: "8"
    - Key: JAVA_VERSION_MINOR
      Value: "0"
    - Key: JAVA_VERSION_BUILD
      Value: "141"
    - Key: GRADLE_VERSION_MAJOR
      Value: "4"
    - Key: GRADLE_VERSION_MINOR
      Value: "10"
    - Key: SBT_VERSION_MAJOR
      Value: "1"
    - Key: SBT_VERSION_MINOR
      Value: "2"
    - Key: SBT_VERSION_MINOR_MINOR
      Value: "2"
    - Key: MAPR_HOME
      Value: /opt/mapr
    - Key: MAPR_MEP_VERSION
      Value: "5"
    - Key: MAPR_VERSION
      Value: 6.0.1
    - Key: MAPR_CLUSTER_VERSION
      Value: 6.1.0
    - Key: MAPR_TICKETFILE_LOCATION
      Value: /opt/mapr/conf/mapruserticket
    - Key: SDC_CONF
      Value: /etc/sdc
    - Key: SDC_CONF_HTTPS_PORT
      Value: "7443"
    - Key: SDC_HOME
      Value: /opt/streamsets-datacollector
    - Key: SDC_DATA
      Value: /data
    - Key: SDC_DIST
      Value: /opt/streamsets-datacollector
    - Key: STREAMSETS_LIBRARIES_EXTRA_DIR
      Value: '"${SDC_DIST}/streamsets-libs-extras"'
    Name: env
  - CmdLine:
    - yum install -y epel-release
    Name: run
    PrependShell: true
  - CmdLine:
    - yum install -y systemd less more wget curl httpd java-1.${JAVA_VERSION_MAJOR}.${JAVA_VERSION_MINOR}
      git unzip which nano vim strace route iproute traceroute ethtool net-tools nfs-utils
      python-devel && yum -q clean all
    Name: run
    PrependShell: true
  - Labels:
    - Key: df.os
      Value: centos7
    - Key: df.version
      Value: 0.0.1
    - Key: df.client_version
      Value: 0.0.3
    Name: label
  - CmdLine:
    - useradd verdyr
    Name: run
    PrependShell: true
  - CmdLine:
    - groupadd ${SDC_USER}
    Name: run
    PrependShell: true
  - CmdLine:
    - yum install -y http://archive.mapr.com/releases/v${MAPR_CLUSTER_VERSION}/redhat/mapr-librdkafka-0.11.3.201803231414-1.noarch.rpm
    Name: run
    PrependShell: true
  - CmdLine:
    - yum install -y http://archive.mapr.com/releases/v${MAPR_CLUSTER_VERSION}/redhat/mapr-client-6.1.0.20180926230239.GA-1.x86_64.rpm
    Name: run
    PrependShell: true
  - CmdLine:
    - wget -v https://s3-us-west-2.amazonaws.com/archives.streamsets.com/datacollector/3.5.2/rpm/el7/streamsets-datacollector-3.5.2-el7-all-rpms.tar
      &&     tar xf streamsets-datacollector-3.5.2-el7-all-rpms.tar &&     rm streamsets-datacollector-3.5.2-el7-all-rpms.tar
      &&     cd streamsets-datacollector-3.5.2-el7-all-rpms &&     rm -f streamsets-datacollector-cdh*.rpm
      streamsets-datacollector-hdp*.rpm &&     yum localinstall -y streamsets-datacollector-*.rpm
      &&     cd ../ && rm -rf streamsets-datacollector-3.5.2-el7-all-rpms
    Name: run
    PrependShell: true
  - CmdLine:
    - ${SDC_DIST}/bin/streamsets setup-mapr
    Name: run
    PrependShell: true
  - Env:
    - Key: JAVA_MAX_MEM
      Value: 1200m
    - Key: JAVA_MIN_MEM
      Value: 1200m
    Name: env
  - Name: expose
    Ports:
    - "7443"
  - CmdLine:
    - /bin/bash
    Name: cmd
    PrependShell: false
  From:
    Image: docker.io/centos:centos7.5.1804
  Name: ""
  Platform: ""
  SourceCode: FROM       docker.io/centos:centos7.5.1804
