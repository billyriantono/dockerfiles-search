MetaArgs: null
Stages:
- BaseName: alpine:3.5
  Commands:
  - Maintainer: Paul Steinlechner
    Name: maintainer
  - Env:
    - Key: GNUPGHOME
      Value: /gpg_home
    - Key: TIMEZONE
      Value: Europe/Vienna
    Name: env
  - CmdLine:
    - apk add --no-cache     bash     pwgen     expect     dialog     duplicity     duply     openssh-client     rsync     py-paramiko     py-requests     py-requests-oauthlib     supervisor     mysql-client
      &&     apk add --virtual tz --no-cache tzdata &&     cp /usr/share/zoneinfo/$TIMEZONE
      /etc/localtime && echo $TIMEZONE > /etc/timezone &&     apk del tz && rm -rf
      /var/cache/apk/*
    Name: run
    PrependShell: true
  - Chown: ""
    From: ""
    Name: copy
    SourcesAndDest:
    - files/adbackend.py
    - /usr/lib/python2.7/site-packages/duplicity/backends/adbackend.py
  - Chown: ""
    From: ""
    Name: copy
    SourcesAndDest:
    - files/mysql_backup.sh
    - /usr/bin/mysql_backup
  - Chown: ""
    From: ""
    Name: copy
    SourcesAndDest:
    - files/duply_setup.sh
    - /usr/bin/duply_setup
  - Chown: ""
    From: ""
    Name: copy
    SourcesAndDest:
    - files/override_config.sh
    - /usr/bin/override_config
  - Chown: ""
    From: ""
    Name: copy
    SourcesAndDest:
    - files/entrypoint.sh
    - /entrypoint.sh
  - Chown: ""
    From: ""
    Name: copy
    SourcesAndDest:
    - files/gpg_set_trust.sh
    - /usr/bin/gpg_set_trust
  - Chown: ""
    From: ""
    Name: copy
    SourcesAndDest:
    - files/gpg_setup.sh
    - /usr/bin/gpg_setup
  - Chown: ""
    From: ""
    Name: copy
    SourcesAndDest:
    - files/cron_setup.sh
    - /usr/bin/cron_setup
  - Chown: ""
    From: ""
    Name: copy
    SourcesAndDest:
    - files/backitup_export.sh
    - /usr/bin/backitup_export
  - Chown: ""
    From: ""
    Name: copy
    SourcesAndDest:
    - configs/supervisord.conf
    - /etc/supervisord.conf
  - CmdLine:
    - chmod +x /usr/bin/mysql_backup &&     chmod +x /usr/bin/duply_setup &&     chmod
      +x /usr/bin/override_config &&     chmod +x /entrypoint.sh &&     chmod +x /usr/bin/gpg_set_trust
      &&     chmod +x /usr/bin/gpg_setup &&     chmod +x /usr/bin/cron_setup &&     chmod
      +x /usr/bin/backitup_export
    Name: run
    PrependShell: true
  - Name: volume
    Volumes:
    - /backup
    - /backup_source
    - /restore
    - /gpg_home
    - /root/.duply
    - /duply_export
  - CmdLine:
    - /entrypoint.sh
    Name: entrypoint
    PrependShell: false
  - CmdLine:
    - /usr/bin/supervisord
    Name: cmd
    PrependShell: false
  From:
    Image: alpine:3.5
  Name: ""
  Platform: ""
  SourceCode: FROM alpine:3.5
