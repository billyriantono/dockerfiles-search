MetaArgs: null
Stages:
- BaseName: ubuntu:19.04
  Commands:
  - CmdLine:
    - addgroup --system user && adduser --system --group user
    Name: run
    PrependShell: true
  - CmdLine:
    - addgroup --system node && adduser --system --group node
    Name: run
    PrependShell: true
  - CmdLine:
    - mkdir -p /home/node
    Name: run
    PrependShell: true
  - CmdLine:
    - mkdir -p /home/node/.nvm
    Name: run
    PrependShell: true
  - CmdLine:
    - chown -R node:node /home/node && chmod -R 755 /home/node
    Name: run
    PrependShell: true
  - Env:
    - Key: PS_DIR
      Value: /home/purescript
    Name: env
  - CmdLine:
    - mkdir -p $PS_DIR
    Name: run
    PrependShell: true
  - CmdLine:
    - chown -R user:user $PS_DIR && chmod -R 755 $PS_DIR
    Name: run
    PrependShell: true
  - Env:
    - Key: NODE_VERSION
      Value: 12.11.0
    Name: env
  - CmdLine:
    - apt-get update -yqq
    Name: run
    PrependShell: true
  - CmdLine:
    - apt-get -yqq install curl &&     apt-get -yqq install g++ gcc libc6 libc6-dev
      libffi-dev libgmp-dev make &&     apt-get -yqq install xz-utils zlib1g-dev git
      gnupg &&     apt-get -yqq install libtinfo5 &&     apt-get -yqq install ghc
      ghc-prof ghc-doc
    Name: run
    PrependShell: true
  - CmdLine:
    - ldd --version
    Name: run
    PrependShell: true
  - Env:
    - Key: NVM_DIR
      Value: /home/node/.nvm
    Name: env
  - CmdLine:
    - curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.34.0/install.sh | bash     &&
      . $NVM_DIR/nvm.sh     && nvm install $NODE_VERSION     && nvm alias default
      $NODE_VERSION     && nvm use default
    Name: run
    PrependShell: true
  - Env:
    - Key: NODE_DIR
      Value: $NVM_DIR/versions/node/v$NODE_VERSION
    Name: env
  - Env:
    - Key: NODE_PATH
      Value: $NODE_DIR/lib/node_modules
    Name: env
  - Env:
    - Key: PATH
      Value: $NODE_DIR/bin:$PATH
    Name: env
  - CmdLine:
    - chown -R node:node $NODE_DIR && chmod -R 755 $NODE_DIR
    Name: run
    PrependShell: true
  - CmdLine:
    - node -v
    Name: run
    PrependShell: true
  - CmdLine:
    - mkdir -p /usr/src/rpd-purs
    Name: run
    PrependShell: true
  - CmdLine:
    - chown -R user:user /usr/src/rpd-purs && chmod -R 755 /usr/src/rpd-purs
    Name: run
    PrependShell: true
  - Name: user
    User: user
  - Name: workdir
    Path: /usr/src/rpd-purs
  - Chown: ""
    From: ""
    Name: copy
    SourcesAndDest:
    - .
    - .
  - Env:
    - Key: PURESCRIPT_DOWNLOAD_SHA1
      Value: 6838ae5972a6130608c04002e46e96915e05f256
    Name: env
  - Env:
    - Key: PURESCRIPT_VERSION
      Value: 0.13.3
    Name: env
  - CmdLine:
    - curl -sSL https://github.com/purescript/purescript/releases/download/v$PURESCRIPT_VERSION/linux64.tar.gz
      --output purescript.tar.gz     && echo "$PURESCRIPT_DOWNLOAD_SHA1 purescript.tar.gz"
      | sha1sum -c -     && tar -xvzf ./purescript.tar.gz     && mv ./purescript/*
      $PS_DIR     && rm -R ./purescript     && rm ./purescript.tar.gz
    Name: run
    PrependShell: true
  - Env:
    - Key: PATH
      Value: $PS_DIR:$PATH
    Name: env
  - Name: user
    User: node
  - CmdLine:
    - npm cache clean --force &&     npm install -g pulp &&     npm install -g bower
    Name: run
    PrependShell: true
  - Name: user
    User: root
  - CmdLine:
    - chown -R user:user /usr/src/rpd-purs && chmod -R 755 /usr/src/rpd-purs
    Name: run
    PrependShell: true
  - Name: user
    User: user
  - CmdLine:
    - pwd &&     ls -laF . &&     bower install -F &&     pulp build
    Name: run
    PrependShell: true
  - Name: expose
    Ports:
    - "1337"
  - CmdLine:
    - npm
    - run
    - purs:server
    Name: cmd
    PrependShell: false
  From:
    Image: ubuntu:19.04
  Name: ""
  Platform: ""
  SourceCode: FROM ubuntu:19.04
