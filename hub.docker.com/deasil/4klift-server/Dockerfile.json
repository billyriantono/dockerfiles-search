{
  "MetaArgs": null,
  "Stages": [
    {
      "Name": "",
      "BaseName": "php:7.3.5-fpm",
      "SourceCode": "FROM php:7.3.5-fpm",
      "Platform": "",
      "From": {
        "Image": "php:7.3.5-fpm"
      },
      "Commands": [
        {
          "CmdLine": [
            "apt-get update     \u0026\u0026 apt-get install git libzip-dev autoconf libssl-dev zlib1g-dev libicu-dev g++ make cmake libuv1-dev libgmp-dev uuid-dev -y"
          ],
          "Name": "run",
          "PrependShell": true
        },
        {
          "CmdLine": [
            "cd /usr/src/     \u0026\u0026 git clone git://git.openssl.org/openssl.git     \u0026\u0026 cd openssl     \u0026\u0026 git checkout tags/OpenSSL_1_0_2k     \u0026\u0026 ./config shared -fPIC --prefix=/usr/local --openssldir=/usr/local/ssl     \u0026\u0026 make     \u0026\u0026 make depend     \u0026\u0026 make test     \u0026\u0026 make install     \u0026\u0026 ln -fs /usr/local/openssl/bin/openssl/bin/openssl /usr/bin"
          ],
          "Name": "run",
          "PrependShell": true
        },
        {
          "CmdLine": [
            "cd /usr/src/     \u0026\u0026 git clone https://github.com/datastax/php-driver.git /usr/src/datastax-php-driver     \u0026\u0026 cd /usr/src/datastax-php-driver     \u0026\u0026 git checkout --detach v1.2.2     \u0026\u0026 git submodule update --init     \u0026\u0026 cd ext     \u0026\u0026 ./install.sh     \u0026\u0026 echo \"extension=cassandra.so\" \u003e /usr/local/etc/php/conf.d/cassandra.ini"
          ],
          "Name": "run",
          "PrependShell": true
        },
        {
          "CmdLine": [
            "docker-php-ext-install zip mbstring intl opcache bcmath     \u0026\u0026 echo extension=bcmath.so \u003e /usr/local/etc/php/conf.d/docker-php-ext-bcmath.ini     \u0026\u0026 pecl install apcu     \u0026\u0026 echo extension=apcu.so \u003e /usr/local/etc/php/conf.d/apcu.ini     \u0026\u0026 pecl install uuid     \u0026\u0026 echo extension=uuid.so \u003e /usr/local/etc/php/conf.d/uuid.ini"
          ],
          "Name": "run",
          "PrependShell": true
        },
        {
          "Name": "workdir",
          "Path": "/app"
        },
        {
          "Name": "expose",
          "Ports": [
            "9000"
          ]
        }
      ]
    }
  ]
}