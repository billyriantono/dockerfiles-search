MetaArgs: null
Stages:
- BaseName: centos:7
  Commands:
  - Labels:
    - Key: mantainer
      Value: '"Adrian Ruiz aerf2007@gmail.com"'
    Name: label
  - Key: version_modelsim
    Name: arg
    Value: '"16.0"'
  - Key: build_modelsim
    Name: arg
    Value: '"211"'
  - Key: bin_modelsim
    Name: arg
    Value: '"ModelSimSetup-${version_modelsim}.0.${build_modelsim}-linux.run"'
  - Key: url_donwload_modelsim
    Name: arg
    Value: '"http://download.altera.com/akdlm/software/acdsinst/${version_modelsim}/${build_modelsim}/ib_installers/${bin_modelsim}"'
  - Key: path_install_modelsim
    Name: arg
    Value: '"/tmp"'
  - Env:
    - Key: PATH
      Value: '"/vsim-ase/bin:${PATH}"'
    Name: env
  - CmdLine:
    - yum update -y &&     yum install -y     glibc.i686     glibc-devel.i686     libX11-devel.i686     libXext-devel.i686     libXft-devel.i686     ncurses-libs.i686     wget     bzip2     bzip2-libs     bzip2-devel.i686     nano     xauth
      &&     yum clean all &&     rm -rf /var/cache/yum &&     wget --spider -nv --timeout
      10 -t 1 ${url_donwload_modelsim} &&     echo "Downloading ModelSim..." &&     wget
      -c -nv -P ${path_install_modelsim}  ${url_donwload_modelsim} &&     chmod a+x
      ${path_install_modelsim}/${bin_modelsim} &&     echo "Installing ModelSim..."
      &&     ${path_install_modelsim}/${bin_modelsim} --mode unattended --installdir
      ${path_install_modelsim} --unattendedmodeui none &&     cd ${path_install_modelsim}/modelsim_ase;
      ln -s linux linux_rh60 && rm -rf ${path_install_modelsim}/modelsim_ase/altera
      &&     ${path_install_modelsim}/modelsim_ase/bin/vsim -c -version && echo "ModelSim
      has installed successflly" &&     wget -c -P ${path_install_modelsim} https://dl.dries007.net/lib32-freetype2-2.5.0.1.tar.xz
      &&     tar -xvf ${path_install_modelsim}/lib32-freetype2-2.5.0.1.tar.xz -C ${path_install_modelsim}/modelsim_ase
      &&     ln -s /usr/lib/libbz2.so ${path_install_modelsim}/modelsim_ase/lib32/libbz2.so.1.0
      &&     sed -i --follow-symlinks '/^dir=.*/a export LD_LIBRARY_PATH=${dir}\/lib32\/'
      ${path_install_modelsim}/modelsim_ase/bin/vsim &&     rm -f ${path_install_modelsim}/${bin_modelsim}
      && rm -f ${path_install_modelsim}/lib32-freetype2-2.5.0.1.tar.xz &&     mv ${path_install_modelsim}/modelsim_ase
      /vsim-ase && vsim -c -version && echo "ModelSim configured successflly"
    Name: run
    PrependShell: true
  From:
    Image: centos:7
  Name: ""
  Platform: ""
  SourceCode: FROM centos:7
