MetaArgs: null
Stages:
- BaseName: ubuntu:18.04
  Commands:
  - CmdLine:
    - apt-get update &&     apt-get install -y --no-install-recommends     ca-certificates     cmake     gcc     libc6-dev     make     pkg-config     git     automake     libtool     m4     autoconf     make     file     binutils     rsync     openssh-client     libnss-wrapper     llvm-3.9-dev
      libclang-3.9-dev clang-3.9
    Name: run
    PrependShell: true
  - Chown: ""
    From: ""
    Name: copy
    SourcesAndDest:
    - xargo.sh
    - /
  - CmdLine:
    - bash /xargo.sh
    Name: run
    PrependShell: true
  - CmdLine:
    - git clone --depth 1 https://github.com/raspberrypi/tools.git /pi-tools &&     mv
      $(readlink -f /pi-tools/arm-bcm2708/arm-linux-gnueabihf) /usr/arm-linux-gnueabihf
      &&     rm -r /pi-tools
    Name: run
    PrependShell: true
  - Env:
    - Key: PATH
      Value: /usr/arm-linux-gnueabihf/bin:$PATH
    Name: env
  - Chown: ""
    From: ""
    Name: copy
    SourcesAndDest:
    - openssl.sh
    - qemu.sh
    - /
  - CmdLine:
    - bash /openssl.sh linux-armv4 arm-linux-gnueabihf- &&     bash /qemu.sh arm
    Name: run
    PrependShell: true
  - Env:
    - Key: firmware
      Value: '"1.20190215"'
    Name: env
  - CmdLine:
    - apt-get update   && apt-get install -y wget   && wget -O - https://github.com/raspberrypi/firmware/archive/$firmware.tar.gz
      | tar -xzf - -C / --strip-components 2 firmware-$firmware/hardfp/opt/vc   &&
      apt-get purge wget -y --auto-remove   && rm -rf /var/lib/apt/lists/*
    Name: run
    PrependShell: true
  - Env:
    - Key: NSS_WRAPPER_PASSWD
      Value: /tmp/passwd
    - Key: NSS_WRAPPER_GROUP
      Value: /tmp/group
    Name: env
  - CmdLine:
    - for path in "$NSS_WRAPPER_PASSWD" "$NSS_WRAPPER_GROUP"; do       touch $path
      && chmod 666 $path ; done
    Name: run
    PrependShell: true
  - Chown: ""
    From: ""
    Name: copy
    SourcesAndDest:
    - nss-wrap.sh
    - /nss-wrap.sh
  - CmdLine:
    - echo "StrictHostKeyChecking=no\nControlMaster auto\nControlPath ~/.ssh/control:%h:%p:%r\nControlPersist
      600" >> /etc/ssh/ssh_config
    Name: run
    PrependShell: true
  - Chown: ""
    From: ""
    Name: copy
    SourcesAndDest:
    - upload_emulate_execute.sh
    - /
  - Env:
    - Key: HOME
      Value: /tmp
    - Key: CARGO_TARGET_ARM_UNKNOWN_LINUX_GNUEABIHF_LINKER
      Value: arm-linux-gnueabihf-gcc
    - Key: CARGO_TARGET_ARM_UNKNOWN_LINUX_GNUEABIHF_RUNNER
      Value: /upload_emulate_execute.sh
    - Key: CC_arm_unknown_linux_gnueabihf
      Value: arm-linux-gnueabihf-gcc
    - Key: CXX_arm_unknown_linux_gnueabihf
      Value: arm-linux-gnueabihf-g++
    - Key: OPENSSL_DIR
      Value: /openssl
    - Key: OPENSSL_INCLUDE_DIR
      Value: /openssl/include
    - Key: OPENSSL_LIB_DIR
      Value: /openssl/lib
    - Key: QEMU_LD_PREFIX
      Value: /usr/arm-linux-gnueabihf/arm-linux-gnueabihf
    - Key: LD_LIBRARY_PATH
      Value: /usr/arm-linux-gnueabihf/lib:/usr/arm-linux-gnueabihf/arm-linux-gnueabihf/sysroot/lib:/opt/vc/lib
    - Key: RUST_TEST_THREADS
      Value: "1"
    Name: env
  From:
    Image: ubuntu:18.04
  Name: ""
  Platform: ""
  SourceCode: FROM ubuntu:18.04
