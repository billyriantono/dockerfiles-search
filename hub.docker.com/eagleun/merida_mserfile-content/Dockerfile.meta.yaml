MetaArgs: null
Stages:
- BaseName: ubuntu:16.04
  Commands:
  - Maintainer: Hwang JeongWon <jeongwon@loadcomplete.com>
    Name: maintainer
  - Env:
    - Key: TMP_PWD
      Value: CQ_DOCKER_TMP_PWD_75
    Name: env
  - Env:
    - Key: PYTHON_VER
      Value: 3.6.1
    Name: env
  - Env:
    - Key: REDIS_VER
      Value: 3.2.9
    Name: env
  - Env:
    - Key: MYSQL_VER
      Value: "5.7"
    Name: env
  - Env:
    - Key: NGINX_VER
      Value: 1.12.0-1~xenial
    Name: env
  - Name: workdir
    Path: /tmp/
  - CmdLine:
    - apt-get update && apt-get install -y apt-utils build-essential zlib1g-dev libssl-dev
      openssl tcl curl sudo lrzsz vim language-pack-ko supervisor
    Name: run
    PrependShell: true
  - CmdLine:
    - locale-gen ko_KR.UTF-8 && echo 'LANG="ko_KR.UTF-8"' | tee -a /etc/default/locale
    Name: run
    PrependShell: true
  - CmdLine:
    - curl -O https://www.python.org/ftp/python/$PYTHON_VER/Python-$PYTHON_VER.tgz
      && tar xzvf Python-*.tgz && cd Python-* && ./configure --enable-shared CFLAGS=-fPIC
      && make && make install && /sbin/ldconfig && cd /tmp/
    Name: run
    PrependShell: true
  - CmdLine:
    - curl -O http://download.redis.io/releases/redis-$REDIS_VER.tar.gz && tar xzvf
      redis-*.tar.gz && cd redis-* && make && make install && cd /tmp/
    Name: run
    PrependShell: true
  - CmdLine:
    - /bin/bash
    - -c
    - debconf-set-selections <<< 'mysql-server-$MYSQL_VER mysql-server/root_password
      password '$TMP_PWD
    Name: run
    PrependShell: false
  - CmdLine:
    - /bin/bash
    - -c
    - debconf-set-selections <<< 'mysql-server-$MYSQL_VER mysql-server/root_password_again
      password '$TMP_PWD
    Name: run
    PrependShell: false
  - CmdLine:
    - apt-get install -y mysql-server-$MYSQL_VER libmysqlclient-dev && usermod -d
      /var/lib/mysql/ mysql
    Name: run
    PrependShell: true
  - CmdLine:
    - curl -fsSL http://nginx.org/keys/nginx_signing.key | apt-key add -
    Name: run
    PrependShell: true
  - CmdLine:
    - echo '' | tee -a /etc/apt/sources.list && echo 'deb http://nginx.org/packages/ubuntu/
      xenial nginx' | tee -a /etc/apt/sources.list
    Name: run
    PrependShell: true
  - CmdLine:
    - apt-get update && apt-get install -y nginx=$NGINX_VER
    Name: run
    PrependShell: true
  - CmdLine:
    - useradd ubuntu && adduser ubuntu sudo && echo 'ubuntu:'$TMP_PWD | chpasswd &&
      mkdir /home/ubuntu/ && chown -R ubuntu /home/ubuntu/ && chmod -R 755 /home/ubuntu/
    Name: run
    PrependShell: true
  - CmdLine:
    - rm -rf /var/lib/apt/lists/* && rm -rf /tmp/*
    Name: run
    PrependShell: true
  From:
    Image: ubuntu:16.04
  Name: ""
  Platform: ""
  SourceCode: FROM ubuntu:16.04
