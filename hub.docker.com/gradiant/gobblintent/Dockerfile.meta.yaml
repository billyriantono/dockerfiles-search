MetaArgs: null
Stages:
- BaseName: gpitfield/ffmpeg
  Commands:
  - Env:
    - Key: dir
      Value: /usr/local
    Name: env
  - Name: workdir
    Path: ${dir}
  - CmdLine:
    - git clone --depth 1 git://github.com/arut/nginx-rtmp-module.git && curl -O http://nginx.org/download/nginx-1.8.0.tar.gz
      && tar xzvf nginx-1.8.0.tar.gz
    Name: run
    PrependShell: true
  - Name: workdir
    Path: nginx-1.8.0
  - CmdLine:
    - ./configure --add-module=${dir}/nginx-rtmp-module && make && make install &&
      cp /usr/local/nginx-rtmp-module/stat.xsl /usr/local/nginx/html/ && rm -rf nginx-*
    Name: run
    PrependShell: true
  - Name: workdir
    Path: ${dir}
  - Chown: ""
    From: ""
    Name: copy
    SourcesAndDest:
    - ./files/mime.types
    - /etc/mime.types
  - CmdLine:
    - ln -s ${dir}/nginx/sbin/nginx /usr/sbin/nginx
    Name: run
    PrependShell: true
  - Name: expose
    Ports:
    - "1935"
    - "80"
  - CmdLine:
    - yum install -y gettext
    Name: run
    PrependShell: true
  - CmdLine:
    - nginx
    - -g
    - daemon off;
    Name: cmd
    PrependShell: false
  From:
    Image: gpitfield/ffmpeg
  Name: ""
  Platform: ""
  SourceCode: FROM gpitfield/ffmpeg
