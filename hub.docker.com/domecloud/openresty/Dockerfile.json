{
  "MetaArgs": null,
  "Stages": [
    {
      "Name": "",
      "BaseName": "alpine:3.5",
      "SourceCode": "FROM alpine:3.5",
      "Platform": "",
      "From": {
        "Image": "alpine:3.5"
      },
      "Commands": [
        {
          "Maintainer": "Dome C. \u003cdome@tel.co.th\u003e",
          "Name": "maintainer"
        },
        {
          "Key": "RESTY_VERSION",
          "Name": "arg",
          "Value": "\"1.11.2.3\""
        },
        {
          "Key": "RESTY_OPENSSL_VERSION",
          "Name": "arg",
          "Value": "\"1.0.2k\""
        },
        {
          "Key": "RESTY_PCRE_VERSION",
          "Name": "arg",
          "Value": "\"8.39\""
        },
        {
          "Key": "RESTY_J",
          "Name": "arg",
          "Value": "\"1\""
        },
        {
          "Key": "RESTY_CONFIG_OPTIONS",
          "Name": "arg",
          "Value": "\"    --with-file-aio     --with-http_addition_module     --with-http_auth_request_module     --with-http_dav_module     --with-http_flv_module     --with-http_geoip_module=dynamic     --with-http_gunzip_module     --with-http_gzip_static_module     --with-http_image_filter_module=dynamic     --with-http_mp4_module     --with-http_random_index_module     --with-http_realip_module     --with-http_secure_link_module     --with-http_slice_module     --with-http_ssl_module     --with-http_stub_status_module     --with-http_sub_module     --with-http_v2_module     --with-http_xslt_module=dynamic     --with-ipv6     --with-mail     --with-mail_ssl_module     --with-md5-asm     --with-pcre-jit     --with-sha1-asm     --with-stream     --with-stream_ssl_module     --with-threads     \""
        },
        {
          "Key": "_RESTY_CONFIG_DEPS",
          "Name": "arg",
          "Value": "\"--with-openssl=/tmp/openssl-${RESTY_OPENSSL_VERSION} --with-pcre=/tmp/pcre-${RESTY_PCRE_VERSION}\""
        },
        {
          "CmdLine": [
            "apk add --no-cache --virtual .build-deps         build-base         curl         gd-dev         geoip-dev         libxslt-dev         linux-headers         make         perl-dev         readline-dev         zlib-dev     \u0026\u0026 apk add --no-cache         gd         geoip         libgcc         libxslt         zlib         libstdc++     \u0026\u0026 cd /tmp     \u0026\u0026 curl -fSL https://www.openssl.org/source/openssl-${RESTY_OPENSSL_VERSION}.tar.gz -o openssl-${RESTY_OPENSSL_VERSION}.tar.gz     \u0026\u0026 tar xzf openssl-${RESTY_OPENSSL_VERSION}.tar.gz     \u0026\u0026 curl -fSL https://ftp.pcre.org/pub/pcre/pcre-${RESTY_PCRE_VERSION}.tar.gz -o pcre-${RESTY_PCRE_VERSION}.tar.gz     \u0026\u0026 tar xzf pcre-${RESTY_PCRE_VERSION}.tar.gz     \u0026\u0026 curl -fSL https://openresty.org/download/openresty-${RESTY_VERSION}.tar.gz -o openresty-${RESTY_VERSION}.tar.gz     \u0026\u0026 tar xzf openresty-${RESTY_VERSION}.tar.gz     \u0026\u0026 cd /tmp/openresty-${RESTY_VERSION}     \u0026\u0026 ./configure -j${RESTY_J} ${_RESTY_CONFIG_DEPS} ${RESTY_CONFIG_OPTIONS} --prefix=/opt/lixen     \u0026\u0026 make -j${RESTY_J}     \u0026\u0026 make -j${RESTY_J} install     \u0026\u0026 cd /tmp     \u0026\u0026 rm -rf         openssl-${RESTY_OPENSSL_VERSION}         openssl-${RESTY_OPENSSL_VERSION}.tar.gz         openresty-${RESTY_VERSION}.tar.gz openresty-${RESTY_VERSION}         pcre-${RESTY_PCRE_VERSION}.tar.gz pcre-${RESTY_PCRE_VERSION}     \u0026\u0026 apk del .build-deps"
          ],
          "Name": "run",
          "PrependShell": true
        },
        {
          "Chown": "",
          "From": "",
          "Name": "copy",
          "SourcesAndDest": [
            "conf/",
            "/opt/lixen/nginx/conf/"
          ]
        },
        {
          "Chown": "",
          "From": "",
          "Name": "copy",
          "SourcesAndDest": [
            "start.sh",
            "/"
          ]
        },
        {
          "Chown": "",
          "From": "",
          "Name": "copy",
          "SourcesAndDest": [
            ".bashrc",
            "/root/"
          ]
        },
        {
          "CmdLine": [
            "chmod +x /start.sh"
          ],
          "Name": "run",
          "PrependShell": true
        },
        {
          "Env": [
            {
              "Key": "TERM",
              "Value": "screen.xterm-new"
            }
          ],
          "Name": "env"
        },
        {
          "CmdLine": [
            "/start.sh"
          ],
          "Name": "entrypoint",
          "PrependShell": false
        }
      ]
    }
  ]
}