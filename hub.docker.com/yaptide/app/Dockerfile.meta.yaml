MetaArgs: null
Stages:
- As: backend_build
  BaseName: golang:1.9-stretch
  Commands:
  - CmdLine:
    - mkdir -p /go/src/github.com/yaptide/app &&   mkdir -p /build &&   go get -u
      github.com/golang/dep/cmd/dep
    Name: run
    PrependShell: true
  - CmdLine:
    - wget https://neptun.phys.au.dk/~bassler/SHIELD_HIT/DEMO/shield_hit12a_x86_64_demo_gfortran_v0.7.2.tar.gz
      &&   tar -xf shield_hit12a_x86_64_demo_gfortran_v0.7.2.tar.gz &&   cp shield_hit12a_x86_64_demo_gfortran_v0.7.2/bin/shieldhit
      /build/shieldhit
    Name: run
    PrependShell: true
  - Chown: ""
    From: ""
    Name: copy
    SourcesAndDest:
    - .
    - /go/src/github.com/yaptide/app
  - CmdLine:
    - cd /go/src/github.com/yaptide/app &&     rm -rf vendodor &&     dep ensure &&     go
      build -i -o /build/yaptide_backend
    Name: run
    PrependShell: true
  From:
    Image: golang:1.9-stretch
  Name: backend_build
  Platform: ""
  SourceCode: FROM golang:1.9-stretch AS backend_build
- BaseName: debian:9
  Commands:
  - Chown: ""
    From: backend_build
    Name: copy
    SourcesAndDest:
    - /build
    - /root/backend
  - Chown: ""
    From: backend_build
    Name: copy
    SourcesAndDest:
    - /build/shieldhit
    - /usr/bin/shieldhit
  - CmdLine:
    - /root/backend/yaptide_backend
    Name: entrypoint
    PrependShell: true
  From:
    Image: debian:9
  Name: ""
  Platform: ""
  SourceCode: FROM debian:9
