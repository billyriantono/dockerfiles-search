MetaArgs: null
Stages:
- BaseName: centos:7
  Commands:
  - Maintainer: Xiaohua Guan <guan@ipride.co.jp>
    Name: maintainer
  - CmdLine:
    - yum -y install http://rpms.famillecollet.com/enterprise/remi-release-7.rpm
    Name: run
    PrependShell: true
  - CmdLine:
    - yum -y install --enablerepo=remi,remi-php56 php php-opcache php-devel php-mbstring
      php-mcrypt php-mysqlnd php-pecl-xdebug php-pecl-xhprof php-gd php-fpm php-twig-ctwig
      httpd
    Name: run
    PrependShell: true
  - CmdLine:
    - php -v
    Name: run
    PrependShell: true
  - CmdLine:
    - yum -y install openssl mod_ssl
    Name: run
    PrependShell: true
  - CmdLine:
    - yum -y install git
    Name: run
    PrependShell: true
  - CmdLine:
    - git --version
    Name: run
    PrependShell: true
  - CmdLine:
    - curl -sS https://getcomposer.org/installer | php
    Name: run
    PrependShell: true
  - CmdLine:
    - mv composer.phar /usr/bin/composer
    Name: run
    PrependShell: true
  - CmdLine:
    - composer global require drupal/console:dev-master
    Name: run
    PrependShell: true
  - Env:
    - Key: PATH
      Value: /root/.composer/vendor/bin:$PATH
    Name: env
  - CmdLine:
    - echo $PATH
    Name: run
    PrependShell: true
  - CmdLine:
    - drupal --version
    Name: run
    PrependShell: true
  - Chown: ""
    Name: add
    SourcesAndDest:
    - httpd.conf
    - /etc/httpd/conf/httpd.conf
  - CmdLine:
    - cat /etc/httpd/conf.d/ssl.conf
    Name: run
    PrependShell: true
  - Chown: ""
    Name: add
    SourcesAndDest:
    - php.ini
    - /etc/php.ini
  - Name: expose
    Ports:
    - "80"
  - CmdLine:
    - /usr/sbin/httpd
    - -D
    - FOREGROUND
    Name: cmd
    PrependShell: false
  From:
    Image: centos:7
  Name: ""
  Platform: ""
  SourceCode: FROM    centos:7
