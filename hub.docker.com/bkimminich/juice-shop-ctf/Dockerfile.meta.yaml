MetaArgs: null
Stages:
- As: installer
  BaseName: node:12
  Commands:
  - Chown: ""
    From: ""
    Name: copy
    SourcesAndDest:
    - .
    - /juice-shop-ctf
  - Name: workdir
    Path: /juice-shop-ctf
  - CmdLine:
    - chown -R node .
    Name: run
    PrependShell: true
  - Name: user
    User: node
  - Key: DEV_BUILD
    Name: arg
    Value: "false"
  - CmdLine:
    - if [ ${DEV_BUILD} = true ]; then npm i && npm lint && npm test && npm run e2e;
      else npm install --production --unsafe-perm; fi
    Name: run
    PrependShell: true
  From:
    Image: node:12
  Name: installer
  Platform: ""
  SourceCode: FROM node:12 as installer
- BaseName: node:9-alpine
  Commands:
  - Key: BUILD_DATE
    Name: arg
    Value: null
  - Key: VCS_REF
    Name: arg
    Value: null
  - Labels:
    - Key: maintainer
      Value: '"Bjoern Kimminich <bjoern.kimminich@owasp.org>"'
    - Key: org.opencontainers.image.title
      Value: '"OWASP Juice Shop CTF-Extension"'
    - Key: org.opencontainers.image.description
      Value: '"Capture-the-Flag (CTF) environment setup tools for OWASP Juice Shop"'
    - Key: org.opencontainers.image.authors
      Value: '"Bjoern Kimminich <bjoern.kimminich@owasp.org>"'
    - Key: org.opencontainers.image.vendor
      Value: '"Open Web Application Security Project"'
    - Key: org.opencontainers.image.documentation
      Value: '"https://help.owasp-juice.shop/part1/ctf.html"'
    - Key: org.opencontainers.image.licenses
      Value: '"MIT"'
    - Key: org.opencontainers.image.version
      Value: '"7.0.1-SNAPSHOT"'
    - Key: org.opencontainers.image.url
      Value: '"https://owasp-juice.shop"'
    - Key: org.opencontainers.image.source
      Value: '"https://github.com/bkimminich/juice-shop-ctf.git"'
    - Key: org.opencontainers.image.revision
      Value: $VCS_REF
    - Key: org.opencontainers.image.created
      Value: $BUILD_DATE
    Name: label
  - Chown: ""
    From: installer
    Name: copy
    SourcesAndDest:
    - /juice-shop-ctf
    - /juice-shop-ctf
  - Name: volume
    Volumes:
    - /data
  - Name: workdir
    Path: /data
  - CmdLine:
    - npx
    - /juice-shop-ctf/bin/juice-shop-ctf.js
    Name: entrypoint
    PrependShell: false
  From:
    Image: node:9-alpine
  Name: ""
  Platform: ""
  SourceCode: FROM node:9-alpine
