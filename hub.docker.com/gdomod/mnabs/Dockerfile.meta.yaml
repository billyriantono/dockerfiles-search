MetaArgs: null
Stages:
- BaseName: ubuntu:18.04
  Commands:
  - CmdLine:
    - apt-get update -y && apt-get upgrade -y && apt-get install cron python2.7 python-pip
      git-core software-properties-common -y && add-apt-repository -y ppa:bitcoin/bitcoin
    Name: run
    PrependShell: true
  - CmdLine:
    - apt-get install curl build-essential libtool automake autoconf autotools-dev
      autoconf pkg-config libssl-dev libgmp3-dev libevent-dev bsdmainutils libboost-all-dev
      libzmq3-dev libminiupnpc-dev libdb4.8-dev libdb4.8++-dev -y
    Name: run
    PrependShell: true
  - CmdLine:
    - apt-get install bsdmainutils -y
    Name: run
    PrependShell: true
  - Env:
    - Key: PORT
      Value: "18888"
    Name: env
  - Name: workdir
    Path: /root/
  - CmdLine:
    - git clone https://github.com/absolute-community/absolute.git
    Name: run
    PrependShell: true
  - CmdLine:
    - cd absolute && chmod -R 777 * && ./autogen.sh && ./configure --disable-tests
      --disable-gui-tests && make && make install
    Name: run
    PrependShell: true
  - CmdLine:
    - git clone https://github.com/absolutecrypto/sentinel.git /root/sentinel
    Name: run
    PrependShell: true
  - CmdLine:
    - pip2 install -r /root/sentinel/requirements.txt
    Name: run
    PrependShell: true
  - CmdLine:
    - echo "absolute_conf=/root/config.conf" >> /root/sentinel/sentinel.conf
    Name: run
    PrependShell: true
  - CmdLine:
    - echo "* * * * * root cd /root/sentinel && /usr/bin/python bin/sentinel.py >/dev/null
      2>&1" >> /etc/crontab
    Name: run
    PrependShell: true
  - CmdLine:
    - crontab /etc/crontab
    Name: run
    PrependShell: true
  - Chown: ""
    Name: add
    SourcesAndDest:
    - run.sh
    - /usr/local/bin
  - CmdLine:
    - chmod +x /usr/local/bin/run.sh
    Name: run
    PrependShell: true
  - CmdLine:
    - /usr/local/bin/run.sh
    Name: entrypoint
    PrependShell: false
  - CmdLine: []
    Name: cmd
    PrependShell: false
  From:
    Image: ubuntu:18.04
  Name: ""
  Platform: ""
  SourceCode: FROM ubuntu:18.04
