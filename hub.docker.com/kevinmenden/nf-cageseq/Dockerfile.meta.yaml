MetaArgs: null
Stages:
- BaseName: ubuntu
  Commands:
  - Env:
    - Key: LANG
      Value: C.UTF-8
    - Key: LC_ALL
      Value: C.UTF-8
    Name: env
  - CmdLine:
    - apt-get update --fix-missing &&     apt-get install -y wget bzip2 ca-certificates
      curl git &&     apt-get clean &&     rm -rf /var/lib/apt/lists/*
    Name: run
    PrependShell: true
  - CmdLine:
    - echo 'export PATH=/opt/conda/bin:$PATH' > /etc/profile.d/conda.sh &&     wget
      --quiet https://repo.continuum.io/miniconda/Miniconda3-4.4.10-Linux-x86_64.sh
      -O ~/miniconda.sh &&     /bin/bash ~/miniconda.sh -b -p /opt/conda &&     rm
      ~/miniconda.sh &&     /opt/conda/bin/conda clean -tipsy
    Name: run
    PrependShell: true
  - Env:
    - Key: TINI_VERSION
      Value: v0.16.1
    Name: env
  - Chown: ""
    Name: add
    SourcesAndDest:
    - https://github.com/krallin/tini/releases/download/${TINI_VERSION}/tini
    - /usr/bin/tini
  - CmdLine:
    - chmod +x /usr/bin/tini
    Name: run
    PrependShell: true
  - Env:
    - Key: PATH
      Value: $PATH:/opt/conda/bin
    Name: env
  - CmdLine:
    - /usr/bin/tini
    - --
    Name: entrypoint
    PrependShell: false
  - CmdLine:
    - /bin/bash
    Name: cmd
    PrependShell: false
  - Chown: ""
    From: ""
    Name: copy
    SourcesAndDest:
    - environment.yml
    - /
  - CmdLine:
    - conda env create -f /environment.yml
    Name: run
    PrependShell: true
  - Env:
    - Key: PATH
      Value: $PATH:/opt/conda/envs/nf-cageseq/bin
    Name: env
  - CmdLine:
    - apt-get update &&     apt-get install -y --no-install-recommends         g++         gcc         gfortran         libbz2-dev         libcurl4-openssl-dev         libgsl-dev         libgsl2         liblzma-dev         libncurses5-dev         libpcre3-dev         libreadline-dev         libssl-dev         make         python-dev         zlib1g-dev         liblzo2-dev     &&
      rm -rf /var/lib/apt/lists/*
    Name: run
    PrependShell: true
  - CmdLine:
    - curl -fsSL https://cran.r-project.org/src/base/R-3/R-3.4.2.tar.gz -o /opt/R-3.4.2.tar.gz
      &&     tar xvzf /opt/R-3.4.2.tar.gz -C /opt/ &&     cd /opt/R-3.4.2 &&     ./configure
      --with-x=no &&     make &&     make install && rm /opt/R-3.4.2.tar.gz
    Name: run
    PrependShell: true
  - CmdLine:
    - apt-get update && apt-get install -y libxml2 libmariadb-client-lgpl-dev
    Name: run
    PrependShell: true
  - CmdLine:
    - echo 'source("https://bioconductor.org/biocLite.R")' > /opt/packages.r &&     echo
      'biocLite()' >> /opt/packages.r &&     echo 'biocLite(c("CAGEr", "BSgenome.Hsapiens.UCSC.hg38",
      "BSgenome.Hsapiens.NCBI.GRCh38"))' >> /opt/packages.r &&     Rscript /opt/packages.r
      && mkdir -p /usr/local/lib/R/site-library
    Name: run
    PrependShell: true
  From:
    Image: ubuntu
  Name: ""
  Platform: ""
  SourceCode: FROM ubuntu
