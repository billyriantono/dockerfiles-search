MetaArgs: null
Stages:
- BaseName: ubuntu:trusty
  Commands:
  - Maintainer: GaRaOne
    Name: maintainer
  - Key: QT
    Name: arg
    Value: 5.8.0
  - Key: QTM
    Name: arg
    Value: "5.8"
  - Env:
    - Key: DEBIAN_FRONTEND
      Value: noninteractive
    Name: env
  - Env:
    - Key: QT_PATH
      Value: /opt/qt
    Name: env
  - Env:
    - Key: QT_BASE_DIR
      Value: $QT_PATH
    Name: env
  - Env:
    - Key: QT_ARCH
      Value: ${QT_PATH}/${QTM}/android_armv7
    Name: env
  - Env:
    - Key: ANDROID_HOME
      Value: /opt/android-sdk-linux
    Name: env
  - Env:
    - Key: ANDROID_SDK_ROOT
      Value: ${ANDROID_HOME}
    Name: env
  - Env:
    - Key: ANDROID_NDK_ROOT
      Value: /opt/android-ndk
    Name: env
  - Env:
    - Key: ANDROID_NDK_TOOLCHAIN_PREFIX
      Value: arm-linux-androideabi
    Name: env
  - Env:
    - Key: ANDROID_NDK_TOOLCHAIN_VERSION
      Value: "4.9"
    Name: env
  - Env:
    - Key: ANDROID_NDK_HOST
      Value: linux-x86_64
    Name: env
  - Env:
    - Key: ANDROID_NDK_PLATFORM
      Value: android-21
    Name: env
  - Env:
    - Key: ANDROID_NDK_TOOLS_PREFIX
      Value: ${ANDROID_NDK_TOOLCHAIN_PREFIX}
    Name: env
  - Env:
    - Key: QMAKESPEC
      Value: android-g++
    Name: env
  - Env:
    - Key: PATH
      Value: ${PATH}:${QT_ARCH}/bin:${ANDROID_HOME}/tools:${ANDROID_HOME}/platform-tools
    Name: env
  - CmdLine:
    - rm /bin/sh && ln -s /bin/bash /bin/sh
    Name: run
    PrependShell: true
  - CmdLine:
    - sudo dpkg --add-architecture i386 &&     apt-get update -q &&     apt-get install
      -q -y --no-install-recommends         ant         build-essential         ca-certificates         curl         default-jdk         git         libavahi-client-dev         libavahi-common-dev         libc6:i386         libfontconfig1         libglib2.0-dev         libglu1-mesa-dev         libice6         libncurses5:i386         libpulse-dev         libsm6         libstdc++6:i386         libX11-xcb1         libxext6         libxrender1         libz1:i386         mesa-common-dev         openssh-client         p7zip-full         xvfb     &&
      apt-get clean
    Name: run
    PrependShell: true
  - Chown: ""
    Name: add
    SourcesAndDest:
    - qt-installer-noninteractive.qs
    - /tmp/qt/script.qs
  - Chown: ""
    Name: add
    SourcesAndDest:
    - http://download.qt.io/official_releases/qt/${QTM}/${QT}/qt-opensource-linux-x64-android-${QT}.run
    - /tmp/qt/installer.run
  - CmdLine:
    - 'chmod +x /tmp/qt/installer.run     && xvfb-run /tmp/qt/installer.run --script
      /tmp/qt/script.qs      | egrep -v ''\[[0-9]+\] Warning: (Unsupported screen
      format)|((QPainter|QWidget))''     && rm -rf /tmp/qt'
    Name: run
    PrependShell: true
  - CmdLine:
    - locale-gen en_US.UTF-8     && dpkg-reconfigure locales
    Name: run
    PrependShell: true
  - CmdLine:
    - echo /opt/qt/${QTM}/android_armv7/lib > /etc/ld.so.conf.d/qt-${QTM}.conf
    Name: run
    PrependShell: true
  - CmdLine:
    - mkdir /tmp/android     && curl -Lo /tmp/android/sdk.tgz 'http://dl.google.com/android/android-sdk_r24.4.1-linux.tgz'     &&
      tar --no-same-owner -xf /tmp/android/sdk.tgz -C /opt     && rm -rf /tmp/android     &&
      echo "y" | android update sdk -u -a -t tools,platform-tools,build-tools-21.1.2,build-tools-23.0.3,extra-android-m2repository,extra-android-support,extra-google-google_play_services,extra-google-m2repository,extra-google-play_apk_expansion,$ANDROID_NDK_PLATFORM
    Name: run
    PrependShell: true
  - CmdLine:
    - mkdir /tmp/android     && cd /tmp/android     && curl -Lo ndk.bin 'http://dl.google.com/android/ndk/android-ndk-r10e-linux-x86_64.bin'     &&
      chmod +x ndk.bin     && ./ndk.bin > /dev/null     && mv android-ndk-r10e $ANDROID_NDK_ROOT     &&
      chmod -R +rX $ANDROID_NDK_ROOT     && rm -rf /tmp/android
    Name: run
    PrependShell: true
  - CmdLine:
    - rm -rf /var/lib/apt/lists/*
    Name: run
    PrependShell: true
  - CmdLine:
    - /bin/bash
    Name: cmd
    PrependShell: false
  From:
    Image: ubuntu:trusty
  Name: ""
  Platform: ""
  SourceCode: FROM ubuntu:trusty
