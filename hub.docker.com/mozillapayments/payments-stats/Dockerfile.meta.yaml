MetaArgs: null
Stages:
- BaseName: golang:1.4
  Commands:
  - Maintainer: Andy McKay <andym@mozilla.com>
    Name: maintainer
  - CmdLine:
    - apt-get update &&         apt-get install -yq --no-install-recommends         build-essential         ca-certificates         cmake         debhelper         fakeroot         libgeoip-dev         libgeoip1         golang-goprotobuf-dev         patch         ruby-dev         protobuf-compiler         python-sphinx         wget         git
    Name: run
    PrependShell: true
  - Env:
    - Key: CTEST_OUTPUT_ON_FAILURE
      Value: "1"
    Name: env
  - Env:
    - Key: BUILD_DIR
      Value: /heka/build
    Name: env
  - Env:
    - Key: GOPATH
      Value: $BUILD_DIR/heka
    Name: env
  - Env:
    - Key: GOBIN
      Value: $GOPATH/bin
    Name: env
  - Env:
    - Key: PATH
      Value: $PATH:$GOBIN
    Name: env
  - Name: workdir
    Path: /
  - CmdLine:
    - git clone https://github.com/mozilla-services/heka.git
    Name: run
    PrependShell: true
  - CmdLine:
    - cd heka && ./build.sh
    Name: run
    PrependShell: true
  - CmdLine:
    - cd /heka/build && make install
    Name: run
    PrependShell: true
  - CmdLine:
    - mkdir -p /usr/share/heka && cp -r /heka/build/heka/share/heka/* /usr/share/heka
    Name: run
    PrependShell: true
  - Chown: ""
    From: ""
    Name: copy
    SourcesAndDest:
    - heka.conf
    - /etc/hekad.toml
  - CmdLine:
    - mkdir -p /srv/logs
    Name: run
    PrependShell: true
  - Name: volume
    Volumes:
    - /var/log/nginx/
  - Name: volume
    Volumes:
    - /var/log/solitude/
  - CmdLine:
    - hekad
    Name: entrypoint
    PrependShell: false
  From:
    Image: golang:1.4
  Name: ""
  Platform: ""
  SourceCode: FROM golang:1.4
