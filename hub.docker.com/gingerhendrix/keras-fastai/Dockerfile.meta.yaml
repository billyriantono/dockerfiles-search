MetaArgs: null
Stages:
- BaseName: nvidia/cuda:8.0-cudnn5-devel
  Commands:
  - Key: PYTHON
    Name: arg
    Value: "3"
  - Key: ANACONDA
    Name: arg
    Value: 4.4.0
  - Key: KERAS
    Name: arg
    Value: 2.0.7
  - CmdLine:
    - apt-get update && apt-get install -y wget git unzip p7zip-full graphviz
    Name: run
    PrependShell: true
  - CmdLine:
    - mkdir /tmp/downloads &&     cd /tmp/downloads &&     wget "https://repo.continuum.io/archive/Anaconda${PYTHON}-${ANACONDA}-Linux-x86_64.sh"
      -O "Anaconda${PYTHON}-${ANACONDA}-Linux-x86_64.sh" &&     bash "Anaconda${PYTHON}-${ANACONDA}-Linux-x86_64.sh"
      -b &&     echo "export PATH=\"$HOME/anaconda${PYTHON}/bin:\$PATH\"" >> ~/.bashrc
    Name: run
    PrependShell: true
  - Env:
    - Key: PATH
      Value: /root/anaconda${PYTHON}/bin:$PATH
    Name: env
  - CmdLine:
    - conda install -y bcolz && conda upgrade -y --all
    Name: run
    PrependShell: true
  - CmdLine:
    - conda install pygpu
    Name: run
    PrependShell: true
  - CmdLine:
    - conda install pytorch torchvision cuda80 -c soumith
    Name: run
    PrependShell: true
  - CmdLine:
    - pip install six pydot
    Name: run
    PrependShell: true
  - CmdLine:
    - pip install --upgrade --no-deps git+git://github.com/Theano/Theano.git
    Name: run
    PrependShell: true
  - CmdLine:
    - pip install keras==${KERAS}
    Name: run
    PrependShell: true
  - Chown: ""
    Name: add
    SourcesAndDest:
    - keras.json
    - /root/.keras/keras.json
  - Chown: ""
    Name: add
    SourcesAndDest:
    - theanorc
    - /root/.theanorc
  - Name: workdir
    Path: /root
  - Name: expose
    Ports:
    - "8888"
  - CmdLine:
    - jupyter
    - notebook
    - --allow-root
    - --no-browser
    - --ip=*
    - --NotebookApp.password=sha1:98b767162d34:8da1bc3c75a0f29145769edc977375a373407824
    Name: cmd
    PrependShell: false
  From:
    Image: nvidia/cuda:8.0-cudnn5-devel
  Name: ""
  Platform: ""
  SourceCode: FROM nvidia/cuda:8.0-cudnn5-devel
