MetaArgs: null
Stages:
- BaseName: postgres:12-alpine
  Commands:
  - Labels:
    - Key: maintainer
      Value: '"Takehiko Murakawa <takehiko@sys.wakayama-u.ac.jp>"'
    Name: label
  - Env:
    - Key: LANG
      Value: ja_JP.UTF-8
    - Key: MECAB_VERSION
      Value: "0.996"
    - Key: IPADIC_VERSION
      Value: 2.7.0-20070801
    - Key: mecab_url
      Value: '"https://drive.google.com/uc?export=download&id=0B4y35FiV1wh7cENtOXlicTFaRUE"'
    - Key: ipadic_url
      Value: '"https://drive.google.com/uc?export=download&id=0B4y35FiV1wh7MWVlSDBCSXZMTXM"'
    - Key: GROONGA_VERSION
      Value: 9.1.0
    - Key: PGROONGA_VERSION
      Value: 2.2.2
    Name: env
  - Name: workdir
    Path: /root
  - CmdLine:
    - apk add --update --no-cache build-base clang clang-dev llvm pkgconf openssl  &&
      wget -O mecab-${MECAB_VERSION}.tar.gz ${mecab_url}  && tar zxf mecab-${MECAB_VERSION}.tar.gz  &&
      cd mecab-${MECAB_VERSION}  && ./configure --enable-utf8-only --with-charset=utf8  &&
      make  && make install  && cd ..  && wget -O mecab-ipadic-${IPADIC_VERSION}.tar.gz
      ${ipadic_url}  && tar zxf mecab-ipadic-${IPADIC_VERSION}.tar.gz  && cd mecab-ipadic-${IPADIC_VERSION}  &&
      ./configure --with-charset=utf8  && make  && make install  && cd ..  && wget
      https://packages.groonga.org/source/groonga/groonga-${GROONGA_VERSION}.tar.gz  &&
      tar xvzf groonga-${GROONGA_VERSION}.tar.gz  && cd groonga-${GROONGA_VERSION}  &&
      sed -i -e '25i#include <stdbool.h>' lib/ii.c  && ./configure  && make  && make
      install  && cd ..  && wget https://packages.groonga.org/source/pgroonga/pgroonga-${PGROONGA_VERSION}.tar.gz  &&
      tar xvf pgroonga-${PGROONGA_VERSION}.tar.gz  && cd pgroonga-${PGROONGA_VERSION}  &&
      sed -i -e '6i#include <stdbool.h>' src/pgroonga.h  && make  && make install  &&
      cd ..  && apk del build-base pkgconf clang clang-dev llvm  && apk add --update
      --no-cache libstdc++  && rm -rf     mecab-${MECAB_VERSION}*     mecab-ipadic-${IPADIC_VERSION}*     groonga-${GROONGA_VERSION}*      pgroonga-${PGROONGA_VERSION}*     /usr/local/share/doc/groonga     /usr/local/share/groonga
    Name: run
    PrependShell: true
  From:
    Image: postgres:12-alpine
  Name: ""
  Platform: ""
  SourceCode: FROM postgres:12-alpine
