MetaArgs: null
Stages:
- BaseName: alpine:3.7
  Commands:
  - Maintainer: fudali113@gmail.com
    Name: maintainer
  - CmdLine:
    - 'mkdir ~/.kube &&     echo -e "apiVersion: v1 \nclusters:   \n- cluster:  \n{{if
      .k8sCAD}}    certificate-authority-data: {{.k8sCAD}} \n{{else}}    insecure-skip-tls-verify:
      true \n{{end}}    server: {{.k8sServer}}  \n  name: k8s \ncontexts:   \n- context:  \n    cluster:
      k8s    \n    user: kubernetes-admin  \n  name: kubernetes-admin@kubernetes \ncurrent-context:
      kubernetes-admin@kubernetes    \nkind: Config    \npreferences: {} \nusers:  \n-
      name: kubernetes-admin    \n  user: \n    client-certificate-data: {{.k8sCCD}}    \n    client-key-data:
      {{.k8sCKD}}      \n{{if .token}}    token: {{.token}} \n{{end}}    " > ~/config.tpl
      &&     cat ~/config.tpl > /config.tpl'
    Name: run
    PrependShell: true
  - CmdLine:
    - wget https://storage.googleapis.com/kubernetes-release/release/v1.10.3/bin/linux/amd64/kubectl
      &&     chmod +x ./kubectl &&     mv ./kubectl /usr/local/bin/kubectl
    Name: run
    PrependShell: true
  - CmdLine:
    - wget https://github.com/fudali113/k8s-images/releases/download/v0.1.1/go-tpl-replacer
      &&     chmod +x ./go-tpl-replacer &&     mv ./go-tpl-replacer /usr/local/bin/go-tpl-replacer
    Name: run
    PrependShell: true
  - CmdLine:
    - sh
    Name: cmd
    PrependShell: false
  From:
    Image: alpine:3.7
  Name: ""
  Platform: ""
  SourceCode: FROM alpine:3.7
