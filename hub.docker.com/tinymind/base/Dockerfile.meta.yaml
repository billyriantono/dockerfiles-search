MetaArgs: null
Stages:
- BaseName: nvidia/cuda:10.1-cudnn7-devel-ubuntu18.04
  Commands:
  - Labels:
    - Key: author
      Value: '"TinyMind"'
    - Key: website
      Value: '"www.tinymind.com"'
    - Key: email
      Value: '"hello@tinymind.com"'
    Name: label
  - CmdLine:
    - apt-get update && apt-get install -y --no-install-recommends         build-essential         cmake         curl         git         graphviz         g++         libbz2-dev         libffi-dev         libfreeimage-dev         libfreetype6-dev         libgl1-mesa-dev         libglu1-mesa-dev         libhdf5-dev         libjpeg-dev         liblapack-dev         liblcms2-dev         libncurses5-dev         libncursesw5-dev         libopenblas-dev         libjpeg-dev         libpng-dev         libreadline-dev         libsqlite3-dev         libssl-dev         libtiff5-dev         libwebp-dev         libzmq3-dev         llvm         make         pkg-config         rsync         software-properties-common         unzip         vim         wget         xz-utils         zlib1g-dev         python3         python3-dev
      &&     apt-get clean &&     rm -rf /var/lib/apt/lists/* &&     ln -sf /usr/bin/python3
      /usr/bin/python &&     wget https://bootstrap.pypa.io/get-pip.py &&     python
      get-pip.py &&     rm get-pip.py
    Name: run
    PrependShell: true
  - CmdLine:
    - pip --no-cache-dir install --upgrade         Pillow         h5py         ipykernel         jupyter         keras_applications         keras_preprocessing         matplotlib         mock         numpy         scipy         scikit-learn         pandas         mkl         pyyaml         enum34         Cython         tinyenv
    Name: run
    PrependShell: true
  - CmdLine:
    - apt-get update &&     apt-get install nvinfer-runtime-trt-repo-ubuntu1804-5.0.2-ga-cuda10.0
      &&     apt-get update &&     apt-get install -y --no-install-recommends libnvinfer5
      libnvinfer-dev &&     apt-get clean &&     rm -rf /var/lib/apt/lists/*
    Name: run
    PrependShell: true
  - CmdLine:
    - mkdir /usr/local/cuda/lib &&      ln -s /usr/lib/x86_64-linux-gnu/libnccl.so.2
      /usr/local/cuda/lib/libnccl.so.2 &&     ln -s /usr/include/nccl.h /usr/local/cuda/include/nccl.h
    Name: run
    PrependShell: true
  - CmdLine:
    - ln -s /usr/local/cuda/lib64/stubs/libcuda.so /usr/local/cuda/lib64/stubs/libcuda.so.1
    Name: run
    PrependShell: true
  - Env:
    - Key: LD_LIBRARY_PATH
      Value: /usr/local/cuda/lib64:/usr/local/cuda/extras/CUPTI/lib64:$LD_LIBRARY_PATH
    Name: env
  - Chown: ""
    From: ""
    Name: copy
    SourcesAndDest:
    - jupyter_notebook_config.py
    - /etc/jupyter/jupyter_notebook_config.py
  - Chown: ""
    From: ""
    Name: copy
    SourcesAndDest:
    - jupyter.sh
    - /
  - CmdLine:
    - chmod +x /jupyter.sh
    Name: run
    PrependShell: true
  - Name: expose
    Ports:
    - "8888"
  From:
    Image: nvidia/cuda:10.1-cudnn7-devel-ubuntu18.04
  Name: ""
  Platform: ""
  SourceCode: FROM nvidia/cuda:10.1-cudnn7-devel-ubuntu18.04
