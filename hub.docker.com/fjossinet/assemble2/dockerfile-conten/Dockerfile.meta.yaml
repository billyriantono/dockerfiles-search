MetaArgs: null
Stages:
- BaseName: centos:centos7.6.1810
  Commands:
  - Maintainer: Francisco Romero Bueno <francisco.romerobueno@telefonica.com>
    Name: maintainer
  - Env:
    - Key: CYGNUS_USER
      Value: '"cygnus"'
    Name: env
  - Env:
    - Key: CYGNUS_HOME
      Value: '"/opt/fiware-cygnus"'
    Name: env
  - Env:
    - Key: CYGNUS_VERSION
      Value: '"1.17.0_SNAPSHOT"'
    Name: env
  - Env:
    - Key: CYGNUS_CONF_PATH
      Value: '"/opt/apache-flume/conf"'
    Name: env
  - Env:
    - Key: CYGNUS_CONF_FILE
      Value: '"/opt/apache-flume/conf/agent.conf"'
    Name: env
  - Env:
    - Key: CYGNUS_AGENT_NAME
      Value: '"cygnus-ngsi"'
    Name: env
  - Env:
    - Key: CYGNUS_LOG_LEVEL
      Value: '"INFO"'
    Name: env
  - Env:
    - Key: CYGNUS_LOG_APPENDER
      Value: '"console"'
    Name: env
  - Env:
    - Key: CYGNUS_SERVICE_PORT
      Value: '"5050"'
    Name: env
  - Env:
    - Key: CYGNUS_JAVA_OPTS
      Value: '"-Xms2048m -Xmx4096m"'
    Name: env
  - Env:
    - Key: CYGNUS_API_PORT
      Value: '"5080"'
    Name: env
  - Env:
    - Key: CYGNUS_MULTIAGENT
      Value: "false"
    Name: env
  - Env:
    - Key: CYGNUS_MONITORING_TYPE
      Value: '""'
    Name: env
  - Env:
    - Key: CYGNUS_SKIP_CONF_GENERATION
      Value: "false"
    Name: env
  - Env:
    - Key: CYGNUS_MYSQL_HOST
      Value: '""'
    Name: env
  - Env:
    - Key: CYGNUS_MYSQL_PORT
      Value: '""'
    Name: env
  - Env:
    - Key: CYGNUS_MYSQL_SKIP_CONF_GENERATION
      Value: '""'
    Name: env
  - Env:
    - Key: CYGNUS_MYSQL_SERVICE_PORT
      Value: '"5050"'
    Name: env
  - Env:
    - Key: CYGNUS_MYSQL_ENABLE_ENCODING
      Value: '""'
    Name: env
  - Env:
    - Key: CYGNUS_MYSQL_ENABLE_GROUPING
      Value: '""'
    Name: env
  - Env:
    - Key: CYGNUS_MYSQL_ENABLE_NAME_MAPPINGS
      Value: '""'
    Name: env
  - Env:
    - Key: CYGNUS_MYSQL_SKIP_NAME_MAPPINGS_GENERATION
      Value: '""'
    Name: env
  - Env:
    - Key: CYGNUS_MYSQL_ENABLE_LOWERCASE
      Value: '""'
    Name: env
  - Env:
    - Key: CYGNUS_MYSQL_DATA_MODEL
      Value: '""'
    Name: env
  - Env:
    - Key: CYGNUS_MYSQL_ATTR_PERSISTENCE
      Value: '""'
    Name: env
  - Env:
    - Key: CYGNUS_MYSQL_ATTR_NATIVE_TYPES
      Value: '""'
    Name: env
  - Env:
    - Key: CYGNUS_MYSQL_BATCH_SIZE
      Value: '""'
    Name: env
  - Env:
    - Key: CYGNUS_MYSQL_BATCH_TIMEOUT
      Value: '""'
    Name: env
  - Env:
    - Key: CYGNUS_MYSQL_BATCH_TTL
      Value: '""'
    Name: env
  - Env:
    - Key: CYGNUS_MONGO_HOSTS
      Value: '""'
    Name: env
  - Env:
    - Key: CYGNUS_MONGO_SKIP_CONF_GENERATION
      Value: '""'
    Name: env
  - Env:
    - Key: CYGNUS_MONGO_SERVICE_PORT
      Value: '"5051"'
    Name: env
  - Env:
    - Key: CYGNUS_MONGO_ENABLE_ENCODING
      Value: '""'
    Name: env
  - Env:
    - Key: CYGNUS_MONGO_ENABLE_GROUPING
      Value: '""'
    Name: env
  - Env:
    - Key: CYGNUS_MONGO_ENABLE_NAME_MAPPINGS
      Value: '""'
    Name: env
  - Env:
    - Key: CYGNUS_MONGO_SKIP_NAME_MAPPINGS_GENERATION
      Value: '""'
    Name: env
  - Env:
    - Key: CYGNUS_MONGO_ENABLE_LOWERCASE
      Value: '""'
    Name: env
  - Env:
    - Key: CYGNUS_MONGO_DATA_MODEL
      Value: '""'
    Name: env
  - Env:
    - Key: CYGNUS_MONGO_ATTR_PERSISTENCE
      Value: '""'
    Name: env
  - Env:
    - Key: CYGNUS_MONGO_DB_PREFIX
      Value: '""'
    Name: env
  - Env:
    - Key: CYGNUS_MONGO_COLLECTION_PREFIX
      Value: '""'
    Name: env
  - Env:
    - Key: CYGNUS_MONGO_BATCH_SIZE
      Value: '""'
    Name: env
  - Env:
    - Key: CYGNUS_MONGO_BATCH_TIMEOUT
      Value: '""'
    Name: env
  - Env:
    - Key: CYGNUS_MONGO_BATCH_TTL
      Value: '""'
    Name: env
  - Env:
    - Key: CYGNUS_MONGO_DATA_EXPIRATION
      Value: '""'
    Name: env
  - Env:
    - Key: CYGNUS_MONGO_COLLECTIONS_SIZE
      Value: '""'
    Name: env
  - Env:
    - Key: CYGNUS_MONGO_MAX_DOCUMENTS
      Value: '""'
    Name: env
  - Env:
    - Key: CYGNUS_MONGO_IGNORE_WHITE_SPACES
      Value: '""'
    Name: env
  - Env:
    - Key: CYGNUS_STH_ENABLE_ENCODING
      Value: '""'
    Name: env
  - Env:
    - Key: CYGNUS_STH_ENABLE_GROUPING
      Value: '""'
    Name: env
  - Env:
    - Key: CYGNUS_STH_ENABLE_NAME_MAPPINGS
      Value: '""'
    Name: env
  - Env:
    - Key: CYGNUS_STH_SKIP_NAME_MAPPINGS_GENERATION
      Value: '""'
    Name: env
  - Env:
    - Key: CYGNUS_STH_ENABLE_LOWERCASE
      Value: '""'
    Name: env
  - Env:
    - Key: CYGNUS_STH_DATA_MODEL
      Value: '""'
    Name: env
  - Env:
    - Key: CYGNUS_STH_DB_PREFIX
      Value: '""'
    Name: env
  - Env:
    - Key: CYGNUS_STH_COLLECTION_PREFIX
      Value: '""'
    Name: env
  - Env:
    - Key: CYGNUS_STH_RESOLUTIONS
      Value: '""'
    Name: env
  - Env:
    - Key: CYGNUS_STH_BATCH_SIZE
      Value: '""'
    Name: env
  - Env:
    - Key: CYGNUS_STH_BATCH_TIMEOUT
      Value: '""'
    Name: env
  - Env:
    - Key: CYGNUS_STH_BATCH_TTL
      Value: '""'
    Name: env
  - Env:
    - Key: CYGNUS_STH_DATA_EXPIRATION
      Value: '""'
    Name: env
  - Env:
    - Key: CYGNUS_CKAN_HOST
      Value: '""'
    Name: env
  - Env:
    - Key: CYGNUS_CKAN_PORT
      Value: '""'
    Name: env
  - Env:
    - Key: CYGNUS_CKAN_SERVICE_PORT
      Value: '"5052"'
    Name: env
  - Env:
    - Key: CYGNUS_CKAN_API_KEY
      Value: '""'
    Name: env
  - Env:
    - Key: CYGNUS_CKAN_SSL
      Value: '""'
    Name: env
  - Env:
    - Key: CYGNUS_CKAN_SKIP_CONF_GENERATION
      Value: '""'
    Name: env
  - Env:
    - Key: CYGNUS_CKAN_ENABLE_ENCODING
      Value: '""'
    Name: env
  - Env:
    - Key: CYGNUS_CKAN_ENABLE_GROUPING
      Value: '""'
    Name: env
  - Env:
    - Key: CYGNUS_CKAN_ENABLE_NAME_MAPPINGS
      Value: '""'
    Name: env
  - Env:
    - Key: CYGNUS_CKAN_SKIP_NAME_MAPPINGS_GENERATION
      Value: '""'
    Name: env
  - Env:
    - Key: CYGNUS_CKAN_DATA_MODEL
      Value: '""'
    Name: env
  - Env:
    - Key: CYGNUS_CKAN_ATTR_PERSISTENCE
      Value: '""'
    Name: env
  - Env:
    - Key: CYGNUS_CKAN_ORION_URL
      Value: '""'
    Name: env
  - Env:
    - Key: CYGNUS_CKAN_BATCH_SIZE
      Value: '""'
    Name: env
  - Env:
    - Key: CYGNUS_CKAN_BATCH_TIMEOUT
      Value: '""'
    Name: env
  - Env:
    - Key: CYGNUS_CKAN_BATCH_TTL
      Value: '""'
    Name: env
  - Env:
    - Key: CYGNUS_CKAN_BACKEND_MAX_CONNS
      Value: '""'
    Name: env
  - Env:
    - Key: CYGNUS_CKAN_BACKEND_MAX_CONSS_PER_ROUTE
      Value: '""'
    Name: env
  - Env:
    - Key: CYGNUS_HDFS_HOST
      Value: '""'
    Name: env
  - Env:
    - Key: CYGNUS_HDFS_PORT
      Value: '""'
    Name: env
  - Env:
    - Key: CYGNUS_HDFS_SKIP_CONF_GENERATION
      Value: '""'
    Name: env
  - Env:
    - Key: CYGNUS_HDFS_SERVICE_PORT
      Value: '"5053"'
    Name: env
  - Env:
    - Key: CYGNUS_HDFS_ENABLE_ENCODING
      Value: '""'
    Name: env
  - Env:
    - Key: CYGNUS_HDFS_ENABLE_GROUPING
      Value: '""'
    Name: env
  - Env:
    - Key: CYGNUS_HDFS_ENABLE_NAME_MAPPINGS
      Value: '""'
    Name: env
  - Env:
    - Key: CYGNUS_HDFS_SKIP_NAME_MAPPINGS_GENERATION
      Value: '""'
    Name: env
  - Env:
    - Key: CYGNUS_HDFS_ENABLE_LOWERCASE
      Value: '""'
    Name: env
  - Env:
    - Key: CYGNUS_HDFS_DATA_MODEL
      Value: '""'
    Name: env
  - Env:
    - Key: CYGNUS_HDFS_FILE_FORMAT
      Value: '""'
    Name: env
  - Env:
    - Key: CYGNUS_HDFS_BACKEND_IMPL
      Value: '""'
    Name: env
  - Env:
    - Key: CYGNUS_HDFS_BACKEND_MAX_CONNS
      Value: '""'
    Name: env
  - Env:
    - Key: CYGNUS_HDFS_BACKEND_MAX_CONNS_PER_ROUTE
      Value: '""'
    Name: env
  - Env:
    - Key: CYGNUS_HDFS_PASSWORD
      Value: '""'
    Name: env
  - Env:
    - Key: CYGNUS_HDFS_SERVICE_AS_NAMESPACE
      Value: '""'
    Name: env
  - Env:
    - Key: CYGNUS_HDFS_BATCH_SIZE
      Value: '""'
    Name: env
  - Env:
    - Key: CYGNUS_HDFS_BATCH_TIMEOUT
      Value: '""'
    Name: env
  - Env:
    - Key: CYGNUS_HDFS_BATCH_TTL
      Value: '""'
    Name: env
  - Env:
    - Key: CYGNUS_HDFS_BATCH_RETRY_INTERVALS
      Value: '""'
    Name: env
  - Env:
    - Key: CYGNUS_HDFS_HIVE
      Value: '""'
    Name: env
  - Env:
    - Key: CYGNUS_HDFS_KRB5_AUTH
      Value: '""'
    Name: env
  - Env:
    - Key: CYGNUS_POSTGRESQL_HOST
      Value: '""'
    Name: env
  - Env:
    - Key: CYGNUS_POSTGRESQL_PORT
      Value: '""'
    Name: env
  - Env:
    - Key: CYGNUS_POSTGRESQL_SKIP_CONF_GENERATION
      Value: '""'
    Name: env
  - Env:
    - Key: CYGNUS_POSTGRESQL_SERVICE_PORT
      Value: '"5055"'
    Name: env
  - Env:
    - Key: CYGNUS_POSTGRESQL_ENABLE_ENCODING
      Value: '""'
    Name: env
  - Env:
    - Key: CYGNUS_POSTGRESQL_ENABLE_GROUPING
      Value: '""'
    Name: env
  - Env:
    - Key: CYGNUS_POSTGRESQL_ENABLE_NAME_MAPPINGS
      Value: '""'
    Name: env
  - Env:
    - Key: CYGNUS_POSTGRESQL_SKIP_NAME_MAPPINGS_GENERATION
      Value: '""'
    Name: env
  - Env:
    - Key: CYGNUS_POSTGRESQL_ENABLE_LOWERCASE
      Value: '""'
    Name: env
  - Env:
    - Key: CYGNUS_POSTGRESQL_ATTR_PERSISTENCE
      Value: '""'
    Name: env
  - Env:
    - Key: CYGNUS_POSTGRESQL_ATTR_NATIVE_TYPES
      Value: '""'
    Name: env
  - Env:
    - Key: CYGNUS_POSTGRESQL_BATCH_SIZE
      Value: '""'
    Name: env
  - Env:
    - Key: CYGNUS_POSTGRESQL_BATCH_TIMEOUT
      Value: '""'
    Name: env
  - Env:
    - Key: CYGNUS_POSTGRESQL_BATCH_TTL
      Value: '""'
    Name: env
  - Env:
    - Key: CYGNUS_POSTGRESQL_ENABLE_CACHE
      Value: '""'
    Name: env
  - Env:
    - Key: CYGNUS_CARTO_SERVICE_PORT
      Value: '"5054"'
    Name: env
  - Env:
    - Key: CYGNUS_ORION_SKIP_CONF_GENERATION
      Value: '""'
    Name: env
  - Env:
    - Key: CYGNUS_ORION_SERVICE_PORT
      Value: '"5050"'
    Name: env
  - Env:
    - Key: CYGNUS_ORION_ENABLE_ENCODING
      Value: '""'
    Name: env
  - Env:
    - Key: CYGNUS_ORION_ENABLE_GROUPING
      Value: '""'
    Name: env
  - Env:
    - Key: CYGNUS_ORION_ENABLE_NAME_MAPPINGS
      Value: '""'
    Name: env
  - Env:
    - Key: CYGNUS_ORION_SKIP_NAME_MAPPINGS_GENERATION
      Value: '""'
    Name: env
  - Env:
    - Key: CYGNUS_ORION_ENABLE_LOWERCASE
      Value: '""'
    Name: env
  - Env:
    - Key: CYGNUS_ORION_HOST
      Value: '""'
    Name: env
  - Env:
    - Key: CYGNUS_ORION_PORT
      Value: '""'
    Name: env
  - Env:
    - Key: CYGNUS_ORION_SSL
      Value: '""'
    Name: env
  - Env:
    - Key: CYGNUS_ORION_USER
      Value: '""'
    Name: env
  - Env:
    - Key: CYGNUS_ORION_PASS
      Value: '""'
    Name: env
  - Env:
    - Key: CYGNUS_ORION_KEYSTONE_HOST
      Value: '""'
    Name: env
  - Env:
    - Key: CYGNUS_ORION_KEYSTONE_PORT
      Value: '""'
    Name: env
  - Env:
    - Key: CYGNUS_ORION_KEYSTONE_SSL
      Value: '""'
    Name: env
  - Env:
    - Key: CYGNUS_ORION_FIWARE
      Value: '""'
    Name: env
  - Env:
    - Key: CYGNUS_ORION_FIWARE_PATH
      Value: '""'
    Name: env
  - Env:
    - Key: CYGNUS_ORION_BATCH_SIZE
      Value: '""'
    Name: env
  - Env:
    - Key: CYGNUS_ORION_BATCH_TIMEOUT
      Value: '""'
    Name: env
  - Env:
    - Key: CYGNUS_ORION_BATCH_TTL
      Value: '""'
    Name: env
  - Env:
    - Key: CYGNUS_ORION_BATCH_RETRY_INTERVALS
      Value: '""'
    Name: env
  - Env:
    - Key: CYGNUS_ORION_ENABLE_CACHE
      Value: '""'
    Name: env
  - Env:
    - Key: CYGNUS_POSTGIS_HOST
      Value: '""'
    Name: env
  - Env:
    - Key: CYGNUS_POSTGIS_PORT
      Value: '""'
    Name: env
  - Env:
    - Key: CYGNUS_POSTGIS_SKIP_CONF_GENERATION
      Value: '""'
    Name: env
  - Env:
    - Key: CYGNUS_POSTGIS_SERVICE_PORT
      Value: '"5057"'
    Name: env
  - Env:
    - Key: CYGNUS_POSTGIS_ENABLE_ENCODING
      Value: '""'
    Name: env
  - Env:
    - Key: CYGNUS_POSTGIS_ENABLE_GROUPING
      Value: '""'
    Name: env
  - Env:
    - Key: CYGNUS_POSTGIS_ENABLE_NAME_MAPPINGS
      Value: '""'
    Name: env
  - Env:
    - Key: CYGNUS_POSTGIS_SKIP_NAME_MAPPINGS_GENERATION
      Value: '""'
    Name: env
  - Env:
    - Key: CYGNUS_POSTGIS_ENABLE_LOWERCASE
      Value: '""'
    Name: env
  - Env:
    - Key: CYGNUS_POSTGIS_ATTR_PERSISTENCE
      Value: '""'
    Name: env
  - Env:
    - Key: CYGNUS_POSTGIS_ATTR_NATIVE_TYPES
      Value: '""'
    Name: env
  - Env:
    - Key: CYGNUS_POSTGIS_BATCH_SIZE
      Value: '""'
    Name: env
  - Env:
    - Key: CYGNUS_POSTGIS_BATCH_TIMEOUT
      Value: '""'
    Name: env
  - Env:
    - Key: CYGNUS_POSTGIS_BATCH_TTL
      Value: '""'
    Name: env
  - Env:
    - Key: CYGNUS_POSTGIS_ENABLE_CACHE
      Value: '""'
    Name: env
  - Env:
    - Key: CYGNUS_ELASTICSEARCH_HOST
      Value: '""'
    Name: env
  - Env:
    - Key: CYGNUS_ELASTICSEARCH_PORT
      Value: '""'
    Name: env
  - Env:
    - Key: CYGNUS_ELASTICSEARCH_SERVICE_PORT
      Value: '"5058"'
    Name: env
  - Env:
    - Key: CYGNUS_ELASTICSEARCH_SSL
      Value: '""'
    Name: env
  - Env:
    - Key: CYGNUS_ELASTICSEARCH_SKIP_CONF_GENERATION
      Value: '""'
    Name: env
  - Env:
    - Key: CYGNUS_ELASTICSEARCH_INDEX_PREFIX
      Value: '""'
    Name: env
  - Env:
    - Key: CYGNUS_ELASTICSEARCH_MAPPING_TYPE
      Value: '""'
    Name: env
  - Env:
    - Key: CYGNUS_ELASTICSEARCH_BACKEND_MAX_CONNS
      Value: '""'
    Name: env
  - Env:
    - Key: CYGNUS_ELASTICSEARCH_BACKEND_MAX_CONSS_PER_ROUTE
      Value: '""'
    Name: env
  - Env:
    - Key: CYGNUS_ELASTICSEARCH_IGNORE_WHITE_SPACES
      Value: '""'
    Name: env
  - Env:
    - Key: CYGNUS_ELASTICSEARCH_ATTR_PERSISTENCE
      Value: '""'
    Name: env
  - Env:
    - Key: CYGNUS_ELASTICSEARCH_TIMEZONE
      Value: '""'
    Name: env
  - Env:
    - Key: CYGNUS_ELASTICSEARCH_CAST_VALUE
      Value: '""'
    Name: env
  - Env:
    - Key: CYGNUS_ELASTICSEARCH_CACHE_FLASH_INTERVAL_SEC
      Value: '""'
    Name: env
  - Env:
    - Key: CYGNUS_ARCGIS_URL
      Value: '""'
    Name: env
  - Env:
    - Key: CYGNUS_ARCGIS_USER
      Value: '""'
    Name: env
  - Env:
    - Key: CYGNUS_ARCGIS_SERVICE_PORT
      Value: '"5059"'
    Name: env
  - Env:
    - Key: CYGNUS_ARCGIS_PASS
      Value: '""'
    Name: env
  - Env:
    - Key: CYGNUS_ELASTICSEARCH_SKIP_CONF_GENERATION
      Value: '""'
    Name: env
  - Env:
    - Key: CYGNUS_ARCGIS_ENABLE_ENCODING
      Value: '""'
    Name: env
  - Env:
    - Key: CYGNUS_ARCGIS_ENABLE_GROUPING
      Value: '""'
    Name: env
  - Env:
    - Key: CYGNUS_ARCGIS_ENABLE_NAME_MAPPINGS
      Value: '""'
    Name: env
  - Env:
    - Key: CYGNUS_ARCGIS_DATA_MODEL
      Value: '""'
    Name: env
  - Env:
    - Key: CYGNUS_ARCGIS_BATCH_SIZE
      Value: '""'
    Name: env
  - Env:
    - Key: CYGNUS_ARCGIS_BATCH_TIMEOUT
      Value: '""'
    Name: env
  - Env:
    - Key: CYGNUS_ARCGIS_BATCH_TTL
      Value: '""'
    Name: env
  - Env:
    - Key: GIT_URL_CYGNUS
      Value: '"https://github.com/telefonicaid/fiware-cygnus.git"'
    Name: env
  - Env:
    - Key: GIT_REV_CYGNUS
      Value: '"master"'
    Name: env
  - Env:
    - Key: MVN_VER
      Value: '"3.5.4"'
    Name: env
  - Env:
    - Key: MVN_HOME
      Value: '"/opt/apache-maven"'
    Name: env
  - Env:
    - Key: FLUME_VER
      Value: '"1.9.0"'
    Name: env
  - Env:
    - Key: FLUME_HOME
      Value: '"/opt/apache-flume"'
    Name: env
  - Env:
    - Key: JAVA_VERSION
      Value: '"1.8.0"'
    Name: env
  - CmdLine:
    - 'adduser ${CYGNUS_USER} &&     yum -y install nc java-${JAVA_VERSION}-openjdk-devel
      git &&     export JAVA_HOME=/usr/lib/jvm/java-${JAVA_VERSION}-openjdk &&     export
      MAVEN_OPTS="-Xmx2048M -Xss128M -XX:MetaspaceSize=512M -XX:MaxMetaspaceSize=2048M
      -Dfile.encoding=UTF-8 -Dproject.build.sourceEncoding=UTF-8 -Dmaven.compiler.useIncrementalCompilation=false
      -DdependencyLocationsEnabled=false -XX:+TieredCompilation -XX:TieredStopAtLevel=1
      -XX:+CMSClassUnloadingEnabled" &&     export MAVEN_ARGS="-B -T8" &&     echo
      "INFO: Getting apache preferred site and obtain URLs for Maven and Flume..."
      &&     APACHE_DOMAIN="$(curl -s ''https://www.apache.org/dyn/closer.cgi?as_json=1''
      | python -c ''import json,sys;obj=json.load(sys.stdin);print obj["preferred"]'')"       ||
      APACHE_DOMAIN="http://archive.apache.org/dist/" &&     MVN_URL="${APACHE_DOMAIN}maven/maven-3/${MVN_VER}/binaries/apache-maven-${MVN_VER}-bin.tar.gz"
      &&     FLUME_URL="${APACHE_DOMAIN}flume/${FLUME_VER}/apache-flume-${FLUME_VER}-bin.tar.gz"
      &&     echo -e $''INFO: Java version <''${JAVA_VERSION}''>\n''$(java -version)''\nINFO:
      Apache domain <''${APACHE_DOMAIN}''>\nINFO: URL MAVEN <''${MVN_URL}''>\nINFO:
      URL FLUME <''${FLUME_URL}''>'' &&     echo "INFO: Download and install Maven
      and Flume..." &&     curl --remote-name --location --insecure --silent --show-error
      "${MVN_URL}" &&     tar xzf apache-maven-${MVN_VER}-bin.tar.gz &&     mv apache-maven-${MVN_VER}
      ${MVN_HOME} &&     curl --remote-name --location --insecure --silent --show-error
      "${FLUME_URL}" &&     tar zxf apache-flume-${FLUME_VER}-bin.tar.gz &&     mv
      apache-flume-${FLUME_VER}-bin ${FLUME_HOME} &&     mkdir -p ${FLUME_HOME}/plugins.d/cygnus
      &&     mkdir -p ${FLUME_HOME}/plugins.d/cygnus/lib &&     mkdir -p ${FLUME_HOME}/plugins.d/cygnus/libext
      &&     chown -R cygnus:cygnus ${FLUME_HOME} &&     echo "INFO: Cloning Cygnus
      using <${GIT_URL_CYGNUS}> and <${GIT_REV_CYGNUS}>" &&     git clone ${GIT_URL_CYGNUS}
      ${CYGNUS_HOME} &&     cd ${CYGNUS_HOME} &&     git checkout ${GIT_REV_CYGNUS}
      &&     echo "INFO: Build and install cygnus-common" &&     cd ${CYGNUS_HOME}/cygnus-common
      &&     ${MVN_HOME}/bin/mvn ${MAVEN_ARGS} clean compile exec:exec assembly:single
      &&     cp target/cygnus-common-${CYGNUS_VERSION}-jar-with-dependencies.jar ${FLUME_HOME}/plugins.d/cygnus/libext/
      &&     ${MVN_HOME}/bin/mvn install:install-file -Dfile=${FLUME_HOME}/plugins.d/cygnus/libext/cygnus-common-${CYGNUS_VERSION}-jar-with-dependencies.jar
      -DgroupId=com.telefonica.iot -DartifactId=cygnus-common -Dversion=${CYGNUS_VERSION}
      -Dpackaging=jar -DgeneratePom=false &&     echo "INFO: Build and install cygnus-ngsi"
      &&     cd ${CYGNUS_HOME}/cygnus-ngsi &&     ${MVN_HOME}/bin/mvn ${MAVEN_ARGS}
      clean compile exec:exec assembly:single &&     cp target/cygnus-ngsi-${CYGNUS_VERSION}-jar-with-dependencies.jar
      ${FLUME_HOME}/plugins.d/cygnus/lib/ &&     cp ${CYGNUS_HOME}/cygnus-ngsi/src/main/resources/ArcgisUtils-0.0.1-SNAPSHOT.jar
      ${FLUME_HOME}/plugins.d/cygnus/lib/ &&     echo "INFO: Install Cygnus Application
      script" &&     cp ${CYGNUS_HOME}/cygnus-common/target/classes/cygnus-flume-ng
      ${FLUME_HOME}/bin/ &&     chmod +x ${FLUME_HOME}/bin/cygnus-flume-ng &&     echo
      "INFO: Instantiate some configuration files" &&     cp ${CYGNUS_HOME}/cygnus-common/conf/log4j.properties.template
      ${FLUME_HOME}/conf/log4j.properties &&     cp ${CYGNUS_HOME}/cygnus-ngsi/conf/grouping_rules.conf.template
      ${FLUME_HOME}/conf/grouping_rules.conf &&     cp ${CYGNUS_HOME}/cygnus-ngsi/conf/name_mappings.conf.template
      ${FLUME_HOME}/conf/name_mappings.conf &&     echo "INFO: Create Cygnus log folder"
      &&     mkdir -p /var/log/cygnus &&     echo "INFO: Cleanup to thin the final
      image... doing optimizations..." &&     cd ${CYGNUS_HOME}/cygnus-common &&     ${MVN_HOME}/bin/mvn
      ${MAVEN_ARGS} clean &&     cd ${CYGNUS_HOME}/cygnus-ngsi &&     ${MVN_HOME}/bin/mvn
      ${MAVEN_ARGS} clean &&     rm -rf /root/.m2 && rm -rf ${MVN_HOME} && rm -rf
      ${FLUME_HOME}/docs && rm -rf ${CYGNUS_HOME}/doc && rm -f /*.tar.gz &&     echo
      "INFO: Java runtime not needs JAVA_HOME... Unsetting..." &&     unset JAVA_HOME
      &&     yum erase -y git java-${JAVA_VERSION}-openjdk-devel &&     rpm -qa redhat-logos
      gtk2 pulseaudio-libs libvorbis jpackage* groff alsa* atk cairo libX* | xargs
      -r rpm -e --nodeps &&     yum clean all && rpm --rebuilddb && rm -rf /var/lib/yum/yumdb
      && rm -rf /var/lib/yum/history &&     find /usr/share/locale -mindepth 1 -maxdepth
      1 ! -name ''en_US'' ! -name ''locale.alias'' | xargs -r rm -r && rm -f /var/log/*log
      &&     bash -c ''localedef --list-archive | grep -v -e "en_US" | xargs localedef
      --delete-from-archive'' &&     /bin/cp -f /usr/lib/locale/locale-archive /usr/lib/locale/locale-archive.tmpl
      &&     build-locale-archive && find ${CYGNUS_HOME} -name ''.[^.]*'' 2>/dev/null
      | xargs -r rm -rf && echo "INFO: END build"'
    Name: run
    PrependShell: true
  - Chown: ""
    From: ""
    Name: copy
    SourcesAndDest:
    - cygnus-entrypoint.sh
    - /
  - Chown: ""
    From: ""
    Name: copy
    SourcesAndDest:
    - agent.conf
    - ${FLUME_HOME}/conf/
  - Chown: ""
    From: ""
    Name: copy
    SourcesAndDest:
    - agent.conf
    - ${CYGNUS_HOME}/docker/cygnus-ngsi/agent.conf
  - Chown: ""
    From: ""
    Name: copy
    SourcesAndDest:
    - cartodb_keys.conf
    - ${FLUME_HOME}/conf/
  - CmdLine:
    - /cygnus-entrypoint.sh
    Name: entrypoint
    PrependShell: false
  - Name: expose
    Ports:
    - ${CYGNUS_API_PORT}
    - ${CYGNUS_SERVICE_PORT}
  From:
    Image: centos:centos7.6.1810
  Name: ""
  Platform: ""
  SourceCode: FROM centos:centos7.6.1810
