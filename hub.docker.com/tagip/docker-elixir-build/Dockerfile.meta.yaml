MetaArgs: null
Stages:
- BaseName: docker:rc-git
  Commands:
  - Key: ERLANG_VERSION
    Name: arg
    Value: "20.0"
  - Key: DISABLED_APPS
    Name: arg
    Value: '''megaco wx debugger jinterface orber reltool observer gs et'''
  - Key: ERLANG_DOWNLOAD_URL
    Name: arg
    Value: '"https://github.com/erlang/otp/archive/OTP-${ERLANG_VERSION}.tar.gz"'
  - CmdLine:
    - set -xe     && apk --update --no-cache add build-base openssl ca-certificates
      ncurses-libs ncurses     && rm -rf       /var/cache/apk/*       /tmp/*
    Name: run
    PrependShell: true
  - CmdLine:
    - set -xe     && apk --update add --virtual build-dependencies curl ca-certificates
      autoconf perl ncurses-dev openssl-dev unixodbc-dev tar unixodbc     && curl
      -fSL -o otp-src.tar.gz "$ERLANG_DOWNLOAD_URL"     && mkdir -p /usr/src/otp-src     &&
      tar -xzf otp-src.tar.gz -C /usr/src/otp-src --strip-components=1     && rm otp-src.tar.gz     &&
      cd /usr/src/otp-src     && for lib in ${DISABLED_APPS} ; do touch lib/${lib}/SKIP
      ; done     && ./otp_build autoconf     && ./configure         --enable-smp-support         --enable-m64-build         --disable-native-libs         --enable-sctp         --enable-threads         --enable-kernel-poll         --disable-hipe     &&
      make -j$(getconf _NPROCESSORS_ONLN)     && make install     && find /usr/local
      -name examples | xargs rm -rf     && apk del build-dependencies     && ls -d
      /usr/local/lib/erlang/lib/*/src | xargs rm -rf     && rm -rf       /opt       /var/cache/apk/*       /tmp/*       /usr/src
    Name: run
    PrependShell: true
  - Key: ELIXIR_VERSION
    Name: arg
    Value: 1.5.0
  - CmdLine:
    - set -xe     && apk --update add --virtual build-dependencies wget ncurses-libs
      ca-certificates     && wget --no-check-certificate https://github.com/elixir-lang/elixir/releases/download/v${ELIXIR_VERSION}/Precompiled.zip     &&
      mkdir -p /opt/elixir-${ELIXIR_VERSION}/     && unzip Precompiled.zip -d /opt/elixir-${ELIXIR_VERSION}/     &&
      rm Precompiled.zip     && apk del build-dependencies     && rm -rf /etc/ssl     &&
      rm -rf       /var/cache/apk/*       /tmp/*
    Name: run
    PrependShell: true
  - Env:
    - Key: PATH
      Value: $PATH:/opt/elixir-${ELIXIR_VERSION}/bin
    Name: env
  - CmdLine:
    - mix local.hex --force     && mix local.rebar --force
    Name: run
    PrependShell: true
  - CmdLine:
    - git config --system http.sslverify false &&   git clone https://github.com/tagip/hex.git
      &&   cd hex &&   mix deps.get &&   mix install
    Name: run
    PrependShell: true
  - CmdLine:
    - /bin/sh
    Name: cmd
    PrependShell: false
  From:
    Image: docker:rc-git
  Name: ""
  Platform: ""
  SourceCode: FROM docker:rc-git
