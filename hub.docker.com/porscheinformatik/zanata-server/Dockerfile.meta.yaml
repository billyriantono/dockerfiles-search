MetaArgs: null
Stages:
- BaseName: jboss/wildfly:10.1.0.Final
  Commands:
  - Maintainer: '"Ding-Yi Chen" <dchen@redhat.com>'
    Name: maintainer
  - Name: expose
    Ports:
    - "8080"
  - Key: ZANATA_VERSION
    Name: arg
    Value: 4.4.5
  - Key: MYSQL_CONNECTOR_JAVA_VERSION
    Name: arg
    Value: 5.1.26
  - Env:
    - Key: DB_HOSTNAME
      Value: zanatadb
    Name: env
  - Env:
    - Key: DB_PORTNUMBER
      Value: "3306"
    Name: env
  - Env:
    - Key: MAIL_HOST
      Value: localhost
    - Key: MAIL_USERNAME
      Value: ''' '''
    - Key: MAIL_PASSWORD
      Value: ''' '''
    Name: env
  - Labels:
    - Key: Name
      Value: '"zanata-platform"'
    - Key: Version
      Value: $ZANATA_VERSION
    - Key: Release
      Value: '"2"'
    Name: label
  - Name: user
    User: root
  - Env:
    - Key: ZANATA_HOME
      Value: /var/lib/zanata
    Name: env
  - CmdLine:
    - mkdir -p $ZANATA_HOME && chown -R jboss.jboss $ZANATA_HOME
    Name: run
    PrependShell: true
  - Name: volume
    Volumes:
    - $ZANATA_HOME
  - CmdLine:
    - chgrp -R 0 $ZANATA_HOME /opt/jboss/wildfly
    Name: run
    PrependShell: true
  - CmdLine:
    - chmod -R g+rw $ZANATA_HOME /opt/jboss/wildfly
    Name: run
    PrependShell: true
  - CmdLine:
    - find $ZANATA_HOME -type d -exec chmod g+x {} +
    Name: run
    PrependShell: true
  - CmdLine:
    - find /opt/jboss/wildfly -type d -exec chmod g+x {} +
    Name: run
    PrependShell: true
  - Name: user
    User: jboss
  - CmdLine:
    - curl -L -o /opt/jboss/wildfly/standalone/deployments/mysql-connector-java.jar
      https://repo1.maven.org/maven2/mysql/mysql-connector-java/${MYSQL_CONNECTOR_JAVA_VERSION}/mysql-connector-java-${MYSQL_CONNECTOR_JAVA_VERSION}.jar
    Name: run
    PrependShell: true
  - CmdLine:
    - curl -L -o /opt/jboss/wildfly/standalone/deployments/zanata.war     https://github.com/zanata/zanata-platform/releases/download/platform-${ZANATA_VERSION}/zanata-war-${ZANATA_VERSION}.war     &&
      chmod o+rw /opt/jboss/wildfly/standalone/deployments/zanata.war
    Name: run
    PrependShell: true
  - Chown: ""
    Name: add
    SourcesAndDest:
    - conf/standalone.xml
    - /opt/jboss/wildfly/standalone/configuration/
  From:
    Image: jboss/wildfly:10.1.0.Final
  Name: ""
  Platform: ""
  SourceCode: FROM jboss/wildfly:10.1.0.Final
