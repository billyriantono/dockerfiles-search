MetaArgs: null
Stages:
- BaseName: alpine:3.10
  Commands:
  - Labels:
    - Key: maintener
      Value: '"clazar <claudiolazarosantos@gmail.com>"'
    Name: label
  - Labels:
    - Key: version
      Value: '"0.1"'
    Name: label
  - Labels:
    - Key: description
      Value: '"Openconnect for gp in docker - Corporate"'
    Name: label
  - Key: V_SITE
    Name: arg
    Value: null
  - Env:
    - Key: VPNSITE
      Value: $V_SITE
    Name: env
  - CmdLine:
    - addgroup --gid 1000 admin &&     adduser     --disabled-password     --gecos
      ""     --shell /bin/bash     --home /home/admin     --ingroup admin     --uid
      1000     admin
    Name: run
    PrependShell: true
  - CmdLine:
    - 'set -ex     && echo ''@testing http://dl-cdn.alpinelinux.org/alpine/edge/testing''
      >> /etc/apk/repositories     && echo "@edge http://nl.alpinelinux.org/alpine/edge/main"
      >> /etc/apk/repositories     && echo "@edgecommunity http://nl.alpinelinux.org/alpine/edge/community"
      >>/etc/apk/repositories     && echo "@testing http://nl.alpinelinux.org/alpine/edge/testing"
      >>/etc/apk/repositories     && echo ''hosts: files dns'' >> /etc/nsswitch.conf     &&
      apk --update  upgrade     && apk add --no-cache                gnutls gnutls-utils
      iptables libev libintl                libnl3 libseccomp linux-pam lz4-libs openssl                libxml2
      openssh-client libproxy libtool krb5     && apk add --no-cache                unzip
      curl file g++ gnutls-dev gpgme gzip libev-dev build-base                libnl3-dev
      libseccomp-dev libxml2-dev linux-headers                linux-pam-dev lz4-dev
      make readline-dev tar                sed readline procps gettext autoconf automake
      libproxy-dev krb5-dev                git sudo musl-dev gcc libxslt-dev pidgin
      pidgin-sipe ghostscript-fonts py2-lxml py2-requests py2-pip sshpass               chromium     &&
      mkdir -p /usr/local/sbin/     && curl -o /usr/local/sbin/vpnc-script http://git.infradead.org/users/dwmw2/vpnc-scripts.git/blob_plain/HEAD:/vpnc-script     &&
      chmod +x /usr/local/sbin/vpnc-script      && pip install pyotp     && git clone
      https://github.com/dlenski/openconnect.git /tmp/openconnect-globalprotect     &&
      cd /tmp/openconnect-globalprotect     && ./autogen.sh     && ./configure --with-vpnc-script=/usr/local/sbin/vpnc-script     &&
      make     && make install     && rm -rf /var/cache/apk/* /tmp/* RUN export uid=1000
      gid=1000 &&     echo "admin:x:${uid}:${gid}:Admin,,,:/home/admin:/bin/bash"
      >> /etc/passwd &&     echo "admin:x:${uid}:" >> /etc/group &&     sed -e "s/^wheel:\(.*\)/wheel:\1,admin/g"
      -i /etc/group &&     sed -e ''s/# %wheel ALL=(ALL) NOPASSWD: ALL/%wheel ALL=(ALL)
      NOPASSWD: ALL/g'' -i /etc/sudoers'
    Name: run
    PrependShell: true
  - Name: user
    User: admin
  - Name: expose
    Ports:
    - "9090"
  - Name: expose
    Ports:
    - "80"
  - Chown: ""
    From: ""
    Name: copy
    SourcesAndDest:
    - content
    - /
  - CmdLine:
    - /entrypoint.sh
    Name: entrypoint
    PrependShell: false
  - CmdLine:
    - -c
    Name: cmd
    PrependShell: false
  From:
    Image: alpine:3.10
  Name: ""
  Platform: ""
  SourceCode: FROM alpine:3.10
