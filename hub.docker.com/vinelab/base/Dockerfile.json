{
  "MetaArgs": null,
  "Stages": [
    {
      "Name": "",
      "BaseName": "centos:centos6",
      "SourceCode": "FROM centos:centos6",
      "Platform": "",
      "From": {
        "Image": "centos:centos6"
      },
      "Commands": [
        {
          "Maintainer": "Abed Halawi \u003cabed.halawi@vinelab.com\u003e",
          "Name": "maintainer"
        },
        {
          "CmdLine": [
            "yum -y update"
          ],
          "Name": "run",
          "PrependShell": true
        },
        {
          "CmdLine": [
            "yum install -y rsyslog vixie-cron vim wget tar"
          ],
          "Name": "run",
          "PrependShell": true
        },
        {
          "CmdLine": [
            "echo 'export PS1=\"[\\u@docker] \\W # \"' \u003e\u003e /root/.bash_profile"
          ],
          "Name": "run",
          "PrependShell": true
        },
        {
          "CmdLine": [
            "yum -y install http://download.fedoraproject.org/pub/epel/6/i386/epel-release-6-8.noarch.rpm"
          ],
          "Name": "run",
          "PrependShell": true
        },
        {
          "CmdLine": [
            "yum -y install python-setuptools"
          ],
          "Name": "run",
          "PrependShell": true
        },
        {
          "CmdLine": [
            "easy_install supervisor"
          ],
          "Name": "run",
          "PrependShell": true
        },
        {
          "CmdLine": [
            "/usr/bin/echo_supervisord_conf \u003e /etc/supervisord.conf"
          ],
          "Name": "run",
          "PrependShell": true
        },
        {
          "CmdLine": [
            "mkdir -p /var/log/supervisord"
          ],
          "Name": "run",
          "PrependShell": true
        },
        {
          "CmdLine": [
            "sed -i -e \"s/^nodaemon=false/nodaemon=true/\" /etc/supervisord.conf"
          ],
          "Name": "run",
          "PrependShell": true
        },
        {
          "CmdLine": [
            "sed -i -e \"s/^;\\[inet_http_server\\]/\\[inet_http_server\\]/\" /etc/supervisord.conf"
          ],
          "Name": "run",
          "PrependShell": true
        },
        {
          "CmdLine": [
            "sed -i -e \"s/^;port=127.0.0.1:9001/port=0.0.0.0:9001/\" /etc/supervisord.conf"
          ],
          "Name": "run",
          "PrependShell": true
        },
        {
          "CmdLine": [
            "sed -i -e \"s/^;username=user/username=vinelab/\" /etc/supervisord.conf"
          ],
          "Name": "run",
          "PrependShell": true
        },
        {
          "CmdLine": [
            "sed -i -e \"s/^;password=123/password=vinelab/\" /etc/supervisord.conf"
          ],
          "Name": "run",
          "PrependShell": true
        },
        {
          "CmdLine": [
            "mkdir /etc/supervisord.d"
          ],
          "Name": "run",
          "PrependShell": true
        },
        {
          "CmdLine": [
            "echo [include] \u003e\u003e /etc/supervisord.conf"
          ],
          "Name": "run",
          "PrependShell": true
        },
        {
          "CmdLine": [
            "echo 'files = /etc/supervisord.d/*.ini' \u003e\u003e /etc/supervisord.conf"
          ],
          "Name": "run",
          "PrependShell": true
        },
        {
          "Chown": "",
          "Name": "add",
          "SourcesAndDest": [
            "ini/rsyslog.ini",
            "/etc/supervisord.d/rsyslog.ini"
          ]
        },
        {
          "Chown": "",
          "Name": "add",
          "SourcesAndDest": [
            "ini/cron.ini",
            "/etc/supervisord.d/cron.ini"
          ]
        },
        {
          "CmdLine": [
            "yum clean all"
          ],
          "Name": "run",
          "PrependShell": true
        },
        {
          "CmdLine": [
            "echo 'LANG=C' \u003e /etc/sysconfig/i18n"
          ],
          "Name": "run",
          "PrependShell": true
        },
        {
          "Chown": "",
          "Name": "add",
          "SourcesAndDest": [
            "run",
            "/"
          ]
        },
        {
          "CmdLine": [
            "chmod +x /run"
          ],
          "Name": "run",
          "PrependShell": true
        },
        {
          "Name": "expose",
          "Ports": [
            "9001"
          ]
        },
        {
          "CmdLine": [
            "/run"
          ],
          "Name": "cmd",
          "PrependShell": true
        }
      ]
    }
  ]
}