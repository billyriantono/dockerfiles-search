MetaArgs: null
Stages:
- BaseName: alpine:latest
  Commands:
  - Labels:
    - Key: maintainer
      Value: '"Mr. Hsu <junxy@users.noreply.github.com>"'
    Name: label
  - CmdLine:
    - apk add --no-cache tzdata ca-certificates     && cp /usr/share/zoneinfo/Asia/Taipei
      /etc/localtime     && echo "Asia/Taipei" > /etc/timezone     && apk del tzdata
    Name: run
    PrependShell: true
  - Key: V2RAYVERSION
    Name: arg
    Value: 4.22.1
  - Key: VCS_REF
    Name: arg
    Value: ${VCS_REF}
  - Key: VCS_REF2
    Name: arg
    Value: ${VCS_REF2}
  - Key: VCS_REF3
    Name: arg
    Value: ${VCS_REF3}
  - Labels:
    - Key: org.label-schema.vcs-ref
      Value: $VCS_REF
    - Key: org.label-schema.vcs-url
      Value: '"https://github.com/junxy/docker-ray"'
    Name: label
  - CmdLine:
    - set -ex     && wget https://github.com/v2ray/v2ray-core/releases/download/v$V2RAYVERSION/v2ray-linux-64.zip
      -O /tmp/v2ray.zip     && mkdir /tmp/v2ray     && unzip /tmp/v2ray.zip -d /tmp/v2ray     &&
      mkdir /usr/bin/v2ray     && mkdir /etc/v2ray     && mkdir /var/log/v2ray/     &&
      cp /tmp/v2ray/v2ray /usr/bin/v2ray/     && cp /tmp/v2ray/v2ctl /usr/bin/v2ray/     &&
      cp /tmp/v2ray/geoip.dat /usr/bin/v2ray/     && cp /tmp/v2ray/geosite.dat /usr/bin/v2ray/     &&
      cp /tmp/v2ray/config.json /etc/v2ray/config.json     && chmod +x /usr/bin/v2ray/v2ctl     &&
      chmod +x /usr/bin/v2ray/v2ray     && rm -rf /tmp/**
    Name: run
    PrependShell: true
  - Env:
    - Key: PATH
      Value: /usr/bin/v2ray:$PATH
    Name: env
  - CmdLine:
    - v2ray -version
    Name: run
    PrependShell: true
  - CmdLine:
    - v2ray
    - -config=/etc/v2ray/config.json
    Name: cmd
    PrependShell: false
  From:
    Image: alpine:latest
  Name: ""
  Platform: ""
  SourceCode: FROM alpine:latest
