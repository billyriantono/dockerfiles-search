MetaArgs: null
Stages:
- As: builder
  BaseName: golang:stretch
  Commands:
  - Name: workdir
    Path: $GOPATH/src
  - CmdLine:
    - git clone -b yagpdb https://github.com/jonas747/discordgo github.com/jonas747/discordgo   &&
      git clone -b dgofork https://github.com/jonas747/dutil github.com/jonas747/dutil   &&
      git clone -b dgofork https://github.com/jonas747/dshardmanager github.com/jonas747/dshardmanager   &&
      git clone -b dgofork https://github.com/jonas747/dcmd github.com/jonas747/dcmd
    Name: run
    PrependShell: true
  - CmdLine:
    - go get -d -v   github.com/jonas747/yagpdb/cmd/yagpdb
    Name: run
    PrependShell: true
  - CmdLine:
    - CGO_ENABLED=0 GOOS=linux go install -v   github.com/jonas747/yagpdb/cmd/yagpdb
    Name: run
    PrependShell: true
  From:
    Image: golang:stretch
  Name: builder
  Platform: ""
  SourceCode: FROM golang:stretch as builder
- BaseName: alpine:latest
  Commands:
  - CmdLine:
    - /app/yagpdb
    Name: entrypoint
    PrependShell: false
  - CmdLine:
    - -all
    - -pa
    - -exthttps=false
    - -https=true
    Name: cmd
    PrependShell: false
  - Name: workdir
    Path: /app
  - Name: volume
    Volumes:
    - /app/soundboard
    - /app/cert
  - Name: expose
    Ports:
    - "443"
    - "80"
  - CmdLine:
    - apk --no-cache add ca-certificates ffmpeg tzdata
    Name: run
    PrependShell: true
  - Chown: ""
    From: builder
    Name: copy
    SourcesAndDest:
    - /go/src/github.com/jonas747/yagpdb/*/assets/*.html
    - templates/plugins/
  - Chown: ""
    From: builder
    Name: copy
    SourcesAndDest:
    - /go/src/github.com/jonas747/yagpdb/cmd/yagpdb/templates
    - templates/
  - Chown: ""
    From: builder
    Name: copy
    SourcesAndDest:
    - /go/src/github.com/jonas747/yagpdb/cmd/yagpdb/posts
    - posts/
  - Chown: ""
    From: builder
    Name: copy
    SourcesAndDest:
    - /go/src/github.com/jonas747/yagpdb/cmd/yagpdb/static
    - static/
  - Chown: ""
    From: builder
    Name: copy
    SourcesAndDest:
    - /go/bin/yagpdb
    - .
  From:
    Image: alpine:latest
  Name: ""
  Platform: ""
  SourceCode: FROM alpine:latest
