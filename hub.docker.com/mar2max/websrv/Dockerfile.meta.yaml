MetaArgs: null
Stages:
- BaseName: ubuntu:precise
  Commands:
  - Maintainer: A-Marwan <amamou.marwan@gmail.com>
    Name: maintainer
  - Env:
    - Key: DEBIAN_FRONTEND
      Value: noninteractive
    Name: env
  - CmdLine:
    - apt-get update -y &&     apt-get upgrade -y &&     apt-get install -y git bzip2
      wget make php-pear php5-dev php5-xdebug imagemagick php5-tidy libsqlite3-0 libsqlite3-dev
      php5-sqlite php5-intl php5-curl gvfs-bin shared-mime-info xpdf poppler-utils
      ghostscript subversion lpr libart-2.0-2 zlib1g-dev libfreetype6-dev libjpeg62-dev
      libgif4 g++ apache2 mysql-client php5-mysql libapache2-mod-php5 php5-gd php5-ldap
      php5-odbc git-core php5-intl php5-imagick libimage-exiftool-perl libgtk2.0-dev
      xvfb libc6-i386 libglib2.0-0:i386 ia32-libs sudo
    Name: run
    PrependShell: true
  - CmdLine:
    - pear install pear/OLE-1.0.0RC2 &&     pear install Spreadsheet_Excel_Writer-0.9.3
    Name: run
    PrependShell: true
  - Name: workdir
    Path: /tmp/builds
  - CmdLine:
    - wget https://wkhtmltopdf.googlecode.com/files/wkhtmltoimage-0.11.0_rc1-static-amd64.tar.bz2
      &&     tar -xf wkhtmltoimage-0.11.0_rc1-static-amd64.tar.bz2 &&     cp wkhtmltoimage-amd64
      /usr/bin/wkhtmltoimage
    Name: run
    PrependShell: true
  - Chown: ""
    Name: add
    SourcesAndDest:
    - swftools-0.9.1.tar.gz
    - ttf2pt1-3.4.4.tgz
    - /tmp/builds/
  - Name: workdir
    Path: /tmp/builds/swftools-0.9.1
  - CmdLine:
    - ./configure &&     make &&     make install &&     cd ..
    Name: run
    PrependShell: true
  - Name: workdir
    Path: /tmp/builds/ttf2pt1-3.4.4
  - CmdLine:
    - make t1asm ttf2pt1 docs mans &&     make install
    Name: run
    PrependShell: true
  - CmdLine:
    - rm -rf /etc/php5/cli/php.ini &&     ln -s /etc/php5/apache2/php.ini /etc/php5/cli/php.ini
    Name: run
    PrependShell: true
  - CmdLine:
    - echo "date.timezone= Europe/Paris" >>  /etc/php5/apache2/php.ini &&     echo
      "phar.readonly = Off" >> /etc/php5/apache2/php.ini &&     echo "html_errors
      = On" >> /etc/php5/apache2/php.ini &&     echo "display_errors = On" >> /etc/php5/apache2/php.ini
      &&     echo "error_reporting = E_ALL"  >> /etc/php5/apache2/php.ini &&     echo
      "display_startup_errors = On" >> /etc/php5/apache2/php.ini &&     echo "xdebug.max_nesting_level
      = 250" >>  /etc/php5/apache2/php.ini &&     echo "xdebug.var_display_max_depth
      = 10" >> /etc/php5/apache2/php.ini
    Name: run
    PrependShell: true
  - CmdLine:
    - sed -i -e "s/^max_execution_time\s*=.*/max_execution_time = 300/" -e "s/^post_max_size\s*=.*/post_max_size
      = 4G/" -e "s/^upload_max_filesize\s*=.*/upload_max_filesize = 4G\nupload_max_size
      = 4G/" -e "s/^memory_limit\s*=.*/memory_limit = 4G/" /etc/php5/apache2/php.ini
    Name: run
    PrependShell: true
  - CmdLine:
    - cd /tmp &&     php -r "readfile('https://getcomposer.org/installer');" | php
      &&     mv composer.phar /usr/local/bin/composer
    Name: run
    PrependShell: true
  - Name: workdir
    Path: /
  - CmdLine:
    - rm -rf /tmp/builds
    Name: run
    PrependShell: true
  - CmdLine:
    - a2enmod rewrite &&     service apache2 restart
    Name: run
    PrependShell: true
  - Chown: ""
    Name: add
    SourcesAndDest:
    - default
    - /etc/apache2/sites-available/
  - Chown: ""
    Name: add
    SourcesAndDest:
    - run.sh
    - /run.sh
  - CmdLine:
    - chmod 755 /*.sh
    Name: run
    PrependShell: true
  - Name: expose
    Ports:
    - "80"
  - Name: expose
    Ports:
    - "443"
  - Name: workdir
    Path: /DNA
  - CmdLine:
    - /run.sh
    Name: cmd
    PrependShell: false
  - CmdLine:
    - apt-get install nano
    Name: run
    PrependShell: true
  - CmdLine:
    - apt-get autoremove &&     apt-get autoclean &&     apt-get clean &&     rm -rf
      /var/lib/apt/lists/* /tmp/* /var/tmp/*
    Name: run
    PrependShell: true
  From:
    Image: ubuntu:precise
  Name: ""
  Platform: ""
  SourceCode: FROM ubuntu:precise
