MetaArgs: null
Stages:
- BaseName: centos:7
  Commands:
  - Labels:
    - Key: maintainer
      Value: '"Peter Pakos <peter@pakos.uk>"'
    Name: label
  - Labels:
    - Key: description
      Value: '"Dockerised UniFi Network Controller (CentOS 7)"'
    Name: label
  - Key: UNIFI_VERSION
    Name: arg
    Value: 5.12.35
  - Key: UNIFI_URL
    Name: arg
    Value: https://dl.ubnt.com/unifi/$UNIFI_VERSION/UniFi.unix.zip
  - Key: UNIFI_DIR
    Name: arg
    Value: /UniFi
  - Key: USER
    Name: arg
    Value: unifi
  - Chown: ""
    Name: add
    SourcesAndDest:
    - files/mongodb.repo
    - /etc/yum.repos.d/
  - Chown: ""
    Name: add
    SourcesAndDest:
    - $UNIFI_URL
    - /tmp/
  - CmdLine:
    - useradd -m $USER  && yum -y install     java-1.8.0-openjdk     mongodb-org-server     unzip  &&
      yum clean all  && unzip /tmp/UniFi.unix.zip -d /  && mkdir $UNIFI_DIR/data  &&
      chown -R $USER:$USER $UNIFI_DIR  && rm -rf /tmp/*
    Name: run
    PrependShell: true
  - Name: expose
    Ports:
    - 10001/udp
    - 3478/udp
    - "6789"
    - "8080"
    - "8443"
    - "8843"
    - "8880"
  - Name: user
    User: $USER
  - Name: volume
    Volumes:
    - $UNIFI_DIR/data
  - Name: workdir
    Path: $UNIFI_DIR
  - CmdLine:
    - java
    - -jar
    - lib/ace.jar
    - start
    Name: cmd
    PrependShell: false
  From:
    Image: centos:7
  Name: ""
  Platform: ""
  SourceCode: FROM centos:7
