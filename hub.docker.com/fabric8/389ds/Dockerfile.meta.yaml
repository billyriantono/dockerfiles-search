MetaArgs: null
Stages:
- BaseName: centos:7
  Commands:
  - Labels:
    - Key: maintainer
      Value: '"Kamesh Sampath<kamesh.sampath@hotmail.com>"       name="389ds"       vendor="Kamesh
        Sampath<kamesh.sampath@hotmail.com>"       license="ASL v2"      build-date="20170409"'
    Name: label
  - Chown: ""
    From: ""
    Name: copy
    SourcesAndDest:
    - confd
    - /etc/confd
  - Chown: ""
    From: ""
    Name: copy
    SourcesAndDest:
    - scripts/install-and-run-389ds.sh
    - /install-and-run-389ds.sh
  - CmdLine:
    - yum -y install curl hostname httpd authconfig nss-tools &&      yum -y install
      java-1.8.0-openjdk-headless  openssl procps-pg coreutils &&      yum -y install
      389-ds-base.x86_64 openldap-clients &&      curl -qL https://github.com/kelseyhightower/confd/releases/download/v0.11.0/confd-0.11.0-linux-amd64
      -o /usr/local/bin/confd &&      chmod +x /usr/local/bin/confd &&      chmod
      +x /install-and-run-389ds.sh &&      sed -i 's/checkHostname {/checkHostname
      {\nreturn();/g' /usr/lib64/dirsrv/perl/DSUtil.pm  &&      rm -fr /usr/lib/systemd/system
      &&      sed -i 's/updateSelinuxPolicy($inf);//g' /usr/lib64/dirsrv/perl/* &&      sed
      -i '/if (@errs = startServer($inf))/,/}/d' /usr/lib64/dirsrv/perl/* &&      mkdir
      /etc/dirsrv-tmpl && mv /etc/dirsrv/* /etc/dirsrv-tmpl &&      yum -y clean all
      && rm -rf /var/cache/yum/*
    Name: run
    PrependShell: true
  - Name: volume
    Volumes:
    - /etc/dirsrv
    - /var/lib/dirsrv
    - /var/log/dirsrv
  - Name: expose
    Ports:
    - "389"
    - "9830"
  - CmdLine:
    - /install-and-run-389ds.sh
    Name: cmd
    PrependShell: false
  From:
    Image: centos:7
  Name: ""
  Platform: ""
  SourceCode: FROM centos:7
