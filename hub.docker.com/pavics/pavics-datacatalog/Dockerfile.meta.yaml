MetaArgs: null
Stages:
- BaseName: ubuntu:16.04
  Commands:
  - CmdLine:
    - apt-get -yqq update &&     apt-get -yqq install python python-nose python-zmq
      ipython python-numpy     python-scipy python-netcdf4 python-matplotlib     python-mpltoolkits.basemap
      python-pip     python-flufl.enum apache2     libapache2-mod-wsgi python-setuptools
      python-lxml     python-future python-requests python-psycopg2 git-core
    Name: run
    PrependShell: true
  - CmdLine:
    - pip install --upgrade pip
    Name: run
    PrependShell: true
  - CmdLine:
    - pip install pyproj==2.2.2     threddsclient==0.3.5     "pywps<4.3"     https://github.com/Ouranosinc/pyPavics/archive/0.4.3.zip
    Name: run
    PrependShell: true
  - Chown: ""
    From: ""
    Name: copy
    SourcesAndDest:
    - .
    - /root/
  - Chown: ""
    From: ""
    Name: copy
    SourcesAndDest:
    - configtests.cfg
    - /root/pavics_datacatalog/tests/
  - CmdLine:
    - cd /root &&     python setup.py install &&     python setup.py test &&     useradd
      apapywps &&     install -d -o apapywps -g apapywps /home/apapywps
    Name: run
    PrependShell: true
  - Chown: ""
    From: ""
    Name: copy
    SourcesAndDest:
    - pywps.wsgi
    - /var/www/html/wps/
  - Chown: ""
    From: ""
    Name: copy
    SourcesAndDest:
    - apache2.conf
    - /etc/apache2/
  - Chown: ""
    From: ""
    Name: copy
    SourcesAndDest:
    - pywps.cfg
    - /etc/
  - Chown: ""
    From: ""
    Name: copy
    SourcesAndDest:
    - catalog.cfg
    - /home/
  - Chown: ""
    From: ""
    Name: copy
    SourcesAndDest:
    - docker_configs.py
    - /home/
  - CmdLine:
    - python /home/docker_configs.py &&     /etc/init.d/apache2 start && tail -f /dev/null
    Name: cmd
    PrependShell: true
  - Name: expose
    Ports:
    - "80"
  From:
    Image: ubuntu:16.04
  Name: ""
  Platform: ""
  SourceCode: FROM ubuntu:16.04
