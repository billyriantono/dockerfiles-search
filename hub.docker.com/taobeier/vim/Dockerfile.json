{
  "MetaArgs": null,
  "Stages": [
    {
      "Name": "builder",
      "BaseName": "debian:stretch-slim",
      "SourceCode": "FROM debian:stretch-slim as builder",
      "Platform": "",
      "As": "builder",
      "From": {
        "Image": "debian:stretch-slim"
      },
      "Commands": [
        {
          "Labels": [
            {
              "Key": "maintainer",
              "Value": "\"Jintao Zhang \u003czhangjintao9020@gmail.com\u003e\""
            }
          ],
          "Name": "label"
        },
        {
          "CmdLine": [
            "apt update \u0026\u0026 apt install -y --no-install-recommends         ca-certificates         exuberant-ctags         gcc         git         libncurses5-dev         make         python         python-dev         wget     \u0026\u0026 rm -rf /var/lib/apt/lists/*"
          ],
          "Name": "run",
          "PrependShell": true
        },
        {
          "CmdLine": [
            "git clone https://github.com/vim/vim.git     \u0026\u0026 cd vim     \u0026\u0026 ./configure        --disable-gui        --disable-netbeans        --enable-pythoninterp=yes        --enable-multibyte        --with-features=huge        --with-compiledby=\"Jintao Zhang \u003czhangjintao9020@gmail.com\u003e\"        --with-python-command=python     \u0026\u0026 make     \u0026\u0026 make install     \u0026\u0026 wget --no-check-certificate https://raw.githubusercontent.com/tao12345666333/vim/master/vimrc -O $HOME/.vimrc     \u0026\u0026 vim -E -u $HOME/.vimrc +qall"
          ],
          "Name": "run",
          "PrependShell": true
        }
      ]
    },
    {
      "Name": "",
      "BaseName": "debian:stretch-slim",
      "SourceCode": "FROM debian:stretch-slim",
      "Platform": "",
      "From": {
        "Image": "debian:stretch-slim"
      },
      "Commands": [
        {
          "Chown": "",
          "From": "builder",
          "Name": "copy",
          "SourcesAndDest": [
            "/usr/local/bin/",
            "/usr/local/bin"
          ]
        },
        {
          "Chown": "",
          "From": "builder",
          "Name": "copy",
          "SourcesAndDest": [
            "/usr/local/share/vim/",
            "/usr/local/share/vim/"
          ]
        },
        {
          "Chown": "",
          "From": "builder",
          "Name": "copy",
          "SourcesAndDest": [
            "/root/.vimrc",
            "/root/.vimrc"
          ]
        },
        {
          "Chown": "",
          "From": "builder",
          "Name": "copy",
          "SourcesAndDest": [
            "/root/.vim",
            "/root/.vim"
          ]
        },
        {
          "CmdLine": [
            "apt update \u0026\u0026 apt install -y --no-install-recommends         python         python-dev         python-pip         python-setuptools     \u0026\u0026 rm -rf /var/lib/apt/lists/*     \u0026\u0026 pip install pep8 flake8 pyflakes isort"
          ],
          "Name": "run",
          "PrependShell": true
        },
        {
          "Name": "workdir",
          "Path": "/src"
        },
        {
          "CmdLine": [
            "vim"
          ],
          "Name": "entrypoint",
          "PrependShell": false
        },
        {
          "CmdLine": [
            "--help"
          ],
          "Name": "cmd",
          "PrependShell": false
        }
      ]
    }
  ]
}