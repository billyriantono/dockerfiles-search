MetaArgs: null
Stages:
- BaseName: openjdk:8u191-jre-alpine3.9
  Commands:
  - Key: BUILD_DATE
    Name: arg
    Value: null
  - Key: VCS_REF
    Name: arg
    Value: null
  - Labels:
    - Key: org.label-schema.build-date
      Value: $BUILD_DATE
    - Key: org.label-schema.license
      Value: MIT
    - Key: org.label-schema.name
      Value: jenkins-master
    - Key: org.label-schema.vcs-ref
      Value: $VCS_REF
    - Key: org.label-schema.vcs-url
      Value: https://github.com/instantlinux/docker-tools
    Name: label
  - Env:
    - Key: ARTIFACTORY_URI
      Value: artifactory.domain.com
    - Key: ARTIFACTORY_USER
      Value: artifactory
    - Key: ARTIFACTORY_USER_SECRET
      Value: artifactory-user-password
    - Key: CA_CERTIFICATES_JAVA_VERSION
      Value: "20140324"
    - Key: COPY_REFERENCE_FILE_LOG
      Value: /var/jenkins_home/copy_reference_file.log
    - Key: JAVA_OPTS
      Value: '"-Xmx8192m -Djenkins.install.runSetupWizard=false"'
    - Key: JENKINS_ADMIN_USER
      Value: admin
    - Key: JENKINS_ADMIN_SECRET
      Value: jenkins-admin-password
    - Key: JENKINS_DOWNLOADS
      Value: https://updates.jenkins-ci.org/download
    - Key: JENKINS_HOME
      Value: /var/jenkins_home
    - Key: JENKINS_LIBRARY
      Value: git@git.domain.com:user/jenkinslib
    - Key: JENKINS_OPTS
      Value: '"--logfile=/var/log/jenkins/jenkins.log --webroot=/var/cache/jenkins/war"'
    - Key: JENKINS_REF
      Value: /usr/share/jenkins/ref
    - Key: JENKINS_SLAVE_AGENT_PORT
      Value: "50000"
    - Key: JENKINS_URL
      Value: http://jenkins.domain.com
    - Key: MASTER_EXECUTORS
      Value: "2"
    - Key: SMTP_ADMIN_ADDRESS
      Value: '"Jenkins <no-reply@domain.com>"'
    - Key: SMTP_SMARTHOST
      Value: mail.domain.com
    - Key: TZ
      Value: UTC
    Name: env
  - Key: _COMPOSE_VERSION
    Name: arg
    Value: 1.22.0
  - Key: _DOCKER_DOWNLOADS
    Name: arg
    Value: https://github.com/docker/compose/releases/download
  - Key: _COMPOSE_URL
    Name: arg
    Value: ${_DOCKER_DOWNLOADS}/${_COMPOSE_VERSION}/docker-compose-Linux-x86_64
  - Key: _JENKINS_VERSION
    Name: arg
    Value: 2.176.1
  - Key: _TINI_DOWNLOADS
    Name: arg
    Value: https://github.com/krallin/tini/releases/download
  - Key: _TINI_VERSION
    Name: arg
    Value: 0.18.0
  - Key: DOCKER_GID
    Name: arg
    Value: "485"
  - Key: JENKINS_UID
    Name: arg
    Value: "1000"
  - Key: COMPOSE_SHA
    Name: arg
    Value: f679a24b93f291c3bffaff340467494f388c0c251649d640e661d509db9d57e9
  - Key: JENKINS_SHA
    Name: arg
    Value: 8bbc6e2043e7bd102f751aca94b51652e1e792ec0a11377d52c9d9ed484f0e8c
  - Key: TINI_SHA
    Name: arg
    Value: eadb9d6e2dc960655481d78a92d2c8bc021861045987ccd3e27c7eae5af0cf33
  - CmdLine:
    - addgroup -g ${DOCKER_GID} docker &&     adduser -D -h "$JENKINS_HOME" -u $JENKINS_UID
      -s /bin/bash jenkins &&     apk add --update --no-cache bash curl docker git
      openssh-client su-exec       ttf-dejavu tzdata unzip wget zip &&     touch /etc/localtime
      /etc/timezone &&     mkdir -p /usr/share/jenkins &&     curl -sLo /bin/tini       ${_TINI_DOWNLOADS}/v${_TINI_VERSION}/tini-static
      &&     curl -sLo /usr/local/bin/docker-compose ${_COMPOSE_URL} &&     curl -sLo
      /usr/share/jenkins/jenkins.war       ${JENKINS_DOWNLOADS}/war/$_JENKINS_VERSION/jenkins.war
      &&     echo "$TINI_SHA  /bin/tini" > /tmp/checksums &&     echo "$COMPOSE_SHA  /usr/local/bin/docker-compose"
      >> /tmp/checksums &&     echo "$JENKINS_SHA  /usr/share/jenkins/jenkins.war"
      >> /tmp/checksums &&     sha256sum -c /tmp/checksums &&     chmod +x /bin/tini
      /usr/local/bin/docker-compose &&     mkdir /var/log/jenkins /var/cache/jenkins
      &&     chown -R jenkins:jenkins /var/log/jenkins /var/cache/jenkins       /etc/timezone
      /etc/localtime &&     rm -f /var/cache/apk/*
    Name: run
    PrependShell: true
  - Chown: ""
    From: ""
    Name: copy
    SourcesAndDest:
    - ref/
    - $JENKINS_REF
  - Chown: ""
    From: ""
    Name: copy
    SourcesAndDest:
    - plugins.sh
    - plugins.txt
    - /tmp/
  - CmdLine:
    - /tmp/plugins.sh /tmp/plugins.txt && rm /tmp/*
    Name: run
    PrependShell: true
  - Chown: ""
    From: ""
    Name: copy
    SourcesAndDest:
    - entrypoint.sh
    - /usr/local/bin/
  - CmdLine:
    - chmod -R g+rX,o+rX $JENKINS_REF /usr/local/bin/entrypoint.sh
    Name: run
    PrependShell: true
  - Name: expose
    Ports:
    - "50000"
    - "8080"
  - Name: volume
    Volumes:
    - $JENKINS_HOME
  - Name: user
    User: jenkins
  - CmdLine:
    - /bin/tini
    - --
    - /usr/local/bin/entrypoint.sh
    Name: entrypoint
    PrependShell: false
  From:
    Image: openjdk:8u191-jre-alpine3.9
  Name: ""
  Platform: ""
  SourceCode: FROM openjdk:8u191-jre-alpine3.9
