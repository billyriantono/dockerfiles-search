MetaArgs: null
Stages:
- BaseName: stefanfritsch/r_statup:3.5.3.20190829
  Commands:
  - Maintainer: Stefan Fritsch <stefan.fritsch@stat-up.com>
    Name: maintainer
  - Env:
    - Key: RVERSION
      Value: '"3.5.3"'
    Name: env
  - Env:
    - Key: SHINYVERSION
      Value: '"1.5.9.923"'
    Name: env
  - Name: expose
    Ports:
    - "3838"
  - Chown: ""
    From: ""
    Name: copy
    SourcesAndDest:
    - shiny.sh
    - /etc/service/shiny/run
  - CmdLine:
    - chmod +x /etc/service/shiny/run
    Name: run
    PrependShell: true
  - CmdLine:
    - useradd -m -u 1000 shiny
    Name: run
    PrependShell: true
  - CmdLine:
    - apt-get update     && apt-get install -y --no-install-recommends gdebi-core     &&
      wget https://download3.rstudio.org/ubuntu-14.04/x86_64/shiny-server-${SHINYVERSION}-amd64.deb     &&
      gdebi -n shiny-server-${SHINYVERSION}-amd64.deb     && rm shiny-server-${SHINYVERSION}-amd64.deb     &&
      apt-get clean     && rm -rf /var/lib/apt/lists/* /tmp/* /var/tmp/*     && mkdir
      -p /opt/shiny_bookmark_state     && chown shiny:shiny /opt/shiny_bookmark_state     &&
      chown -R shiny:shiny /opt/microsoft/ropen/${RVERSION}/lib64/R/library     &&
      mkdir -p /var/log/shiny-server     && chown shiny:shiny /var/log/shiny-server     &&
      cp -R /opt/microsoft/ropen/${RVERSION}/lib64/R/library/shiny/examples/03_reactivity
      /app     && chown shiny:shiny /app
    Name: run
    PrependShell: true
  - Chown: ""
    From: ""
    Name: copy
    SourcesAndDest:
    - shiny-server.conf
    - /etc/shiny-server/shiny-server.conf
  From:
    Image: stefanfritsch/r_statup:3.5.3.20190829
  Name: ""
  Platform: ""
  SourceCode: FROM stefanfritsch/r_statup:3.5.3.20190829
