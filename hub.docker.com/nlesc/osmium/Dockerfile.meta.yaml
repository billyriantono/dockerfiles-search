MetaArgs: null
Stages:
- BaseName: debian:jessie
  Commands:
  - Maintainer: Joris Borgdorff <j.borgdorff@esciencecenter.nl>
    Name: maintainer
  - Env:
    - Key: DEBIAN_FRONTEND
      Value: noninteractive
    Name: env
  - CmdLine:
    - mkdir -p /usr/local/src /var/lib/osmium/.ssh /var/lib/osmium/sandbox
    Name: run
    PrependShell: true
  - CmdLine:
    - apt-get update -y && apt-get install -y --no-install-recommends       openjdk-7-jre-headless       openssh-client       openjdk-7-jdk       gradle       git       ant
    Name: run
    PrependShell: true
  - CmdLine:
    - git clone https://github.com/NLeSC/xenon /usr/local/src/xenon     && cd /usr/local/src/xenon     &&
      git checkout develop     && ant
    Name: run
    PrependShell: true
  - CmdLine:
    - git clone https://github.com/NLeSC/osmium.git /usr/local/src/osmium     && cd
      /usr/local/src/osmium     && git checkout 0bca57af241c2c2cc5f2880f7b8afc44c97c21d7     &&
      cp /usr/local/src/xenon/lib/*.jar lib     && cp /usr/local/src/xenon/lib/*/*.jar
      lib     && cp /usr/local/src/xenon/dist/nlesc-xenon-*/lib/xenon-*.jar lib/xenon.jar     &&
      gradle fatJar     && cp build/libs/osmium-*-all.jar /var/lib/osmium/osmium.jar     &&
      cp joblauncher.yml-dist /var/lib/osmium/joblauncher.yml
    Name: run
    PrependShell: true
  - CmdLine:
    - groupadd -r osmium   && useradd -d /var/lib/osmium -g osmium osmium   && chown
      -R osmium:osmium /var/lib/osmium
    Name: run
    PrependShell: true
  - Name: user
    User: osmium
  - Name: workdir
    Path: /var/lib/osmium
  - CmdLine:
    - /usr/bin/java
    - -jar
    - osmium.jar
    - server
    - joblauncher.yml
    Name: cmd
    PrependShell: false
  From:
    Image: debian:jessie
  Name: ""
  Platform: ""
  SourceCode: FROM debian:jessie
