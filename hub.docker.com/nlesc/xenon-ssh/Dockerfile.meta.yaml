MetaArgs: null
Stages:
- BaseName: nlesc/xenon-alpine-base
  Commands:
  - Maintainer: Stefan Verhoeven "s.verhoeven@esciencecenter.nl"
    Name: maintainer
  - CmdLine:
    - apk add --no-cache openssh at supervisor && ssh-keygen -N "" -t rsa -f /etc/ssh/ssh_host_rsa_key
      && ssh-keygen -N "" -t dsa -f /etc/ssh/ssh_host_dsa_key && ssh-keygen -N ""
      -t ecdsa -f /etc/ssh/ssh_host_ecdsa_key && ssh-keygen -N "" -t ed25519 -f /etc/ssh/ssh_host_ed25519_key
      && echo "StrictHostKeyChecking no" >> /etc/ssh/ssh_config && echo "HashKnownHosts
      no" >> /etc/ssh/ssh_config && echo "xenon" >> /etc/at.allow
    Name: run
    PrependShell: true
  - Chown: ""
    Name: add
    SourcesAndDest:
    - supervisord.conf
    - /etc/supervisord.conf
  - Name: expose
    Ports:
    - "22"
  - CmdLine:
    - supervisord
    - --nodaemon
    - --configuration
    - /etc/supervisord.conf
    Name: entrypoint
    PrependShell: false
  - Health:
      Interval: 1000000000
      Test:
      - CMD-SHELL
      - ssh -i /home/xenon/.ssh/id_rsa xenon@localhost /bin/true || exit 1
    Name: healthcheck
  From:
    Image: nlesc/xenon-alpine-base
  Name: ""
  Platform: ""
  SourceCode: FROM nlesc/xenon-alpine-base
