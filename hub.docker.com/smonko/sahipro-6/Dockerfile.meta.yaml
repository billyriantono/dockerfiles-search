MetaArgs: null
Stages:
- BaseName: consol/ubuntu-xfce-vnc:1.2.3
  Commands:
  - Maintainer: Stefan Monko "stefan.monko@posam.sk"
    Name: maintainer
  - Env:
    - Key: VNC_PORT
      Value: "5901"
    - Key: NO_VNC_PORT
      Value: "6901"
    - Key: VNC_COL_DEPTH
      Value: "24"
    - Key: VNC_RESOLUTION
      Value: 1280x1024
    - Key: VNC_PW
      Value: sahipro
    Name: env
  - Name: user
    User: "0"
  - CmdLine:
    - apt-get update && apt-get install -y openjdk-8-jre && apt-get clean -y
    Name: run
    PrependShell: true
  - Name: workdir
    Path: /headless
  - Chown: ""
    From: ""
    Name: copy
    SourcesAndDest:
    - sahipro/silent_install.xml
    - /headless/silent_install.xml
  - Chown: ""
    From: ""
    Name: copy
    SourcesAndDest:
    - sahipro.desktop
    - /headless/Desktop/sahipro.desktop
  - CmdLine:
    - chmod +x /headless/Desktop/sahipro.desktop &&     wget http://sahipro.com/static/builds/pro/install_sahi_pro_v621_20160411.jar
      -P /headless &&     wget http://sahipro.com/static/builds/pro/install_sahi_pro_runner_v621_20160411.jar
      -P /headless
    Name: run
    PrependShell: true
  - CmdLine:
    - java -jar /headless/install_sahi_pro_v621_20160411.jar /headless/silent_install.xml
      &&     mkdir /headless/sahidata &&     mkdir /headless/sahi_pro/userdata/scripts/user
      &&     ln -s /headless/sahidata/license.data /headless/sahi_pro/userdata/config/license.data
      &&     ln -s /headless/sahidata/scripts /headless/sahi_pro/userdata/scripts/user
      &&     cp /headless/sahi_pro/certgen/X509CA/ca/new_ca.crt /usr/share/ca-certificates/sahipro.crt
      &&     dpkg-reconfigure ca-certificates
    Name: run
    PrependShell: true
  - Chown: ""
    From: ""
    Name: copy
    SourcesAndDest:
    - sahipro/sahi.properties
    - /headless/sahi_pro/config/sahi.properties
  - Chown: ""
    From: ""
    Name: copy
    SourcesAndDest:
    - sahipro/userdata.properties
    - /headless/sahi_pro/userdata/config/userdata.properties
  - Name: expose
    Ports:
    - "5901"
    - "6901"
    - "9999"
  - CmdLine:
    - /dockerstartup/vnc_startup.sh
    Name: entrypoint
    PrependShell: false
  - CmdLine:
    - --tail-log
    Name: cmd
    PrependShell: false
  From:
    Image: consol/ubuntu-xfce-vnc:1.2.3
  Name: ""
  Platform: ""
  SourceCode: FROM consol/ubuntu-xfce-vnc:1.2.3
