{
  "MetaArgs": null,
  "Stages": [
    {
      "Name": "",
      "BaseName": "ansibleplaybookbundle/apb-base:canary",
      "SourceCode": "FROM ansibleplaybookbundle/apb-base:canary",
      "Platform": "",
      "From": {
        "Image": "ansibleplaybookbundle/apb-base:canary"
      },
      "Commands": [
        {
          "Labels": [
            {
              "Key": "\"com.redhat.apb.spec\"",
              "Value": "\"LS0tCnZlcnNpb246IDEuMApuYW1lOiBlY2xpcHNlLWNoZS1hcGIKZGVzY3JpcHRpb246IEVjbGlwc2UgQ2hlCmJpbmRhYmxlOiBmYWxzZQphc3luYzogb3B0aW9uYWwKbWV0YWRhdGE6CiAgcHJvdmlkZXJEaXNwbGF5TmFtZTogIlJlZCBIYXQsIEluYy4iCiAgZG9jdW1lbnRhdGlvblVybDogImh0dHBzOi8vd3d3LmVjbGlwc2Uub3JnL2NoZS9kb2NzLyIKICBpbWFnZVVybDogPi0KICAgIGh0dHBzOi8vZ2l0aHViLmNvbS9lY2xpcHNlL2NoZS1kb2NzL3Jhdy9tYXN0ZXIvc3JjL21haW4vaW1hZ2VzL2NoZV9sb2dvLnBuZwogIGxvbmdEZXNjcmlwdGlvbjogIkFuIEFQQiBkZXBsb3lzIEVjbGlwc2UgQ2hlIHY2Lnggd2l0aCBwZXJzaXN0ZW50IHN0b3JhZ2UuIgogIGRpc3BsYXlOYW1lOiAiRWNsaXBzZSBDaGUgKEFQQikiCiAgZGVwZW5kZW5jaWVzOgogICAgLSAiZG9ja2VyLmlvL2VjbGlwc2UvY2hlLXNlcnZlcjpuaWdodGx5IgogICAgLSAiZG9ja2VyLmlvL2pib3NzL2tleWNsb2FrLW9wZW5zaGlmdDozLjQuMy5GaW5hbCIKICAgIC0gImRvY2tlci5pby9jZW50b3MvcG9zdGdyZXNxbC05Ni1jZW50b3M3OjkuNiIKcGxhbnM6CiAgLSBuYW1lOiBwcm9kCiAgICBkZXNjcmlwdGlvbjogUGVyc2lzdGVudCBkZXBsb3ltZW50IG9mIEVjbGlwc2UgQ2hlCiAgICBmcmVlOiB0cnVlCiAgICBtZXRhZGF0YToKICAgICAgZGlzcGxheU5hbWU6IFByb2R1Y3Rpb24KICAgICAgbG9uZ0Rlc2NyaXB0aW9uOiAiVGhpcyBwbGFuIGRlcGxveXMgRWNsaXBzZSBDaGUgd2l0aCBwZXJzaXN0ZW50IHN0b3JhZ2UuIgogICAgcGFyYW1ldGVyczoKICAgICAgLSBuYW1lOiAiY2hlX2ltYWdlX3RhZyIKICAgICAgICB0aXRsZTogQ2hlIFNlcnZlciBJbWFnZSBUYWcKICAgICAgICBkZXNjcmlwdGlvbjogTGF0ZXN0IGFsd2F5cyBwb2ludHMgdG8gdGhlIGxhdGVzdCBzdGFibGUgdGFnLCBuaWdodGx5IGlzIHRoZSBtb3N0IHJlY2VudCBuaWdodGx5IGJ1aWxkCiAgICAgICAgdHlwZTogZW51bQogICAgICAgIGVudW06IFsibmlnaHRseSIsICJsYXRlc3QiXQogICAgICAgIHJlcXVpcmVkOiBmYWxzZQogICAgICAgIGRlZmF1bHQ6ICJuaWdodGx5IgogICAgICAgIGRpc3BsYXlfZ3JvdXA6IENoZSBDb25maWd1cmF0aW9uCiAgICAgIC0gbmFtZTogImNoZV9zZWN1cmVfcm91dGVzIgogICAgICAgIHRpdGxlOiBIVFRQUyBTdXBwb3J0CiAgICAgICAgZGVzY3JpcHRpb246IFVzZSBIVFRQUyBwcm90b2NvbCBmb3IgYWxsIGVuZHBvaW50cy4gUHJvdmlkZSBjZWxmIHNpZ25lZCBjZXJ0IGlmIGFwcGxpY2FibGUKICAgICAgICB0eXBlOiBib29sZWFuCiAgICAgICAgZGVmYXVsdDogZmFsc2UKICAgICAgICByZXF1aXJlZDogZmFsc2UKICAgICAgICBkaXNwbGF5X2dyb3VwOiBDaGUgQ29uZmlndXJhdGlvbgogICAgICAtIG5hbWU6ICJjaGVfc2VsZl9zaWduZWRfY2VydCIKICAgICAgICB0aXRsZTogU2VsZiBTaWduZWQgT3BlblNoaWZ0IFJvdXRlciBDZXJ0aWZpY2F0ZQogICAgICAgIGRlc2NyaXB0aW9uOiBDb250ZW50IG9mIE9wZW5TaGlmdCByb3V0ZXIgcm9vdCBDQS4gU2hvdWxkIHN0YXJ0IHdpdGggLS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tLiBPbmx5IGlmIHlvdSBoYXZlIHNlbGYgc2lnbmVkIENBCiAgICAgICAgdHlwZTogc3RyaW5nCiAgICAgICAgZGlzcGxheV90eXBlOiB0ZXh0YXJlYQogICAgICAgIGRlZmF1bHQ6ICIiCiAgICAgICAgcmVxdWlyZWQ6IGZhbHNlCiAgICAgICAgZGlzcGxheV9ncm91cDogQ2hlIENvbmZpZ3VyYXRpb24KICAgICAgLSBuYW1lOiAiY2hlX3NlcnZlcl9kZXBsb3ltZW50X3N0cmF0ZWd5IgogICAgICAgIHRpdGxlOiBDaGUgRGVwbG95bWVudCBTdHJhZ2V0eQogICAgICAgIHR5cGU6IGVudW0KICAgICAgICBlbnVtOiBbIlJlY3JlYXRlIiwgIlJvbGxpbmciXQogICAgICAgIHJlcXVpcmVkOiBmYWxzZQogICAgICAgIGRlZmF1bHQ6ICJSZWNyZWF0ZSIKICAgICAgICBkaXNwbGF5X2dyb3VwOiBDaGUgQ29uZmlndXJhdGlvbgogICAgICAtIG5hbWU6ICJjaGVfc2VydmVyX2ltYWdlX3B1bGxfcG9saWN5IgogICAgICAgIHRpdGxlOiAiQ2hlIERlcGxveW1lbnRDb25maWcgSW1hZ2UgcHVsbCBwb2xpY3kiCiAgICAgICAgdHlwZTogZW51bQogICAgICAgIGVudW06IFsiQWx3YXlzIiwgIklmTm90UHJlc2VudCIsICJOZXZlciJdCiAgICAgICAgcmVxdWlyZWQ6IGZhbHNlCiAgICAgICAgZGVmYXVsdDogIklmTm90UHJlc2VudCIKICAgICAgICBkaXNwbGF5X2dyb3VwOiBDaGUgQ29uZmlndXJhdGlvbgogICAgICAtIG5hbWU6ICJjaGVfcHJlZGVmaW5lZF9zdGFja3NfcmVsb2FkX19vbl9fc3RhcnQiCiAgICAgICAgdGl0bGU6ICJTdGFjayByZWxvYWQgb24gc3RhcnQiCiAgICAgICAgdHlwZTogYm9vbGVhbgogICAgICAgIGRlZmF1bHQ6IHRydWUKICAgICAgICByZXF1aXJlZDogZmFsc2UKICAgICAgICBkaXNwbGF5X2dyb3VwOiBDaGUgQ29uZmlndXJhdGlvbgogICAgICAtIG5hbWU6ICJjaGVfd29ya3NwYWNlX2F1dG9fc3RhcnQiCiAgICAgICAgdGl0bGU6ICJXb3Jrc3BhY2UgYXV0byBzdGFydCIKICAgICAgICB0eXBlOiBib29sZWFuCiAgICAgICAgZGVmYXVsdDogdHJ1ZQogICAgICAgIHJlcXVpcmVkOiBmYWxzZQogICAgICAgIGRpc3BsYXlfZ3JvdXA6IENoZSBDb25maWd1cmF0aW9uCiAgICAgIC0gbmFtZTogImV4dGVybmFsX2tleWNsb2FrIgogICAgICAgIHRpdGxlOiAiQ29ubmVjdCB0byBFeHRlcm5hbCBLZXljbG9hayIKICAgICAgICBkZXNjcmlwdGlvbjogV2hlbiBzZWxlY3RlZCwgcHJvdmlkZSBLZXljbG9hayBVUkkgaW4gdGhlIGZpZWxkIGJlbG93LiBMZWF2ZSB1bmNoZWNrZWQgdG8gY3JlYXRlIGEgbmV3IEtleWNsb2FrIGRlcGxveW1lbnQKICAgICAgICB0eXBlOiBib29sZWFuCiAgICAgICAgZGVmYXVsdDogZmFsc2UKICAgICAgICByZXF1aXJlZDogZmFsc2UKICAgICAgICBkaXNwbGF5X2dyb3VwOiBLZXljbG9hayBDb25maWd1cmF0aW9uCiAgICAgIC0gbmFtZTogImtleWNsb2FrX3VyaSIKICAgICAgICB0aXRsZTogRXh0ZXJuYWwgS2V5Y2xvYWsgVVJJCiAgICAgICAgZGVzY3JpcHRpb246IExlYXZlIGJsYW5rIHN0YXJ0IGEgbmV3IEtleWNsb2FrIG9yIHByb3ZpZGUgVVJMIG9mIGFuIGV4aXN0aW5nIEtleWNsb2FrIGluc3RhbmNlLCBlLmcuIGh0dHBzOi8veW91ci1yaC1rZXljbG9hay11cmwKICAgICAgICB0eXBlOiBzdHJpbmcKICAgICAgICByZXF1aXJlZDogZmFsc2UKICAgICAgICBkZWZhdWx0OiAiIgogICAgICAgIGRpc3BsYXlfZ3JvdXA6IEtleWNsb2FrIENvbmZpZ3VyYXRpb24KICAgICAgLSBuYW1lOiAia2V5Y2xvYWtfcHJvdmlzaW9uX3JlYWxtX3VzZXIiCiAgICAgICAgdGl0bGU6ICJQcm92aXNpb24gcmVhbG0gYW5kIGFkbWluIHVzZXIiCiAgICAgICAgZGVzY3JpcHRpb246IFVuc2VsZWN0IG9ubHkgd2hlbiB1c2luZyBleGlzdGluZyByZWFsbSBhbmQgY2xpZW50IG9mIGFuIGV4dGVybmFsIEtleWNsb2FrCiAgICAgICAgdHlwZTogYm9vbGVhbgogICAgICAgIGRlZmF1bHQ6IHRydWUKICAgICAgICByZXF1aXJlZDogZmFsc2UKICAgICAgICBkaXNwbGF5X2dyb3VwOiBLZXljbG9hayBDb25maWd1cmF0aW9uCiAgICAgIC0gbmFtZTogImNoZV9rZXljbG9ha19hZG1pbl91c2VybmFtZSIKICAgICAgICB0aXRsZTogS2V5Y2xvYWsgQWRtaW4gVXNlcm5hbWUKICAgICAgICB0eXBlOiBzdHJpbmcKICAgICAgICByZXF1aXJlZDogZmFsc2UKICAgICAgICBkZWZhdWx0OiAiYWRtaW4iCiAgICAgICAgZGlzcGxheV9ncm91cDogS2V5Y2xvYWsgQ29uZmlndXJhdGlvbgogICAgICAtIG5hbWU6ICJjaGVfa2V5Y2xvYWtfYWRtaW5fcGFzc3dvcmQiCiAgICAgICAgdGl0bGU6IEtleWNsb2FrIEFkbWluIFBhc3N3b3JkCiAgICAgICAgdHlwZTogc3RyaW5nCiAgICAgICAgcmVxdWlyZWQ6IGZhbHNlCiAgICAgICAgZGVmYXVsdDogImFkbWluIgogICAgICAgIGRpc3BsYXlfdHlwZTogcGFzc3dvcmQKICAgICAgICBkaXNwbGF5X2dyb3VwOiBLZXljbG9hayBDb25maWd1cmF0aW9uCiAgICAgIC0gbmFtZTogImNoZV9rZXljbG9ha19yZWFsbSIKICAgICAgICB0aXRsZTogQ2hlIEtleWNsb2FrIFJlYWxtCiAgICAgICAgdHlwZTogc3RyaW5nCiAgICAgICAgZGVmYXVsdDogImNoZSIKICAgICAgICByZXF1aXJlZDogZmFsc2UKICAgICAgICBkaXNwbGF5X2dyb3VwOiBLZXljbG9hayBDb25maWd1cmF0aW9uCiAgICAgIC0gbmFtZTogImNoZV9rZXljbG9ha19jbGllbnRfX2lkIgogICAgICAgIHRpdGxlOiAiQ2hlIEtleWNsb2FrIENsaWVudCBJZCIKICAgICAgICB0eXBlOiBzdHJpbmcKICAgICAgICBkZWZhdWx0OiAiY2hlLXB1YmxpYyIKICAgICAgICByZXF1aXJlZDogZmFsc2UKICAgICAgICBkaXNwbGF5X2dyb3VwOiBLZXljbG9hayBDb25maWd1cmF0aW9uCiAgICAgIC0gbmFtZTogImNoZV9leHRlcm5hbF9kYiIKICAgICAgICB0aXRsZTogIkNvbm5lY3QgdG8gRXh0ZXJuYWwgUG9zdGdyZXMgRGF0YWJhc2UiCiAgICAgICAgZGVzY3JpcHRpb246IENoZWNrIHRvIGNvbm5lY3QgdG8gZXhpc3RpbmcgZXh0ZXJuYWwgZGF0YWJhc2UuIFByb3ZpZGUgZXh0ZXJuYWwgaG9zdCwgcG9ydCwgdXNlciwgcGFzc3dvcmQgYW5kIGRhdGFiYXNlIGluIHRoZSBmaWVsZHMgYmVsb3cuCiAgICAgICAgdHlwZTogYm9vbGVhbgogICAgICAgIGRlZmF1bHQ6IGZhbHNlCiAgICAgICAgcmVxdWlyZWQ6IGZhbHNlCiAgICAgICAgZGlzcGxheV9ncm91cDogUG9zdGdyZVNRTCBEYXRhYmFzZSBDb25maWd1cmF0aW9uCiAgICAgIC0gbmFtZTogImNoZV9qZGJjX2RiX2hvc3QiCiAgICAgICAgdGl0bGU6IERhdGFiYXNlIGhvc3QKICAgICAgICB0eXBlOiBzdHJpbmcKICAgICAgICByZXF1aXJlZDogZmFsc2UKICAgICAgICBkZWZhdWx0OiAicG9zdGdyZXMiCiAgICAgICAgZGlzcGxheV9ncm91cDogUG9zdGdyZVNRTCBEYXRhYmFzZSBDb25maWd1cmF0aW9uCiAgICAgIC0gbmFtZTogImNoZV9qZGJjX2RiX3BvcnQiCiAgICAgICAgdGl0bGU6IERhdGFiYXNlIHBvcnQKICAgICAgICB0eXBlOiBzdHJpbmcKICAgICAgICByZXF1aXJlZDogZmFsc2UKICAgICAgICBkZWZhdWx0OiAiNTQzMiIKICAgICAgICBkaXNwbGF5X2dyb3VwOiBQb3N0Z3JlU1FMIERhdGFiYXNlIENvbmZpZ3VyYXRpb24KICAgICAgLSBuYW1lOiAiY2hlX2pkYmNfZGJfbmFtZSIKICAgICAgICB0aXRsZTogRGF0YWJhc2UgbmFtZQogICAgICAgIHR5cGU6IHN0cmluZwogICAgICAgIHJlcXVpcmVkOiBmYWxzZQogICAgICAgIGRlZmF1bHQ6ICJkYmNoZSIKICAgICAgICBkaXNwbGF5X2dyb3VwOiBQb3N0Z3JlU1FMIERhdGFiYXNlIENvbmZpZ3VyYXRpb24KICAgICAgLSBuYW1lOiAiY2hlX2pkYmNfdXNlcm5hbWUiCiAgICAgICAgdGl0bGU6IERhdGFiYXNlIHVzZXJuYW1lCiAgICAgICAgdHlwZTogc3RyaW5nCiAgICAgICAgcmVxdWlyZWQ6IGZhbHNlCiAgICAgICAgZGVmYXVsdDogInBnY2hlIgogICAgICAgIGRpc3BsYXlfZ3JvdXA6IFBvc3RncmVTUUwgRGF0YWJhc2UgQ29uZmlndXJhdGlvbgogICAgICAtIG5hbWU6ICJjaGVfamRiY19wYXNzd29yZCIKICAgICAgICB0aXRsZTogRGF0YWJhc2UgcGFzc3dvcmQgKHNldCB0byBkZWZhdWx0IHBnY2hlcGFzc3dvcmQpCiAgICAgICAgdHlwZTogc3RyaW5nCiAgICAgICAgcmVxdWlyZWQ6IGZhbHNlCiAgICAgICAgZGVmYXVsdDogInBnY2hlcGFzc3dvcmQiCiAgICAgICAgZGlzcGxheV90eXBlOiBwYXNzd29yZAogICAgICAgIGRpc3BsYXlfZ3JvdXA6IFBvc3RncmVTUUwgRGF0YWJhc2UgQ29uZmlndXJhdGlvbgogICAgICAtIG5hbWU6ICJjaGVfZGF0YV9wdmNfcXVhbnRpdHkiCiAgICAgICAgdGl0bGU6ICJDaGUgc2VydmVyIGRhdGEgdm9sdW1lIHNpemUiCiAgICAgICAgdHlwZTogc3RyaW5nCiAgICAgICAgcmVxdWlyZWQ6IGZhbHNlCiAgICAgICAgZGVmYXVsdDogIjFHaSIKICAgICAgICBkaXNwbGF5X2dyb3VwOiBQZXJzaXN0ZW50IFZvbHVtZQogICAgICAtIG5hbWU6ICJjaGVfaW5mcmFfa3ViZXJuZXRlc19wdmNfcHJlY3JlYXRlX19zdWJwYXRocyIKICAgICAgICB0aXRsZTogUHJlY3JlYXRlIFN1YnBhdGhzCiAgICAgICAgdHlwZTogYm9vbGVhbgogICAgICAgIHJlcXVpcmVkOiBmYWxzZQogICAgICAgIGRlZmF1bHQ6IHRydWUKICAgICAgICBkaXNwbGF5X2dyb3VwOiBQZXJzaXN0ZW50IFZvbHVtZQogICAgICAtIG5hbWU6ICJjaGVfaW5mcmFfa3ViZXJuZXRlc19wdmNfcXVhbnRpdHkiCiAgICAgICAgdGl0bGU6IERpc2sgcXVhbnRpdHkgZm9yIGNoZSB3b3Jrc3BhY2UKICAgICAgICB0eXBlOiBzdHJpbmcKICAgICAgICByZXF1aXJlZDogZmFsc2UKICAgICAgICBkZWZhdWx0OiAiMUdpIgogICAgICAgIGRpc3BsYXlfZ3JvdXA6IFBlcnNpc3RlbnQgVm9sdW1lCiAgICAgIC0gbmFtZTogImNoZV9pbmZyYV9rdWJlcm5ldGVzX3B2Y19zdHJhdGVneSIKICAgICAgICB0aXRsZTogQ29tbW9uIG9yIHVuaXF1ZSB2b2x1bWUgZm9yIHdvcmtzcGFjZQogICAgICAgIHR5cGU6IGVudW0KICAgICAgICBlbnVtOiBbJ3VuaXF1ZScsICdjb21tb24nXQogICAgICAgIHJlcXVpcmVkOiBmYWxzZQogICAgICAgIGRlZmF1bHQ6ICJ1bmlxdWUiCiAgICAgICAgZGlzcGxheV9ncm91cDogUGVyc2lzdGVudCBWb2x1bWUKICAgICAgLSBuYW1lOiAiY2hlX2luZnJhX2t1YmVybmV0ZXNfcHZjX25hbWUiCiAgICAgICAgdGl0bGU6IFdvcmtzcGFjZSBWb2x1bWUgTmFtZSAob25seSBpZiBzdHJhdGVneSBpcyBjb21tb24pCiAgICAgICAgdHlwZTogc3RyaW5nCiAgICAgICAgcmVxdWlyZWQ6IGZhbHNlCiAgICAgICAgZGVmYXVsdDogIiIKICAgICAgICBkaXNwbGF5X2dyb3VwOiBQZXJzaXN0ZW50IFZvbHVtZQogICAgICAtIG5hbWU6ICJjaGVfZGVidWdfc2VydmVyIgogICAgICAgIHRpdGxlOiBFbmFibGUgQ2hlIERlYnVnZ2luZwogICAgICAgIHR5cGU6IGJvb2xlYW4KICAgICAgICByZXF1aXJlZDogZmFsc2UKICAgICAgICBkZWZhdWx0OiBmYWxzZQogICAgICAgIGRpc3BsYXlfZ3JvdXA6IERlYnVnCiAgICAgIC0gbmFtZTogImNoZV9sb2dfbGV2ZWwiCiAgICAgICAgdGl0bGU6ICJDaGUgTG9nIExldmVsIgogICAgICAgIHR5cGU6IHN0cmluZwogICAgICAgIHJlcXVpcmVkOiBmYWxzZQogICAgICAgIGRlZmF1bHQ6ICJJTkZPIgogICAgICAgIGRpc3BsYXlfZ3JvdXA6IERlYnVnCg==\""
            }
          ],
          "Name": "label"
        },
        {
          "Chown": "",
          "From": "",
          "Name": "copy",
          "SourcesAndDest": [
            "playbooks",
            "/opt/apb/actions"
          ]
        },
        {
          "Chown": "",
          "From": "",
          "Name": "copy",
          "SourcesAndDest": [
            "roles",
            "/opt/ansible/roles"
          ]
        },
        {
          "CmdLine": [
            "chmod -R g=u /opt/{ansible,apb} \u0026\u0026     find /opt/ansible/roles/keycloak-apb -type f | xargs sed -i \"s/'persistent'/'prod'/g\" \u0026\u0026     find /opt/ansible/roles/keycloak-apb -type f | xargs sed -i \"s/'ephemeral'/'dev'/g\""
          ],
          "Name": "run",
          "PrependShell": true
        },
        {
          "Name": "user",
          "User": "root"
        },
        {
          "CmdLine": [
            "yum install dmidecode -y"
          ],
          "Name": "run",
          "PrependShell": true
        },
        {
          "Name": "user",
          "User": "apb"
        }
      ]
    }
  ]
}