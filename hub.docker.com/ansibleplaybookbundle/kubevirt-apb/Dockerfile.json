{
  "MetaArgs": null,
  "Stages": [
    {
      "Name": "",
      "BaseName": "ansibleplaybookbundle/apb-base:latest",
      "SourceCode": "FROM ansibleplaybookbundle/apb-base:latest",
      "Platform": "",
      "From": {
        "Image": "ansibleplaybookbundle/apb-base:latest"
      },
      "Commands": [
        {
          "Labels": [
            {
              "Key": "\"com.redhat.apb.spec\"",
              "Value": "\"LS0tCnZlcnNpb246IDEuMApuYW1lOiB2aXJ0dWFsaXphdGlvbgpkZXNjcmlwdGlvbjogS3ViZVZpcnQgaW5zdGFsbGVyCmJpbmRhYmxlOiBGYWxzZQphc3luYzogb3B0aW9uYWwKbWV0YWRhdGE6CiAgZGlzcGxheU5hbWU6IEt1YmV2aXJ0CiAgbG9uZ0Rlc2NyaXB0aW9uOiB8CiAgICAgS3ViZVZpcnQgZW5hYmxlcyB0aGUgbWlncmF0aW9uIG9mIGV4aXN0aW5nIHZpcnR1YWxpemVkIHdvcmtsb2FkcyBkaXJlY3RseSBpbnRvIHRoZSBkZXZlbG9wbWVudCB3b3JrZmxvd3Mgc3VwcG9ydGVkIGJ5IEt1YmVybmV0ZXMuCgogICAgIFRoaXMgcHJvdmlkZXMgYSBwYXRoIHRvIG1vcmUgcmFwaWQgYXBwbGljYXRpb24gbW9kZXJuaXphdGlvbiBieToKICAgICAgICAgLSBTdXBwb3J0aW5nIGRldmVsb3BtZW50IG9mIG5ldyBtaWNyb3NlcnZpY2UgYXBwbGljYXRpb25zIGluIGNvbnRhaW5lcnMgdGhhdCBpbnRlcmFjdCB3aXRoIGV4aXN0aW5nIHZpcnR1YWxpemVkIGFwcGxpY2F0aW9ucy4KICAgICAgICAgLSBDb21iaW5pbmcgZXhpc3RpbmcgdmlydHVhbGl6ZWQgd29ya2xvYWRzIHdpdGggbmV3IGNvbnRhaW5lciB3b3JrbG9hZHMgb24gdGhlIHNhbWUgcGxhdGZvcm0sIHRoZXJlYnkgbWFraW5nIGl0IGVhc2llciB0byBkZWNvbXBvc2UgbW9ub2xpdGhpYyB2aXJ0dWFsaXplZCB3b3JrbG9hZHMgaW50byBjb250YWluZXJzIG92ZXIgdGltZS4KICBkb2N1bWVudGF0aW9uVXJsOiBodHRwczovL2dpdGh1Yi5jb20va3ViZXZpcnQva3ViZXZpcnQvYmxvYi9tYXN0ZXIvUkVBRE1FLm1kCiAgaW1hZ2VVcmw6IGh0dHBzOi8vY2RuLnBicmQuY28vaW1hZ2VzL0g1R3V0ZDcucG5nCiAgcHJvdmlkZXJEaXNwbGF5TmFtZTogIlJlZCBIYXQsIEluYy4iCnBsYW5zOgogIC0gbmFtZTogZGVmYXVsdAogICAgZGVzY3JpcHRpb246IERlZmF1bHQgZGVwbG95bWVudCBwbGFuIGZvciBrdWJldmlydC1hcGIgdXNpbmcgZXhpc3RpbmcKICAgIGZyZWU6IHRydWUKICAgIG1ldGFkYXRhOgogICAgICBkaXNwbGF5TmFtZTogRGVmYXVsdAogICAgICBsb25nRGVzY3JpcHRpb246IFRoaXMgcGxhbiBkZXBsb3lzIGt1YmV2aXJ0CiAgICAgIGNvc3Q6ICQwLjAwCiAgICBwYXJhbWV0ZXJzOgogICAgICAtIHRpdGxlOiBPcGVuU2hpZnQgQWRtaW4gVXNlcgogICAgICAgIG5hbWU6IGFkbWluX3VzZXIKICAgICAgICB0eXBlOiBzdHJpbmcKICAgICAgICByZXF1aXJlZDogdHJ1ZQogICAgICAtIHRpdGxlOiBPcGVuU2hpZnQgQWRtaW4gUGFzc3dvcmQKICAgICAgICBuYW1lOiBhZG1pbl9wYXNzd29yZAogICAgICAgIHR5cGU6IHN0cmluZwogICAgICAgIHJlcXVpcmVkOiB0cnVlCiAgICAgICAgZGlzcGxheV90eXBlOiBwYXNzd29yZAogICAgICAtIG5hbWU6IHZlcnNpb24KICAgICAgICB0aXRsZTogVmVyc2lvbgogICAgICAgIGRlZmF1bHQ6IDAuOS4zCiAgICAgICAgZW51bTogWycwLjkuMycsICcwLjkuMCcsICcwLjguMCcsICcwLjcuMCcsICcwLjYuMCcsICcwLjUuMCcsICcwLjQuMCcsICcwLjMuMCcsICcwLjIuMCcsICcwLjEuMCddCiAgICAgICAgdHlwZTogZW51bQogICAgICAtIG5hbWU6IHJlZ2lzdHJ5X3VybAogICAgICAgIHRpdGxlOiBSZWdpc3RyeSBVUkwKICAgICAgICBkZWZhdWx0OiAiZG9ja2VyLmlvIgogICAgICAgIHR5cGU6IHN0cmluZwogICAgICAtIG5hbWU6IHJlZ2lzdHJ5X25hbWVzcGFjZQogICAgICAgIHRpdGxlOiBSZWdpc3RyeSBOYW1lc3BhY2UKICAgICAgICBkZWZhdWx0OiBrdWJldmlydAogICAgICAgIHR5cGU6IHN0cmluZwo=\""
            }
          ],
          "Name": "label"
        },
        {
          "CmdLine": [
            "yum install -y iptables wget     \u0026\u0026 yum clean all"
          ],
          "Name": "run",
          "PrependShell": true
        },
        {
          "Chown": "",
          "From": "",
          "Name": "copy",
          "SourcesAndDest": [
            "download-templates.sh",
            "/usr/bin/download-templates"
          ]
        },
        {
          "CmdLine": [
            "mkdir /opt/apb/kubevirt-templates /opt/apb/kubevirt-templates/cdi     \u0026\u0026 download-templates /opt/apb/kubevirt-templates"
          ],
          "Name": "run",
          "PrependShell": true
        },
        {
          "Chown": "",
          "From": "",
          "Name": "copy",
          "SourcesAndDest": [
            "requirements.yml",
            "/opt/ansible/requirements.yml"
          ]
        },
        {
          "CmdLine": [
            "ansible-galaxy install -r /opt/ansible/requirements.yml     \u0026\u0026 cp -r ./kubevirt-templates /etc/ansible/roles/kubevirt-ansible/roles/kubevirt/templates/"
          ],
          "Name": "run",
          "PrependShell": true
        },
        {
          "Chown": "",
          "From": "",
          "Name": "copy",
          "SourcesAndDest": [
            "playbooks/*",
            "/opt/apb/actions/"
          ]
        },
        {
          "Chown": "",
          "From": "",
          "Name": "copy",
          "SourcesAndDest": [
            "inventory",
            "/opt/apb/inventory/hosts"
          ]
        },
        {
          "CmdLine": [
            "chmod -R g=u /opt/{ansible,apb} /etc/ansible/roles"
          ],
          "Name": "run",
          "PrependShell": true
        },
        {
          "Name": "user",
          "User": "apb"
        }
      ]
    }
  ]
}