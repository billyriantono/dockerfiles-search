MetaArgs: null
Stages:
- BaseName: ubuntu:18.04
  Commands:
  - CmdLine:
    - apt-get update -y
    Name: run
    PrependShell: true
  - CmdLine:
    - apt-get install -y build-essential git
    Name: run
    PrependShell: true
  - CmdLine:
    - apt-get install -y qt4-qmake libqt4-dev libqt4-sql-sqlite
    Name: run
    PrependShell: true
  - CmdLine:
    - apt-get install -y cmake ninja-build
    Name: run
    PrependShell: true
  - CmdLine:
    - apt-get install -y gcovr lcov
    Name: run
    PrependShell: true
  - CmdLine:
    - apt-get install -y doxygen graphviz mscgen
    Name: run
    PrependShell: true
  - CmdLine:
    - apt-get install -y xinetd vnc4server xvfb blackbox x11-apps x11-utils dbus-x11
    Name: run
    PrependShell: true
  - CmdLine:
    - apt-get install -y clang clang-format clang-tidy
    Name: run
    PrependShell: true
  - CmdLine:
    - apt-get install -y git ccache sshpass
    Name: run
    PrependShell: true
  - CmdLine:
    - apt-get install -y python-minimal python-tornado python-gevent python-yaml python-pexpect
    Name: run
    PrependShell: true
  - CmdLine:
    - apt-get install -y llvm-dev libclang-dev
    Name: run
    PrependShell: true
  - CmdLine:
    - git clone -b v1.5 https://github.com/KDE/clazy.git /var/tmp/clazy
    Name: run
    PrependShell: true
  - CmdLine:
    - cd /var/tmp/clazy; cmake -DCMAKE_INSTALL_PREFIX=/usr -DCMAKE_BUILD_TYPE=Release
    Name: run
    PrependShell: true
  - CmdLine:
    - make -C /var/tmp/clazy all install
    Name: run
    PrependShell: true
  - CmdLine:
    - apt-get install -y curl
    Name: run
    PrependShell: true
  - CmdLine:
    - apt-get install -y python3.6 python3-websockets
    Name: run
    PrependShell: true
  - CmdLine:
    - mkdir -p /var/run/dbus
    Name: run
    PrependShell: true
  - CmdLine:
    - echo "QMAKE_CXX = ccache g++" >> /usr/share/qt4/mkspecs/linux-g++-64/qmake.conf
    Name: run
    PrependShell: true
  - Env:
    - Key: DISPLAY
      Value: :10
    Name: env
  - Chown: ""
    From: ""
    Name: copy
    SourcesAndDest:
    - runserver.sh
    - /bin
  - CmdLine:
    - /bin/runserver.sh
    Name: cmd
    PrependShell: false
  From:
    Image: ubuntu:18.04
  Name: ""
  Platform: ""
  SourceCode: FROM ubuntu:18.04
