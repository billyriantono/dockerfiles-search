MetaArgs: null
Stages:
- BaseName: centos:centos7
  Commands:
  - Maintainer: Andrey Sorokin <andrey@sorokin.org>
    Name: maintainer
  - CmdLine:
    - "/usr/bin/yum -y update &&\t/usr/bin/yum -y install epel-release &&\t/usr/bin/yum
      -y install strongswan strongswan-libipsec iptables"
    Name: run
    PrependShell: true
  - Chown: ""
    Name: add
    SourcesAndDest:
    - start.sh
    - /start.sh
  - Chown: ""
    Name: add
    SourcesAndDest:
    - ipsec.conf
    - /etc/strongswan/ipsec.conf
  - Chown: ""
    Name: add
    SourcesAndDest:
    - ipsec.secrets
    - /etc/strongswan/ipsec.secrets
  - Chown: ""
    Name: add
    SourcesAndDest:
    - strongswan.conf
    - /etc/strongswan/strongswan.conf
  - Env:
    - Key: VPN_SUBNET
      Value: 192.168.95.0/24
    Name: env
  - Env:
    - Key: VPN_USER
      Value: user1
    Name: env
  - Env:
    - Key: VPN_PASS
      Value: Sup3rS3cr3t
    Name: env
  - Env:
    - Key: VPN_PSK
      Value: s3cr3tk3y
    Name: env
  - Name: expose
    Ports:
    - 4500/udp
    - 500/udp
  - CmdLine:
    - /start.sh
    Name: entrypoint
    PrependShell: false
  - CmdLine:
    - /usr/bin/tail
    - -f
    - /var/log/ipsec.log
    Name: cmd
    PrependShell: false
  From:
    Image: centos:centos7
  Name: ""
  Platform: ""
  SourceCode: FROM centos:centos7
