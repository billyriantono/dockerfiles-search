MetaArgs: null
Stages:
- BaseName: honomoa/hive-base:3.1.1-spark2.4.3
  Commands:
  - Env:
    - Key: HBASE_VERSION
      Value: 2.1.5
    Name: env
  - Env:
    - Key: HBASE_CONF_DIR
      Value: /etc/hbase
    Name: env
  - Env:
    - Key: HBASE_HOME
      Value: /opt/hbase
    Name: env
  - Env:
    - Key: HBASE_URL
      Value: https://archive.apache.org/dist/hbase/$HBASE_VERSION/hbase-$HBASE_VERSION-bin.tar.gz
    Name: env
  - Env:
    - Key: HBASE_CLASSPATH
      Value: $HBASE_HOME/lib/*
    Name: env
  - Env:
    - Key: PATH
      Value: $HBASE_HOME/bin:$PATH
    Name: env
  - CmdLine:
    - curl -fSL https://archive.apache.org/dist/hbase/KEYS | gpg --import -
    Name: run
    PrependShell: true
  - CmdLine:
    - set -x     && curl -fSL "$HBASE_URL" -o /tmp/hbase.tar.gz     && curl -fSL "$HBASE_URL.asc"
      -o /tmp/hbase.tar.gz.asc     && gpg --verify /tmp/hbase.tar.gz.asc     && tar
      -xvf /tmp/hbase.tar.gz -C /opt/     && rm /tmp/hbase.tar.gz*
    Name: run
    PrependShell: true
  - CmdLine:
    - ln -s /opt/hbase-$HBASE_VERSION/conf $HBASE_CONF_DIR &&     ln -s /opt/hbase-$HBASE_VERSION
      $HBASE_HOME
    Name: run
    PrependShell: true
  - CmdLine:
    - curl -fSL http://central.maven.org/maven2/org/apache/htrace/htrace-core/3.1.0-incubating/htrace-core-3.1.0-incubating.jar
      -o $HBASE_HOME/lib/htrace-core-3.1.0-incubating.jar
    Name: run
    PrependShell: true
  - Env:
    - Key: KYLIN_VERSION
      Value: 2.6.2
    Name: env
  - Env:
    - Key: KYLIN_CONF_DIR
      Value: /etc/kylin
    Name: env
  - Env:
    - Key: KYLIN_HOME
      Value: /opt/kylin
    Name: env
  - Env:
    - Key: KYLIN_URL
      Value: https://archive.apache.org/dist/kylin/apache-kylin-$KYLIN_VERSION/apache-kylin-$KYLIN_VERSION-bin-hadoop3.tar.gz
    Name: env
  - Env:
    - Key: PATH
      Value: $HIVE_HOME/bin:$KYLIN_HOME/bin:$PATH
    Name: env
  - CmdLine:
    - curl -fSL https://archive.apache.org/dist/kylin/KEYS | gpg --import -
    Name: run
    PrependShell: true
  - CmdLine:
    - set -x     && curl -fSL "$KYLIN_URL" -o /tmp/kylin.tar.gz     && curl -fSL "$KYLIN_URL.asc"
      -o /tmp/kylin.tar.gz.asc     && gpg --verify /tmp/kylin.tar.gz.asc     && tar
      -xvf /tmp/kylin.tar.gz -C /opt/     && rm /tmp/kylin.tar.gz*
    Name: run
    PrependShell: true
  - CmdLine:
    - ln -s /opt/apache-kylin-$KYLIN_VERSION-bin-hadoop3/conf $KYLIN_CONF_DIR &&     ln
      -s /opt/apache-kylin-$KYLIN_VERSION-bin-hadoop3 $KYLIN_HOME
    Name: run
    PrependShell: true
  - CmdLine:
    - ln -s /opt/spark-$SPARK_VERSION/jars /opt/spark-$SPARK_VERSION/jars/lib
    Name: run
    PrependShell: true
  - Chown: ""
    Name: add
    SourcesAndDest:
    - conf/tomcat_server.xml
    - $KYLIN_HOME/tomcat/conf/server.xml
  - CmdLine:
    - rm $KYLIN_HOME/tomcat/conf/server.xml.init
    Name: run
    PrependShell: true
  - Chown: ""
    Name: add
    SourcesAndDest:
    - entrypoint.sh
    - /entrypoint.sh
  - Chown: ""
    Name: add
    SourcesAndDest:
    - run.sh
    - /run.sh
  - CmdLine:
    - chmod a+x /entrypoint.sh
    Name: run
    PrependShell: true
  - CmdLine:
    - chmod a+x /run.sh
    Name: run
    PrependShell: true
  - CmdLine:
    - /entrypoint.sh
    Name: entrypoint
    PrependShell: false
  - CmdLine:
    - /run.sh
    Name: cmd
    PrependShell: true
  From:
    Image: honomoa/hive-base:3.1.1-spark2.4.3
  Name: ""
  Platform: ""
  SourceCode: FROM honomoa/hive-base:3.1.1-spark2.4.3
