MetaArgs: null
Stages:
- BaseName: civisanalytics/datascience-python:4.0.1
  Commands:
  - Maintainer: support@civisanalytics.com
    Name: maintainer
  - Name: expose
    Ports:
    - "3838"
  - CmdLine:
    - mkdir -p /var/log/spectrum
    Name: run
    PrependShell: true
  - Env:
    - Key: LOGPATH
      Value: /var/log/spectrum/spectrum.log
    Name: env
  - CmdLine:
    - pip install civis==1.9
    Name: run
    PrependShell: true
  - CmdLine:
    - pip install civisml-extensions==0.1.7
    Name: run
    PrependShell: true
  - CmdLine:
    - pip install muffnn==2.1.0
    Name: run
    PrependShell: true
  - Chown: ""
    Name: add
    SourcesAndDest:
    - .
    - /mod-deploy
  - Chown: ""
    Name: add
    SourcesAndDest:
    - civisml_deploy/static
    - /static
  - CmdLine:
    - cd /mod-deploy && python setup.py install
    Name: run
    PrependShell: true
  - CmdLine:
    - if [ -z $CIVIS_SERVICE_PORT ]; then CIVIS_SERVICE_PORT=3838; fi && cd /mod-deploy/civisml_deploy
      && gunicorn -b 0.0.0.0:$CIVIS_SERVICE_PORT -w 4 run:app
    Name: cmd
    PrependShell: true
  From:
    Image: civisanalytics/datascience-python:4.0.1
  Name: ""
  Platform: ""
  SourceCode: FROM civisanalytics/datascience-python:4.0.1
