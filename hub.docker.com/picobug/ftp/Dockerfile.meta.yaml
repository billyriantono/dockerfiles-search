MetaArgs: null
Stages:
- BaseName: alpine:edge
  Commands:
  - Labels:
    - Key: maintainer
      Value: '"Julian Prasetyo <picobug.jp@gmail.com>"'
    Name: label
  - Env:
    - Key: FTP_USER
      Value: foo
    - Key: FTP_PASS
      Value: foo123
    - Key: PASV_ADDRESS
      Value: someadres.com
    - Key: PASV_MIN
      Value: "21100"
    - Key: PASV_MAX
      Value: "21110"
    Name: env
  - CmdLine:
    - apk update && apk upgrade && apk --update --no-cache add vsftpd &&     apk del
      tzdata &&     rm -rf /var/cache/apk/*
    Name: run
    PrependShell: true
  - CmdLine:
    - echo "local_enable=YES" >> /etc/vsftpd/vsftpd.conf     && echo "chroot_local_user=YES"
      >> /etc/vsftpd/vsftpd.conf     && echo "allow_writeable_chroot=YES" >> /etc/vsftpd/vsftpd.conf     &&
      echo "background=NO" >> /etc/vsftpd/vsftpd.conf     && echo "ftpd_banner=Welcome
      to FTP Server" >> /etc/vsftpd/vsftpd.conf     && echo "dirmessage_enable=YES"
      >> /etc/vsftpd/vsftpd.conf     && echo "max_clients=10" >> /etc/vsftpd/vsftpd.conf     &&
      echo "max_per_ip=5" >> /etc/vsftpd/vsftpd.conf     && echo "write_enable=YES"
      >> /etc/vsftpd/vsftpd.conf     && echo "local_umask=022" >> /etc/vsftpd/vsftpd.conf     &&
      echo "passwd_chroot_enable=yes" >> /etc/vsftpd/vsftpd.conf     && echo "pasv_enable=Yes"
      >> /etc/vsftpd/vsftpd.conf     && echo "listen_ipv6=NO" >> /etc/vsftpd/vsftpd.conf     &&
      echo "seccomp_sandbox=NO" >> /etc/vsftpd/vsftpd.conf     && sed -i "s/anonymous_enable=YES/anonymous_enable=NO/"
      /etc/vsftpd/vsftpd.conf
    Name: run
    PrependShell: true
  - Chown: ""
    From: ""
    Name: copy
    SourcesAndDest:
    - vsftpd.sh
    - /usr/sbin/
  - CmdLine:
    - chmod +x /usr/sbin/vsftpd.sh
    Name: run
    PrependShell: true
  - Name: expose
    Ports:
    - "21"
    - 21100-21110
  - CmdLine:
    - /usr/sbin/vsftpd.sh
    Name: cmd
    PrependShell: true
  From:
    Image: alpine:edge
  Name: ""
  Platform: ""
  SourceCode: FROM alpine:edge
