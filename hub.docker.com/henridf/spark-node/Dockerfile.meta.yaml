MetaArgs: null
Stages:
- BaseName: java:openjdk-8u66-jdk
  Commands:
  - Maintainer: tobilg <fb.tools.github@gmail.com>
    Name: maintainer
  - CmdLine:
    - apt-key adv --keyserver keyserver.ubuntu.com --recv E56151BF &&     echo "deb
      http://repos.mesosphere.io/debian jessie main" | tee /etc/apt/sources.list.d/mesosphere.list
      &&     echo "deb http://dl.bintray.com/sbt/debian /" | tee -a /etc/apt/sources.list.d/sbt.list
      &&     apt-get update &&     apt-get install --no-install-recommends -y --force-yes
      mesos=0.25.0-0.2.70.debian81     wget     python     make     gcc     build-essential     g++
    Name: run
    PrependShell: true
  - Env:
    - Key: APP_BASE_PATH
      Value: /app
    Name: env
  - Env:
    - Key: SPARK_VERSION
      Value: 1.6.3
    Name: env
  - Env:
    - Key: MESOS_BUILD_VERSION
      Value: 0.25.0-0.2.70
    Name: env
  - Env:
    - Key: NODE_VERSION
      Value: v5.1.0
    Name: env
  - CmdLine:
    - wget --no-check-certificate https://nodejs.org/dist/$NODE_VERSION/node-$NODE_VERSION-linux-x64.tar.gz
      &&     tar -C /usr/local --strip-components 1 -xzf node-$NODE_VERSION-linux-x64.tar.gz
      &&     rm node-$NODE_VERSION-linux-x64.tar.gz
    Name: run
    PrependShell: true
  - Env:
    - Key: SPARK_VERSION_STRING
      Value: spark-$SPARK_VERSION-bin-hadoop2.6
    Name: env
  - Env:
    - Key: SPARK_DOWNLOAD_URL
      Value: http://d3kbcqa49mib13.cloudfront.net/$SPARK_VERSION_STRING.tgz
    Name: env
  - CmdLine:
    - wget $SPARK_DOWNLOAD_URL &&     mkdir -p /usr/local/spark &&     tar xvf $SPARK_VERSION_STRING.tgz
      -C /tmp &&     cp -rf /tmp/$SPARK_VERSION_STRING/* /usr/local/spark/ &&     rm
      -rf -- /tmp/$SPARK_VERSION_STRING &&     rm spark-$SPARK_VERSION-bin-hadoop2.6.tgz
    Name: run
    PrependShell: true
  - Env:
    - Key: SPARK_HOME
      Value: /usr/local/spark
    Name: env
  - Env:
    - Key: ASSEMBLY_JAR
      Value: $SPARK_HOME/lib/spark-assembly-$SPARK_VERSION-hadoop2.6.0.jar
    Name: env
  - Env:
    - Key: MESOS_NATIVE_JAVA_LIBRARY
      Value: /usr/local/lib/libmesos.so
    Name: env
  - CmdLine:
    - mkdir -p $APP_BASE_PATH
    Name: run
    PrependShell: true
  - Chown: ""
    Name: add
    SourcesAndDest:
    - .
    - $APP_BASE_PATH
  - Name: workdir
    Path: $APP_BASE_PATH
  - CmdLine:
    - chmod +x index.js &&     chmod +x $APP_BASE_PATH/bin/spark-node &&     npm install
      -g node-gyp &&     npm install &&     npm run compile
    Name: run
    PrependShell: true
  - CmdLine:
    - node
    - /app/bin/spark-node
    Name: cmd
    PrependShell: false
  From:
    Image: java:openjdk-8u66-jdk
  Name: ""
  Platform: ""
  SourceCode: FROM java:openjdk-8u66-jdk
