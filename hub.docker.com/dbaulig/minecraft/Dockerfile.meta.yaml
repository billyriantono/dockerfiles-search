MetaArgs: null
Stages:
- BaseName: gliderlabs/alpine
  Commands:
  - Maintainer: Daniel Baulig <daniel.baulig@gmx.de>
    Name: maintainer
  - CmdLine:
    - apk add --update     --repository http://dl-cdn.alpinelinux.org/alpine/edge/community/     tini
      &&     rm -rf /var/cache/apk/*
    Name: run
    PrependShell: true
  - CmdLine:
    - apk --update add    sudo procps coreutils     git bash bash-completion rdiff-backup     python
      openjdk8-jre-base perl     perl-json socat wget &&     rm -rf /var/cache/apk/*
    Name: run
    PrependShell: true
  - CmdLine:
    - ln -sf /bin/bash /bin/sh
    Name: run
    PrependShell: true
  - Key: USER_NAME
    Name: arg
    Value: root
  - Key: WORLD_NAME
    Name: arg
    Value: default
  - Key: LOCATION
    Name: arg
    Value: /opt/mscs
  - CmdLine:
    - mkdir -p ${LOCATION}
    Name: run
    PrependShell: true
  - CmdLine:
    - git clone https://github.com/MinecraftServerControl/mscs.git ${LOCATION}
    Name: run
    PrependShell: true
  - CmdLine:
    - ln -s ${LOCATION}/mscs /usr/local/bin
    Name: run
    PrependShell: true
  - CmdLine:
    - ln -s ${LOCATION}/msctl /usr/local/bin
    Name: run
    PrependShell: true
  - CmdLine:
    - mkdir -p /etc/default
    Name: run
    PrependShell: true
  - CmdLine:
    - echo USER_NAME=${USER_NAME} >>/etc/default/mscs
    Name: run
    PrependShell: true
  - CmdLine:
    - echo LOCATION=${LOCATION} >>/etc/default/mscs
    Name: run
    PrependShell: true
  - Name: workdir
    Path: ${LOCATION}
  - CmdLine:
    - mscs create ${WORLD_NAME} 25565
    Name: run
    PrependShell: true
  - CmdLine:
    - mscs start
    Name: run
    PrependShell: true
  - Key: EULA
    Name: arg
    Value: "false"
  - CmdLine:
    - echo "eula=${EULA}" >${LOCATION}/worlds/${WORLD_NAME}/eula.txt
    Name: run
    PrependShell: true
  - CmdLine:
    - 'alias exit=true &&     . ${LOCATION}/msctl >/dev/null &&     echo Minecraft
      Version: $(getCurrentMinecraftVersion ${WORLD_NAME})'
    Name: run
    PrependShell: true
  - Name: volume
    Volumes:
    - ${LOCATION}/worlds
  - Name: volume
    Volumes:
    - ${LOCATION}/backups
  - Name: volume
    Volumes:
    - /etc/periodic
  - Name: expose
    Ports:
    - "25565"
  - CmdLine:
    - tini
    - --
    Name: entrypoint
    PrependShell: false
  - CmdLine:
    - 'crond &&     mscs start &&     mscs watch `mscs ls running | head -n 1 | cut
      -f1 -d: | tr -d ''[:blank:]''`'
    Name: cmd
    PrependShell: true
  From:
    Image: gliderlabs/alpine
  Name: ""
  Platform: ""
  SourceCode: FROM gliderlabs/alpine
