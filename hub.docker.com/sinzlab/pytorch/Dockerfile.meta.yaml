MetaArgs: null
Stages:
- BaseName: nvidia/cuda:10.1-cudnn7-devel-ubuntu18.04
  Commands:
  - Labels:
    - Key: maintainer
      Value: '"Edgar Y. Walker <edgar.walker@gmail.com>"'
    Name: label
  - Env:
    - Key: LANG
      Value: C.UTF-8
    Name: env
  - Env:
    - Key: DEBIAN_FRONTEND
      Value: noninteractive
    Name: env
  - CmdLine:
    - apt-get update &&    apt-get install -y software-properties-common                        build-essential                        git                        wget                        vim                        curl                        zip                        zlib1g-dev                        unzip                        pkg-config                        libblas-dev                        liblapack-dev                        python3-tk                        python3-wheel                        graphviz                        libhdf5-dev                        swig
      &&    add-apt-repository -y ppa:deadsnakes/ppa &&    apt install -y python3.7                    python3.7-dev
      &&    curl https://bootstrap.pypa.io/get-pip.py -o get-pip.py &&    python3.7
      get-pip.py &&    rm get-pip.py &&    ln -s /usr/bin/python3.7 /usr/local/bin/python
      &&    ln -s /usr/bin/python3.7 /usr/local/bin/python3 &&    apt-get clean &&    rm
      -rf /var/lib/apt/lists/* /tmp/* /var/tmp/*
    Name: run
    PrependShell: true
  - Name: workdir
    Path: /src
  - CmdLine:
    - pip3 --no-cache-dir install          blackcellmagic         pytest          pytest-cov          numpy          matplotlib          scipy          pandas          jupyter          scikit-learn          seaborn          graphviz          gpustat          h5py          gitpython
    Name: run
    PrependShell: true
  - CmdLine:
    - pip3 --no-cache-dir install          torch==1.2.0          torchvision==0.4.0          jupyterlab
    Name: run
    PrependShell: true
  - CmdLine:
    - pip3 --no-cache-dir install --pre datajoint==0.12.0
    Name: run
    PrependShell: true
  - Env:
    - Key: LD_LIBRARY_PATH
      Value: /usr/local/cuda/extras/CUPTI/lib64:${LD_LIBRARY_PATH}
    Name: env
  - Name: expose
    Ports:
    - "8888"
  - Chown: ""
    Name: add
    SourcesAndDest:
    - ./jupyter_notebook_config.py
    - /root/.jupyter/
  - Name: workdir
    Path: /notebooks
  - CmdLine:
    - jupyter
    - lab
    - --allow-root
    Name: entrypoint
    PrependShell: false
  From:
    Image: nvidia/cuda:10.1-cudnn7-devel-ubuntu18.04
  Name: ""
  Platform: ""
  SourceCode: FROM nvidia/cuda:10.1-cudnn7-devel-ubuntu18.04
