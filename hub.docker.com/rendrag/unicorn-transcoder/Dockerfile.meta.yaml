MetaArgs: null
Stages:
- BaseName: alpine:3.9
  Commands:
  - Maintainer: magn2o
    Name: maintainer
  - Key: GLIBC_VERSION
    Name: arg
    Value: '"2.29-r0"'
  - Key: S6_OVERLAY_VERSION
    Name: arg
    Value: '"1.22.1.0"'
  - Env:
    - Key: PLEX_ARCH
      Value: '"amd64"'
    - Key: UNICORN_PREFIX
      Value: '"/opt/UnicornTranscoder"'
    Name: env
  - CmdLine:
    - apk add --no-cache npm git curl libxml2-utils binutils file &&   curl -J -L
      -o /tmp/glibc-${GLIBC_VERSION}.apk https://github.com/sgerrand/alpine-pkg-glibc/releases/download/${GLIBC_VERSION}/glibc-${GLIBC_VERSION}.apk
      &&   curl -J -L https://github.com/just-containers/s6-overlay/releases/download/v${S6_OVERLAY_VERSION}/s6-overlay-amd64.tar.gz
      | tar zxvf - -C / &&   apk add --allow-untrusted /tmp/glibc-${GLIBC_VERSION}.apk
      &&   ln -s /lib/libz.so.1 /usr/glibc-compat/lib/libz.so.1 &&   ln -s /lib/libc.musl-x86_64.so.1
      /usr/glibc-compat/lib/libc.musl-x86_64.so.1 &&   git -C /opt clone https://github.com/UnicornTranscoder/UnicornTranscoder.git
      &&   npm install --prefix=${UNICORN_PREFIX} &&   apk del git &&   rm -rf /var/cache/apk/*
      /tmp/*
    Name: run
    PrependShell: true
  - Chown: ""
    From: ""
    Name: copy
    SourcesAndDest:
    - rootfs/
    - /
  - Name: expose
    Ports:
    - 3000/tcp
  - CmdLine:
    - /init
    Name: entrypoint
    PrependShell: false
  From:
    Image: alpine:3.9
  Name: ""
  Platform: ""
  SourceCode: FROM alpine:3.9
