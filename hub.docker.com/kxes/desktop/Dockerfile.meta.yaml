MetaArgs: null
Stages:
- BaseName: ubuntu:rolling
  Commands:
  - Key: xrdp_source
    Name: arg
    Value: https://github.com/neutrinolabs/xrdp/releases/download/v0.9.3.1/xrdp-0.9.3.1.tar.gz
  - Key: xorgxrdp_source
    Name: arg
    Value: https://github.com/neutrinolabs/xorgxrdp/releases/download/v0.2.3/xorgxrdp-0.2.3.tar.gz
  - CmdLine:
    - apt-get update     && apt-get install --yes --force-yes --no-install-recommends         software-properties-common         xorg         xserver-xorg         xfce4         gnome-themes-standard         gtk2-engines-pixbuf         file-roller         evince         gpicview         leafpad         xfce4-whiskermenu-plugin         ttf-ubuntu-font-family         dbus-x11         vnc4server     &&
      apt-get clean     && rm -rf /var/lib/apt/lists/* /tmp/* /var/tmp/*
    Name: run
    PrependShell: true
  - CmdLine:
    - apt-get update     && apt-get install --yes --force-yes --no-install-recommends         wget         build-essential         libssl-dev         libpam0g-dev         libxrandr-dev         nasm         xserver-xorg-dev         libxfont1-dev         pkg-config         file         libxfixes-dev     &&
      cd /tmp     && wget --no-check-certificate $xrdp_source     && tar -xf xrdp-*.tar.gz
      -C /tmp/     && cd /tmp/xrdp-*     && ./configure     && make     && make install     &&
      cd /tmp     && rm -rf xrdp-*     && wget --no-check-certificate $xorgxrdp_source     &&
      tar -xf xorgxrdp-*.tar.gz -C /tmp/     && cd /tmp/xorgxrdp-*     && ./configure     &&
      make     && make install     && cd /tmp     && rm -rf xorgxrdp-*     && apt-get
      remove --yes --force-yes         wget         build-essential         libssl-dev         libpam0g-dev         libxrandr-dev         nasm         xserver-xorg-dev         libxfont1-dev         pkg-config         file         libxfixes-dev     &&
      apt-get --yes autoremove     && apt-get clean     && rm -rf /var/lib/apt/lists/*
      /tmp/* /var/tmp/*
    Name: run
    PrependShell: true
  - CmdLine:
    - add-apt-repository ppa:numix/ppa     && apt-get update     && apt-get install
      --yes --force-yes --no-install-recommends numix-icon-theme numix-icon-theme-circle     &&
      apt-get clean     && rm -rf /var/lib/apt/lists/* /tmp/* /var/tmp/*
    Name: run
    PrependShell: true
  - Chown: ""
    Name: add
    SourcesAndDest:
    - ubuntu-files/lightdm-gtk-greeter.conf
    - /etc/lightdm/lightdm-gtk-greeter.conf
  - Chown: ""
    Name: add
    SourcesAndDest:
    - ubuntu-files/Adwaita-Xfce
    - /usr/share/themes/Adwaita-Xfce
  - Chown: ""
    Name: add
    SourcesAndDest:
    - ubuntu-files/xfce-perchannel-xml
    - /etc/xdg/xfce4/xfconf/xfce-perchannel-xml
  - CmdLine:
    - mkdir -p /usr/share/backgrounds
    Name: run
    PrependShell: true
  - Chown: ""
    Name: add
    SourcesAndDest:
    - ubuntu-files/background-default.png
    - /usr/share/backgrounds/background-default.png
  - CmdLine:
    - ln -s /usr/share/icons/Numix-Circle /usr/share/icons/KXicons
    Name: run
    PrependShell: true
  - CmdLine:
    - useradd --create-home user
    Name: run
    PrependShell: true
  - CmdLine:
    - echo "user:changeme" | chpasswd
    Name: run
    PrependShell: true
  - Chown: ""
    From: ""
    Name: copy
    SourcesAndDest:
    - keymaps
    - /etc/xrdp/
  - Chown: ""
    Name: add
    SourcesAndDest:
    - entrypoint.sh
    - /entrypoint.sh
  - CmdLine:
    - /entrypoint.sh
    Name: entrypoint
    PrependShell: true
  From:
    Image: ubuntu:rolling
  Name: ""
  Platform: ""
  SourceCode: FROM ubuntu:rolling
