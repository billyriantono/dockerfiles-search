MetaArgs: null
Stages:
- As: build
  BaseName: extremeshok/baseimage-alpine:latest
  Commands:
  - Labels:
    - Key: mantainer
      Value: '"Adrian Kriel <admin@extremeshok.com>"'
    - Key: vendor
      Value: '"eXtremeSHOK.com"'
    Name: label
  - CmdLine:
    - echo "**** install bash runtime packages ****"   && apk-install     bash     coreutils     curl     file     openssh-client     rsync     unzip
    Name: run
    PrependShell: true
  - CmdLine:
    - echo "**** install build packages ****"   && apk-install build-base   git   go
    Name: run
    PrependShell: true
  - Env:
    - Key: GEOIP_CONF_FILE
      Value: /etc/geoip.conf
    Name: env
  - Env:
    - Key: GEOIP_DB_DIR
      Value: /geoip/maxmind
    Name: env
  - CmdLine:
    - echo "**** install geoipupdate ****"   && THISVERSION="$(curl --silent "https://api.github.com/repos/maxmind/geoipupdate/releases/latest"
      | grep '"tag_name":' | sed -E 's/.*"([^"]+)".*/\1/')"   && THISVERSION="$(echo
      "$THISVERSION" | sed 's/v//')"   && echo "$THISVERSION"   && go get -u github.com/maxmind/geoipupdate/cmd/geoipupdate   &&
      mv /root/go/bin/geoipupdate /bin/geoipupdate   && rm -rf /root/go/
    Name: run
    PrependShell: true
  - CmdLine:
    - echo "**** remove build packages ****"   && apk del --purge  build-base    git
    Name: run
    PrependShell: true
  - Chown: ""
    From: ""
    Name: copy
    SourcesAndDest:
    - rootfs/
    - /
  - CmdLine:
    - echo "**** configure ****"   && chmod 777 /xshok-geoip.sh
    Name: run
    PrependShell: true
  - Name: workdir
    Path: /tmp
  - CmdLine:
    - /init
    Name: entrypoint
    PrependShell: false
  From:
    Image: extremeshok/baseimage-alpine:latest
  Name: build
  Platform: ""
  SourceCode: FROM extremeshok/baseimage-alpine:latest AS BUILD
