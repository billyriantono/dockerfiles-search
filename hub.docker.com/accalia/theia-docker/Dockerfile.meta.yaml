MetaArgs: null
Stages:
- BaseName: ubuntu
  Commands:
  - Labels:
    - Key: maintainer
      Value: '"docker@elementia.me"'
    Name: label
  - Env:
    - Key: DEBIAN_FRONTEND
      Value: noninteractive
    Name: env
  - Env:
    - Key: LANG
      Value: C.UTF-8
    Name: env
  - Env:
    - Key: LC_ALL
      Value: C.UTF-8
    Name: env
  - Name: expose
    Ports:
    - 3000-3999/tcp
    - 3000-3999/udp
    - 52924/tcp
  - Name: volume
    Volumes:
    - /home/ubuntu
  - Chown: ""
    Name: add
    SourcesAndDest:
    - theia
    - /theia
  - Chown: ""
    Name: add
    SourcesAndDest:
    - dbaeumer.vscode-eslint-1.9.1.vsix
    - /theia/plugins
  - CmdLine:
    - groupadd -g 1000 ubuntu   &&   useradd --uid 1000 --shell /bin/bash -m --home-dir
      /home/ubuntu -g ubuntu -G sudo ubuntu   &&   rm /etc/dpkg/dpkg.cfg.d/excludes   &&   apt-get
      update --fix-missing   &&   echo 'debconf debconf/frontend select Noninteractive'
      | debconf-set-selections   &&   dpkg -l | grep ^ii | cut -d' ' -f3 | xargs apt-get
      install -y --reinstall   &&   apt-get -y dist-upgrade   &&   apt-get install
      -y     apt-transport-https     bash     bash-completion     build-essential     ca-certificates     curl     curl     dnsutils     fakeroot     git     gnupg-agent     iputils-ping     jq     man-db     nano     netcat-openbsd     parallel     python     python-pip     python-virtualenv     python3     python3-pip     python3-virtualenv     software-properties-common     sudo     postgresql-client-common     time     tmux     tree     wget     xxd     zip   &&   curl
      -fsSL https://download.docker.com/linux/ubuntu/gpg | apt-key add -   &&   add-apt-repository
      "deb [arch=amd64] https://download.docker.com/linux/ubuntu $(lsb_release -cs)
      stable"   &&   apt-get update   &&   apt-get install -y docker-ce docker-ce-cli
      containerd.io   &&   gpasswd -a ubuntu docker   &&   chmod 777 /tmp   &&   sed
      -i 's/%sudo\s.*/%sudo ALL=NOPASSWD:ALL/' /etc/sudoers   &&   chown -R ubuntu:ubuntu
      /theia   &&   curl -sL https://deb.nodesource.com/setup_10.x | bash -   &&   apt-get
      install -y nodejs   &&   npm install -g yarn   &&   npm install -g eslint   &&   chown
      -R ubuntu:ubuntu /home/ubuntu
    Name: run
    PrependShell: true
  - Name: user
    User: ubuntu
  - Name: workdir
    Path: /theia
  - CmdLine:
    - yarn   &&   yarn theia build
    Name: run
    PrependShell: true
  - Env:
    - Key: SHELL
      Value: /bin/bash
    - Key: THEIA_DEFAULT_PLUGINS
      Value: local-dir:/theia/plugins
    Name: env
  - CmdLine:
    - yarn
    - theia
    - start
    - /home/ubuntu
    - --hostname
    - 0.0.0.0
    - --port
    - "52924"
    Name: cmd
    PrependShell: false
  - Health:
      Test:
      - CMD-SHELL
      - curl -f http://localhost:52924 >/dev/null
    Name: healthcheck
  From:
    Image: ubuntu
  Name: ""
  Platform: ""
  SourceCode: FROM ubuntu
