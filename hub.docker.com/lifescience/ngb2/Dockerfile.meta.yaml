MetaArgs: null
Stages:
- BaseName: ubuntu:16.04
  Commands:
  - Env:
    - Key: INSTALL_DIR
      Value: /opt/
    Name: env
  - Env:
    - Key: NGB_HOME
      Value: $INSTALL_DIR/ngb/
    Name: env
  - Env:
    - Key: CLI_HOME
      Value: $INSTALL_DIR/ngb-cli/bin/
    Name: env
  - Env:
    - Key: NGS_DATA_DIR
      Value: /ngs/
    Name: env
  - Env:
    - Key: PATH
      Value: $PATH:$CLI_HOME
    Name: env
  - CmdLine:
    - apt-get -y update &&     apt-get -y install wget openjdk-8-jre
    Name: run
    PrependShell: true
  - CmdLine:
    - mkdir ${NGB_HOME}
    Name: run
    PrependShell: true
  - Chown: ""
    From: ""
    Name: copy
    SourcesAndDest:
    - catgenome.jar
    - ${NGB_HOME}
  - Chown: ""
    From: ""
    Name: copy
    SourcesAndDest:
    - ngb-cli.tar.gz
    - ${INSTALL_DIR}
  - CmdLine:
    - cd ${INSTALL_DIR} &&     tar -zxvf ngb-cli.tar.gz &&     rm ngb-cli.tar.gz
    Name: run
    PrependShell: true
  - CmdLine:
    - "mkdir $NGS_DATA_DIR && \tcd $NGB_HOME && \tmkdir config && \tcd config && \techo
      \"file.browsing.allowed=true\" >> catgenome.properties &&     echo \"ngs.data.root.path=${NGS_DATA_DIR}\"
      >> catgenome.properties"
    Name: run
    PrependShell: true
  - Name: expose
    Ports:
    - "8080"
  - CmdLine:
    - cd $NGB_HOME && java -Xmx2G -jar catgenome.jar
    Name: cmd
    PrependShell: true
  From:
    Image: ubuntu:16.04
  Name: ""
  Platform: ""
  SourceCode: FROM ubuntu:16.04
