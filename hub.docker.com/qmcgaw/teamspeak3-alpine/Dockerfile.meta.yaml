MetaArgs:
- DefaultValue: alpine
  Key: BASE_IMAGE
  ProvidedValue: null
  Value: alpine
- DefaultValue: "3.10"
  Key: ALPINE_VERSION
  ProvidedValue: null
  Value: "3.10"
Stages:
- BaseName: ${BASE_IMAGE}:${ALPINE_VERSION}
  Commands:
  - Key: BUILD_DATE
    Name: arg
    Value: null
  - Key: VCS_REF
    Name: arg
    Value: null
  - Key: VERSION
    Name: arg
    Value: 3.9.1
  - Key: SHA256
    Name: arg
    Value: cb612c26ee18fa0027119056f656ce449caf799f02c0f1864a14b68ea25ed239
  - Labels:
    - Key: org.opencontainers.image.authors
      Value: '"quentin.mcgaw@gmail.com"'
    - Key: org.opencontainers.image.created
      Value: $BUILD_DATE
    - Key: org.opencontainers.image.version
      Value: '"$VERSION"'
    - Key: org.opencontainers.image.revision
      Value: $VCS_REF
    - Key: org.opencontainers.image.url
      Value: '"https://github.com/qdm12/teamspeak-server-alpine"'
    - Key: org.opencontainers.image.documentation
      Value: '"https://github.com/qdm12/teamspeak-server-alpine/blob/master/README.md"'
    - Key: org.opencontainers.image.source
      Value: '"https://github.com/qdm12/teamspeak-server-alpine"'
    - Key: org.opencontainers.image.title
      Value: '"Teamspeak 3 Server"'
    - Key: org.opencontainers.image.description
      Value: '"Light 19MB container running a Teamspeak 3 server"'
    - Key: image-size
      Value: '"21.6MB"'
    - Key: ram-usage
      Value: '"15MB"'
    - Key: cpu-usage
      Value: '"Low"'
    Name: label
  - Name: expose
    Ports:
    - 10011/tcp
    - 30033/tcp
    - 9987/udp
  - Name: workdir
    Path: /teamspeak
  - CmdLine:
    - apk --update --no-cache --progress -q add ca-certificates libstdc++ &&     wget
      -O teamspeak.tar.bz2 https://files.teamspeak-services.com/releases/server/$VERSION/teamspeak3-server_linux_alpine-$VERSION.tar.bz2
      2>&1 &&     echo "${SHA256}  teamspeak.tar.bz2" | sha256sum -c - &&     tar
      xf teamspeak.tar.bz2 --strip-components=1 &&     mkdir -p logs data lib &&     mv
      *.so lib &&     rm -r teamspeak.tar.bz2 LICENSE* CHANGELOG doc serverquerydocs
      tsdns redist &&     touch data/ts3server.sqlitedb data/query_ip_blacklist.txt
      data/query_ip_whitelist.txt &&     chown -R 1000 . &&     chmod -R 400 * &&     chmod
      -R 500 ts3server lib sql &&     chmod 700 data data/ts3server.sqlitedb &&     chmod
      400 data/query* &&     chmod 300 logs &&     rm -rf /var/cache/apk/*
    Name: run
    PrependShell: true
  - Health:
      Interval: 120000000000
      Retries: 1
      StartPeriod: 15000000000
      Test:
      - CMD-SHELL
      - '[ "$(wget -qO- localhost:30033 2>&1)" = "wget: error getting response: Connection
        reset by peer" ] || exit 1'
      Timeout: 2000000000
    Name: healthcheck
  - CmdLine:
    - /teamspeak/entrypoint.sh
    Name: entrypoint
    PrependShell: false
  - CmdLine:
    - license_accepted=0
    Name: cmd
    PrependShell: false
  - Chown: "1000"
    From: ""
    Name: copy
    SourcesAndDest:
    - entrypoint.sh
    - entrypoint.sh
  - Name: user
    User: "1000"
  From:
    Image: ${BASE_IMAGE}:${ALPINE_VERSION}
  Name: ""
  Platform: ""
  SourceCode: FROM ${BASE_IMAGE}:${ALPINE_VERSION}
