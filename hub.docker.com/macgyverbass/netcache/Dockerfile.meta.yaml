MetaArgs: null
Stages:
- BaseName: alpine:latest
  Commands:
  - Labels:
    - Key: maintainer
      Value: '"Steven Bass"'
    Name: label
  - Env:
    - Key: CACHE_DOMAINS_REPO
      Value: '"https://github.com/uklans/cache-domains.git"'
    - Key: CACHE_DOMAINS_BRANCH
      Value: '"master"'
    - Key: ENABLE_DNSSEC_VALIDATION
      Value: '"false"'
    - Key: NGINX_WORKER_PROCESSES
      Value: '"auto"'
    - Key: DISABLE_DNS_SERVER
      Value: '"false"'
    - Key: DISABLE_HTTP_CACHE
      Value: '"false"'
    - Key: DISABLE_HTTPS_PROXY
      Value: '"false"'
    - Key: UPSTREAM_DNS
      Value: '"1.1.1.1 1.0.0.1"'
    - Key: DEFAULT_CACHE
      Value: '"_default_"'
    - Key: TEST_DNS
      Value: '"dnsdiagnostic"'
    - Key: RPZ_ZONE
      Value: '"NetCache"'
    - Key: CACHE_MAX_AGE
      Value: '"3650d"'
    - Key: INACTIVE_TIME
      Value: '"365d"'
    - Key: CACHE_MEM_SIZE
      Value: '"250m"'
    - Key: CACHE_DISK_SIZE
      Value: '""'
    - Key: NO_COLORS
      Value: '"false"'
    - Key: CLEAR_LOGS
      Value: '"false"'
    - Key: LOGROTATE_CPULIMIT
      Value: '"50"'
    - Key: LOGROTATE_INTERVAL
      Value: '"weekly"'
    - Key: LOGROTATE_COUNT
      Value: '"16"'
    - Key: ONLYCACHE
      Value: '""'
    - Key: CUSTOMCACHE
      Value: '""'
    - Key: LANCACHE_IP
      Value: '""'
    Name: env
  - CmdLine:
    - "apk --no-cache --repository http://dl-cdn.alpinelinux.org/alpine/v3.7/main
      add jq~=1.5\t\t&& apk --no-cache add\t\t\tbash\t\t\tcurl\t\t\tgit\t\t\tbind\t\t\tnginx\t\t\tsniproxy\t\t\tcpulimit\t\t\tlogrotate"
    Name: run
    PrependShell: true
  - Chown: ""
    From: ""
    Name: copy
    SourcesAndDest:
    - overlay/
    - /
  - CmdLine:
    - "mkdir -m 755 -p /data\t\t&& rm /etc/nginx/conf.d/default.conf\t\t&& mkdir -p
      /var/cache/bind /etc/bind/cache /etc/nginx/conf.d/maps.d\t\t&& chown named:named
      /var/cache/bind\t\t&& chmod 755 /scripts/*.sh\t\t&& chmod 755 /etc/periodic/*/*"
    Name: run
    PrependShell: true
  - Name: expose
    Ports:
    - 443/tcp
    - 53/tcp
    - 53/udp
    - 80/tcp
  - Name: volume
    Volumes:
    - /data
  - Name: workdir
    Path: /scripts
  - CmdLine:
    - /scripts/bootstrap.sh
    Name: entrypoint
    PrependShell: false
  From:
    Image: alpine:latest
  Name: ""
  Platform: ""
  SourceCode: "FROM\talpine:latest"
