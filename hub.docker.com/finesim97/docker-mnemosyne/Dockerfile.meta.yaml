MetaArgs: null
Stages:
- BaseName: debian:buster-slim
  Commands:
  - Env:
    - Key: HOME
      Value: /home/mnemosyne
    Name: env
  - CmdLine:
    - (    export DEBIAN_FRONTEND=noninteractive;     apt-get update &&     apt-get
      install -y --no-install-recommends         pyqt5-dev-tools         python3-pyqt5.qtwebengine         python3-cherrypy3         python3-cheroot         python3-matplotlib         pyqt5-dev         python3-setuptools         python3-sphinx         python3-virtualenv         python3-webob         sqlite3         texlive-latex-base         dvipng         curl         &&     rm
      -rf /var/lib/apt/lists/*debian.{org,net}* &&     apt-get purge -y --auto-remove
      &&     useradd -u 1000 --system --create-home --home /home/mnemosyne mnemosyne     )
    Name: run
    PrependShell: true
  - Env:
    - Key: MNEM_VERSION
      Value: 2.6.1
    Name: env
  - CmdLine:
    - mkdir -p /src &&     curl -L https://sourceforge.net/projects/mnemosyne-proj/files/mnemosyne/mnemosyne-${MNEM_VERSION}/Mnemosyne-${MNEM_VERSION}.tar.gz/download
      |     tar xzf - -C /src
    Name: run
    PrependShell: true
  - Name: workdir
    Path: /src/Mnemosyne-${MNEM_VERSION}
  - CmdLine:
    - python3 setup.py install
    Name: run
    PrependShell: true
  - Name: workdir
    Path: /home/mnemosyne
  - Chown: ""
    From: ""
    Name: copy
    SourcesAndDest:
    - entrypoint.sh
    - /usr/local/bin/
  - Name: user
    User: mnemosyne
  - Chown: ""
    From: ""
    Name: copy
    SourcesAndDest:
    - configdb_dump.sql
    - /tmp/
  - CmdLine:
    - mkdir -p /home/mnemosyne/.config/mnemosyne &&     sqlite3 /home/mnemosyne/.config/mnemosyne/config.db
      < /tmp/configdb_dump.sql
    Name: run
    PrependShell: true
  - Name: volume
    Volumes:
    - /home/mnemosyne/.local/share/mnemosyne/
  - Name: user
    User: root
  - Name: expose
    Ports:
    - "8512"
  - Name: expose
    Ports:
    - "8513"
  - CmdLine:
    - entrypoint.sh
    Name: entrypoint
    PrependShell: false
  - CmdLine:
    - mnemosyne
    Name: cmd
    PrependShell: false
  From:
    Image: debian:buster-slim
  Name: ""
  Platform: ""
  SourceCode: FROM debian:buster-slim
