MetaArgs: null
Stages:
- BaseName: ubuntu
  Commands:
  - CmdLine:
    - mkdir /root/opensource
    Name: run
    PrependShell: true
  - Name: workdir
    Path: /root/opensource
  - CmdLine:
    - "apt-get update && apt-get install -y \tcurl \tgit \ticedtea-8-plugin \topenjdk-8-jre
      \tpython \tpython-pip \tsudo \tunzip"
    Name: run
    PrependShell: true
  - CmdLine:
    - pip install gitpython
    Name: run
    PrependShell: true
  - CmdLine:
    - git clone https://github.com/oppia/oppia.git
    Name: run
    PrependShell: true
  - Name: workdir
    Path: /root/opensource/oppia
  - CmdLine:
    - git checkout develop
    Name: run
    PrependShell: true
  - CmdLine:
    - bash scripts/install_prerequisites.sh
    Name: run
    PrependShell: true
  - CmdLine:
    - bash scripts/setup.sh
    Name: run
    PrependShell: true
  - CmdLine:
    - TOOLS_DIR="/root/opensource/oppia_tools" bash scripts/setup_gae.sh
    Name: run
    PrependShell: true
  - CmdLine:
    - bash scripts/install_third_party.sh
    Name: run
    PrependShell: true
  - CmdLine:
    - rm -rf /root/opensource/node_modules/through2
    Name: run
    PrependShell: true
  - CmdLine:
    - 'sed -i "75i storage_path: ''/tmp/appengine.oppiaserver.root''," gulpfile.js'
    Name: run
    PrependShell: true
  - CmdLine:
    - bash
    - scripts/start.sh
    - --save_datastore
    Name: cmd
    PrependShell: false
  - Name: expose
    Ports:
    - "8000"
    - "8181"
  From:
    Image: ubuntu
  Name: ""
  Platform: ""
  SourceCode: FROM ubuntu
