MetaArgs: null
Stages:
- BaseName: thawk/neovim:latest
  Commands:
  - Key: BUILD_DATE
    Name: arg
    Value: null
  - Key: VCS_REF
    Name: arg
    Value: null
  - Env:
    - Key: HOME
      Value: /root
    Name: env
  - Labels:
    - Key: org.label-schema.build-date
      Value: $BUILD_DATE
    - Key: org.label-schema.vcs-url
      Value: '"https://github.com/thawk/docker-spacevim-base.git"'
    - Key: org.label-schema.vcs-ref
      Value: $VCS_REF
    - Key: org.label-schema.schema-version
      Value: '"1.0.0-rc1"'
    Name: label
  - Chown: ""
    From: ""
    Name: copy
    SourcesAndDest:
    - viminfo
    - $HOME/.viminfo
  - CmdLine:
    - true  && git clone --depth 1 --shallow-submodules https://github.com/SpaceVim/SpaceVim.git
      $HOME/.SpaceVim  && git clone --depth 1 --shallow-submodules https://github.com/thawk/dotspacevim.git
      $HOME/.SpaceVim.d  && rm -r $HOME/.SpaceVim/.git $HOME/.SpaceVim.d/.git  &&
      mkdir -p $HOME/.config  && ln -s $HOME/.SpaceVim $HOME/.config/nvim  && sed
      -i -e '/begin optional layers/,/end optional layers/ d' $HOME/.SpaceVim.d/init.toml  &&
      git clone --depth 1 --shallow-submodules https://github.com/Shougo/dein.vim.git
      $HOME/.cache/vimfiles/repos/github.com/Shougo/dein.vim  && nvim --headless +'call
      dein#install()' +qall  && (find $HOME/.cache/vimfiles -type d -name ".git" |
      xargs rm -r)  && true
    Name: run
    PrependShell: true
  - Expression: COPY additional.toml $HOME/.SpaceVim.d/
    Name: onbuild
  - Expression: RUN true  && cat $HOME/.SpaceVim.d/additional.toml >> $HOME/.SpaceVim.d/init.toml  &&
      nvim --headless +'call dein#install()' +qall  && (find $HOME/.cache/vimfiles
      -type d -name ".git" | xargs rm -r)  && nvim --headless +qall  && true
    Name: onbuild
  - Name: workdir
    Path: /src
  - Name: volume
    Volumes:
    - /src
  - CmdLine:
    - /usr/bin/nvim
    Name: entrypoint
    PrependShell: false
  From:
    Image: thawk/neovim:latest
  Name: ""
  Platform: ""
  SourceCode: FROM thawk/neovim:latest
