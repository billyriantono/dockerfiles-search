MetaArgs: null
Stages:
- BaseName: php:7.2-alpine
  Commands:
  - Maintainer: Grzegorz GÄ…sak <info@vertoo.pl>
    Name: maintainer
  - Env:
    - Key: VERSION
      Value: 6.4.3
    Name: env
  - Key: USER_ID
    Name: arg
    Value: "1000"
  - Key: INSTALL_NPM
    Name: arg
    Value: "false"
  - Key: INSTALL_BOWER
    Name: arg
    Value: "false"
  - Key: INSTALL_GULP
    Name: arg
    Value: "false"
  - Key: INSTALL_VUE_CLI
    Name: arg
    Value: "false"
  - CmdLine:
    - apk update --no-cache     && apk add --no-cache         openssh-client rsync
    Name: run
    PrependShell: true
  - CmdLine:
    - addgroup -S deployer     && adduser -D -S -u $USER_ID -G deployer deployer     &&
      mkdir -p /home/deployer/.ssh
    Name: run
    PrependShell: true
  - CmdLine:
    - echo "Host *" >> /home/deployer/.ssh/config     && echo "  StrictHostKeyChecking=no"
      >> /home/deployer/.ssh/config     && chown -R deployer:deployer /home/deployer/.ssh     &&
      chmod 600 /home/deployer/.ssh/config
    Name: run
    PrependShell: true
  - CmdLine:
    - curl -L https://deployer.org/releases/v$VERSION/deployer.phar > /usr/local/bin/dep     &&
      chmod +x /usr/local/bin/dep
    Name: run
    PrependShell: true
  - CmdLine:
    - if [ ${INSTALL_NPM} = true ]; then     apk add --update nodejs nodejs-npm     &&
      if [ ${INSTALL_BOWER} = true ]; then     npm install -g bower     ;fi     &&
      if [ ${INSTALL_GULP} = true ]; then     npm install -g gulp     ;fi     && if
      [ ${INSTALL_GULP} = true ]; then     npm install -g @vue/cli     ;fi ;fi
    Name: run
    PrependShell: true
  - Name: user
    User: deployer
  - Name: volume
    Volumes:
    - /app
    - $HOME/.ssh/id_rsa
  - Name: workdir
    Path: /app
  - CmdLine:
    - /usr/local/bin/dep
    Name: entrypoint
    PrependShell: false
  From:
    Image: php:7.2-alpine
  Name: ""
  Platform: ""
  SourceCode: FROM php:7.2-alpine
