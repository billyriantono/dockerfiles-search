MetaArgs: null
Stages:
- BaseName: ubuntu:16.04
  Commands:
  - Maintainer: Alessandro Pasotti <apasotti@boundlessgeo.com>
    Name: maintainer
  - Key: QGIS_BRANCH
    Name: arg
    Value: release-2_18
  - Key: QGIS_REPOSITORY
    Name: arg
    Value: https://github.com/qgis/QGIS.git
  - Key: LEGACY
    Name: arg
    Value: "true"
  - Key: APT_CATCHER_IP
    Name: arg
    Value: null
  - CmdLine:
    - if [ "${APT_CATCHER_IP}" != "" ]; then         echo 'Acquire::http { Proxy "http://'${APT_CATCHER_IP}':3142";
      };' >> /etc/apt/apt.conf.d/01proxy;      fi
    Name: run
    PrependShell: true
  - Chown: ""
    Name: add
    SourcesAndDest:
    - requirements.txt
    - /usr/local/requirements.txt
  - Chown: ""
    From: ""
    Name: copy
    SourcesAndDest:
    - scripts
    - /build/scripts
  - CmdLine:
    - /build/scripts/getDeps.sh ${QGIS_BRANCH} ${LEGACY} &&    cd /build &&    git
      clone --depth 1 -b ${QGIS_BRANCH} ${QGIS_REPOSITORY} &&    /build/scripts/make.sh
      ${QGIS_BRANCH} ${LEGACY}
    Name: run
    PrependShell: true
  - Chown: ""
    Name: add
    SourcesAndDest:
    - qgis_*.*
    - /usr/bin/
  - CmdLine:
    - chmod +x /usr/bin/qgis_*
    Name: run
    PrependShell: true
  - Chown: ""
    Name: add
    SourcesAndDest:
    - supervisord.conf
    - /etc/supervisor/
  - Chown: ""
    Name: add
    SourcesAndDest:
    - supervisor.xvfb.conf
    - /etc/supervisor/supervisor.d/
  - Env:
    - Key: PYTHONPATH
      Value: /usr/share/qgis/python/:/usr/lib/python2.7/dist-packages/qgis:/usr/lib/python3/dist-packages/qgis:/usr/share/qgis/python/qgis
    Name: env
  - CmdLine:
    - /build/scripts/clean.sh ${QGIS_BRANCH} ${LEGACY}
    Name: run
    PrependShell: true
  - CmdLine:
    - /usr/bin/supervisord
    - -c
    - /etc/supervisor/supervisord.conf
    Name: cmd
    PrependShell: false
  From:
    Image: ubuntu:16.04
  Name: ""
  Platform: ""
  SourceCode: FROM ubuntu:16.04
