MetaArgs: null
Stages:
- BaseName: ubuntu:bionic
  Commands:
  - Maintainer: Evan Sultanik <evan.sultanik@trailofbits.com>
    Name: maintainer
  - CmdLine:
    - DEBIAN_FRONTEND=noninteractive apt-get -y update   && DEBIAN_FRONTEND=noninteractive
      apt-get install -y       wget                                                  gnupg
    Name: run
    PrependShell: true
  - CmdLine:
    - wget -O - https://apt.llvm.org/llvm-snapshot.gpg.key | apt-key add -  && echo
      "deb http://apt.llvm.org/bionic/ llvm-toolchain-bionic-7 main" >>/etc/apt/sources.list
    Name: run
    PrependShell: true
  - CmdLine:
    - DEBIAN_FRONTEND=noninteractive apt-get -y update   && DEBIAN_FRONTEND=noninteractive
      apt-get install -y       clang-7                                               cmake                                                 git                                                   lld-7                                                 llvm-7                                                ninja-build                                           python3-pip                                           python3.7
    Name: run
    PrependShell: true
  - Chown: ""
    From: ""
    Name: copy
    SourcesAndDest:
    - .
    - /polytracker
  - Name: workdir
    Path: /polytracker
  - CmdLine:
    - rm -rf build && mkdir -p build
    Name: run
    PrependShell: true
  - Name: workdir
    Path: /polytracker/build
  - Env:
    - Key: PATH
      Value: '"/usr/lib/llvm-7/bin:${PATH}"'
    Name: env
  - CmdLine:
    - cmake -G Ninja -DCMAKE_C_COMPILER=clang -DCMAKE_CXX_COMPILER=clang++ -DCMAKE_VERBOSE_MAKEFILE=TRUE
      .. && ninja install
    Name: run
    PrependShell: true
  - Env:
    - Key: CC
      Value: /polytracker/build/bin/polytracker/polyclang
    Name: env
  - Env:
    - Key: CXX
      Value: /polytracker/build/bin/polytracker/polyclang++
    Name: env
  - Name: workdir
    Path: /
  From:
    Image: ubuntu:bionic
  Name: ""
  Platform: ""
  SourceCode: FROM ubuntu:bionic
