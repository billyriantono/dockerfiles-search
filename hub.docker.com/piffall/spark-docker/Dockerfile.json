{
  "MetaArgs": null,
  "Stages": [
    {
      "Name": "",
      "BaseName": "ubuntu:16.04",
      "SourceCode": "FROM ubuntu:16.04",
      "Platform": "",
      "From": {
        "Image": "ubuntu:16.04"
      },
      "Commands": [
        {
          "Labels": [
            {
              "Key": "MAINTAINER",
              "Value": "Cristòfol Torrens Morell \"piffall@gmail.com\""
            }
          ],
          "Name": "label"
        },
        {
          "Labels": [
            {
              "Key": "CONTRIBUTOR",
              "Value": "Vicenç Juan Tomàs Monserrat \"vtomasr5@gmail.com\""
            }
          ],
          "Name": "label"
        },
        {
          "Labels": [
            {
              "Key": "STB_VERSION",
              "Value": "1.1.0"
            }
          ],
          "Name": "label"
        },
        {
          "Labels": [
            {
              "Key": "SPARK_VERSION",
              "Value": "2.2.1"
            }
          ],
          "Name": "label"
        },
        {
          "Labels": [
            {
              "Key": "HADOOP_VERSION",
              "Value": "2.7"
            }
          ],
          "Name": "label"
        },
        {
          "CmdLine": [
            "apt-get update \u0026\u0026     apt-get -y install software-properties-common python3 python3-dev python3-pip wget \u0026\u0026     add-apt-repository -y ppa:webupd8team/java \u0026\u0026     echo oracle-java8-installer shared/accepted-oracle-license-v1-1 select true | debconf-set-selections \u0026\u0026     apt-get update \u0026\u0026     apt-get install -y oracle-java8-installer \u0026\u0026     update-alternatives --install /usr/bin/python python3 /usr/bin/python3.5 20 \u0026\u0026     rm -rf /var/lib/apt/lists/* \u0026\u0026     rm -rf /var/cache/oracle-jdk8-installer"
          ],
          "Name": "run",
          "PrependShell": true
        },
        {
          "Name": "workdir",
          "Path": "/opt"
        },
        {
          "Env": [
            {
              "Key": "SBT_VERSION",
              "Value": "1.1.0"
            }
          ],
          "Name": "env"
        },
        {
          "Env": [
            {
              "Key": "SBT_HOME",
              "Value": "/opt/sbt"
            }
          ],
          "Name": "env"
        },
        {
          "CmdLine": [
            "mkdir -p /opt \u0026\u0026     wget https://github.com/sbt/sbt/releases/download/v${SBT_VERSION}/sbt-${SBT_VERSION}.tgz \u0026\u0026     tar -zvxf sbt-${SBT_VERSION}.tgz -C /opt \u0026\u0026     rm sbt-${SBT_VERSION}.tgz"
          ],
          "Name": "run",
          "PrependShell": true
        },
        {
          "Env": [
            {
              "Key": "PATH",
              "Value": "$PATH:${SBT_HOME}/bin"
            }
          ],
          "Name": "env"
        },
        {
          "Env": [
            {
              "Key": "SPARK_VERSION",
              "Value": "2.2.1"
            }
          ],
          "Name": "env"
        },
        {
          "Env": [
            {
              "Key": "HADOOP_VERSION",
              "Value": "2.7"
            }
          ],
          "Name": "env"
        },
        {
          "Env": [
            {
              "Key": "SPARK_HOME",
              "Value": "/usr/spark-${SPARK_VERSION}"
            }
          ],
          "Name": "env"
        },
        {
          "CmdLine": [
            "mkdir ${SPARK_HOME} \u0026\u0026     wget http://apache.rediris.es/spark/spark-${SPARK_VERSION}/spark-${SPARK_VERSION}-bin-hadoop${HADOOP_VERSION}.tgz \u0026\u0026     tar vxzf spark-${SPARK_VERSION}-bin-hadoop${HADOOP_VERSION}.tgz --strip 1 -C ${SPARK_HOME} \u0026\u0026     rm spark-${SPARK_VERSION}-bin-hadoop${HADOOP_VERSION}.tgz"
          ],
          "Name": "run",
          "PrependShell": true
        },
        {
          "Chown": "",
          "From": "",
          "Name": "copy",
          "SourcesAndDest": [
            "start-master",
            "/usr/bin/start-master"
          ]
        },
        {
          "Chown": "",
          "From": "",
          "Name": "copy",
          "SourcesAndDest": [
            "start-worker",
            "/usr/bin/start-worker"
          ]
        },
        {
          "Chown": "",
          "From": "",
          "Name": "copy",
          "SourcesAndDest": [
            "start-driver",
            "/usr/bin/start-driver"
          ]
        },
        {
          "Env": [
            {
              "Key": "PATH",
              "Value": "$PATH:${SPARK_HOME}/bin"
            }
          ],
          "Name": "env"
        },
        {
          "Env": [
            {
              "Key": "JAVA_HOME",
              "Value": "/usr/lib/jvm/java-8-oracle"
            }
          ],
          "Name": "env"
        }
      ]
    }
  ]
}