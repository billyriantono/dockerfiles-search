MetaArgs: null
Stages:
- BaseName: python:3
  Commands:
  - CmdLine:
    - mkdir -p /usr/src/app
    Name: run
    PrependShell: true
  - Name: workdir
    Path: /usr/src/app
  - Maintainer: <sdelrio@users.noreply.github.com>
    Name: maintainer
  - Env:
    - Key: VER_S3QL
      Value: 2.17.1
    Name: env
  - CmdLine:
    - apt-get update  && apt-get remove --purge -y libsqlite3-0  && apt-get install
      -y build-essential psmisc  && apt-get install -y fuse libfuse-dev libattr1-dev
      pkg-config wget  && pip install pkgconfig Crypto defusedxml pycrypto  && apt-get
      install -y wget  && wget http://www.sqlite.org/2016/sqlite-autoconf-3100000.tar.gz  &&
      tar xzvf sqlite-autoconf-3100000.tar.gz  && cd sqlite-autoconf-3100000  && ./configure
      --prefix=/usr --enable-shared  && make && make install  && pip install apsw
      llfuse dugong  && cd  && wget https://bitbucket.org/nikratio/s3ql/downloads/s3ql-$VER_S3QL.tar.bz2  &&
      tar xjvf s3ql-$VER_S3QL.tar.bz2  && cd s3ql-$VER_S3QL  && python3 setup.py build_ext
      --inplace  && ls bin  && python3 setup.py install  && cd  && rm -rf s3ql-$VER_S3QL.tar.bz2
      s3ql-$VER_S3QL sqlite-autoconf-3100000.tar.gz sqlite-autoconf-3100000  && apt-get
      remove --purge -y build-essential make manpages manpages-dev patch perl perl-modules
      rename xz-utils  && apt-get autoremove -y  && apt-get remove -y libattr1-dev
      libfuse-dev libpcre3-dev libc6-dev libselinux1-dev libsepol1-dev linux-libc-dev
      libpcre3-dev libc-dev-bin pkg-config wget  && mkdir /mnt/hubic  && mkdir /tmp/hubic_cache  &&
      apt-get install -y bash  && DEBIAN_FRONTEND=noninteractive apt-get install -y
      -q runit
    Name: run
    PrependShell: true
  - Chown: ""
    Name: add
    SourcesAndDest:
    - sbin/my_init
    - /sbin/my_init
  - CmdLine:
    - chmod 755 /sbin/my_init
    Name: run
    PrependShell: true
  - CmdLine:
    - mkdir /root/.s3ql
    Name: run
    PrependShell: true
  - Chown: ""
    Name: add
    SourcesAndDest:
    - config/authinfo2
    - /root/.s3ql/authinfo2
  - CmdLine:
    - chmod 600 /root/.s3ql/authinfo2
    Name: run
    PrependShell: true
  - Chown: ""
    Name: add
    SourcesAndDest:
    - etc/s3ql.run
    - /etc/service/s3ql/run
  - Chown: ""
    Name: add
    SourcesAndDest:
    - etc/s3ql.finish
    - /etc/service/s3ql/finish
  - CmdLine:
    - chmod 755 /etc/service/s3ql/run
    Name: run
    PrependShell: true
  - CmdLine:
    - chmod 755 /etc/service/s3ql/finish
    Name: run
    PrependShell: true
  - Name: volume
    Volumes:
    - /mnt/hubic
  - CmdLine:
    - /sbin/my_init
    Name: entrypoint
    PrependShell: false
  From:
    Image: python:3
  Name: ""
  Platform: ""
  SourceCode: FROM python:3
