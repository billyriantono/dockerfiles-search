MetaArgs: null
Stages:
- BaseName: ubuntu:18.04
  Commands:
  - Maintainer: Faryne <faryne@gmail.com>
    Name: maintainer
  - Name: expose
    Ports:
    - "443"
    - "80"
  - Env:
    - Key: VERSION
      Value: 0.0.10
    Name: env
  - Env:
    - Key: TZ
      Value: '''Asia/Taipei'''
    Name: env
  - CmdLine:
    - echo $TZ > /etc/timezone &&   apt-get update && apt-get install -y tzdata &&   rm
      /etc/localtime &&   ln -snf /usr/share/zoneinfo/$TZ /etc/localtime &&   dpkg-reconfigure
      -f noninteractive tzdata &&   apt-get clean
    Name: run
    PrependShell: true
  - CmdLine:
    - apt-get install -y         nginx git wget php7.2-common php7.2-fpm php7.2-cli         php7.2-mysql
      php7.2-mbstring php7.2-curl php7.2-zip         php7.2-gd php7.2-json php7.2-odbc
      php7.2-soap php7.2-bcmath
    Name: run
    PrependShell: true
  - CmdLine:
    - wget https://getcomposer.org/download/1.6.5/composer.phar -O composer &&     chmod
      +x composer &&     mv composer /usr/local/bin/composer
    Name: run
    PrependShell: true
  - CmdLine:
    - echo "Hello World (By simple-nginx-php $VERSION). See https://github.com/faryne/simple-nginx-php
      for more info." > /var/www/html/index.html
    Name: run
    PrependShell: true
  - CmdLine:
    - echo "<?php phpinfo();?><p><small>Hello World (By simple-nginx-php $VERSION).
      See https://github.com/faryne/simple-nginx-php for more info.</small></p>" >
      /var/www/html/index.php
    Name: run
    PrependShell: true
  - Chown: ""
    From: ""
    Name: copy
    SourcesAndDest:
    - ./conf/nginx/nginx.conf
    - /etc/nginx
  - Chown: ""
    From: ""
    Name: copy
    SourcesAndDest:
    - ./conf/nginx/virtual_hosts/default
    - /etc/nginx/sites-available
  - Chown: ""
    From: ""
    Name: copy
    SourcesAndDest:
    - ./conf/php/cli/php.ini
    - /etc/php/7.2/cli
  - Chown: ""
    From: ""
    Name: copy
    SourcesAndDest:
    - ./conf/php/fpm/php.ini
    - /etc/php/7.2/fpm
  - Chown: ""
    From: ""
    Name: copy
    SourcesAndDest:
    - ./conf/php/fpm/php-fpm.conf
    - /etc/php/7.2/fpm
  From:
    Image: ubuntu:18.04
  Name: ""
  Platform: ""
  SourceCode: FROM ubuntu:18.04
