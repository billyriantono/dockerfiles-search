MetaArgs: null
Stages:
- BaseName: php:5.6.29-apache
  Commands:
  - Maintainer: Przemek Szalko <przemek@rentcars.pl>
    Name: maintainer
  - CmdLine:
    - "apt-get update     && apt-get install -y \t\tntp \t\tmysql-client \t    git
      \t\tzip \t\tbzip2 \t\texim4         libbz2-dev         libfreetype6-dev         libjpeg-dev
      \        libmcrypt-dev         libpng12-dev         libvpx-dev \t\tlibfontconfig1
      \t&& curl -sL https://deb.nodesource.com/setup_5.x | bash - \t&& apt-get install
      -y nodejs \t&& rm -rf /var/lib/apt/lists/ \t&& docker-php-ext-install bz2                         calendar
      \                        exif                         fileinfo                         mbstring
      \                        mcrypt                         opcache \t\t\t\t\t\tmysqli
      \                        pdo_mysql     && docker-php-ext-configure gd                --with-vpx-dir=/usr/lib/x86_64-linux-gnu
      \               --with-jpeg-dir=/usr/lib/x86_64-linux-gnu                --with-png-dir=/usr/lib/x86_64-linux-gnu
      \               --with-freetype-dir=/usr/lib/x86_64-linux-gnu     && docker-php-ext-install
      gd \t&& curl -sS https://getcomposer.org/installer | php -- --install-dir=/usr/local/bin
      --filename=composer"
    Name: run
    PrependShell: true
  - CmdLine:
    - "curl -s -L -o /usr/src/phpredis.tar.gz https://github.com/phpredis/phpredis/archive/2.2.7.tar.gz
      \t&& mkdir -p /usr/src/phpredis \t&& tar --strip-components=1 -C /usr/src/phpredis
      -zxvf /usr/src/phpredis.tar.gz \t&& cd /usr/src/phpredis \t&& phpize \t&& ./configure
      \t&& make \t&& make install \t&& rm -rf /usr/src/phpredis* \t&& echo \"extension=redis.so\"
      > /usr/local/etc/php/conf.d/php-redis.ini"
    Name: run
    PrependShell: true
  - Chown: ""
    From: ""
    Name: copy
    SourcesAndDest:
    - conf/php/php.ini
    - ${PHP_INI_DIR}/php.ini
  - Chown: ""
    From: ""
    Name: copy
    SourcesAndDest:
    - entrypoint.sh
    - /entrypoint.sh
  - Chown: ""
    From: ""
    Name: copy
    SourcesAndDest:
    - conf
    - /tmp/conf
  - CmdLine:
    - "useradd -d /webapps -U -s /bin/bash webapps \t&& mkdir /webapps \t&& chown
      -R webapps.webapps /webapps \t&& /tmp/conf/configure-apache2.sh \t&& /tmp/conf/configure-exim4.sh
      \t&& chmod 0700 /entrypoint.sh \t&& ln -sf /usr/share/zoneinfo/Europe/Warsaw
      /etc/localtime \t&& rm -rf /tmp/conf \t&& apt-get clean"
    Name: run
    PrependShell: true
  - Name: expose
    Ports:
    - "80"
  - Env:
    - Key: TERM
      Value: '"xterm"'
    - Key: APPLICATION_ENV
      Value: '""'
    - Key: VIRTUAL_HOST
      Value: '""'
    Name: env
  - CmdLine:
    - /entrypoint.sh
    Name: entrypoint
    PrependShell: false
  - CmdLine:
    - apache2-foreground
    Name: cmd
    PrependShell: false
  From:
    Image: php:5.6.29-apache
  Name: ""
  Platform: ""
  SourceCode: FROM php:5.6.29-apache
