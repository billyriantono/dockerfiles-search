MetaArgs: null
Stages:
- BaseName: node:12.14.0
  Commands:
  - Name: workdir
    Path: /build
  - CmdLine:
    - wget -q -O - https://dl-ssl.google.com/linux/linux_signing_key.pub | apt-key
      add -     && sh -c 'echo "deb [arch=amd64] http://dl.google.com/linux/chrome/deb/
      stable main" >> /etc/apt/sources.list.d/google.list'     && apt-get update     &&
      apt-get install -y google-chrome-unstable fonts-ipafont-gothic fonts-wqy-zenhei
      fonts-thai-tlwg fonts-kacst ttf-freefont       --no-install-recommends     &&
      rm -rf /var/lib/apt/lists/*     && rm -rf /src/*.deb
    Name: run
    PrependShell: true
  - Chown: ""
    Name: add
    SourcesAndDest:
    - https://noto-website.storage.googleapis.com/pkgs/NotoSansCJKjp-hinted.zip
    - /tmp
  - CmdLine:
    - unzip /tmp/NotoSansCJKjp-hinted.zip &&     mkdir -p /usr/share/fonts/noto &&     cp
      *.otf /usr/share/fonts/noto &&     chmod 644 -R /usr/share/fonts/noto/ &&     fc-cache
      -fv
    Name: run
    PrependShell: true
  - CmdLine:
    - apt-get update -y
    Name: run
    PrependShell: true
  - CmdLine:
    - apt-get install -yq gconf-service libasound2 libatk1.0-0 libc6 libcairo2 libcups2
      libdbus-1-3     libexpat1 libfontconfig1 libgcc1 libgconf-2-4 libgdk-pixbuf2.0-0
      libglib2.0-0 libgtk-3-0 libnspr4     libpango-1.0-0 libpangocairo-1.0-0 libstdc++6
      libx11-6 libx11-xcb1 libxcb1 libxcomposite1     libxcursor1 libxdamage1 libxext6
      libxfixes3 libxi6 libxrandr2 libxrender1 libxss1 libxtst6     ca-certificates
      fonts-liberation libappindicator1 libnss3 lsb-release xdg-utils wget --fix-missing     vim
      apt-utils git curl unzip sudo
    Name: run
    PrependShell: true
  - CmdLine:
    - apt-get update     && apt-get install -y --no-install-recommends         software-properties-common         apt-transport-https         jq         python3-pip         python3-setuptools         gpg-agent         time     &&
      pip3 install --upgrade pip     && apt-get -y autoremove     && rm -rf /var/lib/apt/lists/*
    Name: run
    PrependShell: true
  - CmdLine:
    - pip3 install awscli
    Name: run
    PrependShell: true
  - Chown: ""
    From: ""
    Name: copy
    SourcesAndDest:
    - package.json
    - /build
  - CmdLine:
    - yarn install
    Name: run
    PrependShell: true
  - CmdLine:
    - yarn add puppeteer     && groupadd -r pptruser && useradd -r -g pptruser -G
      audio,video pptruser     && mkdir -p /home/pptruser/Downloads     && mkdir -p
      /home/pptruser/code     && chown -R pptruser:pptruser /home/pptruser     &&
      chown -R pptruser:pptruser /build/node_modules
    Name: run
    PrependShell: true
  - CmdLine:
    - adduser pptruser sudo
    Name: run
    PrependShell: true
  - CmdLine:
    - echo '%sudo ALL=(ALL) NOPASSWD:ALL' >> /etc/sudoers
    Name: run
    PrependShell: true
  - Name: user
    User: pptruser
  - Env:
    - Key: TZ
      Value: Asia/Tokyo
    Name: env
  - CmdLine:
    - pwd;ls
    Name: run
    PrependShell: true
  - CmdLine:
    - yarn --version
    Name: run
    PrependShell: true
  - CmdLine:
    - cat /build/package.json
    Name: run
    PrependShell: true
  - CmdLine:
    - aws --version
    Name: run
    PrependShell: true
  - CmdLine:
    - google-chrome-unstable
    Name: cmd
    PrependShell: false
  From:
    Image: node:12.14.0
  Name: ""
  Platform: ""
  SourceCode: FROM node:12.14.0
