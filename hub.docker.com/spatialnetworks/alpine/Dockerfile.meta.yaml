MetaArgs: null
Stages:
- As: node
  BaseName: mhart/alpine-node:8
  Commands: null
  From:
    Image: mhart/alpine-node:8
  Name: node
  Platform: ""
  SourceCode: FROM mhart/alpine-node:8 as NODE
- BaseName: ruby:2.4-alpine
  Commands:
  - Env:
    - Key: APP_PATH
      Value: /app
    Name: env
  - Chown: ""
    From: NODE
    Name: copy
    SourcesAndDest:
    - /usr/include/node
    - /usr/include/node
  - Chown: ""
    From: NODE
    Name: copy
    SourcesAndDest:
    - /usr/lib/libgcc*
    - /usr/lib/libstdc*
    - /usr/lib/
  - Chown: ""
    From: NODE
    Name: copy
    SourcesAndDest:
    - /usr/lib/node_modules
    - /usr/lib/node_modules
  - Chown: ""
    From: NODE
    Name: copy
    SourcesAndDest:
    - /usr/local/share/yarn
    - /usr/local/share/yarn
  - Chown: ""
    From: NODE
    Name: copy
    SourcesAndDest:
    - /usr/bin/node
    - /usr/bin/
  - Chown: ""
    From: ""
    Name: copy
    SourcesAndDest:
    - uninstall-node.sh
    - /usr/bin/uninstall-node
  - CmdLine:
    - chmod +x /usr/bin/uninstall-node  && ln -s /usr/lib/node_modules/npm/bin/npm-cli.js
      /usr/bin/npm  && ln -s /usr/lib/node_modules/npm/bin/npx-cli.js /usr/bin/npx  &&
      ln -s /usr/local/share/yarn/bin/yarn /usr/local/bin/yarn  && ln -s /usr/local/share/yarn/bin/yarnpkg
      /usr/local/bin/yarnpkg  && mkdir -p $APP_PATH  && apk update  && apk add --virtual
      .sni-build-tools       alpine-sdk       linux-headers  && apk add --virtual
      .sni-postgres-dev       postgresql-dev  && apk add --virtual .sni-development-tools       ca-certificates       wget       bash       gawk       sed       grep       bc       coreutils       git       less       python  &&
      apk add postgresql  && rm -rf /var/cache/apk/*
    Name: run
    PrependShell: true
  - Name: workdir
    Path: $APP_PATH
  - CmdLine:
    - bash
    Name: cmd
    PrependShell: false
  From:
    Image: ruby:2.4-alpine
  Name: ""
  Platform: ""
  SourceCode: FROM ruby:2.4-alpine
