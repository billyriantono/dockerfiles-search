MetaArgs: null
Stages:
- BaseName: ubuntu:16.04
  Commands:
  - Env:
    - Key: DEBIAN_FRONTEND
      Value: noninteractive
    - Key: DEBCONF_NONINTERACTIVE_SEEN
      Value: "true"
    Name: env
  - CmdLine:
    - apt-get update && apt-get install -y sudo && rm -rf /var/lib/apt/lists/*
    Name: run
    PrependShell: true
  - CmdLine:
    - 'useradd pipelineuser          --shell /bin/bash           --create-home   &&
      usermod -aG sudo pipelineuser   && echo ''pipelineuser:secret'' | chpasswd   &&
      echo ''ALL ALL = (ALL) NOPASSWD: ALL'' >> /etc/sudoers'
    Name: run
    PrependShell: true
  - Env:
    - Key: LANG_WHICH
      Value: en
    Name: env
  - Env:
    - Key: LANG_WHERE
      Value: US
    Name: env
  - Env:
    - Key: ENCODING
      Value: UTF-8
    Name: env
  - Env:
    - Key: LANGUAGE
      Value: ${LANG_WHICH}_${LANG_WHERE}.${ENCODING}
    Name: env
  - Env:
    - Key: LANG
      Value: ${LANGUAGE}
    Name: env
  - CmdLine:
    - apt-get -qqy update   && apt-get -qqy --no-install-recommends install     language-pack-en     tzdata     locales   &&
      locale-gen ${LANGUAGE}   && dpkg-reconfigure --frontend noninteractive locales   &&
      apt-get -qyy autoremove   && rm -rf /var/lib/apt/lists/* && apt-get -qyy clean
    Name: run
    PrependShell: true
  - CmdLine:
    - apt-get update -y
    Name: run
    PrependShell: true
  - CmdLine:
    - apt-get -qq -y install software-properties-common     python-software-properties     net-tools     nodejs     npm     apache2
    Name: run
    PrependShell: true
  - CmdLine:
    - apt-get -qqy install mariadb-server
    Name: run
    PrependShell: true
  - CmdLine:
    - add-apt-repository ppa:ondrej/php
    Name: run
    PrependShell: true
  - CmdLine:
    - apt-get update
    Name: run
    PrependShell: true
  - CmdLine:
    - apt-get -qqy install php     php-mbstring     php-mcrypt     php-curl     php-xml     php-mysql     php-gd     libapache2-mod-php
    Name: run
    PrependShell: true
  - CmdLine:
    - apt-get -qqy install git openssh-server wget
    Name: run
    PrependShell: true
  - CmdLine:
    - apt-get -qq -y install curl
    Name: run
    PrependShell: true
  - CmdLine:
    - curl -sS https://getcomposer.org/installer | php
    Name: run
    PrependShell: true
  - CmdLine:
    - mv composer.phar /usr/local/bin/composer
    Name: run
    PrependShell: true
  - CmdLine:
    - ln -s /usr/local/bin/composer /usr/bin/composer
    Name: run
    PrependShell: true
  - CmdLine:
    - cd ~
    Name: run
    PrependShell: true
  - CmdLine:
    - wget https://phar.phpunit.de/phpunit-6.0.phar
    Name: run
    PrependShell: true
  - CmdLine:
    - chmod +x phpunit-6.0.phar
    Name: run
    PrependShell: true
  - CmdLine:
    - mv phpunit-6.0.phar /usr/local/bin/phpunit
    Name: run
    PrependShell: true
  - CmdLine:
    - phpunit --version
    Name: run
    PrependShell: true
  - CmdLine:
    - cd ~
    Name: run
    PrependShell: true
  - CmdLine:
    - mkdir /home/pipelineuser/.drush
    Name: run
    PrependShell: true
  - CmdLine:
    - chown -Rv pipelineuser /home/pipelineuser/.drush
    Name: run
    PrependShell: true
  - CmdLine:
    - chmod -Rv 664 /home/pipelineuser/.drush
    Name: run
    PrependShell: true
  - CmdLine:
    - wget https://s3.amazonaws.com/files.drush.org/drush.phar
    Name: run
    PrependShell: true
  - CmdLine:
    - chmod +x drush.phar
    Name: run
    PrependShell: true
  - CmdLine:
    - mv drush.phar /usr/local/bin/drush
    Name: run
    PrependShell: true
  - CmdLine:
    - chmod -Rv 777 /home/pipelineuser/.drush
    Name: run
    PrependShell: true
  - CmdLine:
    - chown -Rv pipelineuser /home/pipelineuser/.drush
    Name: run
    PrependShell: true
  - CmdLine:
    - apt-get -qqy install xvfb zip
    Name: run
    PrependShell: true
  - CmdLine:
    - apt-get -qqy install libgconf2-4     libnss3-1d     libxss1     libasound2     libatk1.0-0     libcairo2     libcups2     ibgdk-pixbuf2.0-0     libgtk-3-0     libpango-1.0-0     libpangocairo-1.0-0     libxcomposite1     fonts-liberation     libappindicator1     xdg-utils
    Name: run
    PrependShell: true
  - CmdLine:
    - wget http://selenium-release.storage.googleapis.com/2.53/selenium-server-standalone-2.53.0.jar
    Name: run
    PrependShell: true
  - CmdLine:
    - wget http://chromedriver.storage.googleapis.com/2.33/chromedriver_linux64.zip
    Name: run
    PrependShell: true
  - CmdLine:
    - unzip chromedriver_linux64.zip
    Name: run
    PrependShell: true
  - CmdLine:
    - wget -N https://dl.google.com/linux/direct/google-chrome-stable_current_amd64.deb
      -P ~/
    Name: run
    PrependShell: true
  - CmdLine:
    - dpkg -i --force-depends ~/google-chrome-stable_current_amd64.deb
    Name: run
    PrependShell: true
  - CmdLine:
    - apt-get -f install -y
    Name: run
    PrependShell: true
  - CmdLine:
    - dpkg -i --force-depends ~/google-chrome-stable_current_amd64.deb
    Name: run
    PrependShell: true
  - CmdLine:
    - add-apt-repository -y ppa:openjdk-r/ppa
    Name: run
    PrependShell: true
  - CmdLine:
    - apt-get install -y -q openjdk-8-jre-headless
    Name: run
    PrependShell: true
  - Name: user
    User: pipelineuser
  - Env:
    - Key: HOME
      Value: /home/pipelineuser
    Name: env
  From:
    Image: ubuntu:16.04
  Name: ""
  Platform: ""
  SourceCode: FROM ubuntu:16.04
