MetaArgs: null
Stages:
- BaseName: wozhangkun/php-fpm:7.2.16
  Commands:
  - Env:
    - Key: PECL_SWOOLE_URL
      Value: http://pecl.php.net/get/swoole-4.3.1.tgz
    Name: env
  - Env:
    - Key: PECL_EVENT_URL
      Value: http://pecl.php.net/get/event-2.4.3.tgz
    Name: env
  - Chown: ""
    From: ""
    Name: copy
    SourcesAndDest:
    - composer
    - /usr/local/bin/
  - CmdLine:
    - chmod a+x /usr/local/bin/composer && /usr/local/bin/composer self-update
    Name: run
    PrependShell: true
  - CmdLine:
    - cd /tmp       && /usr/local/php/bin/pecl install mongodb        && echo -e "extension=mongodb.so"
      >> /usr/local/php/etc/php.ini             && /usr/local/php/bin/pecl install
      psr       && echo -e "extension=psr.so" >> /usr/local/php/etc/php.ini             &&
      git clone https://github.com/phalcon/cphalcon.git        && cd cphalcon/build       &&
      ./install --phpize /usr/local/php/bin/phpize --php-config /usr/local/php/bin/php-config        &&
      echo -e "extension=phalcon.so" >> /usr/local/php/etc/php.ini             &&
      wget -O swoole.tar.gz $PECL_SWOOLE_URL        && mkdir swoole       && tar -xf
      swoole.tar.gz -C swoole --strip-components=1       && cd swoole       && /usr/local/php/bin/phpize       &&
      ./configure --with-php-config=/usr/local/php/bin/php-config --enable-openssl
      --enable-http2 --enable-swoole       && make       && make install        &&
      echo -e "extension=swoole.so" >> /usr/local/php/etc/php.ini             && wget
      -O event.tar.gz $PECL_EVENT_URL        && mkdir event       && tar -xf event.tar.gz
      -C event --strip-components=1       && cd event       && /usr/local/php/bin/phpize
      > /dev/null       && ./configure --with-php-config=/usr/local/php/bin/php-config
      --with-event-core --with-event-extra       && make       && make install       &&
      echo -e "extension=event.so" >> /usr/local/php/etc/php.ini             && cd       &&
      rm -rf /tmp/cphalcon       && yum clean all
    Name: run
    PrependShell: true
  From:
    Image: wozhangkun/php-fpm:7.2.16
  Name: ""
  Platform: ""
  SourceCode: FROM wozhangkun/php-fpm:7.2.16
