MetaArgs: null
Stages:
- As: node
  BaseName: node
  Commands:
  - Name: workdir
    Path: /src/client
  - Chown: ""
    From: ""
    Name: copy
    SourcesAndDest:
    - client
    - .
  - CmdLine:
    - yarn install && yarn build
    Name: run
    PrependShell: true
  From:
    Image: node
  Name: node
  Platform: ""
  SourceCode: FROM node AS node
- As: java
  BaseName: gradle:jdk8-alpine
  Commands:
  - Name: user
    User: root
  - Chown: ""
    From: ""
    Name: copy
    SourcesAndDest:
    - .
    - .
  - Chown: ""
    From: node
    Name: copy
    SourcesAndDest:
    - /src/client/build/
    - src/main/resources/public/
  - CmdLine:
    - gradle --no-daemon build
    Name: run
    PrependShell: true
  From:
    Image: gradle:jdk8-alpine
  Name: java
  Platform: ""
  SourceCode: FROM gradle:jdk8-alpine as java
- BaseName: openjdk:8-jre-alpine
  Commands:
  - Chown: ""
    From: java
    Name: copy
    SourcesAndDest:
    - /home/gradle/build/libs/minkonto*.jar
    - /data/app.jar
  - CmdLine:
    - java
    - -jar
    - /data/app.jar
    Name: cmd
    PrependShell: false
  From:
    Image: openjdk:8-jre-alpine
  Name: ""
  Platform: ""
  SourceCode: FROM openjdk:8-jre-alpine
