MetaArgs: null
Stages:
- BaseName: ubuntu:14.04
  Commands:
  - CmdLine:
    - echo "server 172.17.42.1" > /etc/resolv.conf
    Name: run
    PrependShell: true
  - CmdLine:
    - echo "server 8.8.8.8" >> /etc/resolv.conf
    Name: run
    PrependShell: true
  - CmdLine:
    - apt-get update
    Name: run
    PrependShell: true
  - CmdLine:
    - apt-get -y upgrade
    Name: run
    PrependShell: true
  - CmdLine:
    - apt-get -y install nginx wget unzip syslogd dnsutils curl jq git
    Name: run
    PrependShell: true
  - CmdLine:
    - wget https://dl.bintray.com/mitchellh/consul/0.5.0_linux_amd64.zip -P /usr/local/src/
    Name: run
    PrependShell: true
  - CmdLine:
    - unzip /usr/local/src/0.5.0_linux_amd64.zip -d /usr/local/bin/
    Name: run
    PrependShell: true
  - CmdLine:
    - mkdir -p /opt/consul/conf
    Name: run
    PrependShell: true
  - CmdLine:
    - mkdir -p /opt/consul/dat
    Name: run
    PrependShell: true
  - CmdLine:
    - mkdir -p /opt/consul/webui
    Name: run
    PrependShell: true
  - CmdLine:
    - mkdir -p /opt/consul/scripts
    Name: run
    PrependShell: true
  - CmdLine:
    - wget https://dl.bintray.com/mitchellh/consul/0.5.0_web_ui.zip -P /usr/local/src/
    Name: run
    PrependShell: true
  - CmdLine:
    - unzip /usr/local/src/0.5.0_web_ui.zip -d /opt/consul/webui/
    Name: run
    PrependShell: true
  - CmdLine:
    - git clone https://github.com/bsmile/consul-handson.git /opt/consul/git
    Name: run
    PrependShell: true
  - CmdLine:
    - mv /opt/consul/git/opt/consul/scripts/* /opt/consul/scripts/
    Name: run
    PrependShell: true
  - CmdLine:
    - mv /opt/consul/git/opt/consul/conf/* /opt/consul/conf/
    Name: run
    PrependShell: true
  - CmdLine:
    - chmod +x /opt/consul/scripts/*.sh
    Name: run
    PrependShell: true
  From:
    Image: ubuntu:14.04
  Name: ""
  Platform: ""
  SourceCode: FROM ubuntu:14.04
