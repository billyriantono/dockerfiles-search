MetaArgs: null
Stages:
- BaseName: ubuntu:14.04
  Commands:
  - Maintainer: Rob Shad <robertmshad@googlemail.com>
    Name: maintainer
  - Env:
    - Key: DEBIAN_FRONTEND
      Value: noninteractive
    Name: env
  - Env:
    - Key: APTLIST
      Value: '"curl php5 php5-sqlite lftp libssh2-php sqlite3 apache2 libapache2-mod-php5"'
    Name: env
  - CmdLine:
    - "echo \"deb http://ppa.launchpad.net/ondrej/php5-5.6/ubuntu trusty main\" >>
      /etc/apt/sources.list &&     apt-key adv --keyserver keyserver.ubuntu.com --recv-key
      E5267A6C && \tapt-get update -q && \tapt-get install $APTLIST -qy && \tapt-get
      clean && rm -rf /tmp/* /var/lib/apt/lists/* /var/tmp/*"
    Name: run
    PrependShell: true
  - Chown: ""
    Name: add
    SourcesAndDest:
    - crontab
    - /etc/cron.d/locomotive-cron
  - CmdLine:
    - chmod 0644 /etc/cron.d/locomotive-cron &&   crontab /etc/cron.d/locomotive-cron
    Name: run
    PrependShell: true
  - CmdLine:
    - curl -sS https://getcomposer.org/installer | php -- --install-dir=/usr/local/bin
      --filename=composer
    Name: run
    PrependShell: true
  - CmdLine:
    - "a2enmod php5 && \ta2enmod rewrite && \tsed -i \"s/#cron.*/cron.*/\" /etc/rsyslog.d/50-default.conf
      && \tsed -i \"s/short_open_tag = Off/short_open_tag = On/\" /etc/php5/apache2/php.ini
      && \tsed -i \"s/error_reporting = .*$/error_reporting = E_ERROR | E_WARNING
      | E_PARSE/\" /etc/php5/apache2/php.ini && \tln -s /config/locomotive-config.yml
      root/.locomotive"
    Name: run
    PrependShell: true
  - CmdLine:
    - /usr/sbin/apache2ctl -D FOREGROUND
    Name: cmd
    PrependShell: true
  - Name: expose
    Ports:
    - "80"
  - Name: volume
    Volumes:
    - /config
    - /app
    - /target
    - /tmp
  From:
    Image: ubuntu:14.04
  Name: ""
  Platform: ""
  SourceCode: FROM ubuntu:14.04
