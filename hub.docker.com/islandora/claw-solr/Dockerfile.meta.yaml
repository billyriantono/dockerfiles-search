MetaArgs: null
Stages:
- BaseName: islandora/claw-tomcat:oracle-jdk
  Commands:
  - Maintainer: Nigel Banks <nigel.g.banks@gmail.com>
    Name: maintainer
  - Labels:
    - Key: '"License"'
      Value: '"MIT"'
    - Key: '"Version"'
      Value: '"0.0.1"'
    Name: label
  - Key: SOLR_VERSION
    Name: arg
    Value: '"4.10.4"'
  - Key: SOLR_DEPENDENCIES
    Name: arg
    Value: '"log4j-1.2.17.jar slf4j-api-1.7.6.jar slf4j-log4j12-1.7.6.jar"'
  - Env:
    - Key: SOLR_HOME
      Value: /opt/solr
    Name: env
  - CmdLine:
    - curl -L http://archive.apache.org/dist/lucene/solr/${SOLR_VERSION}/solr-${SOLR_VERSION}.tgz
      |     tar -xzf - -C /tmp &&     mkdir ${CATALINA_BASE}/webapps/solr &&     cp
      /tmp/solr-${SOLR_VERSION}/dist/solr-${SOLR_VERSION}.war ${CATALINA_BASE}/webapps/solr.war
      &&     unzip -o ${CATALINA_BASE}/webapps/solr.war -d ${CATALINA_BASE}/webapps/solr
      &&     for dep in ${SOLR_DEPENDENCIES}; do         cp /tmp/solr-${SOLR_VERSION}/example/lib/ext/$dep
      ${CATALINA_BASE}/lib;     done &&     curl -o ${CATALINA_BASE}/lib/commons-logging-1.1.2.jar     -L
      http://repo1.maven.org/maven2/commons-logging/commons-logging/1.1.2/commons-logging-1.1.2.jar
      &&     mkdir ${SOLR_HOME} &&     cp -a /tmp/solr-${SOLR_VERSION}/example/solr/*  ${SOLR_HOME}/
      &&     curl -L https://ftp.drupal.org/files/projects/apachesolr-7.x-1.8.tar.gz
      |     tar -xzf - -C /tmp &&     cp -r /tmp/apachesolr/solr-conf/solr-4.x/* ${SOLR_HOME}/collection1/conf
      &&     mkdir ${SOLR_HOME}/collection1/data &&     chown -R tomcat:tomcat ${SOLR_HOME}
      &&     rm -rf ${CATALINA_HOME}/webapps/*.war &&     cleanup
    Name: run
    PrependShell: true
  - Chown: ""
    From: ""
    Name: copy
    SourcesAndDest:
    - rootfs
    - /
  From:
    Image: islandora/claw-tomcat:oracle-jdk
  Name: ""
  Platform: ""
  SourceCode: FROM islandora/claw-tomcat:oracle-jdk
