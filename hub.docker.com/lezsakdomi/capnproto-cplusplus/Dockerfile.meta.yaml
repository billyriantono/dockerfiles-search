MetaArgs: null
Stages:
- BaseName: alpine:latest
  Commands:
  - CmdLine:
    - apk add --no-cache curl
    Name: run
    PrependShell: true
  - CmdLine:
    - apk add --no-cache g++
    Name: run
    PrependShell: true
  - CmdLine:
    - apk add --no-cache make
    Name: run
    PrependShell: true
  - CmdLine:
    - apk add --no-cache linux-headers
    Name: run
    PrependShell: true
  - Key: DL_DIR
    Name: arg
    Value: '"/tmp/capnproto"'
  - Key: DL_FORMAT
    Name: arg
    Value: '"tar.gz"'
  - Key: VERSION
    Name: arg
    Value: '"0.6.1"'
  - Key: URL
    Name: arg
    Value: '"https://capnproto.org/capnproto-c++-$VERSION.$DL_FORMAT"'
  - Key: MAKEFLAGS
    Name: arg
    Value: '""'
  - CmdLine:
    - "echo \"Downloading Cap'n Proto form $URL ...\"; \tmkdir -p \"$DL_DIR\" \t&&
      curl \"$URL\" \t| tar -xz -C \"$DL_DIR\""
    Name: run
    PrependShell: true
  - Key: CONFIGURE_FLAGS
    Name: arg
    Value: '""'
  - Key: CONFIGURE_CMD
    Name: arg
    Value: '"./configure \$CONFIGURE_FLAGS"'
  - CmdLine:
    - "echo \"Configuring Cap'n Proto source ($CONFIGURE_CMD)...\" \t&& cd \"$DL_DIR\"
      && if [ `ls | wc -l` == 1 ]; then cd `ls`; fi \t&& eval \"$CONFIGURE_CMD\""
    Name: run
    PrependShell: true
  - Key: BUILD_FLAGS
    Name: arg
    Value: '"-j6"'
  - Key: BUILD_TARGET
    Name: arg
    Value: '"check"'
  - Key: BUILD_CMD
    Name: arg
    Value: '"make \$BUILD_FLAGS \$BUILD_TARGET"'
  - CmdLine:
    - "echo \"Building Cap'n Proto ($BUILD_CMD)...\" \t&& cd \"$DL_DIR\" && if [ `ls
      | wc -l` == 1 ]; then cd `ls`; fi \t&& eval \"$BUILD_CMD\""
    Name: run
    PrependShell: true
  - Key: INSTALL_FLAGS
    Name: arg
    Value: '""'
  - Key: INSTALL_TARGET
    Name: arg
    Value: '"install"'
  - Key: INSTALL_CMD
    Name: arg
    Value: '"make \$INSTALL_FLAGS \$INSTALL_TARGET"'
  - CmdLine:
    - "echo \"Installing Cap'n Proto ($INSTALL_CMD)...\" \t&& cd \"$DL_DIR\" && if
      [ `ls | wc -l` == 1 ]; then cd `ls`; fi \t&& eval \"$INSTALL_CMD\""
    Name: run
    PrependShell: true
  - CmdLine:
    - "echo \"Cleaning up after Cap'n Proto installation...\" \t&& rm -rf \"$DL_DIR\""
    Name: run
    PrependShell: true
  From:
    Image: alpine:latest
  Name: ""
  Platform: ""
  SourceCode: FROM alpine:latest
