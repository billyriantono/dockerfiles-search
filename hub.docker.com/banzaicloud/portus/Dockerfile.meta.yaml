MetaArgs: null
Stages:
- BaseName: opensuse/ruby:2.6
  Commands:
  - Maintainer: SUSE Containers Team <containers@suse.com>
    Name: maintainer
  - Env:
    - Key: COMPOSE
      Value: "1"
    Name: env
  - Name: expose
    Ports:
    - "3000"
  - Name: workdir
    Path: /srv/Portus
  - Chown: ""
    From: ""
    Name: copy
    SourcesAndDest:
    - Gemfile*
    - ./
  - CmdLine:
    - zypper addrepo https://download.opensuse.org/repositories/devel:languages:go/openSUSE_Leap_15.0/devel:languages:go.repo
      &&     zypper addrepo https://download.opensuse.org/repositories/devel:/tools/openSUSE_Leap_15.0/
      devel:tools &&     zypper --gpg-auto-import-keys ref &&     zypper -n in --no-recommends
      ruby2.6-devel            libmariadb-devel postgresql-devel            nodejs
      libxml2-devel libxslt1 git-core            go1.10 phantomjs gcc-c++ &&     zypper
      -n in --no-recommends -t pattern devel_basis &&     gem install bundler --no-document
      -v 1.17.3 &&     update-alternatives --install /usr/bin/bundle bundle /usr/bin/bundle.ruby2.6
      3 &&     update-alternatives --install /usr/bin/bundler bundler /usr/bin/bundler.ruby2.6
      3 &&     bundle install --retry=3 &&     go get -u github.com/vbatts/git-validation
      &&     go get -u github.com/openSUSE/portusctl &&     mv /root/go/bin/git-validation
      /usr/local/bin/ &&     mv /root/go/bin/portusctl /usr/local/bin/ &&     zypper
      -n rm wicked wicked-service autoconf automake            binutils bison cpp
      flex gdbm-devel gettext-tools            libtool m4 make makeinfo &&     zypper
      clean -a
    Name: run
    PrependShell: true
  - Chown: ""
    Name: add
    SourcesAndDest:
    - .
    - .
  From:
    Image: opensuse/ruby:2.6
  Name: ""
  Platform: ""
  SourceCode: FROM opensuse/ruby:2.6
