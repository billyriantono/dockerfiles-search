MetaArgs: null
Stages:
- BaseName: debian:jessie
  Commands:
  - Maintainer: Joeri Verdeyen <info@jverdeyen.be>
    Name: maintainer
  - Env:
    - Key: SLASHCOMMAND_TOKEN
      Value: '**TOKEN**'
    Name: env
  - Env:
    - Key: WEBHOOK_URL
      Value: '**URL**'
    Name: env
  - CmdLine:
    - apt-get update &&   apt-get install -y   curl   wget   git   php5-cli   php5-curl
    Name: run
    PrependShell: true
  - CmdLine:
    - curl -sS https://getcomposer.org/installer | php -- --install-dir=/usr/local/bin
      --filename=composer &&     echo Europe/Brussels > /etc/timezone && dpkg-reconfigure
      --frontend noninteractive tzdata &&     echo "date.timezone = Europe/Brussels"
      > /etc/php5/cli/conf.d/php.ini &&     mkdir /archibald
    Name: run
    PrependShell: true
  - Chown: ""
    Name: add
    SourcesAndDest:
    - api.php
    - /archibald/
  - Chown: ""
    Name: add
    SourcesAndDest:
    - composer.json
    - /archibald/
  - Chown: ""
    Name: add
    SourcesAndDest:
    - run.sh
    - /archibald/
  - Chown: ""
    Name: add
    SourcesAndDest:
    - src
    - /archibald/src
  - Name: workdir
    Path: /archibald
  - CmdLine:
    - composer install --prefer-source -o
    Name: run
    PrependShell: true
  - CmdLine:
    - chmod +x run.sh
    Name: run
    PrependShell: true
  - Name: expose
    Ports:
    - "80"
  - CmdLine:
    - /archibald/run.sh
    Name: cmd
    PrependShell: false
  From:
    Image: debian:jessie
  Name: ""
  Platform: ""
  SourceCode: FROM debian:jessie
