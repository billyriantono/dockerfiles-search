MetaArgs: null
Stages:
- BaseName: debian:buster-slim
  Commands:
  - Labels:
    - Key: maintainer
      Value: '"goonnowgit <goonnowgittt@gmail.com>"'
    Name: label
  - Env:
    - Key: DEBIAN_FRONTEND
      Value: noninteractive
    - Key: SQUID_CACHE_DIR
      Value: /var/spool/squid
    - Key: SQUID_LOG_DIR
      Value: /var/log/squid
    - Key: SQUID_USER
      Value: proxy
    - Key: SQUID_FINGERPRINT
      Value: CD6DBF8EF3B17D3E
    - Key: SQUID_VERSION
      Value: "4.9"
    - Key: SQUID_ERROR_LANG
      Value: English
    - Key: SQUID_PREFIX
      Value: /usr/local/squid
    Name: env
  - CmdLine:
    - apt update && apt install -y   libnetfilter-conntrack3   libxml2   libecap3   libexpat1   libssl1.1   libgssapi-krb5-2   libltdl7   ca-certificates   --no-install-recommends   &&
      rm -rf /var/lib/apt/lists/*
    Name: run
    PrependShell: true
  - CmdLine:
    - "buildDeps='     gnupg     curl     dirmngr \t' \t&& set -x \t&& apt-get update
      && apt-get install -y $buildDeps --no-install-recommends \t&& rm -rf /var/lib/apt/lists/*
      \  && curl -OL http://www.squid-cache.org/Versions/v4/squid-${SQUID_VERSION}.tar.gz
      \  && curl -OL http://www.squid-cache.org/Versions/v4/squid-${SQUID_VERSION}.tar.gz.asc
      \  && export GNUPGHOME=\"$(mktemp -d)\"   && gpg --no-tty --keyserver hkp://p80.pool.sks-keyservers.net:80
      --recv-keys ${SQUID_FINGERPRINT}   && gpg --verify squid-${SQUID_VERSION}.tar.gz.asc
      \  && rm -rf \"$GNUPGHOME\"   && tar xf squid-${SQUID_VERSION}.tar.gz   && rm
      -rf squid-${SQUID_VERSION}.tar.* \t&& apt-get purge -y --auto-remove $buildDeps"
    Name: run
    PrependShell: true
  - CmdLine:
    - "buildDeps='     build-essential     libcppunit-dev     libssl-dev     libltdl-dev
      \    libcap2-dev     libdb-dev     libecap3-dev     libexpat1-dev     libgnutls28-dev
      \    libkrb5-dev     comerr-dev     libldap2-dev     libnetfilter-conntrack-dev
      \    libpam0g-dev     libsasl2-dev     libxml2-dev     nettle-dev     pkg-config
      \    cdbs     debhelper     lsb-release     ed \t' \t&& set -x \t&& apt-get
      update && apt-get install -y $buildDeps --no-install-recommends \t&& rm -rf
      /var/lib/apt/lists/*   && (         cd squid-${SQUID_VERSION}         && ./configure
      \        --prefix=/usr/local/squid         --datadir=/usr/share/squid         --sysconfdir=/etc/squid
      \        --libexecdir=/usr/lib/squid         --mandir=/usr/share/man         --enable-inline
      \        --disable-arch-native         --enable-async-io=8         --enable-storeio=\"ufs,aufs,diskd,rock\"
      \        --enable-removal-policies=\"lru,heap\"         --enable-delay-pools
      \        --enable-cache-digests         --enable-icap-client         --enable-follow-x-forwarded-for
      \        --enable-auth-basic=\"DB,fake,getpwnam,LDAP,NCSA,NIS,PAM,POP3,RADIUS,SASL\"
      \        --enable-auth-digest=\"file,LDAP\"         --enable-auth-negotiate=\"kerberos,wrapper\"
      \        --enable-external-acl-helpers=\"file_userip,kerberos_ldap_group,LDAP_group,session,SQL_session,time_quota,unix_group,wbinfo_group\"
      \        --enable-security-cert-validators=\"fake\"         --enable-storeid-rewrite-helpers=\"file\"
      \        --enable-url-rewrite-helpers=\"fake\"         --enable-eui         --enable-esi
      \        --enable-icmp         --enable-zph-qos         --enable-ecap         --disable-translation
      \        --with-swapdir=${SQUID_CACHE_DIR}         --with-logdir=${SQUID_LOG_DIR}
      \        --with-pidfile=/var/run/squid.pid         --with-filedescriptors=65536
      \        --with-large-files         --with-default-user=${SQUID_USER}         --with-gnutls
      \        --with-openssl         --enable-ssl-crtd         --enable-linux-netfilter
      \        --enable-err-language=${SQUID_ERROR_LANG}         && make -j $(grep
      -c 'processor' /proc/cpuinfo)         && make install        )     && apt-get
      purge -y --auto-remove $buildDeps     && rm -rf squid*"
    Name: run
    PrependShell: true
  - Chown: ""
    From: ""
    Name: copy
    SourcesAndDest:
    - entrypoint.sh
    - /sbin/entrypoint.sh
  - CmdLine:
    - chmod 755 /sbin/entrypoint.sh
    Name: run
    PrependShell: true
  - Name: expose
    Ports:
    - 3128/tcp
  - CmdLine:
    - /sbin/entrypoint.sh
    Name: entrypoint
    PrependShell: false
  From:
    Image: debian:buster-slim
  Name: ""
  Platform: ""
  SourceCode: FROM debian:buster-slim
