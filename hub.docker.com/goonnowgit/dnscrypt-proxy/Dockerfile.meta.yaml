MetaArgs: null
Stages:
- BaseName: debian:buster-slim
  Commands:
  - Labels:
    - Key: maintainer
      Value: '"goonnowgit <goonnowgittt@gmail.com>"'
    Name: label
  - Env:
    - Key: DEBIAN_FRONTEND
      Value: noninteractive
    - Key: DNSCRYPT_PROXY_VERSION
      Value: 2.0.35
    Name: env
  - CmdLine:
    - apt update && apt install -y   ca-certificates   --no-install-recommends   &&
      rm -rf /var/lib/apt/lists/*
    Name: run
    PrependShell: true
  - CmdLine:
    - "buildDeps='     build-essential     curl     git     cmake     pkg-config     libsodium-dev
      \t' \t&& set -x \t&& apt-get update && apt-get install -y $buildDeps --no-install-recommends
      \t&& rm -rf /var/lib/apt/lists/*   && git clone https://github.com/jedisct1/minisign.git
      \  && (     cd minisign     && mkdir build     && cd build     && cmake ..     &&
      make     && make install   )   && curl -OL https://github.com/jedisct1/dnscrypt-proxy/releases/download/${DNSCRYPT_PROXY_VERSION}/dnscrypt-proxy-linux_x86_64-${DNSCRYPT_PROXY_VERSION}.tar.gz
      \  && curl -OL https://github.com/jedisct1/dnscrypt-proxy/releases/download/${DNSCRYPT_PROXY_VERSION}/dnscrypt-proxy-linux_x86_64-${DNSCRYPT_PROXY_VERSION}.tar.gz.minisig
      \  && minisign/build/minisign -Vm dnscrypt-proxy-*.tar.gz -P RWTk1xXqcTODeYttYMCMLo0YJHaFEHn7a3akqHlb/7QvIQXHVPxKbjB5
      \  && tar xvf dnscrypt-proxy-linux_x86_64-${DNSCRYPT_PROXY_VERSION}.tar.gz -C
      /opt   && rm -rf dnscrypt-proxy-linux_x86_64-${DNSCRYPT_PROXY_VERSION}.tar.*
      \  && rm -rf minisign \t&& apt-get purge -y --auto-remove $buildDeps"
    Name: run
    PrependShell: true
  - Health:
      Test:
      - CMD-SHELL
      - /opt/linux-x86_64/dnscrypt-proxy -resolve www.google.com || exit 1
    Name: healthcheck
  - CmdLine:
    - /opt/linux-x86_64/dnscrypt-proxy
    Name: entrypoint
    PrependShell: false
  - CmdLine:
    - --help
    Name: cmd
    PrependShell: false
  From:
    Image: debian:buster-slim
  Name: ""
  Platform: ""
  SourceCode: FROM debian:buster-slim
