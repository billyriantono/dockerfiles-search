MetaArgs: null
Stages:
- BaseName: php:7.3-cli-stretch
  Commands:
  - CmdLine:
    - apt-get update     && mkdir -p /usr/share/man/man1 /usr/share/man/man7     &&
      apt-get install -y wget gcc cmake g++ make autoconf build-essential python postgresql-client
      mariadb-client libpq-dev zlib1g-dev git unzip libzip-dev
    Name: run
    PrependShell: true
  - CmdLine:
    - docker-php-ext-install bcmath pdo_pgsql pdo_mysql sockets zip pcntl
    Name: run
    PrependShell: true
  - CmdLine:
    - pecl install xdebug     && rm -rf /tmp/pear     && docker-php-ext-enable xdebug
    Name: run
    PrependShell: true
  - CmdLine:
    - pecl install igbinary     && rm -rf /tmp/pear     && docker-php-ext-enable igbinary
    Name: run
    PrependShell: true
  - CmdLine:
    - pecl install mongodb     && rm -rf /tmp/pear     && docker-php-ext-enable mongodb
    Name: run
    PrependShell: true
  - CmdLine:
    - pecl install gender     && rm -rf /tmp/pear     && docker-php-ext-enable gender
    Name: run
    PrependShell: true
  - CmdLine:
    - mkdir -p /tmp/pear     && cd /tmp/pear     && pecl bundle redis     && cd redis     &&
      phpize .     && ./configure --enable-redis-igbinary     && make     && make
      install     && cd ~     && rm -rf /tmp/pear     && docker-php-ext-enable redis
    Name: run
    PrependShell: true
  - CmdLine:
    - "cd /tmp \t&& php -r \"copy('https://getcomposer.org/installer', 'composer-setup.php');\"
      \    && php composer-setup.php --install-dir=/usr/local/bin --filename=composer
      \    && php -r \"unlink('composer-setup.php');\"     && chmod a+x /usr/local/bin/composer"
    Name: run
    PrependShell: true
  - Name: volume
    Volumes:
    - /monitor
  - Chown: ""
    From: ""
    Name: copy
    SourcesAndDest:
    - monitor-wait
    - /bin/monitor-wait
  - Chown: ""
    From: ""
    Name: copy
    SourcesAndDest:
    - monitor-notify
    - /bin/monitor-notify
  - Chown: ""
    From: ""
    Name: copy
    SourcesAndDest:
    - monitor-test
    - /bin/monitor-test
  - CmdLine:
    - chmod a+x /bin/monitor-wait /bin/monitor-notify /bin/monitor-test
    Name: run
    PrependShell: true
  - Chown: ""
    From: ""
    Name: copy
    SourcesAndDest:
    - wait-for-it
    - /bin/wait-for-it
  - CmdLine:
    - chmod a+x /bin/wait-for-it
    Name: run
    PrependShell: true
  - Name: volume
    Volumes:
    - /app
  From:
    Image: php:7.3-cli-stretch
  Name: ""
  Platform: ""
  SourceCode: FROM php:7.3-cli-stretch
