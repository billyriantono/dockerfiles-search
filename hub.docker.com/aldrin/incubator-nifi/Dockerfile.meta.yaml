MetaArgs: null
Stages:
- BaseName: openjdk:8
  Commands:
  - Maintainer: Apache NiFi <dev@nifi.apache.org>
    Name: maintainer
  - Key: UID
    Name: arg
    Value: "1000"
  - Key: GID
    Name: arg
    Value: "50"
  - Key: NIFI_VERSION
    Name: arg
    Value: 1.1.1
  - Env:
    - Key: NIFI_BASE_DIR
      Value: /opt/nifi
    Name: env
  - Env:
    - Key: NIFI_HOME
      Value: $NIFI_BASE_DIR/nifi-$NIFI_VERSION
    Name: env
  - Env:
    - Key: NIFI_BINARY_URL
      Value: https://archive.apache.org/dist/nifi/$NIFI_VERSION/nifi-$NIFI_VERSION-bin.tar.gz
    Name: env
  - CmdLine:
    - 'groupadd -g $GID nifi || groupmod -n nifi `getent group $GID | cut -d: -f1`'
    Name: run
    PrependShell: true
  - CmdLine:
    - useradd --shell /bin/bash -u $UID -g $GID -m nifi
    Name: run
    PrependShell: true
  - CmdLine:
    - mkdir -p $NIFI_HOME
    Name: run
    PrependShell: true
  - CmdLine:
    - "curl -fSL $NIFI_BINARY_URL -o $NIFI_BASE_DIR/nifi-$NIFI_VERSION-bin.tar.gz
      \t&& echo \"$(curl $NIFI_BINARY_URL.sha256) *$NIFI_BASE_DIR/nifi-$NIFI_VERSION-bin.tar.gz\"
      | sha256sum -c - \t&& tar -xvzf $NIFI_BASE_DIR/nifi-$NIFI_VERSION-bin.tar.gz
      -C $NIFI_BASE_DIR \t&& rm $NIFI_BASE_DIR/nifi-$NIFI_VERSION-bin.tar.gz"
    Name: run
    PrependShell: true
  - CmdLine:
    - chown -R nifi:nifi $NIFI_HOME
    Name: run
    PrependShell: true
  - Name: expose
    Ports:
    - "8080"
  - Name: expose
    Ports:
    - "8181"
  - Name: user
    User: nifi
  - CmdLine:
    - $NIFI_HOME/bin/nifi.sh run
    Name: cmd
    PrependShell: true
  From:
    Image: openjdk:8
  Name: ""
  Platform: ""
  SourceCode: FROM openjdk:8
