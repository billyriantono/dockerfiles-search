MetaArgs: null
Stages:
- BaseName: avikdatta/basejupyterdockerimage
  Commands:
  - Labels:
    - Key: MAINTAINER
      Value: reach4avik@yahoo.com
    Name: label
  - Env:
    - Key: NB_USER
      Value: vmuser
    Name: env
  - Name: user
    User: root
  - Name: workdir
    Path: /root/
  - CmdLine:
    - mkdir -p /home/$NB_USER/tmp
    Name: run
    PrependShell: true
  - CmdLine:
    - apt-get update &&     apt-get install --no-install-recommends -y     openjdk-8-jre-headless     ca-certificates-java     screen     netcat     unzip     libatlas-base-dev     gfortran                   sqlite3                    libhdf5-serial-dev         g++     liblz4-dev     libigraph0-dev  &&     apt-get
      purge -y --auto-remove  &&     apt-get clean &&     rm -rf /var/lib/apt/lists/*
    Name: run
    PrependShell: true
  - CmdLine:
    - rm -rf /home/$NB_USER/tmp
    Name: run
    PrependShell: true
  - Env:
    - Key: TINI_VERSION
      Value: v0.18.0
    Name: env
  - CmdLine:
    - wget --quiet  https://github.com/krallin/tini/releases/download/${TINI_VERSION}/tini
      &&     mv tini /usr/local/bin/tini &&     chmod +x /usr/local/bin/tini
    Name: run
    PrependShell: true
  - Name: user
    User: $NB_USER
  - Name: workdir
    Path: /home/$NB_USER
  - Chown: ""
    From: ""
    Name: copy
    SourcesAndDest:
    - environment.yml
    - /home/$NB_USER/environment.yml
  - Env:
    - Key: PATH
      Value: $PATH:/home/$NB_USER/miniconda3/bin/
    Name: env
  - CmdLine:
    - conda env create -q --file /home/$NB_USER/environment.yml
    Name: run
    PrependShell: true
  - CmdLine:
    - echo "source deactivate" >> ~/.bashrc &&     echo "source activate pipeline-env"
      >> ~/.bashrc &&     conda clean -i -t -q -y &&     rm -rf /home/$NB_USER/.cache
      &&     rm -rf /home/$NB_USER/tmp &&     mkdir -p /home/$NB_USER/tmp &&     mkdir
      -p /home/$NB_USER/.cache
    Name: run
    PrependShell: true
  - Name: expose
    Ports:
    - "8887"
  - Name: expose
    Ports:
    - "4040"
  - Chown: ""
    From: ""
    Name: copy
    SourcesAndDest:
    - entrypoint.sh
    - /home/$NB_USER/entrypoint.sh
  - CmdLine:
    - /usr/local/bin/tini
    - --
    Name: entrypoint
    PrependShell: false
  - CmdLine:
    - source ~/.bashrc && bash /home/vmuser/entrypoint.sh notebook
    Name: cmd
    PrependShell: false
  From:
    Image: avikdatta/basejupyterdockerimage
  Name: ""
  Platform: ""
  SourceCode: FROM avikdatta/basejupyterdockerimage
