MetaArgs: null
Stages:
- BaseName: khirin/tomcat
  Commands:
  - Env:
    - Key: MAX_MEM
      Value: '"640"'
    Name: env
  - Env:
    - Key: JAVA_OPTS
      Value: '"-Xmx${MAX_MEM}m -Dsubsonic.host=0.0.0.0 -Dsubsonic.contextPath=/subsonic
        -Dsubsonic.home=/data -Dsubsonic.defaultMusicFolder=/music/1_CURRENT -Dsubsonic.defaultPodcastFolder=/podcasts/
        -Dsubsonic.defaultPlaylistFolder=/playlists/ -Djava.awt.headless=true"'
    Name: env
  - Labels:
    - Key: maintainer
      Value: '"khirin"'
    - Key: name
      Value: '"Subsonic Image"'
    - Key: subsonic_version
      Value: '"6.0"'
    - Key: date
      Value: '"20170307"'
    - Key: image_version
      Value: '"1.5"'
    Name: label
  - Chown: ""
    From: ""
    Name: copy
    SourcesAndDest:
    - sources/subsonic_6.0.war
    - sources/init.sh
    - /tmp/
  - Name: user
    User: root
  - CmdLine:
    - "addgroup -g 1111 friends \t&& sed -i 's/friends.*/&tomcat/' /etc/group \t&&
      mv /tmp/subsonic_6.0.war ${CATALINA_HOME}/webapps/subsonic.war \t&& /tmp/init.sh"
    Name: run
    PrependShell: true
  - Name: volume
    Volumes:
    - /data
    - /music
    - /playlists
    - /podcasts
  - Name: user
    User: tomcat
  From:
    Image: khirin/tomcat
  Name: ""
  Platform: ""
  SourceCode: FROM khirin/tomcat
