MetaArgs: null
Stages:
- BaseName: khirin/debian
  Commands:
  - Key: UID
    Name: arg
    Value: '"2000"'
  - Key: GID
    Name: arg
    Value: '"2000"'
  - Key: PORT
    Name: arg
    Value: '"4822"'
  - Env:
    - Key: PORT
      Value: ${PORT}
    Name: env
  - Labels:
    - Key: maintainer
      Value: '"khirin"'
    - Key: name
      Value: '"Guacamole-server Image"'
    - Key: guacamole_version
      Value: '"0.9.12"'
    - Key: date
      Value: '"20170506"'
    - Key: image_version
      Value: '"1.0"'
    - Key: user
      Value: '"guacamole"'
    - Key: uid
      Value: ${UID}
    - Key: group
      Value: '"guacamole"'
    - Key: gid
      Value: ${GID}
    Name: label
  - Chown: ""
    From: ""
    Name: copy
    SourcesAndDest:
    - sources/guacamole-server-0.9.12-incubating.tar.gz
    - /tmp/
  - CmdLine:
    - "addgroup --gid ${GID} guacamole \t&& adduser --gid ${GID} --disabled-password
      --gecos \"Guacamole User\" --shell /bin/bash -u ${UID} guacamole \t&& cd /tmp
      \t&& apt-get install -y \tlibcairo2-dev \t\t\t\tlibjpeg62-turbo-dev \t\t\t\tlibpng12-dev
      \t\t\t\tlibossp-uuid-dev \t\t\t\tlibavcodec-dev \t\t\t\tlibavutil-dev \t\t\t\tlibswscale-dev
      \t\t\t\tlibfreerdp-dev \t\t\t\tlibpango1.0-dev \t\t\t\tlibssh2-1-dev \t\t\t\tlibtelnet-dev
      \t\t\t\tlibvncserver-dev \t\t\t\tlibpulse-dev \t\t\t\tlibssl-dev \t\t\t\tlibvorbis-dev
      \t\t\t\tlibwebp-dev \t&& apt-get install -y gcc g++ make libtool \t&& tar -xf
      guacamole-server-0.9.12-incubating.tar.gz \t&& cd guacamole-server-*-incubating
      \t&& ./configure \t&& make \t&& make install \t&& ldconfig \t&& cd /tmp \t&&
      rm -rf /tmp/* \t&& apt-get purge -y gcc g++ make libtool \t&& apt-get clean"
    Name: run
    PrependShell: true
  - Name: expose
    Ports:
    - ${PORT}
  - Name: user
    User: guacamole
  - CmdLine:
    - /usr/local/sbin/guacd -f -b "0.0.0.0" -l ${PORT}
    Name: entrypoint
    PrependShell: true
  From:
    Image: khirin/debian
  Name: ""
  Platform: ""
  SourceCode: FROM khirin/debian
