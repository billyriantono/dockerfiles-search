MetaArgs:
- DefaultValue: itbh/kompetenzcheck-docker-base:latest
  Key: BASE_IMAGE
  ProvidedValue: null
  Value: itbh/kompetenzcheck-docker-base:latest
Stages:
- BaseName: ${BASE_IMAGE}
  Commands:
  - Name: workdir
    Path: /var/www/html
  - Chown: ""
    From: ""
    Name: copy
    SourcesAndDest:
    - .
    - /var/www/html
  - CmdLine:
    - chmod +x /var/www/html/entrypoint.sh
    Name: run
    PrependShell: true
  - CmdLine:
    - chmod +x /var/www/html/wait-for-it.sh
    Name: run
    PrependShell: true
  - CmdLine:
    - "npm install \t&& npm run dev \t&& npm cache clean \t&& composer install"
    Name: run
    PrependShell: true
  - CmdLine:
    - chown -R www-data:www-data /var/www/html
    Name: run
    PrependShell: true
  - CmdLine:
    - usermod -aG tty www-data
    Name: run
    PrependShell: true
  - Name: expose
    Ports:
    - "80"
  - CmdLine:
    - /var/www/html/entrypoint.sh
    Name: entrypoint
    PrependShell: true
  From:
    Image: ${BASE_IMAGE}
  Name: ""
  Platform: ""
  SourceCode: FROM ${BASE_IMAGE}
