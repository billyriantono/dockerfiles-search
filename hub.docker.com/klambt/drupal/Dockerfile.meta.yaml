MetaArgs: null
Stages:
- BaseName: klambt/webserver:latest
  Commands:
  - Maintainer: Tim Weyand <tim.weyand@klambt.de>
    Name: maintainer
  - Env:
    - Key: UPDATE_DEBIAN
      Value: "1"
    Name: env
  - Env:
    - Key: INSTALL_DRUSH
      Value: "1"
    Name: env
  - Env:
    - Key: INSTALL_DRUPAL
      Value: "1"
    Name: env
  - Env:
    - Key: INSTALL_COMPOSER
      Value: "1"
    Name: env
  - Env:
    - Key: MYSQL_DATABASE
      Value: drupal
    Name: env
  - Env:
    - Key: MYSQL_USER
      Value: drupal
    Name: env
  - Env:
    - Key: MYSQL_PASSWORD
      Value: drupal
    Name: env
  - Env:
    - Key: MYSQL_PORT
      Value: "3306"
    Name: env
  - Env:
    - Key: MYSQL_LINK
      Value: database_server
    Name: env
  - Env:
    - Key: DRUPAL_USERNAME
      Value: admin
    Name: env
  - Env:
    - Key: DRUPAL_USER_PASSWORD
      Value: "0"
    Name: env
  - Env:
    - Key: DRUPAL_USER_MAIL
      Value: webmaster@domain.tld
    Name: env
  - Env:
    - Key: DRUPAL_SITE_MAIL
      Value: webmaster@domain.tld
    Name: env
  - Env:
    - Key: DRUPAL_MEMCACHE_SERVER
      Value: "0"
    Name: env
  - Env:
    - Key: DRUPAL_VARNISH_SERVER
      Value: "0"
    Name: env
  - Env:
    - Key: DRUPAL_VARNISH_KEY
      Value: xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxxx
    Name: env
  - Env:
    - Key: DRUPAL_INSTALL_MODULES
      Value: "0"
    Name: env
  - Env:
    - Key: DEBIAN_INSTALL_PACKAGES
      Value: "0"
    Name: env
  - Env:
    - Key: GIT_PULL_CUSTOM
      Value: "0"
    Name: env
  - Env:
    - Key: GIT_CUSTOM_SOURCES_SERVER
      Value: github.com
    Name: env
  - Env:
    - Key: GIT_CUSTOM_SOURCES_REPOS
      Value: "0"
    Name: env
  - Env:
    - Key: GIT_USERNAME
      Value: "0"
    Name: env
  - Env:
    - Key: GIT_PASSWORD
      Value: "0"
    Name: env
  - Env:
    - Key: GIT_CUSTOM_MODULES_PATH
      Value: "0"
    Name: env
  - Env:
    - Key: GIT_CUSTOM_THEMES_PATH
      Value: "0"
    Name: env
  - Chown: ""
    From: ""
    Name: copy
    SourcesAndDest:
    - ./scripts/*
    - /usr/local/bin/
  - CmdLine:
    - chmod +x /usr/local/bin/klambt_docker_*.sh  && /usr/local/bin/klambt_docker_update_debian.sh  &&
      /usr/local/bin/klambt_docker_install_drush.sh  && /usr/local/bin/klambt_docker_install_drupal.sh
      drupal-8 CMD ["/usr/local/bin/klambt_docker_drupal_start-8.sh"]
    Name: run
    PrependShell: true
  From:
    Image: klambt/webserver:latest
  Name: ""
  Platform: ""
  SourceCode: FROM klambt/webserver:latest
