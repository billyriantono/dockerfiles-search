MetaArgs: null
Stages:
- BaseName: docker.elastic.co/elasticsearch/elasticsearch:5.3.0
  Commands:
  - Name: user
    User: root
  - Chown: ""
    Name: add
    SourcesAndDest:
    - elasticsearch.yml
    - /usr/share/elasticsearch/config/
  - Chown: ""
    Name: add
    SourcesAndDest:
    - java.policy
    - /usr/lib/jvm/java-1.8-openjdk/jre/lib/security/java.policy
  - Chown: ""
    Name: add
    SourcesAndDest:
    - elasticsearch.yml
    - /usr/share/elasticsearch
  - Chown: ""
    Name: add
    SourcesAndDest:
    - couchbase_template.json
    - /elasticsearch/couchbase_template.json
  - CmdLine:
    - chown elasticsearch.elasticsearch /usr/share/elasticsearch/data
    Name: run
    PrependShell: true
  - CmdLine:
    - chown elasticsearch:elasticsearch config/elasticsearch.yml
    Name: run
    PrependShell: true
  - CmdLine:
    - chown elasticsearch:elasticsearch /usr/lib/jvm/java-1.8-openjdk/jre/lib/security/java.policy
    Name: run
    PrependShell: true
  - CmdLine:
    - chown elasticsearch.elasticsearch /usr/share/elasticsearch/data
    Name: run
    PrependShell: true
  - CmdLine:
    - rm -f /var/run/elasticsearch/elasticsearch.pid
    Name: run
    PrependShell: true
  - CmdLine:
    - /usr/share/elasticsearch/bin/elasticsearch-plugin
    - install
    - https://github.com/couchbaselabs/elasticsearch-transport-couchbase/releases/download/2.5.3.0/elasticsearch-transport-couchbase-2.5.3.0.zip
    Name: run
    PrependShell: false
  - Chown: ""
    Name: add
    SourcesAndDest:
    - ./init.sh
    - /usr/local/bin/init.sh
  - CmdLine:
    - chmod +x /usr/local/bin/init.sh
    Name: run
    PrependShell: true
  - Name: user
    User: elasticsearch
  - Name: expose
    Ports:
    - "9091"
    - "9200"
    - "9300"
  - CmdLine:
    - /usr/local/bin/init.sh
    Name: cmd
    PrependShell: false
  From:
    Image: docker.elastic.co/elasticsearch/elasticsearch:5.3.0
  Name: ""
  Platform: ""
  SourceCode: FROM docker.elastic.co/elasticsearch/elasticsearch:5.3.0
