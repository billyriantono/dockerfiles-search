MetaArgs: null
Stages:
- BaseName: openshift/base-centos7
  Commands:
  - CmdLine:
    - yum -y --setopt=tsflags=nodocs install wget openssl &&     wget https://www.collaboraoffice.com/repos/CollaboraOnline/CODE-centos7/repodata/repomd.xml.key
      &&     rpm --import repomd.xml.key &&     yum-config-manager --add-repo https://www.collaboraoffice.com/repos/CollaboraOnline/CODE-centos7
      &&     yum -y --setopt=tsflags=nodocs --nogpgcheck install loolwsd CODE-brand
      &&     wget -O /usr/local/sbin/dumb-init https://github.com/Yelp/dumb-init/releases/download/v1.2.0/dumb-init_1.2.0_amd64
      &&     chmod +x /usr/local/sbin/dumb-init &&     curl https://raw.githubusercontent.com/appuio/libmapuid/master/lib/libmapuid.so
      -o /usr/local/lib/libmapuid.so &&     chmod 755 /usr/local/lib/libmapuid.so
      &&     echo "/usr/local/lib/libmapuid.so" > /etc/ld.so.preload
    Name: run
    PrependShell: true
  - CmdLine:
    - mkdir /home/lool &&     directories="/home/lool /etc/loolwsd /var/cache/loolwsd
      /opt/lool" &&     chgrp -R 0 $directories &&     chmod -R g=u $directories
    Name: run
    PrependShell: true
  - Chown: ""
    Name: add
    SourcesAndDest:
    - entrypoint.sh
    - /
  - Chown: ""
    From: ""
    Name: copy
    SourcesAndDest:
    - loolwsd.xml
    - /etc/loolwsd/loolwsd.xml
  - Name: user
    User: "1001"
  - Name: expose
    Ports:
    - "9980"
  - CmdLine:
    - dumb-init
    - /entrypoint.sh
    Name: entrypoint
    PrependShell: false
  - CmdLine:
    - loolwsd
    Name: cmd
    PrependShell: false
  From:
    Image: openshift/base-centos7
  Name: ""
  Platform: ""
  SourceCode: FROM openshift/base-centos7
