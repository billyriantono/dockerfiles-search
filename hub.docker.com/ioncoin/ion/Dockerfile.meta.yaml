MetaArgs: null
Stages:
- BaseName: ubuntu:bionic
  Commands:
  - CmdLine:
    - apt-get update
    Name: run
    PrependShell: true
  - CmdLine:
    - apt-get update && apt-get install -y git
    Name: run
    PrependShell: true
  - CmdLine:
    - apt-get update && apt-get install -y g++
    Name: run
    PrependShell: true
  - CmdLine:
    - apt-get update && apt-get install -y autotools-dev libtool m4 automake autoconf
      pkg-config
    Name: run
    PrependShell: true
  - CmdLine:
    - apt-get update && apt-get install -y zlib1g-dev libssl1.0-dev curl ccache bsdmainutils
      cmake
    Name: run
    PrependShell: true
  - CmdLine:
    - apt-get update && apt-get install -y python3 python3-dev
    Name: run
    PrependShell: true
  - CmdLine:
    - apt-get update && apt-get install -y python3-pip
    Name: run
    PrependShell: true
  - CmdLine:
    - 'pip3 install pyzmq # really needed?'
    Name: run
    PrependShell: true
  - CmdLine:
    - pip3 install jinja2
    Name: run
    PrependShell: true
  - CmdLine:
    - git clone https://github.com/dashpay/dash_hash ion_hash
    Name: run
    PrependShell: true
  - CmdLine:
    - cd ion_hash && python3 setup.py install
    Name: run
    PrependShell: true
  - Key: USER_ID
    Name: arg
    Value: "1000"
  - Key: GROUP_ID
    Name: arg
    Value: "1000"
  - Env:
    - Key: USER_ID
      Value: ${USER_ID}
    Name: env
  - Env:
    - Key: GROUP_ID
      Value: ${GROUP_ID}
    Name: env
  - CmdLine:
    - groupadd -g ${GROUP_ID} ion
    Name: run
    PrependShell: true
  - CmdLine:
    - useradd -u ${USER_ID} -g ion -s /bin/bash -m -d /ion ion
    Name: run
    PrependShell: true
  - Key: BUILD_TARGET
    Name: arg
    Value: linux64
  - Chown: ""
    Name: add
    SourcesAndDest:
    - ci/matrix.sh
    - /tmp/matrix.sh
  - CmdLine:
    - . /tmp/matrix.sh &&   if [ -n "$DPKG_ADD_ARCH" ]; then dpkg --add-architecture
      "$DPKG_ADD_ARCH" ; fi &&   if [ -n "$PACKAGES" ]; then apt-get update && apt-get
      install -y --no-install-recommends --no-upgrade $PACKAGES; fi
    Name: run
    PrependShell: true
  - CmdLine:
    - update-alternatives --set i686-w64-mingw32-gcc /usr/bin/i686-w64-mingw32-gcc-posix;   update-alternatives
      --set i686-w64-mingw32-g++  /usr/bin/i686-w64-mingw32-g++-posix;   update-alternatives
      --set x86_64-w64-mingw32-gcc  /usr/bin/x86_64-w64-mingw32-gcc-posix;   update-alternatives
      --set x86_64-w64-mingw32-g++  /usr/bin/x86_64-w64-mingw32-g++-posix;   exit
      0
    Name: run
    PrependShell: true
  - CmdLine:
    - mkdir /ion-src &&   mkdir -p /cache/ccache &&   mkdir /cache/depends &&   mkdir
      /cache/sdk-sources &&   chown $USER_ID:$GROUP_ID /ion-src &&   chown $USER_ID:$GROUP_ID
      /cache &&   chown $USER_ID:$GROUP_ID /cache -R
    Name: run
    PrependShell: true
  - Name: workdir
    Path: /ion-src
  - Name: user
    User: ion
  From:
    Image: ubuntu:bionic
  Name: ""
  Platform: ""
  SourceCode: FROM ubuntu:bionic
