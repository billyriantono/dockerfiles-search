MetaArgs: null
Stages:
- BaseName: gliderlabs/alpine:latest
  Commands:
  - Env:
    - Key: PACKAGES
      Value: build-base git libcrypto1.0 py-pip python ruby ruby-bundler ruby-dev
        ruby-json ruby-libs ruby-io-console ruby-bigdecimal tini
    Name: env
  - Env:
    - Key: PACKAGES_CLEANUP
      Value: build-base git py-pip py-setuptools
    Name: env
  - Env:
    - Key: GEM_HOME
      Value: /usr/local/bundle
    Name: env
  - Env:
    - Key: BUNDLE_PATH
      Value: '"$GEM_HOME"'
    - Key: BUNDLE_BIN
      Value: '"$GEM_HOME/bin"'
    - Key: BUNDLE_SILENCE_ROOT_WARNING
      Value: "1"
    - Key: BUNDLE_APP_CONFIG
      Value: '"$GEM_HOME"'
    Name: env
  - Env:
    - Key: PATH
      Value: $BUNDLE_BIN:$PATH
    Name: env
  - Chown: ""
    From: ""
    Name: copy
    SourcesAndDest:
    - Gemfile
    - /
  - CmdLine:
    - 'mkdir -p "$GEM_HOME" "$BUNDLE_BIN" &&     chmod 755 "$GEM_HOME" "$BUNDLE_BIN"
      &&     echo "http://dl-1.alpinelinux.org/alpine/edge/community" >> /etc/apk/repositories
      &&     echo "http://dl-2.alpinelinux.org/alpine/edge/community" >> /etc/apk/repositories
      &&     echo "http://dl-3.alpinelinux.org/alpine/edge/community" >> /etc/apk/repositories
      &&     echo "http://dl-4.alpinelinux.org/alpine/edge/community" >> /etc/apk/repositories
      &&     echo "http://dl-5.alpinelinux.org/alpine/edge/community" >> /etc/apk/repositories
      &&     apk --update --no-cache add ${PACKAGES} &&     pip install awscli &&     echo
      ''gem: --no-rdoc --no-ri'' >> "${HOME}/.gemrc" &&     bundle install &&     apk
      --purge -v del ${PACKAGES_CLEANUP} &&     rm -vfr /usr/share/ri &&     rm /var/cache/apk/*
      &&     mkdir -p /messages/sns &&     chown -R nobody:nobody /messages/sns/'
    Name: run
    PrependShell: true
  - Name: volume
    Volumes:
    - /messages/sns
  - Name: expose
    Ports:
    - "9292"
  - CmdLine:
    - tini
    - --
    Name: entrypoint
    PrependShell: false
  - Name: user
    User: nobody
  - CmdLine:
    - fake_sns --bind 0.0.0.0 --database=/messages/sns/database.yml --port 9292 --server
      thin
    Name: cmd
    PrependShell: true
  From:
    Image: gliderlabs/alpine:latest
  Name: ""
  Platform: ""
  SourceCode: FROM gliderlabs/alpine:latest
