MetaArgs: null
Stages:
- BaseName: alpine:3.6
  Commands:
  - CmdLine:
    - apk add --no-cache --update attr bash openssh-server shadow rsync supervisor
      python py-requests py-dateutil &&     useradd -d /home/backup -s /bin/bash backup
      &&    usermod -p '*' backup &&     usermod -p '*' root
    Name: run
    PrependShell: true
  - Chown: ""
    Name: add
    SourcesAndDest:
    - docker-entrypoint.sh
    - /usr/local/bin/docker-entrypoint.sh
  - Chown: ""
    Name: add
    SourcesAndDest:
    - backup_shell.sh
    - /usr/local/bin/backup_shell.sh
  - Chown: ""
    Name: add
    SourcesAndDest:
    - check_backup.py
    - /usr/local/bin/check_backup.py
  - Chown: ""
    Name: add
    SourcesAndDest:
    - cleanup_backups.py
    - /usr/local/bin/cleanup_backups.py
  - Chown: ""
    Name: add
    SourcesAndDest:
    - supervisord.conf
    - /etc/supervisord.conf
  - Name: volume
    Volumes:
    - /data
  - Name: expose
    Ports:
    - "22"
  - Env:
    - Key: BACKUP_DIR
      Value: /data/backup
    - Key: BACKUP_KEEP_INTERVALS
      Value: '"1h 12h 1d 2d 3d 4d 5d 6d 7d 9d 11d 14d 21d 28d 35d"'
    - Key: BACKUP_DELETE_SCHEDULE
      Value: '"07:00"'
    Name: env
  - CmdLine:
    - /usr/local/bin/docker-entrypoint.sh
    Name: cmd
    PrependShell: true
  From:
    Image: alpine:3.6
  Name: ""
  Platform: ""
  SourceCode: FROM alpine:3.6
