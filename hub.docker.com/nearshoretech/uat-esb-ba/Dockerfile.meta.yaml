MetaArgs: null
Stages:
- BaseName: ubuntu:18.04
  Commands:
  - Maintainer: WSO2 Docker Maintainers "dev@wso2.org"
    Name: maintainer
  - Key: USER
    Name: arg
    Value: wso2carbon
  - Key: USER_ID
    Name: arg
    Value: "802"
  - Key: USER_GROUP
    Name: arg
    Value: wso2
  - Key: USER_GROUP_ID
    Name: arg
    Value: "802"
  - Key: USER_HOME
    Name: arg
    Value: /home/${USER}
  - Key: DOWNLOAD_URL
    Name: arg
    Value: https://s3-us-west-2.amazonaws.com/nst-itsol/esb-6-4-0
  - Key: FILES
    Name: arg
    Value: /home/${USER}/files
  - Key: JDK
    Name: arg
    Value: jdk1.8.0*
  - Key: JAVA_HOME
    Name: arg
    Value: ${USER_HOME}/java
  - Key: WSO2_SERVER
    Name: arg
    Value: wso2ei
  - Key: WSO2_SERVER_VERSION
    Name: arg
    Value: 6.4.0
  - Key: WSO2_SERVER_PACK
    Name: arg
    Value: ${WSO2_SERVER}-${WSO2_SERVER_VERSION}
  - Key: WSO2_SERVER_HOME
    Name: arg
    Value: ${USER_HOME}/${WSO2_SERVER_PACK}
  - Key: MOTD
    Name: arg
    Value: '"\nWelcome to WSO2 Docker resources.\n------------------------------------
      \nThis Docker container comprises of a WSO2 product, running with its latest
      GA release \nwhich is under the Apache License, Version 2.0. \nRead more about
      Apache License, Version 2.0 here @ http://www.apache.org/licenses/LICENSE-2.0.\n"'
  - CmdLine:
    - apt-get update &&     DEBIAN_FRONTEND=noninteractive apt-get install -y --no-install-recommends     curl     unzip     netcat
      &&     rm -rf /var/lib/apt/lists/* &&     echo '[ ! -z "$TERM" -a -r /etc/motd
      ] && cat /etc/motd'     >> /etc/bash.bashrc     ; echo "$MOTD" > /etc/motd
    Name: run
    PrependShell: true
  - CmdLine:
    - groupadd --system -g ${USER_GROUP_ID} ${USER_GROUP} &&     useradd --system
      --create-home --home-dir ${USER_HOME} --no-log-init -g ${USER_GROUP_ID} -u ${USER_ID}
      ${USER} &&     mkdir ${FILES}
    Name: run
    PrependShell: true
  - Chown: wso2carbon:wso2
    Name: add
    SourcesAndDest:
    - ${DOWNLOAD_URL}/wso2ei-6.4.0.zip
    - ${FILES}
  - Chown: wso2carbon:wso2
    Name: add
    SourcesAndDest:
    - ${DOWNLOAD_URL}/jdk-8u192-linux-x64.tar.gz
    - ${FILES}
  - Chown: wso2carbon:wso2
    Name: add
    SourcesAndDest:
    - ${DOWNLOAD_URL}/mysql-connector-java-5.1.45-bin.jar
    - ${FILES}
  - Chown: wso2carbon:wso2
    Name: add
    SourcesAndDest:
    - ${DOWNLOAD_URL}/mssql-jdbc-6.4.0.jre8.jar
    - ${FILES}
  - CmdLine:
    - tar -zxvf ${FILES}/jdk-8u192-linux-x64.tar.gz -C ${FILES}
    Name: run
    PrependShell: true
  - CmdLine:
    - mv ${FILES}/jdk1.8.0_192 ${JAVA_HOME}
    Name: run
    PrependShell: true
  - CmdLine:
    - unzip ${FILES}/wso2ei-6.4.0.zip -d ${USER_HOME}
    Name: run
    PrependShell: true
  - CmdLine:
    - mv ${FILES}/mysql-connector-java-5.1.45-bin.jar ${WSO2_SERVER_HOME}/lib
    Name: run
    PrependShell: true
  - CmdLine:
    - mv ${FILES}/mssql-jdbc-6.4.0.jre8.jar ${WSO2_SERVER_HOME}/lib
    Name: run
    PrependShell: true
  - CmdLine:
    - chown -R wso2carbon:wso2 ${JAVA_HOME}
    Name: run
    PrependShell: true
  - CmdLine:
    - chown -R wso2carbon:wso2 ${WSO2_SERVER_HOME}
    Name: run
    PrependShell: true
  - CmdLine:
    - rm -vR ${FILES}
    Name: run
    PrependShell: true
  - Name: user
    User: ${USER}
  - Name: workdir
    Path: ${USER_HOME}
  - Env:
    - Key: JAVA_HOME
      Value: ${JAVA_HOME}
    - Key: PATH
      Value: $JAVA_HOME/bin:$PATH
    - Key: WSO2_SERVER_HOME
      Value: ${WSO2_SERVER_HOME}
    - Key: WORKING_DIRECTORY
      Value: ${USER_HOME}
    Name: env
  From:
    Image: ubuntu:18.04
  Name: ""
  Platform: ""
  SourceCode: FROM ubuntu:18.04
