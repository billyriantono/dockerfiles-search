MetaArgs: null
Stages:
- BaseName: ubuntu:18.04
  Commands:
  - Labels:
    - Key: maintainer
      Value: '"Andriy Khavryuchenko <akhavr@khavr.com>"'
    Name: label
  - Env:
    - Key: LANG
      Value: '"en_US.UTF-8"'
    - Key: LANGUAGE
      Value: '"en_US.UTF-8"'
    - Key: LC_ALL
      Value: '"en_US.UTF-8"'
    Name: env
  - Env:
    - Key: OPTDIR
      Value: '"/opt"'
    Name: env
  - Env:
    - Key: ANDROID_NDK_HOME
      Value: '"${OPTDIR}/android-ndk"'
    Name: env
  - Env:
    - Key: ANDROID_NDK_VERSION
      Value: '"17c"'
    Name: env
  - Env:
    - Key: ANDROID_NDK_HOME_V
      Value: '"${ANDROID_NDK_HOME}-r${ANDROID_NDK_VERSION}"'
    Name: env
  - Env:
    - Key: ANDROID_NDK_ARCHIVE
      Value: '"android-ndk-r${ANDROID_NDK_VERSION}-linux-x86_64.zip"'
    Name: env
  - Env:
    - Key: ANDROID_NDK_DL_URL
      Value: '"https://dl.google.com/android/repository/${ANDROID_NDK_ARCHIVE}"'
    Name: env
  - Env:
    - Key: ANDROID_SDK_HOME
      Value: '"${OPTDIR}/android-sdk"'
    Name: env
  - Env:
    - Key: ANDROID_SDK_TOOLS_VERSION
      Value: '"4333796"'
    Name: env
  - Env:
    - Key: ANDROID_SDK_BUILD_TOOLS_VERSION
      Value: '"28.0.3"'
    Name: env
  - Env:
    - Key: ANDROID_SDK_TOOLS_ARCHIVE
      Value: '"sdk-tools-linux-${ANDROID_SDK_TOOLS_VERSION}.zip"'
    Name: env
  - Env:
    - Key: ANDROID_SDK_TOOLS_DL_URL
      Value: '"https://dl.google.com/android/repository/${ANDROID_SDK_TOOLS_ARCHIVE}"'
    Name: env
  - Env:
    - Key: USE_SDK_WRAPPER
      Value: "1"
    Name: env
  - Env:
    - Key: GRADLE_OPTS
      Value: '"-Xmx1536M -Dorg.gradle.jvmargs=''-Xmx1536M''"'
    Name: env
  - Env:
    - Key: USER
      Value: '"buildozer"'
    Name: env
  - Env:
    - Key: HOMEDIR
      Value: '"/home/${USER}"'
    Name: env
  - Env:
    - Key: WORKDIR
      Value: '"${HOMEDIR}/build"'
    - Key: PATH
      Value: '"${HOMEDIR}/.local/bin:${PATH}"'
    Name: env
  - CmdLine:
    - dpkg --add-architecture i386     && apt-get update     && apt-get install -y
      --no-install-recommends         software-properties-common     && add-apt-repository
      ppa:kivy-team/kivy     && apt-get update     && apt-get install -y --no-install-recommends         software-properties-common         language-pack-en
      build-essential ccache git         libncurses5:i386 libstdc++6:i386 libgtk2.0-0:i386         libpangox-1.0-0:i386
      libpangoxft-1.0-0:i386 libidn11:i386         openjdk-8-jdk unzip zlib1g-dev
      zlib1g:i386 zip sudo         python3-dev python3-kivy lbzip2         wget curl
      ca-certificates patch vim less autoconf automake libtool         libffi-dev
      cmake gettext libltdl-dev pkg-config         locales         ffmpeg         libsdl2-dev         libsdl2-image-dev         libsdl2-mixer-dev         libsdl2-ttf-dev         libportmidi-dev         libswscale-dev         libavformat-dev         libavcodec-dev         libgmp-dev     &&
      locale-gen en_US.UTF-8     && rm -rf /var/lib/apt/lists/*
    Name: run
    PrependShell: true
  - CmdLine:
    - wget https://bootstrap.pypa.io/get-pip.py && python3 get-pip.py     && pip3
      install --upgrade setuptools cython==0.29.9 image
    Name: run
    PrependShell: true
  - CmdLine:
    - git config --global user.email "buildozer@example.com"     && git config --global
      user.name "Buildozer"
    Name: run
    PrependShell: true
  - CmdLine:
    - adduser --disabled-password --gecos '' ${USER}     && mkdir /home/buildozer/build     &&
      chown ${USER}.${USER} ${WORKDIR}
    Name: run
    PrependShell: true
  - CmdLine:
    - usermod -append --groups sudo ${USER}
    Name: run
    PrependShell: true
  - CmdLine:
    - 'echo "%sudo ALL=(ALL) NOPASSWD: ALL" >> /etc/sudoers'
    Name: run
    PrependShell: true
  - CmdLine:
    - cd ${OPTDIR}     && git clone https://github.com/kivy/python-for-android     &&
      cd python-for-android     && git remote add sombernight         https://github.com/SomberNight/python-for-android     &&
      git fetch --all     && git checkout ccb0f8e1bab36f1b7d1508216b4b4afb076e614f     &&
      git cherry-pick d7f722e4e5d4b3e6f5b1733c95e6a433f78ee570     && git cherry-pick
      ed20e196fbcdce718a180f88f23bb2d165c4c5d8     && python3 -m pip install -e .     &&
      cd ${OPTDIR}     && git clone https://github.com/kivy/buildozer     && cd buildozer     &&
      git checkout 678b1bf52cf63daa51b06e86a43ea4e2ea8a0b24     && python3 -m pip
      install -e .
    Name: run
    PrependShell: true
  - CmdLine:
    - cd ${OPTDIR}     && curl -# "${ANDROID_SDK_TOOLS_DL_URL}"         --output "${ANDROID_SDK_TOOLS_ARCHIVE}"     &&
      mkdir --parents "${ANDROID_SDK_HOME}"     && unzip -q "${ANDROID_SDK_TOOLS_ARCHIVE}"
      -d "${ANDROID_SDK_HOME}"     && rm -rf "${ANDROID_SDK_TOOLS_ARCHIVE}"     &&
      mkdir --parents "${ANDROID_SDK_HOME}/.android/"     && echo '### User Sources
      for Android SDK Manager'         > "${ANDROID_SDK_HOME}/.android/repositories.cfg"     &&
      yes | "${ANDROID_SDK_HOME}/tools/bin/sdkmanager"         "build-tools;${ANDROID_SDK_BUILD_TOOLS_VERSION}"
      > /dev/null     && "${ANDROID_SDK_HOME}/tools/bin/sdkmanager"         "platforms;android-24"
      > /dev/null     && "${ANDROID_SDK_HOME}/tools/bin/sdkmanager"         "platforms;android-28"
      > /dev/null     && "${ANDROID_SDK_HOME}/tools/bin/sdkmanager"         "build-tools;${ANDROID_SDK_BUILD_TOOLS_VERSION}"
      > /dev/null     && "${ANDROID_SDK_HOME}/tools/bin/sdkmanager"         "extras;android;m2repository"
      > /dev/null &&     chmod +x "${ANDROID_SDK_HOME}/tools/bin/avdmanager"
    Name: run
    PrependShell: true
  - CmdLine:
    - cd ${OPTDIR}     && curl -# "${ANDROID_NDK_DL_URL}"         --output "${ANDROID_NDK_ARCHIVE}"     &&
      mkdir --parents "${ANDROID_NDK_HOME_V}"     && unzip -q "${ANDROID_NDK_ARCHIVE}"
      -d "${OPTDIR}"     && chown -R ${USER}.${USER} ${OPTDIR}     && ln -sfn "${ANDROID_NDK_HOME_V}"
      "${ANDROID_NDK_HOME}"     && rm -rf "${ANDROID_NDK_ARCHIVE}"
    Name: run
    PrependShell: true
  - Name: user
    User: ${USER}
  - Name: workdir
    Path: ${WORKDIR}
  From:
    Image: ubuntu:18.04
  Name: ""
  Platform: ""
  SourceCode: FROM ubuntu:18.04
