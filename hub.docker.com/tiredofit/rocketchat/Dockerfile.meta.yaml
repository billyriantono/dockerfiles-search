MetaArgs: null
Stages:
- BaseName: tiredofit/nodejs:4-latest
  Commands:
  - Labels:
    - Key: maintainer
      Value: '"Dave Conroy (dave at tiredofit dot ca)"'
    Name: label
  - Env:
    - Key: RC_VERSION
      Value: 0.59.1
    - Key: MONGO_URL
      Value: mongodb://db:27017/meteor
    - Key: HOME
      Value: /tmp
    - Key: PORT
      Value: "3000"
    - Key: ROOT_URL
      Value: http://localhost:3000
    - Key: Accounts_AvatarStorePath
      Value: /app/uploads/avatars
    Name: env
  - CmdLine:
    - addgroup -g 1100 rocketchat &&     adduser -Ss /bin/false -u 1100 -G rocketchat
      -h /app rocketchat &&     mkdir -p /app/uploads &&     chown rocketchat:rocketchat
      /app/uploads
    Name: run
    PrependShell: true
  - CmdLine:
    - apk update &&     mkdir -p /usr/src &&     curl -ssL https://raw.githubusercontent.com/sgerrand/alpine-pkg-glibc/master/sgerrand.rsa.pub
      -o /etc/apk/keys/sgerrand.rsa.pub &&     curl -ssL https://github.com/sgerrand/alpine-pkg-glibc/releases/download/2.25-r0/glibc-2.25-r0.apk
      -o glibc-2.25-r0.apk &&     apk add glibc-2.25-r0.apk &&     rm -rf glibc-2.25-r0.apk
      &&     apk add --no-cache         curl         g++         make         python
      &&     cd /app &&     curl -fssL "https://download.rocket.chat/build/rocket.chat-${RC_VERSION}.tgz"
      | tar xvfz - -C /app/ &&     cd /app/bundle/programs/server &&     npm install
    Name: run
    PrependShell: true
  - Chown: ""
    Name: add
    SourcesAndDest:
    - install/s6
    - /etc/s6
  - Name: expose
    Ports:
    - "3000"
  - Name: workdir
    Path: /app/bundle
  - CmdLine:
    - /init
    Name: entrypoint
    PrependShell: false
  From:
    Image: tiredofit/nodejs:4-latest
  Name: ""
  Platform: ""
  SourceCode: FROM tiredofit/nodejs:4-latest
