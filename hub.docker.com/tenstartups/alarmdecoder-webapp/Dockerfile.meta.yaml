MetaArgs: null
Stages:
- BaseName: alpine:latest
  Commands:
  - Labels:
    - Key: maintainer
      Value: '"Marc Lennox <marc.lennox@gmail.com>"'
    Name: label
  - Env:
    - Key: PAGER
      Value: more
    - Key: PIP_NO_CACHE_DIR
      Value: "off"
    - Key: PIP_DISABLE_PIP_VERSION_CHECK
      Value: "on"
    Name: env
  - CmdLine:
    - apk --update add     bsd-compat-headers     build-base     curl-dev     dosfstools     git     libffi-dev     libressl-dev     libxml2-dev     libxslt-dev     linux-headers     pcre-dev     python     python-dev     py2-pip     sqlite     sudo     zlib-dev
      &&   rm -rf /var/cache/apk/*
    Name: run
    PrependShell: true
  - CmdLine:
    - pip install gunicorn --upgrade
    Name: run
    PrependShell: true
  - CmdLine:
    - addgroup alarmdecoder &&   adduser -D -s /bin/sh alarmdecoder -G alarmdecoder
    Name: run
    PrependShell: true
  - Name: workdir
    Path: /opt/alarmdecoder-webapp
  - CmdLine:
    - git clone https://github.com/nutechsoftware/alarmdecoder-webapp.git . &&   pip
      install -r requirements.txt &&   pip install -e git://github.com/nutechsoftware/alarmdecoder.git@master#egg=alarmdecoder
      &&   mkdir instance &&   chown -R alarmdecoder:alarmdecoder .
    Name: run
    PrependShell: true
  - CmdLine:
    - su alarmdecoder -c 'python manage.py initdb'
    Name: run
    PrependShell: true
  - Chown: ""
    From: ""
    Name: copy
    SourcesAndDest:
    - entrypoint.sh
    - /docker-entrypoint
  - CmdLine:
    - /docker-entrypoint
    Name: entrypoint
    PrependShell: false
  - Name: volume
    Volumes:
    - /opt/alarmdecoder-webapp/instance
  - Name: expose
    Ports:
    - "5000"
  - CmdLine:
    - gunicorn
    - -u
    - alarmdecoder
    - -g
    - alarmdecoder
    - -b
    - unix:/tmp/gunicorn.sock
    - wsgi:application
    Name: cmd
    PrependShell: false
  From:
    Image: alpine:latest
  Name: ""
  Platform: ""
  SourceCode: FROM alpine:latest
