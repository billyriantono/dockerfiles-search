{
  "MetaArgs": null,
  "Stages": [
    {
      "Name": "",
      "BaseName": "php:7.0-fpm",
      "SourceCode": "FROM php:7.0-fpm",
      "Platform": "",
      "From": {
        "Image": "php:7.0-fpm"
      },
      "Commands": [
        {
          "Name": "stopsignal",
          "Signal": "WINCH"
        },
        {
          "CmdLine": [
            "apt-get update \u0026\u0026     apt-get install -y libmemcached-dev git vim locate ntp ntpdate nginx supervisor cron libxml2-dev libwebp-dev libjpeg62-turbo-dev libpng12-dev libfreetype6-dev libmcrypt-dev libssl-dev libgmp-dev libicu-dev \u0026\u0026     apt-get clean \u0026\u0026     rm -rf /var/lib/apt/list/*"
          ],
          "Name": "run",
          "PrependShell": true
        },
        {
          "CmdLine": [
            "cd ${HOME} \u0026\u0026     git clone https://github.com/phalcon/cphalcon.git \u0026\u0026     cd cphalcon/build/php7/64bits \u0026\u0026     phpize \u0026\u0026     export CFLAGS=\"-O1 -g\" \u0026\u0026     ./configure \u0026\u0026     make \u0026\u0026 make install \u0026\u0026     docker-php-ext-enable phalcon \u0026\u0026     rm -rf ${HOME}/cphalcon"
          ],
          "Name": "run",
          "PrependShell": true
        },
        {
          "CmdLine": [
            "docker-php-ext-configure pdo_mysql \u0026\u0026     docker-php-ext-configure mbstring \u0026\u0026     docker-php-ext-configure sockets \u0026\u0026     docker-php-ext-configure opcache \u0026\u0026     docker-php-ext-configure exif \u0026\u0026     docker-php-ext-configure mcrypt \u0026\u0026     docker-php-ext-configure bcmath \u0026\u0026     docker-php-ext-configure intl \u0026\u0026     docker-php-ext-install soap pdo_mysql mbstring sockets opcache exif mcrypt bcmath intl"
          ],
          "Name": "run",
          "PrependShell": true
        },
        {
          "CmdLine": [
            "curl -L -o /tmp/memcached.tar.gz \"https://github.com/php-memcached-dev/php-memcached/archive/php7.tar.gz\"     \u0026\u0026 mkdir -p /usr/src/php/ext/memcached     \u0026\u0026 tar -C /usr/src/php/ext/memcached -zxvf /tmp/memcached.tar.gz --strip 1     \u0026\u0026 docker-php-ext-configure memcached     \u0026\u0026 docker-php-ext-install memcached     \u0026\u0026 rm /tmp/memcached.tar.gz"
          ],
          "Name": "run",
          "PrependShell": true
        },
        {
          "CmdLine": [
            "pecl install apcu-5.1.3     \u0026\u0026 pecl install apcu_bc-1.0.3     \u0026\u0026 docker-php-ext-enable apcu --ini-name 10-docker-php-ext-apcu.ini     \u0026\u0026 docker-php-ext-enable apc --ini-name 20-docker-php-ext-apc.ini"
          ],
          "Name": "run",
          "PrependShell": true
        },
        {
          "CmdLine": [
            "mkdir -p ${HOME}/php-default-conf \u0026\u0026     cp -R /usr/local/etc/* ${HOME}/php-default-conf"
          ],
          "Name": "run",
          "PrependShell": true
        },
        {
          "CmdLine": [
            "echo \"America/Sao_Paulo\" \u003e /etc/timezone; dpkg-reconfigure -f noninteractive tzdata"
          ],
          "Name": "run",
          "PrependShell": true
        },
        {
          "CmdLine": [
            "usermod -u 1000 www-data"
          ],
          "Name": "run",
          "PrependShell": true
        },
        {
          "CmdLine": [
            "echo 'date.timezone=\"America/Sao_Paulo\"' \u003e\u003e /usr/local/etc/php/conf.d/date.ini"
          ],
          "Name": "run",
          "PrependShell": true
        },
        {
          "CmdLine": [
            "echo 'opcache.enable=1' \u003e\u003e /usr/local/etc/php/conf.d/opcache.conf"
          ],
          "Name": "run",
          "PrependShell": true
        },
        {
          "CmdLine": [
            "echo 'opcache.validate_timestamps=0' \u003e\u003e /usr/local/etc/php/conf.d/opcache.conf"
          ],
          "Name": "run",
          "PrependShell": true
        },
        {
          "CmdLine": [
            "echo 'opcache.fast_shutdown=1' \u003e\u003e /usr/local/etc/php/conf.d/opcache.conf"
          ],
          "Name": "run",
          "PrependShell": true
        },
        {
          "CmdLine": [
            "rm /etc/localtime \u0026\u0026     ln -s /usr/share/zoneinfo/America/Sao_Paulo /etc/localtime \u0026\u0026     \"date\""
          ],
          "Name": "run",
          "PrependShell": true
        },
        {
          "CmdLine": [
            "/usr/bin/supervisord"
          ],
          "Name": "cmd",
          "PrependShell": false
        }
      ]
    }
  ]
}