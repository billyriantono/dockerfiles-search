MetaArgs: null
Stages:
- BaseName: lsiobase/xenial
  Commands:
  - Maintainer: Santo Hartono
    Name: maintainer
  - Env:
    - Key: DEBIAN_FRONTEND
      Value: '"noninteractive"'
    - Key: COMPANY_NAME
      Value: '"digitalwatchdog"'
    - Key: SOFTWARE_URL
      Value: '"http://updates.networkoptix.com/digitalwatchdog/16975/linux/dwspectrum-server-3.1.0.16975-linux64.deb"'
    Name: env
  - CmdLine:
    - "apt-get update &&  apt-get install -y         python         upstart-job         psmisc
      \        upstart         libsm6         libice6         libaudio2         libogg0
      \        libxfixes3         libxrender1         unzip         fontconfig-config
      \        fonts-dejavu-core         libdrm-amdgpu1         libdrm-intel1         libdrm-nouveau2
      \        libdrm-radeon1         libfontconfig1         libgl1-mesa-dri         libgl1-mesa-glx
      \        libglapi-mesa         libllvm4.0         libpciaccess0         libsensors4
      \        libtxc-dxtn-s2tc0         libx11-xcb1         libxcb-dri2-0         libxcb-dri3-0
      \        libxcb-glx0         libxcb-present0         libxcb-sync1         libxdamage1
      \        libxshmfence1         libxxf86vm1         mtools         syslinux         net-tools
      \        libglib2.0         cifs-utils \tiputils-ping \tvim         syslinux-common
      &&  mkdir -p /opt/deb &&  cd /opt/deb &&  curl -O -L \t\"${SOFTWARE_URL}\" &&
      \ dpkg-deb -R $(ls *.deb) extracted &&  rm -rf ./extracted/etc/init.d &&  sed
      -i '/service apport stop/q' ./extracted/DEBIAN/postinst &&  dpkg-deb -b extracted
      ${COMPANY_NAME}.deb &&  echo ${COMPANY_NAME} ${COMPANY_NAME}-mediaserver/accepted-mediaserver-eula
      boolean true | debconf-set-selections &&  dpkg -i ${COMPANY_NAME}.deb &&  apt-get
      clean &&  rm -rf \t/opt/deb         /var/lib/apt/lists/*         /var/tmp/*"
    Name: run
    PrependShell: true
  - Chown: ""
    From: ""
    Name: copy
    SourcesAndDest:
    - root/
    - /
  - Name: expose
    Ports:
    - "7001"
  - Name: volume
    Volumes:
    - /config
    - /archive
  From:
    Image: lsiobase/xenial
  Name: ""
  Platform: ""
  SourceCode: FROM lsiobase/xenial
