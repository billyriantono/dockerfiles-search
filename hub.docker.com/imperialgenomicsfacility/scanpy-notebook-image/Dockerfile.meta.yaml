MetaArgs: null
Stages:
- BaseName: imperialgenomicsfacility/base-notebook-image:release-v0.0.3
  Commands:
  - Labels:
    - Key: maintainer
      Value: '"imperialgenomicsfacility"'
    Name: label
  - Labels:
    - Key: version
      Value: '"0.0.1"'
    Name: label
  - Labels:
    - Key: description
      Value: '"Docker image for running Scanpy based single cell analysis"'
    Name: label
  - Env:
    - Key: NB_USER
      Value: vmuser
    Name: env
  - Env:
    - Key: NB_UID
      Value: "1000"
    Name: env
  - Name: user
    User: root
  - Name: workdir
    Path: /
  - CmdLine:
    - apt-get -y update &&       apt-get install --no-install-recommends -y       libfontconfig1       libxrender1       libreadline6-dev       libreadline6       libicu-dev       libc6-dev       icu-devtools       libjpeg-dev       libxext-dev       libcairo2       libicu55       libicu-dev       gcc       g++       make       libgcc-5-dev       gfortran       git  &&     apt-get
      purge -y --auto-remove &&     apt-get clean &&     rm -rf /var/lib/apt/lists/*
    Name: run
    PrependShell: true
  - Name: user
    User: $NB_USER
  - Name: workdir
    Path: /home/$NB_USER
  - Env:
    - Key: TMPDIR
      Value: /home/$NB_USER/.tmp
    Name: env
  - Env:
    - Key: PATH
      Value: $PATH:/home/$NB_USER/miniconda3/bin/
    Name: env
  - CmdLine:
    - rm -f /home/$NB_USER/environment.yml &&     rm -f /home/$NB_USER/Dockerfile
    Name: run
    PrependShell: true
  - Chown: ""
    From: ""
    Name: copy
    SourcesAndDest:
    - environment.yml
    - /home/$NB_USER/environment.yml
  - Chown: ""
    From: ""
    Name: copy
    SourcesAndDest:
    - Dockerfile
    - /home/$NB_USER/Dockerfile
  - Chown: ""
    From: ""
    Name: copy
    SourcesAndDest:
    - examples
    - /home/$NB_USER/examples
  - Name: user
    User: root
  - CmdLine:
    - chown ${NB_UID} /home/$NB_USER/environment.yml &&     chown ${NB_UID} /home/$NB_USER/Dockerfile
      &&     chown -R ${NB_UID} /home/$NB_USER/examples
    Name: run
    PrependShell: true
  - Name: user
    User: $NB_USER
  - Name: workdir
    Path: /home/$NB_USER
  - CmdLine:
    - . /home/$NB_USER/miniconda3/etc/profile.d/conda.sh &&     conda deactivate &&     conda
      env update -q -n notebook-env --file /home/$NB_USER/environment.yml &&     conda
      install -n notebook-env -c r r-stringi=1.4.3 -y &&     conda clean -a -y &&     rm
      -rf /home/$NB_USER/.cache &&     rm -rf /tmp/* &&     rm -rf ${TMPDIR} &&     mkdir
      -p ${TMPDIR} &&     mkdir -p /home/$NB_USER/.cache &&     find miniconda3/ -type
      f -name *.pyc -exec rm -f {} \;
    Name: run
    PrependShell: true
  - Name: expose
    Ports:
    - "8888"
  - CmdLine:
    - notebook
    Name: cmd
    PrependShell: false
  From:
    Image: imperialgenomicsfacility/base-notebook-image:release-v0.0.3
  Name: ""
  Platform: ""
  SourceCode: FROM imperialgenomicsfacility/base-notebook-image:release-v0.0.3
