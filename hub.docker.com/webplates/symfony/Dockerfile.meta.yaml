MetaArgs: null
Stages:
- BaseName: webplates/symfony-php:7.0-fpm
  Commands:
  - Env:
    - Key: BOWER_VERSION
      Value: 1.7.9
    - Key: GULP_VERSION
      Value: 1.2.2
    - Key: NPM_CONFIG_LOGLEVEL
      Value: warn
    Name: env
  - CmdLine:
    - set -xe     && curl -sL https://deb.nodesource.com/setup_6.x | bash -     &&
      apt-get install -qqy nodejs build-essential     && npm install -g bower@$BOWER_VERSION
      gulp-cli@$GULP_VERSION --silent
    Name: run
    PrependShell: true
  - Chown: ""
    From: ""
    Name: copy
    SourcesAndDest:
    - package.json
    - npm-shrinkwrap.json
    - ./
  - CmdLine:
    - npm install --silent
    Name: run
    PrependShell: true
  - Chown: ""
    From: ""
    Name: copy
    SourcesAndDest:
    - bower.json
    - .
  - CmdLine:
    - bower install --allow-root --silent
    Name: run
    PrependShell: true
  - Chown: ""
    From: ""
    Name: copy
    SourcesAndDest:
    - composer.json
    - composer.lock
    - ./
  - CmdLine:
    - composer install --prefer-dist --no-dev --no-autoloader --no-scripts --no-interaction
      --quiet
    Name: run
    PrependShell: true
  - Chown: ""
    From: ""
    Name: copy
    SourcesAndDest:
    - .
    - .
  - CmdLine:
    - set -xe     && composer dump-autoload --optimize     && composer run-script
      post-install-cmd     && gulp --env production     && bin/console assets:install     &&
      mv web/ public/     && bin/console cache:clear --no-warmup     && rm -rf .babelrc         bower_components/         bower.json         etc/         gulpfile.babel.js         node_modules/         npm-shrinkwrap.json         package.json         var/cache/*         var/logs/*     &&
      mkdir -p var/sessions/ var/uploads/     && chown -R www-data. var/cache/ var/logs/
      var/sessions/ var/uploads/
    Name: run
    PrependShell: true
  - Name: volume
    Volumes:
    - /app/web
    - /app/var/sessions
    - /app/var/uploads
  - Chown: ""
    From: ""
    Name: copy
    SourcesAndDest:
    - etc/docker/prod/app/entrypoint.sh
    - /docker-entrypoint.sh
  - CmdLine:
    - /docker-entrypoint.sh
    Name: entrypoint
    PrependShell: false
  From:
    Image: webplates/symfony-php:7.0-fpm
  Name: ""
  Platform: ""
  SourceCode: FROM webplates/symfony-php:7.0-fpm
