MetaArgs: null
Stages:
- BaseName: wordpress:php7.2
  Commands:
  - CmdLine:
    - curl --location --output /usr/local/bin/mhsendmail https://github.com/mailhog/mhsendmail/releases/download/v0.2.0/mhsendmail_linux_amd64
      &&     chmod +x /usr/local/bin/mhsendmail
    Name: run
    PrependShell: true
  - CmdLine:
    - echo 'sendmail_path="/usr/local/bin/mhsendmail --smtp-addr=mailhog:1025 --from=no-reply@docker.dev"'
      > /usr/local/etc/php/conf.d/mailhog.ini
    Name: run
    PrependShell: true
  - Env:
    - Key: XDEBUG_VERSION
      Value: 2.6.1
    Name: env
  - Env:
    - Key: XDEBUG_SHA256
      Value: dae691d6c052073b886e0c6e1306a707bca9fd18a1e3485384ef6c4aacf1bd77
    Name: env
  - CmdLine:
    - "set -x \t&& curl -SL \"http://www.xdebug.org/files/xdebug-$XDEBUG_VERSION.tgz\"
      -o xdebug.tgz \t&& echo \"$XDEBUG_SHA256 xdebug.tgz\" | sha256sum -c - \t&&
      mkdir -p /usr/src/xdebug \t&& tar -xf xdebug.tgz -C /usr/src/xdebug --strip-components=1
      \t&& rm xdebug.* \t&& cd /usr/src/xdebug \t&& phpize \t&& ./configure --enable-xdebug
      \t&& make -j\"$(nproc)\" \t&& make install \t&& make clean"
    Name: run
    PrependShell: true
  - CmdLine:
    - "apt-get update && \tapt-get install -y libcurl4-gnutls-dev && docker-php-ext-configure
      curl && docker-php-ext-install curl && \tapt-get install -y zlib1g-dev libicu-dev
      g++ && docker-php-ext-configure intl && docker-php-ext-install intl && \tapt-get
      install -y libxml++2.6-dev && docker-php-ext-install xml && \tdocker-php-ext-install
      json && \tdocker-php-ext-install mbstring && \tdocker-php-ext-install soap"
    Name: run
    PrependShell: true
  - CmdLine:
    - "curl -O https://raw.githubusercontent.com/wp-cli/builds/gh-pages/phar/wp-cli.phar
      && \tchmod +x wp-cli.phar && \tmv wp-cli.phar /usr/local/bin/wp && \tmkdir /var/www/.wp-cli
      && \tchown www-data:www-data /var/www/.wp-cli"
    Name: run
    PrependShell: true
  - CmdLine:
    - openssl req -subj '/C=US/ST=None/L=None/O=OrgName/OU=IT Department/CN=*.localhost'
      -x509 -newkey rsa:4096 -nodes -keyout /etc/ssl/private/ssl-cert-snakeoil.key
      -out /etc/ssl/certs/ssl-cert-snakeoil.pem -days 9000
    Name: run
    PrependShell: true
  - CmdLine:
    - "a2enmod ssl && \ta2enmod headers && \ta2ensite default-ssl && \tservice apache2
      restart"
    Name: run
    PrependShell: true
  - Name: workdir
    Path: /var/www/html
  - Name: volume
    Volumes:
    - /var/www/html
  From:
    Image: wordpress:php7.2
  Name: ""
  Platform: ""
  SourceCode: FROM wordpress:php7.2
