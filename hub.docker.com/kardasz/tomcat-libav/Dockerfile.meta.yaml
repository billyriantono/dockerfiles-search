MetaArgs: null
Stages:
- BaseName: debian:jessie
  Commands:
  - Maintainer: Krzysztof Kardasz <krzysztof@kardasz.eu>
    Name: maintainer
  - Env:
    - Key: DEBIAN_FRONTEND
      Value: noninteractive
    Name: env
  - CmdLine:
    - apt-get update &&     apt-get -y upgrade &&     apt-get -y dist-upgrade &&     apt-get
      -y install wget curl ca-certificates libav-tools libavcodec-extra mediainfo
      libimage-exiftool-perl
    Name: run
    PrependShell: true
  - CmdLine:
    - gpg --keyserver ha.pool.sks-keyservers.net --recv-keys B42F6819007F00F88E364FD4036A9C25BF357DD4
    Name: run
    PrependShell: true
  - CmdLine:
    - curl -o /usr/local/bin/gosu -SL "https://github.com/tianon/gosu/releases/download/1.2/gosu-$(dpkg
      --print-architecture)"     && curl -o /usr/local/bin/gosu.asc -SL "https://github.com/tianon/gosu/releases/download/1.2/gosu-$(dpkg
      --print-architecture).asc"     && gpg --verify /usr/local/bin/gosu.asc     &&
      rm /usr/local/bin/gosu.asc     && chmod +x /usr/local/bin/gosu
    Name: run
    PrependShell: true
  - Env:
    - Key: LANG
      Value: C.UTF-8
    Name: env
  - Env:
    - Key: ORACLE_JDK_VERSION
      Value: jdk-8u92
    Name: env
  - Env:
    - Key: ORACLE_JDK_URL
      Value: http://download.oracle.com/otn-pub/java/jdk/8u92-b14/jdk-8u92-linux-x64.tar.gz
    Name: env
  - CmdLine:
    - 'mkdir -p /opt/jdk/$ORACLE_JDK_VERSION &&     wget --header "Cookie: oraclelicense=accept-securebackup-cookie"
      -O /opt/jdk/$ORACLE_JDK_VERSION/$ORACLE_JDK_VERSION.tar.gz $ORACLE_JDK_URL &&     tar
      -zxf /opt/jdk/$ORACLE_JDK_VERSION/$ORACLE_JDK_VERSION.tar.gz --strip-components=1
      -C /opt/jdk/$ORACLE_JDK_VERSION &&     chown -R root:root /opt/jdk/$ORACLE_JDK_VERSION
      &&     rm /opt/jdk/$ORACLE_JDK_VERSION/$ORACLE_JDK_VERSION.tar.gz &&     update-alternatives
      --install /usr/bin/java java /opt/jdk/$ORACLE_JDK_VERSION/bin/java 100 &&     update-alternatives
      --install /usr/bin/javac javac /opt/jdk/$ORACLE_JDK_VERSION/bin/javac 100'
    Name: run
    PrependShell: true
  - Env:
    - Key: JAVA_HOME
      Value: /opt/jdk/$ORACLE_JDK_VERSION
    Name: env
  - Env:
    - Key: JAVA_VERSION
      Value: 8u92
    Name: env
  - Env:
    - Key: JAVA_TRUSTSTORE
      Value: ${JAVA_HOME}/jre/lib/security/cacerts
    Name: env
  - Env:
    - Key: JAVA_TRUSTSTORE_PASSWORD
      Value: changeit
    Name: env
  - Env:
    - Key: JAVA_OPTS
      Value: '"-Djavax.net.ssl.trustStore=${JAVA_TRUSTSTORE} -Djavax.net.ssl.trustStorePassword=${JAVA_TRUSTSTORE_PASSWORD}"'
    Name: env
  - CmdLine:
    - "gpg --keyserver pool.sks-keyservers.net --recv-keys \t05AB33110949707C93A279E3D3EFE6B686867BA6
      \t07E48665A34DCAFAE522E5E6266191C37C037D42 \t47309207D818FFD8DCD3F83F1931D684307A10A5
      \t541FBE7D8F78B25E055DDEE13C370389288584E7 \t61B832AC2F1C5A90F0F9B00A1C506407564C17A3
      \t79F7026C690BAA50B92CD8B66A3AD3F4F22C4FED \t9BA44C2621385CB966EBA586F72C284D731FABEE
      \tA27677289986DB50844682F8ACB77FC2E86E29AC \tA9C5DF4D22E99998D9875A5110C01C5A2F6059E7
      \tDCFD35E0BF8CA7344752DE8B6FB21E8933C60243 \tF3A04C595DB5B6A5F1ECA43E3B7BBB100D811BBE
      \tF7DA48BB64BCB84ECBA7EE6935CD23C10D498E23"
    Name: run
    PrependShell: true
  - Env:
    - Key: RUN_USER
      Value: tomcat
    Name: env
  - Env:
    - Key: RUN_USER_UID
      Value: "5888"
    Name: env
  - Env:
    - Key: RUN_GROUP
      Value: tomcat
    Name: env
  - Env:
    - Key: RUN_GROUP_GID
      Value: "5888"
    Name: env
  - Env:
    - Key: TOMCAT_MAJOR
      Value: "8"
    Name: env
  - Env:
    - Key: TOMCAT_VERSION
      Value: 8.0.35
    Name: env
  - Env:
    - Key: TOMCAT_TGZ_URL
      Value: https://www.apache.org/dist/tomcat/tomcat-$TOMCAT_MAJOR/v$TOMCAT_VERSION/bin/apache-tomcat-$TOMCAT_VERSION.tar.gz
    Name: env
  - Env:
    - Key: CATALINA_HOME
      Value: /usr/local/tomcat
    Name: env
  - Env:
    - Key: PATH
      Value: $CATALINA_HOME/bin:$JAVA_HOME/bin:$PATH
    Name: env
  - CmdLine:
    - mkdir -p "$CATALINA_HOME"
    Name: run
    PrependShell: true
  - Name: workdir
    Path: $CATALINA_HOME
  - CmdLine:
    - "set -x \t&& curl -fSL \"$TOMCAT_TGZ_URL\" -o tomcat.tar.gz \t&& curl -fSL \"$TOMCAT_TGZ_URL.asc\"
      -o tomcat.tar.gz.asc \t&& gpg --verify tomcat.tar.gz.asc \t&& tar -xvf tomcat.tar.gz
      --strip-components=1 \t&& rm bin/*.bat \t&& rm tomcat.tar.gz*"
    Name: run
    PrependShell: true
  - CmdLine:
    - mkdir -p ${CATALINA_HOME}/webapp
    Name: run
    PrependShell: true
  - Chown: ""
    From: ""
    Name: copy
    SourcesAndDest:
    - docker-entrypoint.sh
    - /entrypoint.sh
  - CmdLine:
    - chmod a+x /entrypoint.sh
    Name: run
    PrependShell: true
  - CmdLine:
    - /entrypoint.sh
    Name: entrypoint
    PrependShell: false
  - Name: expose
    Ports:
    - "8080"
  - CmdLine:
    - catalina.sh
    - run
    Name: cmd
    PrependShell: false
  From:
    Image: debian:jessie
  Name: ""
  Platform: ""
  SourceCode: FROM debian:jessie
