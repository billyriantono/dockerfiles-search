MetaArgs: null
Stages:
- BaseName: php:7.1-fpm-alpine
  Commands:
  - CmdLine:
    - apk add --no-cache     bash     sed     git     subversion     mysql-client
    Name: run
    PrependShell: true
  - CmdLine:
    - "set -ex; \tapk add --no-cache --virtual .build-deps \t\tlibjpeg-turbo-dev \t\tlibpng-dev;
      \tdocker-php-ext-configure gd --with-png-dir=/usr --with-jpeg-dir=/usr; \tdocker-php-ext-install
      gd mysqli opcache; \t\trunDeps=\"$( \t\tscanelf --needed --nobanner --format
      '%n#p' --recursive /usr/local/lib/php/extensions \t\t\t| tr ',' '\\n' \t\t\t|
      sort -u \t\t\t| awk 'system(\"[ -e /usr/local/lib/\" $1 \" ]\") == 0 { next
      } { print \"so:\" $1 }' \t)\"; \tapk add --virtual .wordpress-phpexts-rundeps
      $runDeps; \tapk del .build-deps"
    Name: run
    PrependShell: true
  - CmdLine:
    - "{ \t\techo 'opcache.memory_consumption=128'; \t\techo 'opcache.interned_strings_buffer=8';
      \t\techo 'opcache.max_accelerated_files=4000'; \t\techo 'opcache.revalidate_freq=2';
      \t\techo 'opcache.fast_shutdown=1'; \t\techo 'opcache.enable_cli=1'; \t} > /usr/local/etc/php/conf.d/opcache-recommended.ini"
    Name: run
    PrependShell: true
  - Name: workdir
    Path: /tmp
  - CmdLine:
    - set -ex;     docker-php-ext-install pcntl;     php -r "copy('https://getcomposer.org/installer',
      'composer-setup.php');";     php composer-setup.php --install-dir=/usr/bin --filename=composer;     php
      -r "unlink('composer-setup.php');";     composer require "phpunit/phpunit:~5.7"
      --prefer-source --no-interaction;     composer require "phpunit/php-invoker"
      --prefer-source --no-interaction;     ln -s /tmp/vendor/bin/phpunit /usr/local/bin/phpunit;     sed
      -i 's/nn and/nn, Julien Breux (Docker) and/g' /tmp/vendor/phpunit/phpunit/src/Runner/Version.php
    Name: run
    PrependShell: true
  - CmdLine:
    - set -ex;     apk add --no-cache --virtual .build-deps       g++       make       autoconf;     pecl
      install xdebug;     docker-php-ext-enable xdebug;     apk del .build-deps;     rm
      -rf /tmp/pear
    Name: run
    PrependShell: true
  - CmdLine:
    - '{       echo '''';       echo ''xdebug.remote_enable=1'';       echo ''xdebug.remote_autostart=1'';       echo
      ''xdebug.remote_host="docker.for.mac.localhost"'';       echo ''xdebug.remote_port="9000"'';       echo
      ''xdebug.remote_log="/var/log/xdebug.log"'';     } >> /usr/local/etc/php/conf.d/docker-php-ext-xdebug.ini'
    Name: run
    PrependShell: true
  - Name: workdir
    Path: /var/www/html
  From:
    Image: php:7.1-fpm-alpine
  Name: ""
  Platform: ""
  SourceCode: FROM php:7.1-fpm-alpine
