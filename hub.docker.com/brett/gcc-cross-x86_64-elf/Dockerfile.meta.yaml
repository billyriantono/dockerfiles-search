MetaArgs: null
Stages:
- BaseName: debian:stretch
  Commands:
  - Labels:
    - Key: maintainer
      Value: '"Brett Vickers <github.com/beevik>"'
    Name: label
  - Key: BINUTILS_VERSION
    Name: arg
    Value: "2.32"
  - Key: GCC_VERSION
    Name: arg
    Value: 9.1.0
  - CmdLine:
    - "set -x \t&& apt-get update \t&& apt-get install -y wget gcc libgmp3-dev libmpfr-dev
      libisl-dev \t\tlibcloog-isl-dev libmpc-dev texinfo bison flex make bzip2 patch
      \t\tbuild-essential"
    Name: run
    PrependShell: true
  - CmdLine:
    - "set -x \t&& mkdir -p /usr/local/src \t&& cd /usr/local/src \t&& wget -q ftp://ftp.gnu.org/gnu/binutils/binutils-${BINUTILS_VERSION}.tar.gz
      \t&& wget -q ftp://ftp.gnu.org/gnu/gcc/gcc-${GCC_VERSION}/gcc-${GCC_VERSION}.tar.gz
      \t&& tar zxf binutils-${BINUTILS_VERSION}.tar.gz \t&& tar zxf gcc-${GCC_VERSION}.tar.gz
      \t&& rm binutils-${BINUTILS_VERSION}.tar.gz gcc-${GCC_VERSION}.tar.gz \t&& chown
      -R root:root binutils-${BINUTILS_VERSION} \t&& chown -R root:root gcc-${GCC_VERSION}
      \t&& chmod -R o-w,g+w binutils-${BINUTILS_VERSION} \t&& chmod -R o-w,g+w gcc-${GCC_VERSION}"
    Name: run
    PrependShell: true
  - Chown: ""
    From: ""
    Name: copy
    SourcesAndDest:
    - files/src
    - /usr/local/src/
  - Chown: ""
    From: ""
    Name: copy
    SourcesAndDest:
    - files/gcc/t-x86_64-elf
    - /usr/local/src/gcc-${GCC_VERSION}/gcc/config/i386/
  - Chown: ""
    From: ""
    Name: copy
    SourcesAndDest:
    - files/gcc/config.gcc.patch
    - /usr/local/src/gcc-${GCC_VERSION}/gcc/
  - CmdLine:
    - "set -x \t&& cd /usr/local/src \t&& ./build-binutils.sh ${BINUTILS_VERSION}
      \t&& ./build-gcc.sh ${GCC_VERSION}"
    Name: run
    PrependShell: true
  - CmdLine:
    - /bin/bash
    Name: cmd
    PrependShell: false
  From:
    Image: debian:stretch
  Name: ""
  Platform: ""
  SourceCode: FROM debian:stretch
