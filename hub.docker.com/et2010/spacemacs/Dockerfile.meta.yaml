MetaArgs: null
Stages:
- BaseName: et2010/docker-emacs:latest
  Commands:
  - Maintainer: et2010 <jianwang.academic@gmail.com>
    Name: maintainer
  - Env:
    - Key: UNAME
      Value: '"spacemacser"'
    - Key: UID
      Value: '"1000"'
    Name: env
  - Chown: ""
    From: ""
    Name: copy
    SourcesAndDest:
    - ./fonts/*
    - /tmp/
  - Env:
    - Key: NNG
      Value: '"NanumGothic-Regular.ttf"'
    - Key: SCP
      Value: '"1.050R-it.tar.gz"'
    Name: env
  - CmdLine:
    - mkdir -p /usr/local/share/fonts     && cd /tmp && tar -xzf "${SCP}" -C /usr/local/share/fonts     &&
      cp "${NNG}" /usr/local/share/fonts     && fc-cache -fv     && rm -rf /tmp/*
      /var/lib/apt/lists/* /root/.cache/*
    Name: run
    PrependShell: true
  - Chown: ""
    From: ""
    Name: copy
    SourcesAndDest:
    - .
    - ${UHOME}/.emacs.d
  - CmdLine:
    - cp ${UHOME}/.emacs.d/core/templates/.spacemacs.template ${UHOME}/     && mv
      ${UHOME}/.spacemacs.template ${UHOME}/.spacemacs     && sed -i "s/\(-distribution
      'spacemacs\)/\1-docker/"     ${UHOME}/.spacemacs     && asEnvUser emacs -batch
      -u ${UNAME} -kill     && asEnvUser emacs -batch -u ${UNAME} -kill     && chmod
      ug+rw -R ${UHOME}
    Name: run
    PrependShell: true
  - CmdLine:
    - 'asEnvUser make -C ${UHOME}/.emacs.d/tests/core/ test     && cd ${UHOME}/.emacs.d     &&
      printf "SPACEMACS REVISION: %s\n" "$(git rev-parse --verify HEAD)"'
    Name: run
    PrependShell: true
  - Env:
    - Key: PYVERS
      Value: '''3.6.2'''
    Name: env
  - CmdLine:
    - apt-get update &&     apt-get install build-essential libssl-dev zlib1g-dev
      libbz2-dev         libreadline-dev libsqlite3-dev llvm libncurses5-dev         libncursesw5-dev
      xz-utils &&     git clone https://github.com/yyuu/pyenv.git ${UHOME}/.pyenv
      &&     git clone https://github.com/yyuu/pyenv-virtualenv.git         ${UHOME}/.pyenv/plugins/pyenv-virtualenv
      &&     ${UHOME}/.pyenv/plugins/python-build/bin/python-build         -v ${PYVERS}
      ${UHOME}/.pyenv/versions/${PYVERS} &&     echo 'export PYENV_ROOT="$UHOME/.pyenv"'
      >> pyenvinit &&     echo 'export PATH="$PYENV_ROOT/bin:$PATH"' >> pyenvinit
      &&     echo 'eval "$(pyenv init -)"' >> pyenvinit &&     echo 'eval "$(pyenv
      virtualenv-init -)"' >> pyenvinit &&     cat pyenvinit >> ${UHOME}/.bashrc &&     cat
      pyenvinit >> ${UHOME}/.zshenv &&     rm pyenvinit &&     echo "$PYVERS" > ${UHOME}/.pyenv/version
      &&     chown -R ${UNAME} ${UHOME} &&     chgrp -R ${GNAME} ${UHOME} &&     chmod
      ug+rw -R ${UHOME} &&     apt-get autoremove build-essential llvm &&     rm -rf
      /tmp/* /var/tmp/* /var/lib/apt/lists/* /root/.cache/*
    Name: run
    PrependShell: true
  - Name: shell
    Shell:
    - asEnvUser
    - /bin/bash
    - -c
  - Env:
    - Key: VENV_NAME
      Value: '"venv"'
    Name: env
  - CmdLine:
    - source ${UHOME}/.bashrc     && pyenv virtualenv ${VENV_NAME}     && echo 'source
      ${UHOME}/.pyenv/versions/${VENV_NAME}/bin/activate' >> ${UHOME}/.bashrc
    Name: run
    PrependShell: true
  - CmdLine:
    - source ${UHOME}/.bashrc     && pip install apt-select     && rm -rf ${UHOME}/.cache/pip/*
    Name: run
    PrependShell: true
  - CmdLine:
    - source ${UHOME}/.bashrc     && cd ${UHOME}     && apt-select     && sudo mv
      -f sources.list /etc/apt/
    Name: run
    PrependShell: true
  - Name: shell
    Shell:
    - /bin/sh
    - -c
  - CmdLine:
    - ln -s     ${UHOME}/.emacs.d/layers/+distributions/spacemacs-docker/deps-install/run     /usr/local/sbin/install-deps     &&
      chown root:root /usr/local/sbin/install-deps     && chmod 770 /usr/local/sbin/install-deps
    Name: run
    PrependShell: true
  - CmdLine:
    - install-deps
    Name: run
    PrependShell: true
  - CmdLine:
    - userdel $UNAME     && groupdel $GNAME
    Name: run
    PrependShell: true
  From:
    Image: et2010/docker-emacs:latest
  Name: ""
  Platform: ""
  SourceCode: FROM et2010/docker-emacs:latest
