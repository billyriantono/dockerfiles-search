MetaArgs:
- DefaultValue: xenial
  Key: ubuntu_version
  ProvidedValue: null
  Value: xenial
Stages:
- BaseName: ubuntu:${ubuntu_version}
  Commands:
  - Labels:
    - Key: maintainer
      Value: '"frank.foerster@ime.fraunhofer.de"'
    - Key: description
      Value: '"Base container for the microPIECE package"'
    - Key: version
      Value: '"1.4"'
    - Key: org.label-schema.vcs-ref
      Value: $VCS_REF
    - Key: org.label-schema.build-date
      Value: $BUILD_DATE
    - Key: org.label-schema.vcs-url
      Value: '"https://github.com/microPIECE-team/microPIECE-dockerbase"'
    Name: label
  - CmdLine:
    - apt update &&     apt install        --yes        --no-install-recommends        build-essential        wget        bwa        bowtie        bowtie2        ncbi-blast+        python-cutadapt        emboss        less        pv     &&     rm
      -rf /var/lib/apt/lists/*
    Name: run
    PrependShell: true
  - Chown: ""
    Name: add
    SourcesAndDest:
    - debian
    - /etc/apt/preferences.d/debian
  - CmdLine:
    - "apt update &&     apt install --yes --no-install-recommends         debian-archive-keyring
      \tsoftware-properties-common &&     add-apt-repository 'deb http://httpredir.debian.org/debian
      experimental main' &&     add-apt-repository 'deb http://httpredir.debian.org/debian
      sid main' &&     apt update &&     apt install --yes --no-install-recommends
      openjdk-7-jre-headless &&     rm -rf /var/lib/apt/lists/*"
    Name: run
    PrependShell: true
  - Name: workdir
    Path: /opt
  - CmdLine:
    - apt update && apt install --yes --no-install-recommends        zlib1g-dev        libncurses5-dev        libbz2-dev        liblzma-dev        &&     wget
      https://github.com/samtools/samtools/releases/download/1.4.1/samtools-1.4.1.tar.bz2
      &&     tar xjf samtools-1.4.1.tar.bz2 &&     cd samtools-1.4.1 &&     ./configure
      &&     make &&     make check &&     make install &&     cd .. &&     rm -rf
      samtools-1.4.1 samtools-1.4.1.tar.bz2 /var/lib/apt/lists/*
    Name: run
    PrependShell: true
  - CmdLine:
    - wget -O bedtools.tar.gz https://github.com/arq5x/bedtools2/releases/download/v2.27.1/bedtools-2.27.1.tar.gz
      &&     tar xzf bedtools.tar.gz &&     cd bedtools2 && make &&     mv bin/* /usr/local/bin/
      &&     cd .. && rm -rf bedtools2 bedtools.tar.gz
    Name: run
    PrependShell: true
  - CmdLine:
    - wget http://www.bioinf.uni-leipzig.de/Software/proteinortho/proteinortho_v5.16b.tar.gz
      &&     tar xzf proteinortho_v5.16b.tar.gz &&     rm -rf proteinortho_v5.16b.tar.gz
    Name: run
    PrependShell: true
  - Env:
    - Key: PATH
      Value: /opt/proteinortho_v5.16b/:"$PATH"
    Name: env
  - CmdLine:
    - wget -O /usr/local/bin/xa2multi.pl https://raw.githubusercontent.com/lh3/bwa/master/xa2multi.pl
      &&     chmod +x /usr/local/bin/xa2multi.pl
    Name: run
    PrependShell: true
  - CmdLine:
    - apt update && apt install --yes --no-install-recommends bamtools libgsl-dev
      &&     wget http://smithlabresearch.org/downloads/piranha-1.2.1.tar.gz &&     tar
      xzf piranha-1.2.1.tar.gz &&     cd piranha-1.2.1 &&     ./configure &&     make
      all &&     make install &&     cd /opt && rm -rf piranha-1.2.1.tar.gz /var/lib/apt/lists/*
    Name: run
    PrependShell: true
  - Env:
    - Key: PATH
      Value: /opt/piranha-1.2.1/bin/:"$PATH"
    Name: env
  - Env:
    - Key: PATH
      Value: '"$PATH":/opt/mirdeep2/bin'
    Name: env
  - Env:
    - Key: PERL_MB_OPT
      Value: '"--install_base /root/perl5"'
    Name: env
  - Env:
    - Key: PERL_MM_OPT
      Value: '"INSTALL_BASE=/root/perl5"'
    Name: env
  - Env:
    - Key: PERL5LIB
      Value: /opt/mirdeep2/lib/perl5
    Name: env
  - CmdLine:
    - apt update && apt install --yes --no-install-recommends git &&     git clone
      https://github.com/rajewsky-lab/mirdeep2.git &&     cd mirdeep2 &&     perl
      install.pl &&     perl install.pl &&     mkdir /opt/mirdeep2/bin/indexes &&     chmod
      a+rwX /opt/mirdeep2/bin/indexes &&     cd /opt && rm -rf /var/lib/apt/lists/*
    Name: run
    PrependShell: true
  - CmdLine:
    - wget http://research-pub.gene.com/gmap/src/gmap-gsnap-2018-02-12.tar.gz &&     tar
      xzf gmap-gsnap-2018-02-12.tar.gz &&     cd gmap-2018-02-12 &&     for i in none
      sse2 ssse3 sse41 sse42 avx2 avx512;       do          ./configure --with-simd-level="$i"
      &&          make &&          make install;          make clean;       done;     cd
      /opt && rm -rf gmap-gsnap-2018-02-12.tar.gz gmap-2018-02-12
    Name: run
    PrependShell: true
  - CmdLine:
    - apt update && apt install --yes --no-install-recommends git &&     git clone
      https://github.com/lpantano/seqbuster.git &&     cd /opt && rm -rf /var/lib/apt/lists/*
    Name: run
    PrependShell: true
  - Env:
    - Key: MIRALIGNERDIR
      Value: /opt/seqbuster/modules/miraligner/
    Name: env
  - Env:
    - Key: MIRALIGNER
      Value: '"$MIRALIGNERDIR"/miraligner.jar'
    Name: env
  - CmdLine:
    - wget http://cbio.mskcc.org/microrna_data/miRanda-aug2010.tar.gz &&     tar xzf
      miRanda-aug2010.tar.gz &&     cd miRanda-3.3a &&     ./configure &&     make
      &&     make check &&     make install &&     cd /opt && rm -rf miRanda-aug2010.tar.gz
      miRanda-3.3a
    Name: run
    PrependShell: true
  - CmdLine:
    - apt update && apt install --yes --no-install-recommends git &&     mkdir gffread
      && cd gffread &&     git clone https://github.com/gpertea/gclib &&     cd gclib
      && git checkout b790ac157971c5e6da77d0c76ee9ebf26ec4a5ef && cd .. &&     git
      clone --branch v0.9.12 https://github.com/gpertea/gffread &&     cd gffread
      &&     make &&     cd /opt && rm -rf /var/lib/apt/lists/*
    Name: run
    PrependShell: true
  - Env:
    - Key: PATH
      Value: /opt/gffread/gffread/:"$PATH"
    Name: env
  - CmdLine:
    - apt update && apt install --yes --no-install-recommends     liblog-log4perl-perl     libipc-run-perl     libipc-run3-perl     libdevel-cover-perl     libwww-perl     libtest-script-run-perl     libterm-progressbar-perl     &&     rm
      -rf /var/lib/apt/lists/*
    Name: run
    PrependShell: true
  - CmdLine:
    - apt update && apt install --yes --no-install-recommends     cpanminus &&     cpanm
      -L /extlib/ RNA::HairpinFigure     &&     rm -rf /var/lib/apt/lists/*
    Name: run
    PrependShell: true
  - Env:
    - Key: PERL5LIB
      Value: /extlib/lib/perl5/:"$PERL5LIB"
    Name: env
  - Name: volume
    Volumes:
    - /data
  - Name: workdir
    Path: /data
  From:
    Image: ubuntu:${ubuntu_version}
  Name: ""
  Platform: ""
  SourceCode: FROM ubuntu:${ubuntu_version}
