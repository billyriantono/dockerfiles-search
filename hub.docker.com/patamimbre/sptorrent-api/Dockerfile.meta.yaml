MetaArgs: null
Stages:
- BaseName: ruby:2.3.1
  Commands:
  - CmdLine:
    - "mkdir -p /usr/local/etc \t&& { \t\techo 'install: --no-document'; \t\techo
      'update: --no-document'; \t} >> /usr/local/etc/gemrc"
    Name: run
    PrependShell: true
  - CmdLine:
    - "apt-get update \t&& apt-get install -y --no-install-recommends $buildDeps \t&&
      rm -rf /var/lib/apt/lists/*"
    Name: run
    PrependShell: true
  - CmdLine:
    - gem install bundler
    Name: run
    PrependShell: true
  - Env:
    - Key: GEM_HOME
      Value: /usr/local/bundle
    Name: env
  - Env:
    - Key: BUNDLE_PATH
      Value: '"$GEM_HOME"'
    - Key: BUNDLE_BIN
      Value: '"$GEM_HOME/bin"'
    - Key: BUNDLE_SILENCE_ROOT_WARNING
      Value: "1"
    - Key: BUNDLE_APP_CONFIG
      Value: '"$GEM_HOME"'
    Name: env
  - Env:
    - Key: PATH
      Value: $BUNDLE_BIN:$PATH
    Name: env
  - CmdLine:
    - "mkdir -p \"$GEM_HOME\" \"$BUNDLE_BIN\" \t&& chmod 777 \"$GEM_HOME\" \"$BUNDLE_BIN\""
    Name: run
    PrependShell: true
  - CmdLine:
    - mkdir /app
    Name: run
    PrependShell: true
  - Name: workdir
    Path: /app
  - Chown: ""
    Name: add
    SourcesAndDest:
    - app/Gemfile
    - /app/Gemfile
  - Chown: ""
    Name: add
    SourcesAndDest:
    - app/Gemfile.lock
    - /app/Gemfile.lock
  - CmdLine:
    - bundle install
    Name: run
    PrependShell: true
  - Chown: ""
    Name: add
    SourcesAndDest:
    - ./app
    - /app
  - Env:
    - Key: PORT
      Value: "5678"
    Name: env
  - Name: expose
    Ports:
    - $PORT
    - "80"
  - CmdLine:
    - foreman
    - start
    - -d
    - /app
    Name: cmd
    PrependShell: false
  From:
    Image: ruby:2.3.1
  Name: ""
  Platform: ""
  SourceCode: FROM ruby:2.3.1
