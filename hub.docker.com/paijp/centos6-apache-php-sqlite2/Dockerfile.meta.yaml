MetaArgs: null
Stages:
- BaseName: centos:6
  Commands:
  - CmdLine:
    - "set -x &&\tyum -y install gcc httpd php php-pdo php-devel yum-utils"
    Name: run
    PrependShell: true
  - CmdLine:
    - "set -x &&\tcd /etc/yum.repos.d/ &&\tawk 'BEGIN{getline <\"/etc/redhat-release\";ver=gensub(\".*([0-9]+\\\\.[0-9]+).*\",
      \"\\\\1\", \"\");}/extras|contrib|centosplus/{exit;}/6\\.1/{exit;}{gsub(\"6\\\\.0\",
      ver);}/^\\[/{sub(\"\\\\]\", \"-src]\");}/^name/{$0=$0\" - src\";}/^baseurl/{sub(\"\\\\$basearch\",
      \"Source\");}/^enabled/{sub(\"0\", \"1\");}{print;}' CentOS-Vault.repo >CentOS-src.repo
      &&\tcd /root/ &&\tmkdir -p tmp &&\tcd tmp &&\tyumdownloader --source php"
    Name: run
    PrependShell: true
  - CmdLine:
    - "cd /root/tmp/ &&\trpm -ivh php-* &&\ttar xfj /root/rpmbuild/SOURCES/php-5*.tar.bz2
      &&\tcd php*/ext/sqlite/ &&\tphpize &&\t./configure &&\tmake &&\tmake install
      &&\tcd /root/ &&\trm -fr tmp &&\techo 'extension=sqlite.so' >/etc/php.d/sqlite2.ini"
    Name: run
    PrependShell: true
  - Name: expose
    Ports:
    - "443"
    - "80"
  - CmdLine:
    - php -i |grep SQLite
    Name: cmd
    PrependShell: true
  From:
    Image: centos:6
  Name: ""
  Platform: ""
  SourceCode: FROM centos:6
