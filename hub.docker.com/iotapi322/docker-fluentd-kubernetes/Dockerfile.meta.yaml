MetaArgs: null
Stages:
- BaseName: centos:7
  Commands:
  - CmdLine:
    - yum update -y &&     yum install -y centos-release-scl-rh &&     yum install
      -y scl-utils make gcc bzip2 rh-ruby23 rh-ruby23-ruby-devel &&     yum clean
      all
    Name: run
    PrependShell: true
  - Env:
    - Key: LD_LIBRARY_PATH
      Value: /opt/rh/rh-ruby23/root/usr/lib64
    Name: env
  - Env:
    - Key: FLUENTD_VERSION
      Value: 0.14.8
    Name: env
  - CmdLine:
    - scl enable rh-ruby23 'gem update --system --no-document' &&     scl enable rh-ruby23
      'gem install --no-document json_pure jemalloc' &&     scl enable rh-ruby23 "gem
      install --no-document fluentd -v ${FLUENTD_VERSION}" &&     ln -s /opt/rh/rh-ruby23/root/usr/local/bin/*
      /usr/bin
    Name: run
    PrependShell: true
  - Maintainer: Jimmi Dyson <jimmidyson@gmail.com>
    Name: maintainer
  - Env:
    - Key: ELASTICSEARCH_HOST
      Value: es-logging.default.svc
    Name: env
  - CmdLine:
    - touch /var/lib/rpm/* && yum install -y gcc-c++ && yum clean all
    Name: run
    PrependShell: true
  - CmdLine:
    - scl enable rh-ruby23 'gem install --no-document fluent-plugin-kubernetes_metadata_filter
      -v 0.26.2' &&     scl enable rh-ruby23 'gem install --no-document fluent-plugin-elasticsearch
      -v 1.7.0' &&     scl enable rh-ruby23 'gem install --no-document fluent-plugin-prometheus
      -v 0.2.1' &&     scl enable rh-ruby23 'gem cleanup fluentd'
    Name: run
    PrependShell: true
  - Chown: ""
    Name: add
    SourcesAndDest:
    - start-fluentd
    - /start-fluentd
  - CmdLine:
    - /start-fluentd
    Name: entrypoint
    PrependShell: false
  From:
    Image: centos:7
  Name: ""
  Platform: ""
  SourceCode: FROM centos:7
