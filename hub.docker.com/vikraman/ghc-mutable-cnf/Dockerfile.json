{
  "MetaArgs": null,
  "Stages": [
    {
      "Name": "",
      "BaseName": "fpco/stack-build:lts-6",
      "SourceCode": "FROM fpco/stack-build:lts-6",
      "Platform": "",
      "From": {
        "Image": "fpco/stack-build:lts-6"
      },
      "Commands": [
        {
          "Maintainer": "Vikraman \u003cgit@vikraman.org\u003e",
          "Name": "maintainer"
        },
        {
          "Name": "workdir",
          "Path": "/root"
        },
        {
          "CmdLine": [
            "git clone --quiet --recursive git://git.haskell.org/ghc.git"
          ],
          "Name": "run",
          "PrependShell": true
        },
        {
          "Name": "workdir",
          "Path": "/root/ghc"
        },
        {
          "Env": [
            {
              "Key": "SUBMOD_SHA",
              "Value": "9018a2565c7a4669d93aac61f25c313c394b2441"
            }
          ],
          "Name": "env"
        },
        {
          "CmdLine": [
            "git remote add fork https://github.com/iu-parfunc/ghc.git \u0026\u0026     git fetch fork \u0026\u0026     git checkout ${SUBMOD_SHA} \u0026\u0026     git reset --hard \u0026\u0026 git clean -dfx \u0026\u0026     git submodule update --init --recursive"
          ],
          "Name": "run",
          "PrependShell": true
        },
        {
          "Env": [
            {
              "Key": "GHC_PREFIX",
              "Value": "/opt/ghc"
            }
          ],
          "Name": "env"
        },
        {
          "CmdLine": [
            "mkdir -p ${GHC_PREFIX}"
          ],
          "Name": "run",
          "PrependShell": true
        },
        {
          "CmdLine": [
            "sed -e 's/#BuildFlavour = quick/BuildFlavour = quick/'         -e 's/#V=0/V=0/' mk/build.mk.sample \u003e mk/build.mk \u0026\u0026     ./boot \u0026\u0026 ./configure --quiet --prefix ${GHC_PREFIX} \u0026\u0026     make -j2 \u0026\u0026 make install"
          ],
          "Name": "run",
          "PrependShell": true
        },
        {
          "Env": [
            {
              "Key": "PATH",
              "Value": "${GHC_PREFIX}/bin:${PATH}"
            }
          ],
          "Name": "env"
        },
        {
          "Name": "workdir",
          "Path": "/root"
        }
      ]
    }
  ]
}