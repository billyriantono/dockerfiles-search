MetaArgs: null
Stages:
- As: builder
  BaseName: maven:3.6.0-jdk-8
  Commands:
  - CmdLine:
    - echo hello
    Name: run
    PrependShell: true
  - CmdLine:
    - git clone http://github.com/jenkinsci/jenkins.git &&     cd jenkins &&     git
      fetch origin pull/3865/head:PR-3865 &&     git checkout PR-3865 &&     mvn clean
      package -DskipTests -pl war -am &&     cp war/target/jenkins.war /jenkins.war
    Name: run
    PrependShell: true
  From:
    Image: maven:3.6.0-jdk-8
  Name: builder
  Platform: ""
  SourceCode: FROM maven:3.6.0-jdk-8 as builder
- BaseName: jenkins/jenkins:2.161
  Commands:
  - Labels:
    - Key: maintainer
      Value: '"Baptiste Mathus <batmat@batmat.net>"'
    Name: label
  - Name: user
    User: root
  - CmdLine:
    - apt-get update -y     && apt-get install sloccount -y
    Name: run
    PrependShell: true
  - CmdLine:
    - wget --quiet https://download.java.net/java/GA/jdk11/9/GPL/openjdk-11.0.2_linux-x64_bin.tar.gz
      --output-document=/tmp/jdk11.tgz
    Name: run
    PrependShell: true
  - CmdLine:
    - cd /usr     && tar xvzf /tmp/jdk11.tgz &&     ls /usr/jdk-11.0.2/
    Name: run
    PrependShell: true
  - Chown: ""
    From: builder
    Name: copy
    SourcesAndDest:
    - /jenkins.war
    - /usr/share/jenkins/jenkins.war
  - Chown: ""
    From: ""
    Name: copy
    SourcesAndDest:
    - jenkins.sh
    - /usr/local/bin/jenkins.sh
  - Name: user
    User: jenkins
  - Env:
    - Key: JENKINS_ENABLE_FUTURE_JAVA
      Value: "true"
    Name: env
  - CmdLine:
    - /usr/local/bin/install-plugins.sh     configuration-as-code
    Name: run
    PrependShell: true
  - Env:
    - Key: CASC_JENKINS_CONFIG
      Value: $JENKINS_HOME/config-as-code.yaml
    Name: env
  - Env:
    - Key: JENKINS_ADMIN_PASSWORD
      Value: admin
    Name: env
  - Chown: ""
    From: ""
    Name: copy
    SourcesAndDest:
    - config-as-code.yaml
    - /usr/share/jenkins/ref/config-as-code.yaml
  - Chown: ""
    From: ""
    Name: copy
    SourcesAndDest:
    - jobs
    - /usr/share/jenkins/ref/jobs/
  - Env:
    - Key: JAVA_OPTS
      Value: '"-Djenkins.install.runSetupWizard=false "'
    Name: env
  - Env:
    - Key: PATH
      Value: '"/usr/jdk-11.0.2/bin:$PATH"'
    Name: env
  From:
    Image: jenkins/jenkins:2.161
  Name: ""
  Platform: ""
  SourceCode: FROM jenkins/jenkins:2.161
