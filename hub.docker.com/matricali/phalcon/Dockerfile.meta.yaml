MetaArgs: null
Stages:
- BaseName: php:7.2-zts-stretch
  Commands:
  - Maintainer: Jorge Matricali <jorgematricali@gmail.com>
    Name: maintainer
  - Env:
    - Key: PHALCON_VERSION
      Value: 3.4.2
    Name: env
  - Env:
    - Key: PHALCON_URL
      Value: https://codeload.github.com/phalcon/cphalcon/tar.gz/v3.4.2
    Name: env
  - CmdLine:
    - set -x &&     apt-get update &&     apt-get install --no-install-recommends
      --no-install-suggests -y git unzip libpng-dev &&     docker-php-ext-install
      -j$(nproc) pdo &&     docker-php-ext-install -j$(nproc) pdo_mysql &&     docker-php-ext-install
      -j$(nproc) bcmath &&     docker-php-ext-install -j$(nproc) gd &&     yes | pecl
      install xdebug &&     echo "zend_extension=$(find /usr/local/lib/php/extensions/
      -name xdebug.so)" > /usr/local/etc/php/conf.d/xdebug.ini &&     echo "xdebug.remote_enable=on"
      >> /usr/local/etc/php/conf.d/xdebug.ini &&     echo "xdebug.remote_autostart=off"
      >> /usr/local/etc/php/conf.d/xdebug.ini &&     cd /tmp/ &&     curl -O "${PHALCON_URL}"
      &&     tar xvzf "v${PHALCON_VERSION}" && rm "v${PHALCON_VERSION}" &&     cd
      "cphalcon-${PHALCON_VERSION}/build" &&     ./install &&     docker-php-ext-enable
      phalcon &&     php -r "copy('https://getcomposer.org/installer', 'composer-setup.php');"
      &&     php composer-setup.php --install-dir=/usr/bin --filename=composer &&     php
      -r "unlink('composer-setup.php');" &&     curl -L 'https://phar.phpunit.de/phpunit-7.phar'
      > /usr/bin/phpunit &&     chmod a+x /usr/bin/phpunit &&     apt-get install
      --no-install-recommends --no-install-suggests -y libcurl4-openssl-dev libssl-dev
      pkg-config &&     pecl install mongodb &&     docker-php-ext-enable mongodb
      &&     apt-get remove --purge --auto-remove -y libpng-dev libcurl4-openssl-dev
      libssl-dev pkg-config &&     apt-get autoremove -y &&     apt-get autoclean
      -y &&     apt-get clean -y &&     rm -fr /var/lib/apt/lists/* &&     rm -fr
      /tmp/* /var/tmp/*
    Name: run
    PrependShell: true
  From:
    Image: php:7.2-zts-stretch
  Name: ""
  Platform: ""
  SourceCode: FROM php:7.2-zts-stretch
