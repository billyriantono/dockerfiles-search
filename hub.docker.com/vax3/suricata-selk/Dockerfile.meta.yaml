MetaArgs: null
Stages:
- BaseName: alpine:latest
  Commands:
  - Env:
    - Key: YAML_VERSION
      Value: 0.2.1
    Name: env
  - CmdLine:
    - apk update     && apk add libpcre2-32 pcre-dev     build-base autoconf automake
      libtool libpcap-dev libnet-dev     perl-yaml-libyaml zlib-dev libmagic libcap-ng-dev     jansson-dev
      pkgconf gcompat wget ethtool     && wget http://pyyaml.org/download/libyaml/yaml-$YAML_VERSION.tar.gz     &&
      tar xzf yaml-$YAML_VERSION.tar.gz     && rm yaml-$YAML_VERSION.tar.gz     &&
      cd yaml-$YAML_VERSION     && ./configure     && make     && make install
    Name: run
    PrependShell: true
  - Env:
    - Key: SURICATA_VERSION
      Value: 4.0.5
    Name: env
  - CmdLine:
    - wget http://www.openinfosecfoundation.org/download/suricata-$SURICATA_VERSION.tar.gz     &&
      tar -xvzf suricata-$SURICATA_VERSION.tar.gz     && rm suricata-$SURICATA_VERSION.tar.gz     &&
      cd suricata-$SURICATA_VERSION     && ./configure --prefix=/usr --sysconfdir=/etc
      --localstatedir=/var     && make     && make install-full
    Name: run
    PrependShell: true
  - Chown: ""
    From: ""
    Name: copy
    SourcesAndDest:
    - suricata.yml.tpl
    - /etc/suricata/suricata.yml.tpl
  - Env:
    - Key: FILEBEAT_VERSION
      Value: 6.4.0
    Name: env
  - CmdLine:
    - wget https://artifacts.elastic.co/downloads/beats/filebeat/filebeat-$FILEBEAT_VERSION-linux-x86_64.tar.gz     &&
      tar xzf filebeat-$FILEBEAT_VERSION-linux-x86_64.tar.gz     && rm filebeat-$FILEBEAT_VERSION-linux-x86_64.tar.gz     &&
      mv filebeat-$FILEBEAT_VERSION-linux-x86_64 filebeat
    Name: run
    PrependShell: true
  - Chown: ""
    From: ""
    Name: copy
    SourcesAndDest:
    - filebeat.yml.tpl
    - /filebeat/filebeat.yml.tpl
  - Chown: ""
    Name: add
    SourcesAndDest:
    - entrypoint.sh
    - /
  - CmdLine:
    - chmod +x /entrypoint.sh
    Name: run
    PrependShell: true
  - CmdLine:
    - /entrypoint.sh
    Name: entrypoint
    PrependShell: false
  From:
    Image: alpine:latest
  Name: ""
  Platform: ""
  SourceCode: FROM alpine:latest
