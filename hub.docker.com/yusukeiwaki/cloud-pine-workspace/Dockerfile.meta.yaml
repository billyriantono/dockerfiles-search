MetaArgs: null
Stages:
- BaseName: debian:buster
  Commands:
  - Key: USERNAME
    Name: arg
    Value: cloud-pine
  - Env:
    - Key: DEBIAN_FRONTEND
      Value: noninteractive
    Name: env
  - CmdLine:
    - apt-get update && apt-get -y --no-install-recommends install         build-essential         ca-certificates         curl         git         locales         openssh-client         nano         nodejs         python         sudo         wget         &&
      rm -rf /var/cache/apt/archives/* /var/lib/apt/lists/*
    Name: run
    PrependShell: true
  - CmdLine:
    - sed -i -e 's/# \(en_US\.UTF-8 .*\)/\1/' /etc/locale.gen
    Name: run
    PrependShell: true
  - CmdLine:
    - locale-gen
    Name: run
    PrependShell: true
  - Env:
    - Key: LANG
      Value: en_US.UTF-8
    Name: env
  - Env:
    - Key: LANGUAGE
      Value: en_US:en
    Name: env
  - Env:
    - Key: LC_ALL
      Value: en_US.UTF-8
    Name: env
  - CmdLine:
    - useradd -m -s /bin/bash $USERNAME
    Name: run
    PrependShell: true
  - CmdLine:
    - 'echo $USERNAME "ALL=(ALL:ALL) NOPASSWD: ALL" > /etc/sudoers.d/$USERNAME'
    Name: run
    PrependShell: true
  - CmdLine:
    - mkdir -p /c9 /usr/src/app && chown $USERNAME:$USERNAME /c9 /usr/src/app
    Name: run
    PrependShell: true
  - CmdLine:
    - curl -L https://www.npmjs.com/install.sh | sh
    Name: run
    PrependShell: true
  - CmdLine:
    - npm install -g c9
    Name: run
    PrependShell: true
  - Env:
    - Key: ENTRYKIT_VERSION
      Value: 0.4.0
    Name: env
  - CmdLine:
    - wget https://github.com/progrium/entrykit/releases/download/v${ENTRYKIT_VERSION}/entrykit_${ENTRYKIT_VERSION}_Linux_x86_64.tgz   &&
      tar -xvzf entrykit_${ENTRYKIT_VERSION}_Linux_x86_64.tgz   && rm entrykit_${ENTRYKIT_VERSION}_Linux_x86_64.tgz   &&
      mv entrykit /bin/entrykit   && chmod +x /bin/entrykit   && entrykit --symlink
    Name: run
    PrependShell: true
  - Name: user
    User: $USERNAME
  - CmdLine:
    - git clone https://github.com/c9/core.git /c9/sdk --depth 1
    Name: run
    PrependShell: true
  - CmdLine:
    - cd /c9/sdk/ && ./scripts/install-sdk.sh
    Name: run
    PrependShell: true
  - CmdLine:
    - sed -i -e 's/"dark"/"flat-light"/' /c9/sdk/configs/ide/default.js
    Name: run
    PrependShell: true
  - Name: user
    User: root
  - Name: user
    User: $USERNAME
  - Env:
    - Key: PORT
      Value: "8080"
    Name: env
  - Name: expose
    Ports:
    - "8080"
  - Env:
    - Key: C9_USER
      Value: $USERNAME
    Name: env
  - Name: workdir
    Path: /usr/src/app
  - Name: expose
    Ports:
    - "8888"
  - CmdLine:
    - prehook
    - sudo apt-get update
    - --
    Name: entrypoint
    PrependShell: false
  - CmdLine:
    - 'node /c9/sdk/server.js -w /usr/src/app --port 8888 --listen 0.0.0.0 --auth
      :'
    Name: cmd
    PrependShell: true
  From:
    Image: debian:buster
  Name: ""
  Platform: ""
  SourceCode: FROM debian:buster
