MetaArgs: null
Stages:
- BaseName: ubuntu:latest
  Commands:
  - Labels:
    - Key: maintainer
      Value: Kyle Usbeck
    Name: label
  - CmdLine:
    - apt-get update && apt-get install -y git
    Name: run
    PrependShell: true
  - CmdLine:
    - git clone https://github.com/ArduPilot/ardupilot.git ardupilot
    Name: run
    PrependShell: true
  - Name: workdir
    Path: ardupilot
  - CmdLine:
    - git checkout Copter-3.6.7
    Name: run
    PrependShell: true
  - CmdLine:
    - git submodule update --init --recursive
    Name: run
    PrependShell: true
  - Env:
    - Key: DEBIAN_FRONTEND
      Value: noninteractive
    Name: env
  - CmdLine:
    - apt-get install -y sudo lsb-release tzdata
    Name: run
    PrependShell: true
  - CmdLine:
    - USER=nobody Tools/scripts/install-prereqs-ubuntu.sh -y
    Name: run
    PrependShell: true
  - CmdLine:
    - ./waf distclean
    Name: run
    PrependShell: true
  - CmdLine:
    - ./waf configure --board sitl
    Name: run
    PrependShell: true
  - CmdLine:
    - ./waf copter
    Name: run
    PrependShell: true
  - CmdLine:
    - ./waf rover
    Name: run
    PrependShell: true
  - CmdLine:
    - ./waf plane
    Name: run
    PrependShell: true
  - CmdLine:
    - ./waf sub
    Name: run
    PrependShell: true
  - Name: expose
    Ports:
    - 5760/tcp
  - Env:
    - Key: INSTANCE
      Value: "0"
    Name: env
  - Env:
    - Key: LAT
      Value: "42.3898"
    Name: env
  - Env:
    - Key: LON
      Value: "-71.1476"
    Name: env
  - Env:
    - Key: ALT
      Value: "14"
    Name: env
  - Env:
    - Key: DIR
      Value: "270"
    Name: env
  - Env:
    - Key: MODEL
      Value: +
    Name: env
  - Env:
    - Key: SPEEDUP
      Value: "1"
    Name: env
  - Env:
    - Key: VEHICLE
      Value: ArduCopter
    Name: env
  - CmdLine:
    - /ardupilot/Tools/autotest/sim_vehicle.py --vehicle ${VEHICLE} -I${INSTANCE}
      --custom-location=${LAT},${LON},${ALT},${DIR} -w --frame ${MODEL} --no-rebuild
      --no-mavproxy --speedup ${SPEEDUP}
    Name: entrypoint
    PrependShell: true
  From:
    Image: ubuntu:latest
  Name: ""
  Platform: ""
  SourceCode: FROM ubuntu:latest
