MetaArgs:
- DefaultValue: ""
  Key: SOURCE_DATE_EPOCH
  ProvidedValue: null
  Value: ""
Stages:
- BaseName: nrcfuels/centos-mpich-lite:latest
  Commands:
  - Key: SOURCE_DATE_EPOCH
    Name: arg
    Value: null
  - Env:
    - Key: PACKAGES_DIR
      Value: /opt
    Name: env
  - Env:
    - Key: PETSC_VER
      Value: 3.9.4
    Name: env
  - Env:
    - Key: GCC_VER
      Value: ${GCC_VER:-8.2.0}
    Name: env
  - Env:
    - Key: PETSC_PREFIX
      Value: ${PACKAGES_DIR}/petsc-${PETSC_VER}/gcc-${GCC_VER}
    Name: env
  - Env:
    - Key: PKG_SRC
      Value: /tmp/pkg_source
    Name: env
  - Name: workdir
    Path: ${PKG_SRC}
  - Chown: ""
    From: ""
    Name: copy
    SourcesAndDest:
    - ./scripts/petsc-${PETSC_VER}.tar.gz.sha256
    - ./scripts/install-petsc.sh
    - ./
  - CmdLine:
    - ./install-petsc.sh && rm ./install-petsc.sh
    Name: run
    PrependShell: true
  - Env:
    - Key: PATH
      Value: ${PETSC_PREFIX}/bin:${PATH}
    Name: env
  - Env:
    - Key: PETSC_DIR
      Value: ${PETSC_PREFIX}
    Name: env
  - Key: BUILD_DATE
    Name: arg
    Value: null
  - Key: VCS_REF
    Name: arg
    Value: null
  - Key: VCS_URL
    Name: arg
    Value: null
  - Key: VCS_VERSION
    Name: arg
    Value: latest
  - Labels:
    - Key: org.label-schema.schema-version
      Value: '"1.0"'
    - Key: org.label-schema.build-date
      Value: '"$BUILD_DATE"'
    - Key: org.label-schema.version
      Value: '"$VCS_VERSION"'
    - Key: org.label-schema.name
      Value: '"centos-petsc-lite"'
    - Key: org.lavel-schema.source-date-epoch
      Value: '"$SOURCE_DATE_EPOCH"'
    - Key: org.label-schema.description
      Value: '"CentOS 7 base image w/ gcc, git, CMake, MPICH, and PETSC"'
    - Key: org.label-schema.url
      Value: '"https://github.com/nrc-fuels/centos-petsc-lite/"'
    - Key: org.label-schema.vcs-ref
      Value: '"$VCS_REF"'
    - Key: org.label-schema.vcs-url
      Value: '"$VCS_URL"'
    - Key: org.label-schema.vendor
      Value: '"nrcfuels"'
    - Key: org.label-schema.license
      Value: '"N/A"'
    - Key: org.label-schema.docker.cmd
      Value: '"docker run -v $(pwd):/workdir -i -t nrcfuels/centos-petsc-lite:latest"'
    Name: label
  From:
    Image: nrcfuels/centos-mpich-lite:latest
  Name: ""
  Platform: ""
  SourceCode: FROM nrcfuels/centos-mpich-lite:latest
