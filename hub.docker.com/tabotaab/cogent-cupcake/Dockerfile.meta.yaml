MetaArgs: null
Stages:
- BaseName: ubuntu:14.04
  Commands:
  - Maintainer: Sara Movahedi movahedisara@yahoo.com
    Name: maintainer
  - CmdLine:
    - apt-get update
    Name: run
    PrependShell: true
  - CmdLine:
    - apt-get install -y -q software-properties-common
    Name: run
    PrependShell: true
  - CmdLine:
    - apt-get install -y -q libboost-iostreams-dev libboost-system-dev libboost-filesystem-dev
    Name: run
    PrependShell: true
  - CmdLine:
    - apt-get install -y -q zlibc gcc-multilib apt-utils zlib1g-dev python python-pip
    Name: run
    PrependShell: true
  - CmdLine:
    - apt-get install -y -q libx11-dev libxpm-dev libxft-dev libxext-dev libncurses5-dev
    Name: run
    PrependShell: true
  - CmdLine:
    - apt-get install -y -q cmake tcsh build-essential g++ git wget gzip perl unzip
    Name: run
    PrependShell: true
  - CmdLine:
    - apt-get install -y -q vim samtools
    Name: run
    PrependShell: true
  - CmdLine:
    - apt-get update
    Name: run
    PrependShell: true
  - CmdLine:
    - apt-get -y upgrade
    Name: run
    PrependShell: true
  - Name: workdir
    Path: /
  - CmdLine:
    - wget http://research-pub.gene.com/gmap/src/gmap-gsnap-2018-07-04.tar.gz
    Name: run
    PrependShell: true
  - CmdLine:
    - tar zxvf gmap-gsnap-2018-07-04.tar.gz
    Name: run
    PrependShell: true
  - CmdLine:
    - cd /gmap-2018-07-04 && ./configure && make && make install
    Name: run
    PrependShell: true
  - CmdLine:
    - rm -f gmap-gsnap-2018-07-04.tar.gz
    Name: run
    PrependShell: true
  - Name: workdir
    Path: /
  - CmdLine:
    - wget https://github.com/marbl/Mash/releases/download/v1.0.2/mash-Linux64-v1.0.2.tar.gz
    Name: run
    PrependShell: true
  - CmdLine:
    - tar -xvzf mash-Linux64-v1.0.2.tar.gz
    Name: run
    PrependShell: true
  - CmdLine:
    - cp mash /usr/bin/
    Name: run
    PrependShell: true
  - CmdLine:
    - rm -f mash-Linux64-v1.0.2.tar.gz
    Name: run
    PrependShell: true
  - Name: workdir
    Path: /
  - CmdLine:
    - wget https://github.com/lh3/minimap2/releases/download/v2.7/minimap2-2.7_x64-linux.tar.bz2
    Name: run
    PrependShell: true
  - CmdLine:
    - tar xvjf minimap2-2.7_x64-linux.tar.bz2
    Name: run
    PrependShell: true
  - CmdLine:
    - cp /minimap2-2.7_x64-linux/minimap2 /usr/bin/
    Name: run
    PrependShell: true
  - CmdLine:
    - chmod 755 /minimap2-2.7_x64-linux/minimap2.1
    Name: run
    PrependShell: true
  - Env:
    - Key: PATH
      Value: $PATH:/minimap2-2.7_x64-linux
    Name: env
  - CmdLine:
    - rm -f minimap2-2.7_x64-linux.tar.bz2
    Name: run
    PrependShell: true
  - CmdLine:
    - rm /bin/sh && ln -s /bin/bash /bin/sh
    Name: run
    PrependShell: true
  - Env:
    - Key: CONDA_ENV_PATH
      Value: /anaconda3
    Name: env
  - Env:
    - Key: MY_CONDA_COGENTENV
      Value: '"anaCogent"'
    Name: env
  - Env:
    - Key: CONDA_ACTIVATE
      Value: '"source $CONDA_ENV_PATH/bin/activate $MY_CONDA_COGENTENV"'
    Name: env
  - Name: workdir
    Path: /
  - CmdLine:
    - wget https://repo.continuum.io/archive/Anaconda3-5.3.1-Linux-x86_64.sh
    Name: run
    PrependShell: true
  - CmdLine:
    - bash Anaconda3-5.3.1-Linux-x86_64.sh -b -p $CONDA_ENV_PATH
    Name: run
    PrependShell: true
  - Env:
    - Key: PATH
      Value: $CONDA_ENV_PATH/bin:$PATH
    Name: env
  - CmdLine:
    - conda -V && conda update --quiet --yes conda &&     conda create -y -n $MY_CONDA_COGENTENV
      python=2.7 anaconda
    Name: run
    PrependShell: true
  - CmdLine:
    - $CONDA_ACTIVATE &&     apt-get -y install libgl1-mesa-glx &&     conda install
      -y -n $MY_CONDA_COGENTENV numpy &&     conda install -y -n $MY_CONDA_COGENTENV
      scipy &&     conda install -y -n $MY_CONDA_COGENTENV scikit-image &&     conda
      install -y -n $MY_CONDA_COGENTENV matplotlib &&     conda install -y -n $MY_CONDA_COGENTENV
      biopython &&     conda install -y -n $MY_CONDA_COGENTENV -c http://conda.anaconda.org/cgat
      bx-python &&     conda install -y -n $MY_CONDA_COGENTENV -c conda-forge pulp
      &&     conda clean -y -t
    Name: run
    PrependShell: true
  - CmdLine:
    - chmod -R 755 $CONDA_ENV_PATH/bin && chmod -R 755 $CONDA_ENV_PATH/envs/anaCogent/bin
    Name: run
    PrependShell: true
  - Env:
    - Key: PATH
      Value: $PATH:$CONDA_ENV_PATH/envs/anaCogent/bin
    Name: env
  - Name: workdir
    Path: /
  - CmdLine:
    - $CONDA_ACTIVATE &&     git clone https://github.com/Magdoll/Cogent.git &&     cd
      Cogent &&     git submodule update --init --recursive &&     cd  Complete-Striped-Smith-Waterman-Library/src
      &&     make &&     export LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/Cogent/Complete-Striped-Smith-Waterman-Library/src
      &&     export PYTHONPATH=$PYTHONPATH:/Cogent/Complete-Striped-Smith-Waterman-Library/src
      &&     cd ../../ &&     python setup.py build &&     python setup.py install
      &&     chmod 755 /Cogent -R
    Name: run
    PrependShell: true
  - Name: workdir
    Path: /
  - CmdLine:
    - $CONDA_ACTIVATE &&     git clone https://github.com/Magdoll/cDNA_Cupcake.git
      &&     cd cDNA_Cupcake &&     git checkout -b tofu2 tofu2_v21 &&     python
      setup.py build &&     python setup.py install &&     chmod 755 /cDNA_Cupcake
      -R
    Name: run
    PrependShell: true
  - Env:
    - Key: PATH
      Value: $PATH:/cDNA_Cupcake/cupcake2/tofu2:/cDNA_Cupcake/cupcake2/ice2:/cDNA_Cupcake/sequence/:/cDNA_Cupcake/annotation/:/cDNA_Cupcake/post_isoseq_cluster/:/cDNA_Cupcake/SequelQC
    Name: env
  - Name: workdir
    Path: /
  - CmdLine:
    - $CONDA_ACTIVATE &&     export LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/Cogent/Complete-Striped-Smith-Waterman-Library/src
      &&     export PYTHONPATH=$PYTHONPATH:/Cogent/Complete-Striped-Smith-Waterman-Library/src
    Name: run
    PrependShell: true
  From:
    Image: ubuntu:14.04
  Name: ""
  Platform: ""
  SourceCode: FROM ubuntu:14.04
