MetaArgs: null
Stages:
- BaseName: debian:stretch
  Commands:
  - Name: workdir
    Path: /usr/src
  - CmdLine:
    - apt-get update
    Name: run
    PrependShell: true
  - CmdLine:
    - apt-get install wget sed build-essential -y
    Name: run
    PrependShell: true
  - Env:
    - Key: NVM_DIR
      Value: /usr/local/nvm
    Name: env
  - Env:
    - Key: NODE_VERSION
      Value: 7.7.4
    Name: env
  - CmdLine:
    - wget -qO- https://raw.githubusercontent.com/creationix/nvm/v0.33.7/install.sh
      | bash
    Name: run
    PrependShell: true
  - CmdLine:
    - rm /bin/sh && ln -s /bin/bash /bin/sh
    Name: run
    PrependShell: true
  - CmdLine:
    - source $NVM_DIR/nvm.sh     && nvm install $NODE_VERSION     && nvm alias default
      $NODE_VERSION
    Name: run
    PrependShell: true
  - CmdLine:
    - echo "source ${NVM_DIR}/nvm.sh" > $HOME/.bashrc &&     source $HOME/.bashrc
    Name: run
    PrependShell: true
  - Env:
    - Key: NODE_PATH
      Value: $NVM_DIR/v$NODE_VERSION/lib/node_modules
    Name: env
  - Env:
    - Key: PATH
      Value: $NVM_DIR/versions/node/v$NODE_VERSION/bin:$PATH
    Name: env
  - Chown: ""
    From: ""
    Name: copy
    SourcesAndDest:
    - .
    - /src
  - Chown: ""
    From: ""
    Name: copy
    SourcesAndDest:
    - .nvmrc
    - /src/.nvmrc
  - Name: workdir
    Path: /src
  - CmdLine:
    - npm i -g yarn
    Name: run
    PrependShell: true
  - CmdLine:
    - yarn --frozen-lockfile
    Name: run
    PrependShell: true
  - Name: workdir
    Path: /usr/src
  - CmdLine:
    - wget "http://downloads.sourceforge.net/project/mad/libmad/0.15.1b/libmad-0.15.1b.tar.gz?r=https%3A%2F%2Fsourceforge.net%2Fprojects%2Fmad%2Ffiles%2Flibmad%2F0.15.1b%2F&ts=1476010202&use_mirror=ufpr"
      -O libmad-0.15.1b.tar.gz
    Name: run
    PrependShell: true
  - CmdLine:
    - tar zxf libmad-0.15.1b.tar.gz
    Name: run
    PrependShell: true
  - Name: workdir
    Path: /usr/src/libmad-0.15.1b
  - CmdLine:
    - sed -i '/-fforce-mem/d' configure
    Name: run
    PrependShell: true
  - CmdLine:
    - ./configure --prefix=/usr/libmad-0.15.1b --enable-static --disable-shared
    Name: run
    PrependShell: true
  - CmdLine:
    - make
    Name: run
    PrependShell: true
  - CmdLine:
    - make install
    Name: run
    PrependShell: true
  - Name: workdir
    Path: /usr/src
  - CmdLine:
    - wget "https://downloads.sourceforge.net/project/lame/lame/3.99/lame-3.99.5.tar.gz"
      -O lame-3.99.5.tar.gz
    Name: run
    PrependShell: true
  - CmdLine:
    - tar zxf lame-3.99.5.tar.gz
    Name: run
    PrependShell: true
  - Name: workdir
    Path: /usr/src/lame-3.99.5
  - CmdLine:
    - ./configure --prefix=/usr/lame-3.99.5 --enable-static --disable-shared
    Name: run
    PrependShell: true
  - CmdLine:
    - make
    Name: run
    PrependShell: true
  - CmdLine:
    - make install
    Name: run
    PrependShell: true
  - Name: workdir
    Path: /usr/src
  - CmdLine:
    - wget "https://downloads.sourceforge.net/project/sox/sox/14.4.2/sox-14.4.2.tar.bz2?r=https%3A%2F%2Fsourceforge.net%2Fprojects%2Fsox%2Ffiles%2Fsox%2F14.4.2%2F&ts=1476009578&use_mirror=ufpr"
      -O sox-14.4.2.tar.bz2
    Name: run
    PrependShell: true
  - CmdLine:
    - tar jxf sox-14.4.2.tar.bz2
    Name: run
    PrependShell: true
  - Name: workdir
    Path: /usr/src/sox-14.4.2
  - CmdLine:
    - CPPFLAGS="-I/usr/libmad-0.15.1b/include -I/usr/lame-3.99.5/include "     LDFLAGS="-L/usr/libmad-0.15.1b/lib
      -L/usr/lame-3.99.5/lib -L/usr/libgsm-1.0.10/lib"     ./configure --prefix=/usr/sox-14.4.2
      --disable-shared --enable-static --with-lame
    Name: run
    PrependShell: true
  - CmdLine:
    - make
    Name: run
    PrependShell: true
  - CmdLine:
    - make install
    Name: run
    PrependShell: true
  - CmdLine:
    - ln -s /usr/sox-14.4.2/bin/sox /usr/bin
    Name: run
    PrependShell: true
  - CmdLine:
    - apt-get remove --purge wget build-essential -y
    Name: run
    PrependShell: true
  - CmdLine:
    - apt-get clean
    Name: run
    PrependShell: true
  - Name: workdir
    Path: /src
  - CmdLine:
    - yarn
    - start
    Name: cmd
    PrependShell: false
  From:
    Image: debian:stretch
  Name: ""
  Platform: ""
  SourceCode: FROM debian:stretch
