MetaArgs: null
Stages:
- BaseName: ubuntu:14.04.4
  Commands:
  - CmdLine:
    - apt-get -y update
    Name: run
    PrependShell: true
  - CmdLine:
    - apt-get -y install software-properties-common
    Name: run
    PrependShell: true
  - CmdLine:
    - apt-get -y install apt-transport-https
    Name: run
    PrependShell: true
  - CmdLine:
    - apt-get -y update && apt-get -y upgrade
    Name: run
    PrependShell: true
  - CmdLine:
    - apt-get -y install links nano htop git
    Name: run
    PrependShell: true
  - CmdLine:
    - apt-get -y install make
    Name: run
    PrependShell: true
  - CmdLine:
    - apt-get -y install apache2
    Name: run
    PrependShell: true
  - CmdLine:
    - apt-get -y install libapache2-mod-perl2
    Name: run
    PrependShell: true
  - CmdLine:
    - apt-get -y install php5 libapache2-mod-php5
    Name: run
    PrependShell: true
  - CmdLine:
    - apt-get install -y supervisor
    Name: run
    PrependShell: true
  - CmdLine:
    - mkdir -p /var/log/supervisor
    Name: run
    PrependShell: true
  - CmdLine:
    - git clone https://github.com/CSAILVision/LabelMeAnnotationTool.git LabelMeAnnotationTool
    Name: run
    PrependShell: true
  - CmdLine:
    - cd LabelMeAnnotationTool; make
    Name: run
    PrependShell: true
  - CmdLine:
    - cp -a /LabelMeAnnotationTool /var/www/LabelMeAnnotationTool
    Name: run
    PrependShell: true
  - Chown: ""
    From: ""
    Name: copy
    SourcesAndDest:
    - 000-default.conf
    - /etc/apache2/sites-available/000-default.conf
  - Chown: ""
    From: ""
    Name: copy
    SourcesAndDest:
    - httpd.conf
    - /etc/apache2/httpd.conf
  - CmdLine:
    - a2enmod include
    Name: run
    PrependShell: true
  - CmdLine:
    - a2enmod rewrite
    Name: run
    PrependShell: true
  - CmdLine:
    - a2enmod cgi
    Name: run
    PrependShell: true
  - CmdLine:
    - mkdir -p /var/lock/apache2 /var/run/apache2
    Name: run
    PrependShell: true
  - Chown: ""
    From: ""
    Name: copy
    SourcesAndDest:
    - supervisord.conf
    - /etc/supervisor/conf.d/supervisord.conf
  - Name: expose
    Ports:
    - "80"
  - CmdLine:
    - /usr/bin/supervisord
    Name: cmd
    PrependShell: false
  From:
    Image: ubuntu:14.04.4
  Name: ""
  Platform: ""
  SourceCode: FROM ubuntu:14.04.4
