MetaArgs: null
Stages:
- BaseName: python:3.7.1
  Commands:
  - Maintainer: zhengfei(zheng.fei@ginolegaltech.com)
    Name: maintainer
  - Env:
    - Key: VERSION_TO_INSTALL
      Value: latest
    Name: env
  - Env:
    - Key: INSTALL_DIR
      Value: /opt/drafter
    Name: env
  - CmdLine:
    - apt-get update && apt-get install -y   libxml2-dev  libxslt-dev  python3-dev  lib32z1-dev  gettext  vim-tiny  locales  nano  poppler-utils  logrotate  gunicorn
      && rm -rf /var/lib/apt/lists/*
    Name: run
    PrependShell: true
  - Env:
    - Key: LANG
      Value: en_US.UTF-8
    Name: env
  - CmdLine:
    - echo "en_US.UTF-8 UTF-8" >/etc/locale.gen
    Name: run
    PrependShell: true
  - CmdLine:
    - locale-gen && date +'%F %T' && apt-get autoremove -y && date +'%F %T'
    Name: run
    PrependShell: true
  - Chown: ""
    Name: add
    SourcesAndDest:
    - requirements.*
    - /tmp/
  - CmdLine:
    - pip install -r /tmp/requirements.proprietary.txt  && pip install -r /tmp/requirements.dev.txt
    Name: run
    PrependShell: true
  - Name: volume
    Volumes:
    - $INSTALL_DIR
  - Name: volume
    Volumes:
    - /var/log/drafter
  - Name: volume
    Volumes:
    - /var/www/drafter/media
  - Name: volume
    Volumes:
    - /data/drafter/sock
  - Name: workdir
    Path: $INSTALL_DIR/drafter
  From:
    Image: python:3.7.1
  Name: ""
  Platform: ""
  SourceCode: FROM python:3.7.1
