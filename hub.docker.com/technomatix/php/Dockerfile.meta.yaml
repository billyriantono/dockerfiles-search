MetaArgs: null
Stages:
- BaseName: technomatix/php:7.2-cli-jessie
  Commands:
  - Env:
    - Key: SONARCLI_VERSION
      Value: 3.3.0.1492
    - Key: SONAR_GPG
      Value: '"CFCA4A29D26468DE"'
    Name: env
  - CmdLine:
    - set -xe &&     apt-get -qq update &&     apt-get -qq install --assume-yes jq
      unzip gpg &&     curl --insecure -OL https://storage.googleapis.com/shellcheck/shellcheck-stable.linux.x86_64.tar.xz
      &&     tar -xvf shellcheck-stable.linux.x86_64.tar.xz &&     mv shellcheck-stable/shellcheck
      /usr/local/bin/shellcheck &&     rm -fr shellcheck-stable shellcheck-stable.linux.x86_64.tar.xz
      &&     pecl install xdebug &&     docker-php-ext-enable xdebug &&     echo "xdebug.remote_enable=on"
      | tee -a /usr/local/etc/php/conf.d/docker-php-ext-xdebug.ini &&     echo "xdebug.remote_connect_back=on"
      | tee -a /usr/local/etc/php/conf.d/docker-php-ext-xdebug.ini &&     git clone
      --depth 1 https://github.com/sstephenson/bats.git /tmp/bats &&     cd /tmp/bats
      &&     ./install.sh /usr/local &&     curl --fail --location https://github.com/mvdan/sh/releases/download/v2.6.3/shfmt_v2.6.3_linux_amd64
      > /usr/local/bin/shfmt &&     chmod +x /usr/local/bin/shfmt &&     composer
      global require --optimize-autoloader codeception/codeception &&     curl --output
      sonar-scanner-cli.zip https://binaries.sonarsource.com/Distribution/sonar-scanner-cli/sonar-scanner-cli-${SONARCLI_VERSION}-linux.zip
      &&     curl --output sonar-scanner-cli.zip.asc https://binaries.sonarsource.com/Distribution/sonar-scanner-cli/sonar-scanner-cli-${SONARCLI_VERSION}-linux.zip.asc
      &&     gpg --status-fd 1 --verify sonar-scanner-cli.zip.asc sonar-scanner-cli.zip
      | grep ${SONAR_GPG} &&     unzip sonar-scanner-cli.zip &&     mv sonar-scanner-${SONARCLI_VERSION}-linux
      /opt/sonar-scanner &&     composer clearcache &&     apt-get clean &&     rm
      -rf /var/lib/apt/lists/* /tmp/* /var/tmp/* /root/.gnupg
    Name: run
    PrependShell: true
  - Env:
    - Key: PATH
      Value: '"/opt/sonar-scanner/bin:${PATH}"'
    Name: env
  - Key: BUILD_DATE
    Name: arg
    Value: null
  - Key: VCS_REF
    Name: arg
    Value: null
  - Labels:
    - Key: org.label-schema.build-date
      Value: $BUILD_DATE
    - Key: org.label-schema.vcs-ref
      Value: $VCS_REF
    Name: label
  From:
    Image: technomatix/php:7.2-cli-jessie
  Name: ""
  Platform: ""
  SourceCode: FROM technomatix/php:7.2-cli-jessie
