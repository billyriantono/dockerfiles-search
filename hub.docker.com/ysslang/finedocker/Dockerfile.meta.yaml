MetaArgs: null
Stages:
- BaseName: ubuntu:18.04
  Commands:
  - Key: FR10_LINUX_DEPLOY_PACK_URL
    Name: arg
    Value: '"https://fine-build.oss-cn-shanghai.aliyuncs.com/finereport/10.0/tomcat/tomcat-linux.tar.gz"'
  - Key: FINEDOCKER_SCRIPT_URL
    Name: arg
    Value: '"https://raw.githubusercontent.com/ysslang/FineDocker/master/finedocker.sh"'
  - Key: TZ
    Name: arg
    Value: '"Asia/Shanghai"'
  - Labels:
    - Key: maintainer
      Value: '"ysslang@qq.com"'
    - Key: description
      Value: '"With this image, you can easily run a FineReport10.0 by using command
        ''docker run -d -p8080:8080 ysslang/finedocker''"'
    Name: label
  - Env:
    - Key: TZ
      Value: $TZ
    - Key: LANG
      Value: C.UTF-8
    - Key: JAVA_HOME
      Value: /0/tomcat/jre/
    - Key: CATALINA_HOME
      Value: /0/tomcat/
    - Key: PATH
      Value: '"/0/tomcat/jre/bin:/0/tomcat/bin:$PATH"'
    - Key: HEALTH_CHECK_URL
      Value: '"http://localhost:8080/webroot/decision/system/health"'
    - Key: HEALTH_CHECK_PATTERN
      Value: '"{\"data\":\"OK\"}"'
    Name: env
  - Name: workdir
    Path: /0/
  - CmdLine:
    - set -eux;     ln -snf /usr/share/zoneinfo/$TZ /etc/localtime;   echo $TZ > /etc/timezone;     apt-get
      update -qq;   apt-get install -y -qq --no-install-recommends                   gosu                   curl                   wget                   tzdata                   iproute2                   fontconfig                   lsb-release   >
      /dev/null;   rm -rf /var/lib/apt/lists/*;     wget --no-check-certificate --no-verbose
      -O /0/tomcat-linux.tar.gz $FR10_LINUX_DEPLOY_PACK_URL;   wget --no-check-certificate
      --no-verbose -O /0/finedocker.sh $FINEDOCKER_SCRIPT_URL;     tar xzf tomcat-linux.tar.gz;   rm
      tomcat-linux.tar.gz;   mv tomcat-linux tomcat;     chown root:root -R .;   chmod
      +x  finedocker.sh             tomcat/bin/*.sh             tomcat/jre/bin/*             tomcat/webapps/webroot/WEB-INF/assist/phantomjs/*linux*/bin/*;   mkdir
      -p  /0/tomcat/jre/lib/fonts/fallback             /0/links;   ln -fnrs  finedocker.sh
      tomcat/bin/finedocker.sh;   ln -fns   ~/.FineReport100 ./links/;   ln -fnrs  tomcat/bin/catalina.sh             tomcat/bin/startup.sh             tomcat/bin/shutdown.sh             tomcat/conf/             tomcat/conf/server.xml             tomcat/jre/             tomcat/jre/lib/fonts/             tomcat/logs/             tomcat/temp/             tomcat/webapps/             tomcat/webapps/webroot/             tomcat/webapps/webroot/help             tomcat/webapps/webroot/WEB-INF/             tomcat/webapps/webroot/WEB-INF/classes             tomcat/webapps/webroot/WEB-INF/embed/finedb             tomcat/webapps/webroot/WEB-INF/config             tomcat/webapps/webroot/WEB-INF/lib/             tomcat/webapps/webroot/WEB-INF/plugins/             tomcat/webapps/webroot/WEB-INF/reportlets/             tomcat/webapps/webroot/WEB-INF/resources/             tomcat/webapps/webroot/WEB-INF/schedule/             tomcat/webapps/webroot/WEB-INF/web.xml             ./links/
    Name: run
    PrependShell: true
  - Name: volume
    Volumes:
    - /0/tomcat/
  - Health:
      Interval: 180000000000
      Retries: 3
      StartPeriod: 180000000000
      Test:
      - CMD-SHELL
      - curl $HEALTH_CHECK_URL -s | grep $HEALTH_CHECK_PATTERN -q || exit 1
      Timeout: 3000000000
    Name: healthcheck
  - Name: expose
    Ports:
    - "8080"
  - Name: expose
    Ports:
    - "38888"
  - CmdLine:
    - sh
    - finedocker.sh
    Name: entrypoint
    PrependShell: false
  - CmdLine:
    - run
    Name: cmd
    PrependShell: false
  From:
    Image: ubuntu:18.04
  Name: ""
  Platform: ""
  SourceCode: FROM ubuntu:18.04
