MetaArgs: null
Stages:
- BaseName: debian:jessie-slim
  Commands:
  - Env:
    - Key: VER
      Value: "8.8"
    Name: env
  - Env:
    - Key: PASSWORD
      Value: pass1234
    Name: env
  - CmdLine:
    - apt-get -qq update     && apt-get -qq install -y --no-install-recommends sudo
      bzip2 wget
    Name: run
    PrependShell: true
  - CmdLine:
    - adduser --quiet --shell /bin/bash --gecos "Sage user,101,," --disabled-password
      sage     && chown -R sage:sage /home/sage/     && chown -R sage:sage /opt/     &&
      echo "sage ALL=(ALL) NOPASSWD:ALL" >> /etc/sudoers
    Name: run
    PrependShell: true
  - Name: user
    User: sage
  - CmdLine:
    - sudo apt-get -qq install -y --no-install-recommends     nano     curl     python     python-pip     libpython2.7     gfortran     &&
      sudo apt-get -y clean && sudo apt-get autoremove
    Name: run
    PrependShell: true
  - Name: workdir
    Path: /home/sage
  - CmdLine:
    - wget -q http://ftp.yz.yamagata-u.ac.jp/pub/math/sage/linux/64bit/sage-${VER}-Debian_GNU_Linux_8-x86_64.tar.bz2     -O
      ./sage.tar.bz2     && tar xjf ./sage.tar.bz2 --absolute-names
    Name: run
    PrependShell: true
  - CmdLine:
    - rm -f ./sage.tar.bz2
    Name: run
    PrependShell: true
  - Chown: ""
    From: ""
    Name: copy
    SourcesAndDest:
    - ./sagenb.sh
    - ./
  - Chown: ""
    From: ""
    Name: copy
    SourcesAndDest:
    - ./jupyter.sh
    - ./
  - CmdLine:
    - sudo ln -s /home/sage/SageMath/sage /usr/local/bin/     && sudo chmod +x ./sagenb.sh     &&
      sudo chmod +x ./jupyter.sh     && sudo chown -R sage:sage /home/sage/     &&
      sudo chmod -R 777 /home/sage/     && mkdir /home/sage/jupyter     && mkdir /home/sage/.jupyter
    Name: run
    PrependShell: true
  - Chown: ""
    From: ""
    Name: copy
    SourcesAndDest:
    - ./jupyter_notebook_config.py
    - /home/sage/SageMath/local/etc/jupyter/
  - Chown: ""
    From: ""
    Name: copy
    SourcesAndDest:
    - ./jupyter_notebook_config.py
    - /home/sage/.jupyter/
  - Name: expose
    Ports:
    - "8080"
    - "8888"
  - CmdLine:
    - ./sagenb.sh
    Name: entrypoint
    PrependShell: false
  From:
    Image: debian:jessie-slim
  Name: ""
  Platform: ""
  SourceCode: FROM debian:jessie-slim
