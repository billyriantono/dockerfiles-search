MetaArgs: null
Stages:
- BaseName: ubuntu:14.04
  Commands:
  - Labels:
    - Key: maintainer
      Value: '"silas@qnapclub.pl"'
    Name: label
  - Maintainer: Silas Mariusz <silas@qnapclub.pl>
    Name: maintainer
  - Env:
    - Key: DEBIAN_FRONTEND
      Value: noninteractive
    Name: env
  - Env:
    - Key: HOME
      Value: /home/ubuntu
    - Key: SHELL
      Value: /bin/bash
    Name: env
  - CmdLine:
    - mkdir -p $HOME
    Name: run
    PrependShell: true
  - CmdLine:
    - "export SQL_PASSWORD=\"$(tr -dc 'A-HJ-NP-Za-km-z2-9' < /dev/urandom | dd bs=8
      count=1 status=none)\" \t\t&& echo -n \"export SQL_PASSWORD=$SQL_PASSWORD\"
      >> ~/.profile \t\t\t\t\t\t&& echo -n \"export SQL_PASSWORD=$SQL_PASSWORD\" >>
      /root/.profile \t\t\t\t\t\t&& echo -n \"$SQL_PASSWORD\" > /root/mysql.pwd"
    Name: run
    PrependShell: true
  - Env:
    - Key: MYSQL_USER
      Value: mysql
    - Key: MYSQL_DATA_DIR
      Value: /var/lib/mysql
    - Key: MYSQL_RUN_DIR
      Value: /run/mysqld
    - Key: MYSQL_LOG_DIR
      Value: /var/log/mysql
    Name: env
  - CmdLine:
    - "apt-get update \t\t\t\t\t\t\t\t\t\t\t\t&& apt-get install -y --force-yes --no-install-recommends
      \t\t\t\t\t\t\tsoftware-properties-common \t\t\t\t\t\t\t\t\t\tdebconf-utils \t\t\t\t\t\t\t\t\t\t\t\tcurl
      \t\t\t\t\t\t\t\t\t\t\t\t\tca-certificates \t\t\t\t\t\t\t\t\t\t\topenssh-server
      \t\t\t\t\t\t\t\t\t\t\t\tsudo \t\t\t\t\t\t\t\t\t\t\t\t\tnet-tools \t\t\t\t\t\t\t\t\t\t\t\tbuild-essential
      \t\t\t\t\t\t\t\t\t\t\tbash \t\t\t\t\t\t\t\t\t\t\t\t\tunzip \t\t\t\t\t\t\t\t\t\t\t\t\tapt-transport-https"
    Name: run
    PrependShell: true
  - CmdLine:
    - echo 'root:root' | chpasswd
    Name: run
    PrependShell: true
  - CmdLine:
    - "mkdir /var/run/sshd     && sed -ri 's/^PermitRootLogin\\s+.*/PermitRootLogin
      yes/' /etc/ssh/sshd_config \t\t\t    && sed -ri 's/^#PasswordAuthentication/PasswordAuthentication/'
      /etc/ssh/sshd_config \t\t    && sed -ri 's/^PasswordAuthentication no/PasswordAuthentication
      yes/' /etc/ssh/sshd_config \t\t    && sed -ri 's/UsePAM yes/#UsePAM yes/g' /etc/ssh/sshd_config"
    Name: run
    PrependShell: true
  - CmdLine:
    - "apt-get install -y --force-yes --no-install-recommends \t\t\t\t\t\t\t\t\tmysql-server-5.6"
    Name: run
    PrependShell: true
  - CmdLine:
    - "apt-get autoclean \t\t\t\t\t\t\t\t\t\t\t\t&& apt-get autoremove \t\t\t\t\t\t\t\t\t\t\t&&
      rm -rf /var/lib/apt/lists/*"
    Name: run
    PrependShell: true
  - Chown: ""
    Name: add
    SourcesAndDest:
    - entrypoint.sh
    - /sbin/entrypoint.sh
  - CmdLine:
    - chmod 755 /sbin/entrypoint.sh
    Name: run
    PrependShell: true
  - Name: expose
    Ports:
    - "22"
    - "3306"
  - Name: volume
    Volumes:
    - ${MYSQL_DATA_DIR}
    - ${MYSQL_RUN_DIR}
  - Name: workdir
    Path: /root
  - CmdLine:
    - /sbin/entrypoint.sh
    Name: entrypoint
    PrependShell: false
  From:
    Image: ubuntu:14.04
  Name: ""
  Platform: ""
  SourceCode: FROM ubuntu:14.04
