MetaArgs: null
Stages:
- BaseName: nvidia/cuda:9.0-base-ubuntu16.04
  Commands:
  - Env:
    - Key: LANG
      Value: C.UTF-8
    - Key: LC_ALL
      Value: C.UTF-8
    Name: env
  - Env:
    - Key: TZ
      Value: Asia/Shanghai
    Name: env
  - CmdLine:
    - ln -snf /usr/share/zoneinfo/$TZ /etc/localtime && echo $TZ > /etc/timezone
    Name: run
    PrependShell: true
  - CmdLine:
    - apt-get update && apt-get install -y --no-install-recommends         build-essential         cuda-command-line-tools-9-0         cuda-cublas-9-0         cuda-cufft-9-0         cuda-curand-9-0         cuda-cusolver-9-0         cuda-cusparse-9-0         curl         libcudnn7=7.2.1.38-1+cuda9.0         libnccl2=2.2.13-1+cuda9.0         libfreetype6-dev         libhdf5-serial-dev         libpng12-dev         libzmq3-dev         pkg-config         python3         python3-dev         rsync         software-properties-common         unzip         &&     apt-get
      clean &&     rm -rf /var/lib/apt/lists/*
    Name: run
    PrependShell: true
  - CmdLine:
    - apt-get update &&         apt-get install nvinfer-runtime-trt-repo-ubuntu1604-4.0.1-ga-cuda9.0
      &&         apt-get update &&         apt-get install libnvinfer4=4.1.2-1+cuda9.0
    Name: run
    PrependShell: true
  - CmdLine:
    - ln -sf /usr/bin/python3 /usr/bin/python
    Name: run
    PrependShell: true
  - CmdLine:
    - curl -O https://bootstrap.pypa.io/get-pip.py &&     python get-pip.py &&     rm
      get-pip.py
    Name: run
    PrependShell: true
  - Chown: ""
    From: ""
    Name: copy
    SourcesAndDest:
    - pip.conf
    - .
  - CmdLine:
    - mkdir -p ~/.config/pip && mv pip.conf ~/.config/pip/pip.conf
    Name: run
    PrependShell: true
  - CmdLine:
    - pip --no-cache-dir install         numpy         pandas         scipy         sklearn         tensorflow-gpu==1.11.0
    Name: run
    PrependShell: true
  - Env:
    - Key: LD_LIBRARY_PATH
      Value: /usr/local/cuda/extras/CUPTI/lib64:$LD_LIBRARY_PATH
    Name: env
  From:
    Image: nvidia/cuda:9.0-base-ubuntu16.04
  Name: ""
  Platform: ""
  SourceCode: FROM nvidia/cuda:9.0-base-ubuntu16.04
