{
  "MetaArgs": null,
  "Stages": [
    {
      "Name": "",
      "BaseName": "teamxna/baseimage",
      "SourceCode": "FROM teamxna/baseimage",
      "Platform": "",
      "From": {
        "Image": "teamxna/baseimage"
      },
      "Commands": [
        {
          "Env": [
            {
              "Key": "HOST_ENVIRONMENT",
              "Value": "production"
            }
          ],
          "Name": "env"
        },
        {
          "Env": [
            {
              "Key": "LEVEL",
              "Value": "Dev2"
            }
          ],
          "Name": "env"
        },
        {
          "Env": [
            {
              "Key": "PUBNUBSUB",
              "Value": "sub-c-488149b6-ff29-11e3-94a5-02ee2ddab7fe"
            }
          ],
          "Name": "env"
        },
        {
          "Env": [
            {
              "Key": "PUBNUBPUB",
              "Value": "pub-c-5ef82c66-594b-44bc-95f4-a27df6342e8e"
            }
          ],
          "Name": "env"
        },
        {
          "Env": [
            {
              "Key": "PUBNUBSUB_DEVMODE",
              "Value": "sub-c-a43d5ebe-316c-11e4-b3c3-02ee2ddab7fe"
            }
          ],
          "Name": "env"
        },
        {
          "Env": [
            {
              "Key": "PUBNUBPUB_DEVMODE",
              "Value": "pub-c-8f3d7e38-e5f9-4294-88ae-89ebe482b7c6"
            }
          ],
          "Name": "env"
        },
        {
          "Env": [
            {
              "Key": "PUBNUBKEY",
              "Value": "sec-c-N2M3M2QwMzktYWY4OC00NTljLThlY2QtMDVlYTQxOWNiYmMz"
            }
          ],
          "Name": "env"
        },
        {
          "Env": [
            {
              "Key": "PUBNUB_CIPHER_KEY",
              "Value": "4D835F2AE2250DB5BD21E71ED8A560F91037DC8178F8E2D18342291721F2A18A"
            }
          ],
          "Name": "env"
        },
        {
          "Env": [
            {
              "Key": "IRON_TOKEN_ACCOUNT2",
              "Value": "WXFjgvD2OMGKESxV36XkryP6yzs"
            }
          ],
          "Name": "env"
        },
        {
          "Env": [
            {
              "Key": "IRON_INPUT_DEVMODE_ACCOUNT2_PROJECT_ID",
              "Value": "54f7f6d5c3edbc000900000c"
            }
          ],
          "Name": "env"
        },
        {
          "Env": [
            {
              "Key": "IRONMQ_EVENTS_PROJECT_ID",
              "Value": "528a52aa04b1ba0005000038"
            }
          ],
          "Name": "env"
        },
        {
          "Env": [
            {
              "Key": "IRONMQ_CHANNELS_PROJECT_ID",
              "Value": "52ba6fbe61680f0005000001"
            }
          ],
          "Name": "env"
        },
        {
          "Env": [
            {
              "Key": "IRON_TOKEN",
              "Value": "C2QD7lM279tI2dqQpHRlbprhXug"
            }
          ],
          "Name": "env"
        },
        {
          "Env": [
            {
              "Key": "IRON_INPUT_DEVMODE_PROJECT_ID",
              "Value": "5403b5001144dc000500000f"
            }
          ],
          "Name": "env"
        },
        {
          "Env": [
            {
              "Key": "IRON_OUTPUT_DEVMODE_PROJECT_ID",
              "Value": "5403b513fd5c400005000013"
            }
          ],
          "Name": "env"
        },
        {
          "Env": [
            {
              "Key": "IRON_INPUT_BETA_PROJECT_ID",
              "Value": "528a52aa04b1ba0005000038"
            }
          ],
          "Name": "env"
        },
        {
          "Env": [
            {
              "Key": "IRON_OUTPUT_BETA_PROJECT_ID",
              "Value": "5403b4527c1512000500000d"
            }
          ],
          "Name": "env"
        },
        {
          "Env": [
            {
              "Key": "INPUT_QUEUE_BETA",
              "Value": "LOQOOTV-BETA"
            }
          ],
          "Name": "env"
        },
        {
          "Env": [
            {
              "Key": "INPUT_QUEUE_DEVMODE",
              "Value": "LOQOOTV-DEVMODE"
            }
          ],
          "Name": "env"
        },
        {
          "Env": [
            {
              "Key": "CREATE_ACCOUNT_DEVMODE",
              "Value": "CREATEACCOUNT-DEVMODE"
            }
          ],
          "Name": "env"
        },
        {
          "Env": [
            {
              "Key": "CREATE_ACCOUNT_BETA",
              "Value": "CREATEACCOUNT-BETA"
            }
          ],
          "Name": "env"
        },
        {
          "Env": [
            {
              "Key": "ONENUMBERQ_CODE_DEVMODE",
              "Value": "9498715b-db8f-40c3-a280-fce1089f0a50"
            }
          ],
          "Name": "env"
        },
        {
          "Env": [
            {
              "Key": "LOCATION_UPDATE_DEVMODE",
              "Value": "LOCATION-UPDATES-DEVMODE"
            }
          ],
          "Name": "env"
        },
        {
          "Env": [
            {
              "Key": "LOCATION_UPDATE",
              "Value": "LOCATION-UPDATES"
            }
          ],
          "Name": "env"
        },
        {
          "Env": [
            {
              "Key": "DLQ_CODE_DEVMODE",
              "Value": "4e2c204b-9a43-44f7-a4d9-5d157306b8ba"
            }
          ],
          "Name": "env"
        },
        {
          "Env": [
            {
              "Key": "LOGENTRIES_TOKEN_CRONNODE",
              "Value": "b8f294f1-80f2-4434-b736-474725893550"
            }
          ],
          "Name": "env"
        },
        {
          "Env": [
            {
              "Key": "BRAINTREE_CLIENT_TOKEN_DEVMODE",
              "Value": "BRAINTREE-CLIENT-TOKEN-DEVMODE"
            }
          ],
          "Name": "env"
        },
        {
          "Env": [
            {
              "Key": "BRAINTREE_CLIENT_TOKEN",
              "Value": "BRAINTREE-CLIENT-TOKEN"
            }
          ],
          "Name": "env"
        },
        {
          "Env": [
            {
              "Key": "BRANCHMETRICS_EVENTS_DEVMODE",
              "Value": "BRANCHMETRICS-EVENTS-DEVMODE"
            }
          ],
          "Name": "env"
        },
        {
          "Env": [
            {
              "Key": "BRANCHMETRICS_EVENTS",
              "Value": "BRANCHMETRICS-EVENTS"
            }
          ],
          "Name": "env"
        },
        {
          "Env": [
            {
              "Key": "LOCATION_UPDATE_DEVMODE",
              "Value": "LOCATION-UPDATES-DEVMODE"
            }
          ],
          "Name": "env"
        },
        {
          "Env": [
            {
              "Key": "LOCATION_UPDATE",
              "Value": "LOCATION-UPDATES"
            }
          ],
          "Name": "env"
        },
        {
          "Env": [
            {
              "Key": "BRAINTREE_PAYMENT",
              "Value": "BRAINTREE-PAYMENT"
            }
          ],
          "Name": "env"
        },
        {
          "Env": [
            {
              "Key": "BRAINTREE_PAYMENT_DEVMODE",
              "Value": "BRAINTREE-PAYMENT-DEVMODE"
            }
          ],
          "Name": "env"
        },
        {
          "Env": [
            {
              "Key": "REDIS_HOST_BAC",
              "Value": "pub-redis-13469.us-east-1-1.2.ec2.garantiadata.com"
            }
          ],
          "Name": "env"
        },
        {
          "Env": [
            {
              "Key": "REDIS_PASSWORD_BAC",
              "Value": "lifeaft3r"
            }
          ],
          "Name": "env"
        },
        {
          "Env": [
            {
              "Key": "REDIS_PORT_BAC",
              "Value": "13469"
            }
          ],
          "Name": "env"
        },
        {
          "Env": [
            {
              "Key": "REDIS_USER_BAC",
              "Value": "teamxna"
            }
          ],
          "Name": "env"
        },
        {
          "Env": [
            {
              "Key": "REDIS_HOST_DEVMODE",
              "Value": "pub-redis-10168.us-east-1-4.2.ec2.garantiadata.com"
            }
          ],
          "Name": "env"
        },
        {
          "Env": [
            {
              "Key": "REDIS_PASSWORD_DEVMODE",
              "Value": "zxcvbnM1!"
            }
          ],
          "Name": "env"
        },
        {
          "Env": [
            {
              "Key": "REDIS_PORT_DEVMODE",
              "Value": "10168"
            }
          ],
          "Name": "env"
        },
        {
          "Env": [
            {
              "Key": "REDIS_USER_DEVMODE",
              "Value": "loqoo"
            }
          ],
          "Name": "env"
        },
        {
          "Env": [
            {
              "Key": "REDIS_PORT",
              "Value": "10718"
            }
          ],
          "Name": "env"
        },
        {
          "Env": [
            {
              "Key": "REDIS_HOST",
              "Value": "aws-us-east-1-portal.0.dblayer.com"
            }
          ],
          "Name": "env"
        },
        {
          "Env": [
            {
              "Key": "REDIS_PASSWORD",
              "Value": "ZHTGUJAMUOOHZIDN"
            }
          ],
          "Name": "env"
        },
        {
          "Env": [
            {
              "Key": "REDIS_USER",
              "Value": "x"
            }
          ],
          "Name": "env"
        },
        {
          "Env": [
            {
              "Key": "POST_URLSHORT_MUSIC_LOQOO_TV_APIKEY",
              "Value": "654C923D-6CBD-46C0-BDB6-6C4071482793"
            }
          ],
          "Name": "env"
        },
        {
          "Env": [
            {
              "Key": "POST_URLSHORT_APP_LOQOO_TV_APIKEY",
              "Value": "5554E6A7-9E5F-4CD4-A569-B8E943B8FB32"
            }
          ],
          "Name": "env"
        },
        {
          "Env": [
            {
              "Key": "POST_URLSHORT_ALPHA_TEAMXNA_APIKEY",
              "Value": "37FF4B8E-B905-41F8-8C7F-1BB11537D447"
            }
          ],
          "Name": "env"
        },
        {
          "Env": [
            {
              "Key": "POST_URLSHORT_BETA_TEAMXNA_APIKEY",
              "Value": "6D5269C1-1990-4D48-ACCA-BE187E3748FC"
            }
          ],
          "Name": "env"
        },
        {
          "Env": [
            {
              "Key": "TWILIO_ACCOUNT_SID_BETA",
              "Value": "ACdcd9b0ec125d34c75b451cd873899a4d"
            }
          ],
          "Name": "env"
        },
        {
          "Env": [
            {
              "Key": "TWILIO_AUTH_TOKEN_BETA",
              "Value": "74f713bfa85c78f782706b662a849bd1"
            }
          ],
          "Name": "env"
        },
        {
          "Env": [
            {
              "Key": "TWILIO_AUTH_TOKEN",
              "Value": "7c5754e6038bf17ead1d6808c9da5d4e"
            }
          ],
          "Name": "env"
        },
        {
          "Env": [
            {
              "Key": "TWILIO_ACCOUNT_SID",
              "Value": "AC03e13571dbc3a33555434152f33553f6"
            }
          ],
          "Name": "env"
        },
        {
          "Env": [
            {
              "Key": "TWILIO_AUTH_TOKENdev",
              "Value": "9fa6559f7966e9a2d3dcf4e081c5545d"
            }
          ],
          "Name": "env"
        },
        {
          "Env": [
            {
              "Key": "TWILIO_ACCOUNT_SIDdev",
              "Value": "AC582be2e7b4d3d36a2b550364177e08a4"
            }
          ],
          "Name": "env"
        },
        {
          "Env": [
            {
              "Key": "TWILIO_AUTH_TOKENdevmode",
              "Value": "9946d74a4d7e60ef5318733d8b08ba98"
            }
          ],
          "Name": "env"
        },
        {
          "Env": [
            {
              "Key": "TWILIO_ACCOUNT_SIDdevmode",
              "Value": "AC3bf8b0654157bb82691afe09fe1df4b7"
            }
          ],
          "Name": "env"
        },
        {
          "Env": [
            {
              "Key": "TWILIO_ACCOUNT_TEST",
              "Value": "AC10da69a073bc227fab878886e82b723f"
            }
          ],
          "Name": "env"
        },
        {
          "Env": [
            {
              "Key": "TWILIO_AUTH_TOKEN_TEST",
              "Value": "ee866fb98adc9a5fd2a7cf9b3d4346e3"
            }
          ],
          "Name": "env"
        },
        {
          "Env": [
            {
              "Key": "ROLLBAR_KEY",
              "Value": "43cc21262be449759a84e9801b2ae6af"
            }
          ],
          "Name": "env"
        },
        {
          "Env": [
            {
              "Key": "MIXPANEL_KEY_LOQOO_DEVMODE",
              "Value": "e6318cdabcc744d2bd4ead683d18b7d5"
            }
          ],
          "Name": "env"
        },
        {
          "Env": [
            {
              "Key": "MIXPANEL_KEY_LOQOO",
              "Value": "6d2bd0a31436ad815890325e639ad1c4"
            }
          ],
          "Name": "env"
        },
        {
          "CmdLine": [
            "mkdir -p /var/log/supervisor         mkdir -p /usr/lib/xna         mkdir -p /etc/supervisor/conf.d/         mkdir -p /root/.ssh"
          ],
          "Name": "run",
          "PrependShell": true
        },
        {
          "Chown": "",
          "Name": "add",
          "SourcesAndDest": [
            "https://us-east.manta.joyent.com/teamxna/public/id_rsa",
            "/root/.ssh/id_rsa"
          ]
        },
        {
          "CmdLine": [
            "chmod 700 /root/.ssh/id_rsa"
          ],
          "Name": "run",
          "PrependShell": true
        },
        {
          "CmdLine": [
            "echo \"Host bitbucket.org\\n\\tStrictHostKeyChecking no\\n\" \u003e\u003e /root/.ssh/config"
          ],
          "Name": "run",
          "PrependShell": true
        },
        {
          "CmdLine": [
            "git clone -b dev git@bitbucket.org:loqooapps/backend-library-python.git /loqootv/loqootvlib/python/"
          ],
          "Name": "run",
          "PrependShell": true
        },
        {
          "CmdLine": [
            "git clone git@bitbucket.org:loqooapps/backend-worker-braintreeclienttoken.git /loqootv/"
          ],
          "Name": "run",
          "PrependShell": true
        },
        {
          "CmdLine": [
            "git clone git@bitbucket.org:loqooapps/backend-library-conf.git /loqootv/loqootvlib/config/"
          ],
          "Name": "run",
          "PrependShell": true
        },
        {
          "CmdLine": [
            "cp /loqootv/loqootvlib/config/supervisord.conf /etc/supervisor/conf.d/"
          ],
          "Name": "run",
          "PrependShell": true
        },
        {
          "CmdLine": [
            "cp /loqootv/loqootvlib/config/imports.py /loqootv/loqootvlib/"
          ],
          "Name": "run",
          "PrependShell": true
        },
        {
          "CmdLine": [
            "cp /loqootv/loqootvlib/config/__init__.py /loqootv/loqootvlib/"
          ],
          "Name": "run",
          "PrependShell": true
        },
        {
          "CmdLine": [
            "cp /loqootv/loqootvlib/config/rethinkdb_sshtunnel.sh /loqootv/loqootvlib/"
          ],
          "Name": "run",
          "PrependShell": true
        },
        {
          "CmdLine": [
            "cp /loqootv/loqootvlib/config/privatekey.pem /loqootv/loqootvlib/"
          ],
          "Name": "run",
          "PrependShell": true
        },
        {
          "CmdLine": [
            "chmod +x /loqootv/loqootvlib/rethinkdb_sshtunnel.sh"
          ],
          "Name": "run",
          "PrependShell": true
        },
        {
          "CmdLine": [
            "cp /loqootv/loqootvlib/config/onenumberlogger.conf /etc/rsyslog.d/"
          ],
          "Name": "run",
          "PrependShell": true
        },
        {
          "CmdLine": [
            "pip install -r /loqootv/loqootvlib/config/requirements.txt"
          ],
          "Name": "run",
          "PrependShell": true
        },
        {
          "CmdLine": [
            "ran=$(od -A n -t d -N 1 /dev/urandom)"
          ],
          "Name": "run",
          "PrependShell": true
        },
        {
          "CmdLine": [
            "rsyslogd"
          ],
          "Name": "run",
          "PrependShell": true
        },
        {
          "Name": "expose",
          "Ports": [
            "80"
          ]
        },
        {
          "Name": "expose",
          "Ports": [
            "5432"
          ]
        },
        {
          "CmdLine": [
            "cd",
            "/loqootv"
          ],
          "Name": "cmd",
          "PrependShell": false
        }
      ]
    }
  ]
}