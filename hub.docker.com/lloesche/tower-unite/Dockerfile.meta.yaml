MetaArgs: null
Stages:
- BaseName: debian:stable
  Commands:
  - Chown: ""
    From: ""
    Name: copy
    SourcesAndDest:
    - supervisord.conf
    - /etc/supervisor/conf.d/tower-unite.conf
  - Chown: ""
    From: ""
    Name: copy
    SourcesAndDest:
    - tower-unite-server
    - /usr/local/bin/
  - Chown: ""
    From: ""
    Name: copy
    SourcesAndDest:
    - tower-unite-updater
    - /usr/local/bin/
  - Chown: ""
    Name: add
    SourcesAndDest:
    - https://steamcdn-a.akamaihd.net/client/installer/steamcmd_linux.tar.gz
    - /tmp
  - CmdLine:
    - apt-get update     && apt-get -y dist-upgrade     && DEBIAN_FRONTEND=noninteractive
      apt-get -y install         lib32gcc1         ca-certificates         supervisor         procps     &&
      mkdir -p /var/log/supervisor /opt/tower-unite/Tower/Saved/Config/LinuxServer
      /opt/steamcmd     && apt-get clean     && adduser         --home /home/steam         --disabled-password         --shell
      /bin/bash         --gecos "Steam User"         --quiet         steam     &&
      cd /home/steam     && tar xzvf /tmp/steamcmd_linux.tar.gz -C /opt/steamcmd/     &&
      chown -R root:root /opt/steamcmd     && chown steam:steam /opt/tower-unite/Tower/Saved/Config/LinuxServer     &&
      chmod 755 /opt/steamcmd/steamcmd.sh /opt/steamcmd/linux32/steamcmd /opt/steamcmd/linux32/steamerrorreporter     &&
      chmod +x /usr/local/bin/tower-unite-*     && cd "/opt/steamcmd"     && ./steamcmd.sh
      +login anonymous +quit     && rm -rf /var/lib/apt/lists/* /tmp/* /var/tmp/*
    Name: run
    PrependShell: true
  - Name: expose
    Ports:
    - 27015-27050/tcp
    - 27015-27050/udp
    - 3478/udp
    - 4379-4380/udp
    - 7777-7780/udp
  - Name: workdir
    Path: /home/steam
  - CmdLine:
    - /usr/bin/supervisord
    Name: cmd
    PrependShell: false
  From:
    Image: debian:stable
  Name: ""
  Platform: ""
  SourceCode: FROM debian:stable
