MetaArgs: null
Stages:
- BaseName: ubuntu:18.04
  Commands:
  - Labels:
    - Key: maintainer
      Value: '"Timothy Hnat <twhnat@memphis.edu>"'
    Name: label
  - Labels:
    - Key: org.md2k.cerebralcortex.version
      Value: '''2.3.0'''
    Name: label
  - Labels:
    - Key: description
      Value: '"Cerebral Cortex is the big data cloud companion of mCerebrum designed
        to support population-scale data analysis, visualization, model development,
        and intervention design for mobile sensor data."'
    Name: label
  - Env:
    - Key: APACHE_SPARK_VERSION
      Value: 2.3.2
    Name: env
  - Env:
    - Key: HADOOP_VERSION
      Value: "2.7"
    Name: env
  - Env:
    - Key: SPARK_HOME
      Value: /usr/local/spark
    Name: env
  - Env:
    - Key: PYTHONPATH
      Value: $SPARK_HOME/python:$SPARK_HOME/python/lib/py4j-0.10.4-src.zip
    Name: env
  - Env:
    - Key: JAVA_HOME
      Value: /usr/lib/jvm/java-8-openjdk-amd64
    Name: env
  - Env:
    - Key: PATH
      Value: $JAVA_HOME/bin:$SPARK_HOME/bin:$SPARK_HOME/sbin:$PATH
    Name: env
  - Env:
    - Key: PYSPARK_PYTHON
      Value: python3
    Name: env
  - CmdLine:
    - apt-get update   && apt-get install -yqq wget git python3-pip  openjdk-8-jre
      python3-setuptools libyaml-dev libev-dev liblapack-dev   && pip3 install --upgrade
      --force-reinstall pip==9.0.3   && pip3 install cython
    Name: run
    PrependShell: true
  - CmdLine:
    - cd /tmp &&         wget -q http://apache.cs.utah.edu/spark/spark-${APACHE_SPARK_VERSION}/spark-${APACHE_SPARK_VERSION}-bin-hadoop${HADOOP_VERSION}.tgz
      &&         tar xzf spark-${APACHE_SPARK_VERSION}-bin-hadoop${HADOOP_VERSION}.tgz
      -C /usr/local &&         rm spark-${APACHE_SPARK_VERSION}-bin-hadoop${HADOOP_VERSION}.tgz
    Name: run
    PrependShell: true
  - CmdLine:
    - cd /usr/local && ln -s spark-${APACHE_SPARK_VERSION}-bin-hadoop${HADOOP_VERSION}
      spark
    Name: run
    PrependShell: true
  - Chown: ""
    From: ""
    Name: copy
    SourcesAndDest:
    - .
    - /CerebralCortex
  - CmdLine:
    - cd CerebralCortex     && /usr/local/bin/pip3 install -r requirements.txt     &&
      python3 setup.py install     && cd .. && rm -rf CerebralCortex
    Name: run
    PrependShell: true
  - Name: volume
    Volumes:
    - /cc_data
  - Name: workdir
    Path: /cc_app
  From:
    Image: ubuntu:18.04
  Name: ""
  Platform: ""
  SourceCode: FROM ubuntu:18.04
